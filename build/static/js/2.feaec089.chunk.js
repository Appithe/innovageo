/*! For license information please see 2.feaec089.chunk.js.LICENSE.txt */
(this.webpackJsonpinnovageo=this.webpackJsonpinnovageo||[]).push([[2],[function(t,e,n){t.exports=n(85)},function(t,e,n){"use strict";t.exports=n(79)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(5);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";t.exports=n(87)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return I})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return A})),n.d(e,"g",(function(){return P})),n.d(e,"h",(function(){return R})),n.d(e,"i",(function(){return z})),n.d(e,"j",(function(){return y})),n.d(e,"k",(function(){return _})),n.d(e,"l",(function(){return w})),n.d(e,"m",(function(){return N})),n.d(e,"n",(function(){return x})),n.d(e,"o",(function(){return k})),n.d(e,"p",(function(){return m})),n.d(e,"q",(function(){return b})),n.d(e,"r",(function(){return O})),n.d(e,"s",(function(){return E})),n.d(e,"t",(function(){return j})),n.d(e,"u",(function(){return M}));var r=n(9),i=n(13),o=n(39),a=n(11),s=n(12),u=n(61),c=n(2),l=n(4),h=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},f={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{var s=t[n++],u=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},p=function(t){return function(t){var e=h(t);return f.encodeByteArray(e,!0)}(t).replace(/\./g,"")},d=function(t){try{return f.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};var g=function(){function t(){var e=this;Object(c.a)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return Object(l.a)(t,[{key:"wrapCallback",value:function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}}}]),t}();function v(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[p(JSON.stringify({alg:"none",type:"JWT"})),p(JSON.stringify(o)),""].join(".")}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function _(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function b(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function w(){return y().indexOf("Electron/")>=0}function x(){var t=y();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E(){return y().indexOf("MSAppHost/")>=0}function O(){return!function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"object"===typeof indexedDB}var I=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,r,i){var a;return Object(c.a)(this,n),(a=e.call(this,r)).code=t,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Object(o.a)(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Object(o.a)(a),S.prototype.create),a}return n}(Object(u.a)(Error)),S=function(){function t(e,n,r){Object(c.a)(this,t),this.service=e,this.serviceName=n,this.errors=r}return Object(l.a)(t,[{key:"create",value:function(t){var e=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(t),r=this.errors[t],i=r?C(r,e):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),a=new I(n,o,e);return a}}]),t}();function C(t,e){return t.replace(T,(function(t,n){var r=e[n];return null!=r?String(r):"<".concat(n,"?>")}))}var T=/\{\$([^}]+)}/g;function N(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function P(t,e){if(t===e)return!0;for(var n=Object.keys(t),r=Object.keys(e),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var s=t[a],u=e[a];if(L(s)&&L(u)){if(!P(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function L(t){return null!==t&&"object"===typeof t}function j(t){for(var e=[],n=function(){var t=Object(i.a)(o[r],2),n=t[0],a=t[1];Array.isArray(a)?a.forEach((function(t){e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,o=Object.entries(t);r<o.length;r++)n();return e.length?"&"+e.join("&"):""}function M(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),r=Object(i.a)(n,2),o=r[0],a=r[1];e[decodeURIComponent(o)]=decodeURIComponent(a)}})),e}function R(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function A(t,e){var n=new D(t,e);return n.subscribe.bind(n)}var D=function(){function t(e,n){var r=this;Object(c.a)(this,t),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){e(r)})).catch((function(t){r.error(t)}))}return Object(l.a)(t,[{key:"next",value:function(t){this.forEachObserver((function(e){e.next(t)}))}},{key:"error",value:function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)}},{key:"complete",value:function(){this.forEachObserver((function(t){t.complete()})),this.close()}},{key:"subscribe",value:function(t,e,n){var i,o=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(t,e){if("object"!==typeof t||null===t)return!1;var n,i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in t&&"function"===typeof t[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(i.next=F),void 0===i.error&&(i.error=F),void 0===i.complete&&(i.complete=F);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?i.error(o.finalError):i.complete()}catch(t){}})),this.observers.push(i),a}},{key:"unsubscribeOne",value:function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)}},{key:"sendOne",value:function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))}}]),t}();function F(){}function z(t){return t&&t._delegate?t._delegate:t}}).call(this,n(65))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(42);function i(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=Object(r.a)(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(43);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(17),i=n(56),o=n(72),a=n(39);function s(t,e){return!e||"object"!==Object(o.a)(e)&&"function"!==typeof e?Object(a.a)(t):e}function u(t){return function(){var e,n=Object(r.a)(t);if(Object(i.a)()){var o=Object(r.a)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(42);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)){if(r.length){var a=i.apply(null,r);a&&t.push(a)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var s in r)n.call(r,s)&&r[s]&&t.push(s);else t.push(r.toString())}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(6);var r=n(1),i=(n(7),r.createContext({prefixes:{}}));i.Consumer,i.Provider;function o(t,e){var n=Object(r.useContext)(i).prefixes;return t||n[e]||e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return y})),n.d(e,"g",(function(){return m}));var r=n(13),i=n(1),o=n(27);function a(t,e){if(!t)throw new Error(e)}var s=Object(i.createContext)(null);var u=Object(i.createContext)(null);var c=Object(i.createContext)({outlet:null,matches:[]});function l(t){return Object(i.useContext)(c).outlet}function h(t){a(!1)}function f(t){var e=t.basename,n=void 0===e?"/":e,r=t.children,c=void 0===r?null:r,l=t.location,h=t.navigationType,f=void 0===h?o.a.Pop:h,p=t.navigator,d=t.static,v=void 0!==d&&d;g()&&a(!1);var y=C(n),m=Object(i.useMemo)((function(){return{basename:y,navigator:p,static:v}}),[y,p,v]);"string"===typeof l&&(l=Object(o.f)(l));var _=l,b=_.pathname,w=void 0===b?"/":b,x=_.search,E=void 0===x?"":x,O=_.hash,k=void 0===O?"":O,S=_.state,T=void 0===S?null:S,N=_.key,P=void 0===N?"default":N,L=Object(i.useMemo)((function(){var t=I(w,y);return null==t?null:{pathname:t,search:E,hash:k,state:T,key:P}}),[y,w,E,k,T,P]);return null==L?null:Object(i.createElement)(s.Provider,{value:m},Object(i.createElement)(u.Provider,{children:c,value:{location:L,navigationType:f}}))}function p(t){var e=t.children,n=t.location;return function(t,e){g()||a(!1);var n=Object(i.useContext)(c).matches,r=n[n.length-1],s=r?r.params:{},u=(r&&r.pathname,r?r.pathnameBase:"/");r&&r.route;0;var l,h=v();if(e){var f,p="string"===typeof e?Object(o.f)(e):e;"/"===u||(null==(f=p.pathname)?void 0:f.startsWith(u))||a(!1),l=p}else l=h;var d=l.pathname||"/",y="/"===u?d:d.slice(u.length)||"/",m=function(t,e,n){void 0===n&&(n="/");var r=I(("string"===typeof e?Object(o.f)(e):e).pathname||"/",n);if(null==r)return null;var i=function t(e,n,r,i){void 0===n&&(n=[]);void 0===r&&(r=[]);void 0===i&&(i="");return e.forEach((function(e,o){var s={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:o};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(i)||a(!1),s.relativePath=s.relativePath.slice(i.length));var u=S([i,s.relativePath]),c=r.concat(s);e.children&&e.children.length>0&&(!0===e.index&&a(!1),t(e.children,n,c,u)),(null!=e.path||e.index)&&n.push({path:u,score:w(u,e.index),routesMeta:c})})),n}(t);!function(t){t.sort((function(t,e){return t.score!==e.score?e.score-t.score:function(t,e){return t.length===e.length&&t.slice(0,-1).every((function(t,n){return t===e[n]}))?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map((function(t){return t.childrenIndex})),e.routesMeta.map((function(t){return t.childrenIndex})))}))}(i);for(var s=null,u=0;null==s&&u<i.length;++u)s=x(i[u],t,r);return s}(t,{pathname:y});0;return E(m&&m.map((function(t){return Object.assign({},t,{params:Object.assign({},s,t.params),pathname:S([u,t.pathname]),pathnameBase:"/"===t.pathnameBase?u:S([u,t.pathnameBase])})})),n)}(function t(e){var n=[];return i.Children.forEach(e,(function(e){if(Object(i.isValidElement)(e))if(e.type!==i.Fragment){e.type!==h&&a(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=t(e.props.children)),n.push(r)}else n.push.apply(n,t(e.props.children))})),n}(e),n)}function d(t){g()||a(!1);var e=Object(i.useContext)(s),n=e.basename,r=e.navigator,u=m(t),c=u.hash,l=u.pathname,h=u.search,f=l;if("/"!==n){var p=function(t){return""===t||""===t.pathname?"/":"string"===typeof t?Object(o.f)(t).pathname:t.pathname}(t),d=null!=p&&p.endsWith("/");f="/"===l?n+(d?"/":""):S([n,l])}return r.createHref({pathname:f,search:h,hash:c})}function g(){return null!=Object(i.useContext)(u)}function v(){return g()||a(!1),Object(i.useContext)(u).location}function y(){g()||a(!1);var t=Object(i.useContext)(s),e=t.basename,n=t.navigator,r=Object(i.useContext)(c).matches,o=v().pathname,u=JSON.stringify(r.map((function(t){return t.pathnameBase}))),l=Object(i.useRef)(!1);return Object(i.useEffect)((function(){l.current=!0})),Object(i.useCallback)((function(t,r){if(void 0===r&&(r={}),l.current)if("number"!==typeof t){var i=k(t,JSON.parse(u),o);"/"!==e&&(i.pathname=S([e,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(t)}),[e,n,u,o])}function m(t){var e=Object(i.useContext)(c).matches,n=v().pathname,r=JSON.stringify(e.map((function(t){return t.pathnameBase})));return Object(i.useMemo)((function(){return k(t,JSON.parse(r),n)}),[t,r,n])}var _=/^:\w+$/,b=function(t){return"*"===t};function w(t,e){var n=t.split("/"),r=n.length;return n.some(b)&&(r+=-2),e&&(r+=2),n.filter((function(t){return!b(t)})).reduce((function(t,e){return t+(_.test(e)?3:""===e?1:10)}),r)}function x(t,e,n){for(var r=e,i=t.routesMeta,o={},a="/",s=[],u=0;u<i.length;++u){var c=i[u],l=u===i.length-1,h="/"===a?n:n.slice(a.length)||"/",f=O({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},h);if(!f)return null;Object.assign(o,f.params);var p=r[c.childrenIndex];s.push({params:o,pathname:S([a,f.pathname]),pathnameBase:S([a,f.pathnameBase]),route:p}),"/"!==f.pathnameBase&&(a=S([a,f.pathnameBase])),r=p.children}return s}function E(t,e){return void 0===e&&(e=[]),null==t?null:t.reduceRight((function(n,r,o){return Object(i.createElement)(c.Provider,{children:void 0!==r.route.element?r.route.element:Object(i.createElement)(l,null),value:{outlet:n,matches:e.concat(t.slice(0,o+1))}})}),null)}function O(t,e){"string"===typeof t&&(t={path:t,caseSensitive:!1,end:!0});var n=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);var r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(t,e){return r.push(e),"([^\\/]+)"}));t.endsWith("*")?(r.push("*"),i+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:\\b|$)";return[new RegExp(i,e?void 0:"i"),r]}(t.path,t.caseSensitive,t.end),i=Object(r.a)(n,2),o=i[0],a=i[1],s=e.match(o);if(!s)return null;var u=s[0],c=u.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((function(t,e,n){if("*"===e){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return t[e]=function(t,e){try{return decodeURIComponent(t)}catch(n){return t}}(l[n]||""),t}),{}),pathname:u,pathnameBase:c,pattern:t}}function k(t,e,n){var r,i="string"===typeof t?Object(o.f)(t):t,a=""===t||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var s=e.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),s-=1;i.pathname=u.join("/")}r=s>=0?e[s]:"/"}var c=function(t,e){void 0===e&&(e="/");var n="string"===typeof t?Object(o.f)(t):t,r=n.pathname,i=n.search,a=void 0===i?"":i,s=n.hash,u=void 0===s?"":s;return{pathname:r?r.startsWith("/")?r:function(t,e){var n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach((function(t){".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)})),n.length>1?n.join("/"):"/"}(r,e):e,search:T(a),hash:N(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!c.pathname.endsWith("/")&&(c.pathname+="/"),c}function I(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;var n=t.charAt(e.length);return n&&"/"!==n?null:t.slice(e.length)||"/"}var S=function(t){return t.join("/").replace(/\/\/+/g,"/")},C=function(t){return t.replace(/\/+$/,"").replace(/^\/*/,"/")},T=function(t){return t&&"?"!==t?t.startsWith("?")?t:"?"+t:""},N=function(t){return t&&"#"!==t?t.startsWith("#")?t:"#"+t:""}},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return w})),n.d(e,"e",(function(){return C})),n.d(e,"f",(function(){return S})),n.d(e,"g",(function(){return T}));n(0),n(3);var r,i,o=n(9),a=n(5),s=n(2),u=n(4),c=n(34),l=n(24),h=n(8),f=function(){function t(e){Object(s.a)(this,t),this.container=e}return Object(u.a)(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((function(t){return t})).join(" ")}}]),t}();var p="@firebase/app",d=new l.b("@firebase/app"),g=(r={},Object(a.a)(r,p,"fire-core"),Object(a.a)(r,"@firebase/app-compat","fire-core-compat"),Object(a.a)(r,"@firebase/analytics","fire-analytics"),Object(a.a)(r,"@firebase/analytics-compat","fire-analytics-compat"),Object(a.a)(r,"@firebase/app-check","fire-app-check"),Object(a.a)(r,"@firebase/app-check-compat","fire-app-check-compat"),Object(a.a)(r,"@firebase/auth","fire-auth"),Object(a.a)(r,"@firebase/auth-compat","fire-auth-compat"),Object(a.a)(r,"@firebase/database","fire-rtdb"),Object(a.a)(r,"@firebase/database-compat","fire-rtdb-compat"),Object(a.a)(r,"@firebase/functions","fire-fn"),Object(a.a)(r,"@firebase/functions-compat","fire-fn-compat"),Object(a.a)(r,"@firebase/installations","fire-iid"),Object(a.a)(r,"@firebase/installations-compat","fire-iid-compat"),Object(a.a)(r,"@firebase/messaging","fire-fcm"),Object(a.a)(r,"@firebase/messaging-compat","fire-fcm-compat"),Object(a.a)(r,"@firebase/performance","fire-perf"),Object(a.a)(r,"@firebase/performance-compat","fire-perf-compat"),Object(a.a)(r,"@firebase/remote-config","fire-rc"),Object(a.a)(r,"@firebase/remote-config-compat","fire-rc-compat"),Object(a.a)(r,"@firebase/storage","fire-gcs"),Object(a.a)(r,"@firebase/storage-compat","fire-gcs-compat"),Object(a.a)(r,"@firebase/firestore","fire-fst"),Object(a.a)(r,"@firebase/firestore-compat","fire-fst-compat"),Object(a.a)(r,"fire-js","fire-js"),Object(a.a)(r,"firebase","fire-js-all"),r),v=new Map,y=new Map;function m(t,e){try{t.container.addComponent(e)}catch(n){d.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function _(t){var e=t.name;if(y.has(e))return d.debug("There were multiple attempts to register component ".concat(e,".")),!1;y.set(e,t);var n,r=Object(o.a)(v.values());try{for(r.s();!(n=r.n()).done;){m(n.value,t)}}catch(i){r.e(i)}finally{r.f()}return!0}function b(t,e){return t.container.getProvider(e)}function w(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"[DEFAULT]";b(t,e).clearInstance(n)}var x,E=(i={},Object(a.a)(i,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Object(a.a)(i,"bad-app-name","Illegal App name: '{$appName}"),Object(a.a)(i,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Object(a.a)(i,"app-deleted","Firebase App named '{$appName}' already deleted"),Object(a.a)(i,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Object(a.a)(i,"invalid-log-argument","First argument to `onLog` must be null or a function."),i),O=new h.b("app","Firebase",E),k=function(){function t(e,n,r){var i=this;Object(s.a)(this,t),this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new c.a("app",(function(){return i}),"PUBLIC"))}return Object(u.a)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(t){this._isDeleted=t}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw O.create("app-deleted",{appName:this._name})}}]),t}(),I="9.6.0";function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof e){var n=e;e={name:n}}var r=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!==typeof i||!i)throw O.create("bad-app-name",{appName:String(i)});var a=v.get(i);if(a){if(Object(h.g)(t,a.options)&&Object(h.g)(r,a.config))return a;throw O.create("duplicate-app",{appName:i})}var s,u=new c.b(i),l=Object(o.a)(y.values());try{for(l.s();!(s=l.n()).done;){var f=s.value;u.addComponent(f)}}catch(d){l.e(d)}finally{l.f()}var p=new k(t,r,u);return v.set(i,p),p}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]",e=v.get(t);if(!e)throw O.create("no-app",{appName:t});return e}function T(t,e,n){var r,i=null!==(r=g[t])&&void 0!==r?r:t;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void d.warn(s.join(" "))}_(new c.a("".concat(i,"-version"),(function(){return{library:i,version:e}}),"VERSION"))}x="",_(new c.a("platform-logger",(function(t){return new f(t)}),"PRIVATE")),T(p,"0.7.10",x),T(p,"0.7.10","esm2017"),T("fire-js","")},function(t,e,n){t.exports=n(88)()},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(6),i=n(10),o=n(14),a=n.n(o),s=/-(.)/g;var u=n(1),c=n(15),l=n(7),h=["className","bsPrefix","as"],f=function(t){return t[0].toUpperCase()+(e=t,e.replace(s,(function(t,e){return e.toUpperCase()}))).slice(1);var e};function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.displayName,o=void 0===n?f(t):n,s=e.Component,p=e.defaultProps,d=u.forwardRef((function(e,n){var o=e.className,u=e.bsPrefix,f=e.as,p=void 0===f?s||"div":f,d=Object(i.a)(e,h),g=Object(c.a)(u,t);return Object(l.jsx)(p,Object(r.a)({ref:n,className:a()(o,g)},d))}));return d.defaultProps=p,d.displayName=o,d}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(50);var i=n(42);function o(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(i.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(17);function i(t,e,n){return(i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}},function(t,e,n){"use strict";var r=n(1),i=r.createContext({});e.a=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return v}));var r,i,o=n(9),a=n(2),s=n(4),u=n(5),c=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));var l={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},h=i.INFO,f=(r={},Object(u.a)(r,i.DEBUG,"log"),Object(u.a)(r,i.VERBOSE,"log"),Object(u.a)(r,i.INFO,"info"),Object(u.a)(r,i.WARN,"warn"),Object(u.a)(r,i.ERROR,"error"),r),p=function(t,e){if(!(e<t.logLevel)){var n=(new Date).toISOString(),r=f[e];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"));for(var i,o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(t.name,":")].concat(a))}},d=function(){function t(e){Object(a.a)(this,t),this.name=e,this._logLevel=h,this._logHandler=p,this._userLogHandler=null,c.push(this)}return Object(s.a)(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}},{key:"setLogLevel",value:function(t){this._logLevel="string"===typeof t?l[t]:t}},{key:"logHandler",get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.DEBUG].concat(e)),this._logHandler.apply(this,[this,i.DEBUG].concat(e))}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.VERBOSE].concat(e)),this._logHandler.apply(this,[this,i.VERBOSE].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.INFO].concat(e)),this._logHandler.apply(this,[this,i.INFO].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.WARN].concat(e)),this._logHandler.apply(this,[this,i.WARN].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.ERROR].concat(e)),this._logHandler.apply(this,[this,i.ERROR].concat(e))}}]),t}();function g(t){c.forEach((function(e){e.setLogLevel(t)}))}function v(t,e){var n,r=Object(o.a)(c);try{var a=function(){var r=n.value,o=null;e&&e.level&&(o=l[e.level]),r.userLogHandler=null===t?null:function(e,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];var u=a.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==o&&void 0!==o?o:e.logLevel)&&t({level:i[n].toLowerCase(),message:u,args:a,type:e.name})}};for(r.s();!(n=r.n()).done;)a()}catch(s){r.e(s)}finally{r.f()}}},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return gr})),n.d(e,"b",(function(){return yr})),n.d(e,"c",(function(){return vr})),n.d(e,"d",(function(){return _r})),n.d(e,"e",(function(){return mr})),n.d(e,"f",(function(){return br})),n.d(e,"g",(function(){return wr})),n.d(e,"h",(function(){return pr})),n.d(e,"i",(function(){return dr}));var r,i=n(9),o=n(22),a=n(17),s=n(11),u=n(12),c=n(2),l=n(4),h="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},f={},p=p||{},d=h||self;function g(){}function v(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var m="closure_uid_"+(1e9*Math.random()>>>0),_=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function x(t,e,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function O(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function k(){this.s=this.s,this.o=this.o}var I={};k.prototype.s=!1,k.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++_)}(this);delete I[t]}},k.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var S=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},C=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function N(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function P(t){return/^[\s\xa0]*$/.test(t)}var L,j=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function M(t,e){return-1!=t.indexOf(e)}function R(t,e){return t<e?-1:t>e?1:0}t:{var A=d.navigator;if(A){var D=A.userAgent;if(D){L=D;break t}}L=""}function F(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function z(t){var e={};for(var n in t)e[n]=t[n];return e}var B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<B.length;o++)n=B[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function V(t){return V[" "](t),t}V[" "]=g;var q,G=M(L,"Opera"),H=M(L,"Trident")||M(L,"MSIE"),W=M(L,"Edge"),X=W||H,Y=M(L,"Gecko")&&!(M(L.toLowerCase(),"webkit")&&!M(L,"Edge"))&&!(M(L,"Trident")||M(L,"MSIE"))&&!M(L,"Edge"),Z=M(L.toLowerCase(),"webkit")&&!M(L,"Edge");function K(){var t=d.document;return t?t.documentMode:void 0}t:{var Q="",J=function(){var t=L;return Y?/rv:([^\);]+)(\)|;)/.exec(t):W?/Edge\/([\d\.]+)/.exec(t):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Z?/WebKit\/(\S+)/.exec(t):G?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(J&&(Q=J?J[1]:""),H){var $=K();if(null!=$&&$>parseFloat(Q)){q=String($);break t}}q=Q}var tt,et={};function nt(){return function(t){var e=et;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=j(String(q)).split("."),n=j("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=R(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||R(0==o[2].length,0==a[2].length)||R(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(d.document&&H){var rt=K();tt=rt||(parseInt(q,10)||void 0)}else tt=void 0;var it=tt,ot=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{d.addEventListener("test",g,e),d.removeEventListener("test",g,e)}catch(n){}return t}();function at(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function st(t,e){if(at.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Y){t:{try{V(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:ut[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&st.Z.h.call(this)}}at.prototype.h=function(){this.defaultPrevented=!0},O(st,at);var ut={2:"touch",3:"pen",4:"mouse"};st.prototype.h=function(){st.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),lt=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++lt,this.ca=this.fa=!1}function ft(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function pt(t){this.src=t,this.g={},this.h=0}function dt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=S(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ft(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function gt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}pt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=gt(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new ht(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function mt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=kt(r),e&&e[ct]?e.O(n,r,y(i)?!!i.capture:!!i,o):_t(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=kt(n),t&&t[ct]?t.N(e,n,y(r)?!!r.capture:!!r,i):_t(t,e,n,!1,r,i)}function _t(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=Et(t);if(s||(t[vt]=s=new pt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=xt;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ot||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ct])dt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(dt(n,t),0==n.h&&(n.src=null,e[vt]=null)):ft(t)}}}function wt(t){return t in yt?yt[t]:yt[t]="on"+t}function xt(t,e){if(t.ca)t=!0;else{e=new st(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&bt(t),t=n.call(r,e)}return t}function Et(t){return(t=t[vt])instanceof pt?t:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function kt(t){return"function"===typeof t?t:(t[Ot]||(t[Ot]=function(e){return t.handleEvent(e)}),t[Ot])}function It(){k.call(this),this.i=new pt(this),this.P=this,this.I=null}function St(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new at(e,t);else if(e instanceof at)e.target=e.target||t;else{var i=e;U(e=new at(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Ct(a,r,!0,e)&&i}if(i=Ct(a=e.g=t,r,!0,e)&&i,i=Ct(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ct(a=e.g=n[o],r,!1,e)&&i}function Ct(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&dt(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}O(It,k),It.prototype[ct]=!0,It.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=y(i)?!!i.capture:!!i,r=kt(r),e&&e[ct]?(e=e.i,(n=String(n).toString())in e.g&&(-1<(r=gt(a=e.g[n],r,i,o))&&(ft(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.g[n],e.h--)))):e&&(e=Et(e))&&(n=e.g[n.toString()],e=-1,n&&(e=gt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},It.prototype.M=function(){if(It.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ft(n[r]);delete e.g[t],e.h--}}this.I=null},It.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},It.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Tt=d.JSON.stringify;function Nt(){var t=Ft,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Pt,Lt=function(){function t(){Object(c.a)(this,t),this.h=this.g=null}return Object(l.a)(t,[{key:"add",value:function(t,e){var n=jt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),jt=new(function(){function t(e,n){Object(c.a)(this,t),this.i=e,this.j=n,this.h=0,this.g=null}return Object(l.a)(t,[{key:"get",value:function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}]),t}())((function(){return new Mt}),(function(t){return t.reset()})),Mt=function(){function t(){Object(c.a)(this,t),this.next=this.g=this.h=null}return Object(l.a)(t,[{key:"set",value:function(t,e){this.h=t,this.g=e,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function Rt(t){d.setTimeout((function(){throw t}),0)}function At(t,e){Pt||function(){var t=d.Promise.resolve(void 0);Pt=function(){t.then(zt)}}(),Dt||(Pt(),Dt=!0),Ft.add(t,e)}var Dt=!1,Ft=new Lt;function zt(){for(var t;t=Nt();){try{t.h.call(t.g)}catch(n){Rt(n)}var e=jt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Dt=!1}function Bt(t,e){It.call(this),this.h=t||1,this.g=e||d,this.j=x(this.kb,this),this.l=Date.now()}function Ut(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Vt(t,e,n){if("function"===typeof t)n&&(t=x(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=x(t.handleEvent,t)}return 2147483647<Number(e)?-1:d.setTimeout(t,e||0)}function qt(t){t.g=Vt((function(){t.g=null,t.i&&(t.i=!1,qt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}O(Bt,It),(r=Bt.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),St(this,"tick"),this.da&&(Ut(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Bt.Z.M.call(this),Ut(this),delete this.g};var Gt=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(t,r){var i;return Object(c.a)(this,n),(i=e.call(this)).m=t,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Object(l.a)(n,[{key:"l",value:function(t){this.h=arguments,this.g?this.i=!0:qt(this)}},{key:"M",value:function(){Object(o.a)(Object(a.a)(n.prototype),"M",this).call(this),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(k);function Ht(t){k.call(this),this.h=t,this.g={}}O(Ht,k);var Wt=[];function Xt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Yt(t){F(t.g,(function(t,e){this.g.hasOwnProperty(e)&&bt(t)}),t),t.g={}}function Zt(){this.g=!0}function Kt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Tt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Ht.prototype.M=function(){Ht.Z.M.call(this),Yt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zt.prototype.Aa=function(){this.g=!1},Zt.prototype.info=function(){};var Qt={},Jt=null;function $t(){return Jt=Jt||new It}function te(t){at.call(this,Qt.Ma,t)}function ee(t){var e=$t();St(e,new te(e,t))}function ne(t,e){at.call(this,Qt.STAT_EVENT,t),this.stat=e}function re(t){var e=$t();St(e,new ne(e,t))}function ie(t,e){at.call(this,Qt.Na,t),this.size=e}function oe(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){t()}),e)}Qt.Ma="serverreachability",O(te,at),Qt.STAT_EVENT="statevent",O(ne,at),Qt.Na="timingevent",O(ie,at);var ae={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},se={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ue(){}function ce(t){return t.h||(t.h=t.i())}function le(){}ue.prototype.h=null;var he,fe={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function pe(){at.call(this,"d")}function de(){at.call(this,"c")}function ge(){}function ve(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Ht(this),this.P=me,t=X?125:void 0,this.W=new Bt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ye}function ye(){this.i=null,this.g="",this.h=!1}O(pe,at),O(de,at),O(ge,ue),ge.prototype.g=function(){return new XMLHttpRequest},ge.prototype.i=function(){return{}},he=new ge;var me=45e3,_e={},be={};function we(t,e,n){t.K=1,t.v=Ge(Fe(e)),t.s=n,t.U=!0,xe(t,null)}function xe(t,e){t.F=Date.now(),Ie(t),t.A=Fe(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),rn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ye,t.g=ar(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Gt(x(t.Ia,t,t.g),t.O)),Xt(t.V,t.g,"readystatechange",t.gb),e=t.H?z(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ee(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ee(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Oe(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=ke(t,n))==be){4==e&&(t.o=4,re(14),i=!1),Kt(t.j,t.m,null,"[Incomplete Response]");break}if(r==_e){t.o=4,re(15),Kt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Kt(t.j,t.m,r,null),Pe(t,r)}Ee(t)&&r!=be&&r!=_e&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,re(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jn(e),e.L=!0,re(11))):(Kt(t.j,t.m,n,"[Invalid Chunked Response]"),Ne(t),Te(t))}function ke(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?be:(n=Number(e.substring(n,r)),isNaN(n)?_e:(r+=1)+n>e.length?be:(e=e.substr(r,n),t.C=r+n,e))}function Ie(t){t.Y=Date.now()+t.P,Se(t,t.P)}function Se(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=oe(x(t.eb,t),e)}function Ce(t){t.B&&(d.clearTimeout(t.B),t.B=null)}function Te(t){0==t.l.G||t.I||er(t.l,t)}function Ne(t){Ce(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ut(t.W),Yt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Pe(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||fn(n.i,t)))if(n.I=t.N,!t.J&&fn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;tr(n),qn(n)}Qn(n),re(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=oe(x(n.ab,n),6e3));if(1>=hn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else rr(n,11)}else if((t.J||n.g==t)&&tr(n),!P(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(M(l,"spdy")||M(l,"quic")||M(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(pn(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,qe(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=or(r,r.H?r.la:null,r.W),p.J){dn(r.i,p);var d=p,g=r.K;g&&d.setTimeout(g),d.B&&(Ce(d),Ie(d)),r.g=p}else Kn(r);0<n.l.length&&Wn(n)}else"stop"!=o[0]&&"close"!=o[0]||rr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?rr(n,7):Vn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ee(4)}catch(o){}}function Le(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(v(t)||"string"===typeof t)C(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(v(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(v(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function je(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof je)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Me(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Re(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Re(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Re(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=ve.prototype).setTimeout=function(t){this.P=t},r.gb=function(t){t=t.target;var e=this.L;e&&3==Dn(t)?e.l():this.Ia(t)},r.Ia=function(t){try{if(t==this.g)t:{var e=Dn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||X||this.g&&(this.h.h||this.g.ga()||Fn(this.g)))){this.I||4!=e||7==n||ee(8==n||0>=r?3:2),Ce(this);var i=this.g.ba();this.N=i;e:if(Ee(this)){var o=Fn(this.g);t="";var a=o.length,s=4==Dn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ne(this),Te(this);var u="";break e}this.h.i=new d.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,re(12),Ne(this),Te(this);break t}Kt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Pe(this,i)}this.U?(Oe(this,e,u),X&&this.i&&3==e&&(Xt(this.V,this.W,"tick",this.fb),this.W.start())):(Kt(this.j,this.m,u,null),Pe(this,u)),4==e&&Ne(this),this.i&&!this.I&&(4==e?er(this.l,this):(this.i=!1,Ie(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,re(12)):(this.o=0,re(13)),Ne(this),Te(this)}}}catch(e){}},r.fb=function(){if(this.g){var t=Dn(this.g),e=this.g.ga();this.C<e.length&&(Ce(this),Oe(this,t,e),this.i&&4!=t&&Ie(this))}},r.cancel=function(){this.I=!0,Ne(this)},r.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ee(3),re(17)),Ne(this),this.o=2,Te(this)):Se(this,this.Y-t)},(r=je.prototype).R=function(){Me(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},r.T=function(){return Me(this),this.g.concat()},r.get=function(t,e){return Re(this.h,t)?this.h[t]:e},r.set=function(t,e){Re(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},r.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ae=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function De(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof De){this.g=void 0!==e?e:t.g,ze(this,t.j),this.s=t.s,Be(this,t.i),Ue(this,t.m),this.l=t.l,e=t.h;var n=new $e;n.i=e.i,e.g&&(n.g=new je(e.g),n.h=e.h),Ve(this,n),this.o=t.o}else t&&(n=String(t).match(Ae))?(this.g=!!e,ze(this,n[1]||"",!0),this.s=He(n[2]||""),Be(this,n[3]||"",!0),Ue(this,n[4]),this.l=He(n[5]||"",!0),Ve(this,n[6]||"",!0),this.o=He(n[7]||"")):(this.g=!!e,this.h=new $e(null,this.g))}function Fe(t){return new De(t)}function ze(t,e,n){t.j=n?He(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Be(t,e,n){t.i=n?He(e,!0):e}function Ue(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ve(t,e,n){e instanceof $e?(t.h=e,function(t,e){e&&!t.j&&(tn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=We(e,Qe)),t.h=new $e(e,t.g))}function qe(t,e,n){t.h.set(e,n)}function Ge(t){return qe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function He(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function We(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Xe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Xe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}De.prototype.toString=function(){var t=[],e=this.j;e&&t.push(We(e,Ye,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(We(e,Ye,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(We(n,"/"==n.charAt(0)?Ke:Ze,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",We(n,Je)),t.join("")};var Ye=/[#\/\?@]/g,Ze=/[#\?:]/g,Ke=/[#\?]/g,Qe=/[#\?@]/g,Je=/#/g;function $e(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tn(t){t.g||(t.g=new je,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Re(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Re((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Me(t)))}function nn(t,e){return tn(t),e=on(t,e),Re(t.g.h,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.i=null,t.g.set(on(t,e),N(n)),t.h+=n.length)}function on(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(r=$e.prototype).add=function(t,e){tn(this),this.i=null,t=on(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},r.forEach=function(t,e){tn(this),this.g.forEach((function(n,r){C(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.T=function(){tn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.R=function(t){tn(this);var e=[];if("string"===typeof t)nn(this,t)&&(e=T(e,this.g.get(on(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},r.set=function(t,e){return tn(this),this.i=null,nn(this,t=on(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},r.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var an=function t(e,n){Object(c.a)(this,t),this.h=e,this.g=n};function sn(t){this.l=t||cn,d.PerformanceNavigationTiming?t=0<(t=d.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(d.g&&d.g.Ea&&d.g.Ea()&&d.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var un,cn=10;function ln(t){return!!t.h||!!t.g&&t.g.size>=t.j}function hn(t){return t.h?1:t.g?t.g.size:0}function fn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function pn(t,e){t.g?t.g.add(e):t.h=e}function dn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function gn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var e,n=t.i,r=Object(i.a)(t.g.values());try{for(r.s();!(e=r.n()).done;){var o=e.value;n=n.concat(o.D)}}catch(a){r.e(a)}finally{r.f()}return n}return N(t.i)}function vn(){}function yn(){this.g=new vn}function mn(t,e,n){var r=n||"";try{Le(t,(function(t,n){var i=t;y(t)&&(i=Tt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function _n(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function bn(t){this.l=t.$b||null,this.j=t.ib||!1}function wn(t,e){It.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=xn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sn.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var t,e=Object(i.a)(this.g.values());try{for(e.s();!(t=e.n()).done;){t.value.cancel()}}catch(n){e.e(n)}finally{e.f()}this.g.clear()}},vn.prototype.stringify=function(t){return d.JSON.stringify(t,void 0)},vn.prototype.parse=function(t){return d.JSON.parse(t,void 0)},O(bn,ue),bn.prototype.g=function(){return new wn(this.l,this.j)},bn.prototype.i=(un={},function(){return un}),O(wn,It);var xn=0;function En(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function On(t){t.readyState=4,t.l=null,t.j=null,t.A=null,kn(t)}function kn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(r=wn.prototype).open=function(t,e){if(this.readyState!=xn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,kn(this)},r.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||d).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,On(this)),this.readyState=xn},r.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;En(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?On(this):kn(this),3==this.readyState&&En(this)}},r.Ua=function(t){this.g&&(this.response=this.responseText=t,On(this))},r.Ta=function(t){this.g&&(this.response=t,On(this))},r.ha=function(){this.g&&On(this)},r.setRequestHeader=function(t,e){this.v.append(t,e)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var In=d.JSON.parse;function Sn(t){It.call(this),this.headers=new je,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Cn,this.K=this.L=!1}O(Sn,It);var Cn="",Tn=/^https?$/i,Nn=["POST","PUT"];function Pn(t){return"content-type"==t.toLowerCase()}function Ln(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,jn(t),Rn(t)}function jn(t){t.D||(t.D=!0,St(t,"complete"),St(t,"error"))}function Mn(t){if(t.h&&"undefined"!=typeof p&&(!t.C[1]||4!=Dn(t)||2!=t.ba()))if(t.v&&4==Dn(t))Vt(t.Fa,0,t);else if(St(t,"readystatechange"),4==Dn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Ae)[1]||null;if(!o&&d.self&&d.self.location){var a=d.self.location.protocol;o=a.substr(0,a.length-1)}i=!Tn.test(o?o.toLowerCase():"")}e=i}if(e)St(t,"complete"),St(t,"success");else{t.m=6;try{var s=2<Dn(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",jn(t)}}finally{Rn(t)}}}function Rn(t,e){if(t.g){An(t);var n=t.g,r=t.C[0]?g:null;t.g=null,t.C=null,e||St(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function An(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(d.clearTimeout(t.A),t.A=null)}function Dn(t){return t.g?t.g.readyState:0}function Fn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Cn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function zn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return F(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):qe(t,e,n))}function Bn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Un(t){this.za=0,this.l=[],this.h=new Zt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bn("baseRetryDelayMs",5e3,t),this.$a=Bn("retryDelaySeedMs",1e4,t),this.Ya=Bn("forwardChannelMaxRetries",2,t),this.ra=Bn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new sn(t&&t.concurrentRequestLimit),this.Ca=new yn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Vn(t){if(Gn(t),3==t.G){var e=t.V++,n=Fe(t.F);qe(n,"SID",t.J),qe(n,"RID",e),qe(n,"TYPE","terminate"),Yn(t,n),(e=new ve(t,t.h,e,void 0)).K=2,e.v=Ge(Fe(n)),n=!1,d.navigator&&d.navigator.sendBeacon&&(n=d.navigator.sendBeacon(e.v.toString(),"")),!n&&d.Image&&((new Image).src=e.v,n=!0),n||(e.g=ar(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ie(e)}ir(t)}function qn(t){t.g&&(Jn(t),t.g.cancel(),t.g=null)}function Gn(t){qn(t),t.u&&(d.clearTimeout(t.u),t.u=null),tr(t),t.i.cancel(),t.m&&("number"===typeof t.m&&d.clearTimeout(t.m),t.m=null)}function Hn(t,e){t.l.push(new an(t.Za++,e)),3==t.G&&Wn(t)}function Wn(t){ln(t.i)||t.m||(t.m=!0,At(t.Ha,t),t.C=0)}function Xn(t,e){var n;n=e?e.m:t.V++;var r=Fe(t.F);qe(r,"SID",t.J),qe(r,"RID",n),qe(r,"AID",t.U),Yn(t,r),t.o&&t.s&&zn(r,t.o,t.s),n=new ve(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Zn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),pn(t.i,n),we(n,r,e)}function Yn(t,e){t.j&&Le({},(function(t,n){qe(e,n,t)}))}function Zn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?x(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{mn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Kn(t){t.g||t.u||(t.Y=1,At(t.Ga,t),t.A=0)}function Qn(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=oe(x(t.Ga,t),nr(t,t.A)),t.A++,!0)}function Jn(t){null!=t.B&&(d.clearTimeout(t.B),t.B=null)}function $n(t){t.g=new ve(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Fe(t.oa);qe(e,"RID","rpc"),qe(e,"SID",t.J),qe(e,"CI",t.N?"0":"1"),qe(e,"AID",t.U),Yn(t,e),qe(e,"TYPE","xmlhttp"),t.o&&t.s&&zn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ge(Fe(e)),n.s=null,n.U=!0,xe(n,t)}function tr(t){null!=t.v&&(d.clearTimeout(t.v),t.v=null)}function er(t,e){var n=null;if(t.g==e){tr(t),Jn(t),t.g=null;var r=2}else{if(!fn(t.i,e))return;n=e.D,dn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;St(r=$t(),new ie(r,n,e,i)),Wn(t)}else Kn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hn(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=oe(x(t.Ha,t,e),nr(t,t.C)),t.C++,!0))}(t,e)||2==r&&Qn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:rr(t,5);break;case 4:rr(t,10);break;case 3:rr(t,6);break;default:rr(t,2)}}function nr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function rr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=x(t.jb,t);n||(n=new De("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||ze(n,"https"),Ge(n)),function(t,e){var n=new Zt;if(d.Image){var r=new Image;r.onload=E(_n,n,r,"TestLoadImage: loaded",!0,e),r.onerror=E(_n,n,r,"TestLoadImage: error",!1,e),r.onabort=E(_n,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=E(_n,n,r,"TestLoadImage: timeout",!1,e),d.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else re(2);t.G=0,t.j&&t.j.va(e),ir(t),Gn(t)}function ir(t){t.G=0,t.I=-1,t.j&&(0==gn(t.i).length&&0==t.l.length||(t.i.i.length=0,N(t.l),t.l.length=0),t.j.ua())}function or(t,e,n){var r=function(t){return t instanceof De?Fe(t):new De(t,void 0)}(n);if(""!=r.i)e&&Be(r,e+"."+r.i),Ue(r,r.m);else{var i=d.location;r=function(t,e,n,r){var i=new De(null,void 0);return t&&ze(i,t),e&&Be(i,e),n&&Ue(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&F(t.aa,(function(t,e){qe(r,e,t)})),e=t.D,n=t.sa,e&&n&&qe(r,e,n),qe(r,"VER",t.ma),Yn(t,r),r}function ar(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Sn(new bn({ib:!0})):new Sn(t.qa)).L=t.H,e}function sr(){}function ur(){if(H&&!(10<=Number(it)))throw Error("Environmental error: no available transport.")}function cr(t,e){It.call(this),this.g=new Un(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!P(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!P(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new fr(this)}function lr(t){pe.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function hr(){de.call(this),this.status=1}function fr(t){this.g=t}(r=Sn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():he.g(),this.C=this.u?ce(this.u):ce(he),this.g.onreadystatechange=x(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Ln(this,o)}t=n||"";var i=new je(this.headers);r&&Le(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Pn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=d.FormData&&t instanceof d.FormData,!(0<=S(Nn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{An(this),0<this.B&&((this.K=function(t){return H&&nt()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=x(this.pa,this)):this.A=Vt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Ln(this,o)}},r.pa=function(){"undefined"!=typeof p&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,St(this,"timeout"),this.abort(8))},r.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,St(this,"complete"),St(this,"abort"),Rn(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rn(this,!0)),Sn.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?Mn(this):this.cb())},r.cb=function(){Mn(this)},r.ba=function(){try{return 2<Dn(this)?this.g.status:-1}catch(un){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(un){return""}},r.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),In(e)}},r.Da=function(){return this.m},r.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(r=Un.prototype).ma=8,r.G=1,r.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},r.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ve(this,this.h,t,void 0),n=this.s;if(this.P&&(n?U(n=z(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Zn(this,e,r),qe(i=Fe(this.F),"RID",t),qe(i,"CVER",22),this.D&&qe(i,"X-HTTP-Session-Id",this.D),Yn(this,i),this.o&&n&&zn(i,this.o,n),pn(this.i,e),this.Ra&&qe(i,"TYPE","init"),this.ja?(qe(i,"$req",r),qe(i,"SID","null"),e.$=!0,we(e,i,null)):we(e,i,r),this.G=2}}else 3==this.G&&(t?Xn(this,t):0==this.l.length||ln(this.i)||Xn(this))},r.Ga=function(){if(this.u=null,$n(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=oe(x(this.bb,this),t)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,re(10),qn(this),$n(this))},r.ab=function(){null!=this.v&&(this.v=null,qn(this),Qn(this),re(19))},r.jb=function(t){t?(this.h.info("Successfully pinged google.com"),re(2)):(this.h.info("Failed to ping google.com"),re(1))},(r=sr.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},ur.prototype.g=function(t,e){return new cr(t,e)},O(cr,It),cr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),At(x(t.hb,t,e))),re(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=or(t,null,t.W),Wn(t)},cr.prototype.close=function(){Vn(this.g)},cr.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,Hn(this.g,e)}else this.v?((e={}).__data__=Tt(t),Hn(this.g,e)):Hn(this.g,t)},cr.prototype.M=function(){this.g.j=null,delete this.j,Vn(this.g),delete this.g,cr.Z.M.call(this)},O(lr,pe),O(hr,de),O(fr,sr),fr.prototype.xa=function(){St(this.g,"a")},fr.prototype.wa=function(t){St(this.g,new lr(t))},fr.prototype.va=function(t){St(this.g,new hr(t))},fr.prototype.ua=function(){St(this.g,"b")},ur.prototype.createWebChannel=ur.prototype.g,cr.prototype.send=cr.prototype.u,cr.prototype.open=cr.prototype.m,cr.prototype.close=cr.prototype.close,ae.NO_ERROR=0,ae.TIMEOUT=8,ae.HTTP_ERROR=6,se.COMPLETE="complete",le.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",It.prototype.listen=It.prototype.N,Sn.prototype.listenOnce=Sn.prototype.O,Sn.prototype.getLastError=Sn.prototype.La,Sn.prototype.getLastErrorCode=Sn.prototype.Da,Sn.prototype.getStatus=Sn.prototype.ba,Sn.prototype.getResponseJson=Sn.prototype.Qa,Sn.prototype.getResponseText=Sn.prototype.ga,Sn.prototype.send=Sn.prototype.ea;var pr=f.createWebChannelTransport=function(){return new ur},dr=f.getStatEventTarget=function(){return $t()},gr=f.ErrorCode=ae,vr=f.EventType=se,yr=f.Event=Qt,mr=f.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_r=f.FetchXmlHttpFactory=bn,br=f.WebChannel=le,wr=f.XhrIo=Sn}).call(this,n(65))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return l})),n.d(e,"f",(function(){return h}));var r,i=n(25),o=r||(r={});o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE";var a=function(t){return t};function s(t){t.preventDefault(),t.returnValue=""}function u(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}},call:function(e){t.forEach((function(t){return t&&t(e)}))}}}function c(){return Math.random().toString(36).substr(2,8)}function l(t){var e=t.pathname,n=t.search;return(void 0===e?"/":e)+(void 0===n?"":n)+(void 0===(t=t.hash)?"":t)}function h(t){var e={};if(t){var n=t.indexOf("#");0<=n&&(e.hash=t.substr(n),t=t.substr(0,n)),0<=(n=t.indexOf("?"))&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function f(t){function e(){var t=d.location,e=g.state||{};return[e.idx,a({pathname:t.pathname,search:t.search,hash:t.hash,state:e.usr||null,key:e.key||"default"})]}function n(t){return"string"===typeof t?t:l(t)}function o(t,e){return void 0===e&&(e=null),a(Object(i.a)({pathname:_.pathname,hash:"",search:""},"string"===typeof t?h(t):t,{state:e,key:c()}))}function f(t){y=t,t=e(),m=t[0],_=t[1],b.call({action:y,location:_})}function p(t){g.go(t)}void 0===t&&(t={});var d=void 0===(t=t.window)?document.defaultView:t,g=d.history,v=null;d.addEventListener("popstate",(function(){if(v)w.call(v),v=null;else{var t=r.Pop,n=e(),i=n[0];if(n=n[1],w.length){if(null!=i){var o=m-i;o&&(v={action:t,location:n,retry:function(){p(-1*o)}},p(o))}}else f(t)}}));var y=r.Pop,m=(t=e())[0],_=t[1],b=u(),w=u();return null==m&&(m=0,g.replaceState(Object(i.a)({},g.state,{idx:m}),"")),{get action(){return y},get location(){return _},createHref:n,push:function t(e,i){var a=r.Push,s=o(e,i);if(!w.length||(w.call({action:a,location:s,retry:function(){t(e,i)}}),0)){var u=[{usr:s.state,key:s.key,idx:m+1},n(s)];s=u[0],u=u[1];try{g.pushState(s,"",u)}catch(c){d.location.assign(u)}f(a)}},replace:function t(e,i){var a=r.Replace,s=o(e,i);w.length&&(w.call({action:a,location:s,retry:function(){t(e,i)}}),1)||(s=[{usr:s.state,key:s.key,idx:m},n(s)],g.replaceState(s[0],"",s[1]),f(a))},go:p,back:function(){p(-1)},forward:function(){p(1)},listen:function(t){return b.push(t)},block:function(t){var e=w.push(t);return 1===w.length&&d.addEventListener("beforeunload",s),function(){e(),w.length||d.removeEventListener("beforeunload",s)}}}}function p(t){function e(){var t=h(g.location.hash.substr(1)),e=t.pathname,n=t.search;t=t.hash;var r=v.state||{};return[r.idx,a({pathname:void 0===e?"/":e,search:void 0===n?"":n,hash:void 0===t?"":t,state:r.usr||null,key:r.key||"default"})]}function n(){if(y)x.call(y),y=null;else{var t=r.Pop,n=e(),i=n[0];if(n=n[1],x.length){if(null!=i){var o=_-i;o&&(y={action:t,location:n,retry:function(){d(-1*o)}},d(o))}}else p(t)}}function o(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=-1===(n=(e=g.location.href).indexOf("#"))?e:e.slice(0,n)),n+"#"+("string"===typeof t?t:l(t))}function f(t,e){return void 0===e&&(e=null),a(Object(i.a)({pathname:b.pathname,hash:"",search:""},"string"===typeof t?h(t):t,{state:e,key:c()}))}function p(t){m=t,t=e(),_=t[0],b=t[1],w.call({action:m,location:b})}function d(t){v.go(t)}void 0===t&&(t={});var g=void 0===(t=t.window)?document.defaultView:t,v=g.history,y=null;g.addEventListener("popstate",n),g.addEventListener("hashchange",(function(){l(e()[1])!==l(b)&&n()}));var m=r.Pop,_=(t=e())[0],b=t[1],w=u(),x=u();return null==_&&(_=0,v.replaceState(Object(i.a)({},v.state,{idx:_}),"")),{get action(){return m},get location(){return b},createHref:o,push:function t(e,n){var i=r.Push,a=f(e,n);if(!x.length||(x.call({action:i,location:a,retry:function(){t(e,n)}}),0)){var s=[{usr:a.state,key:a.key,idx:_+1},o(a)];a=s[0],s=s[1];try{v.pushState(a,"",s)}catch(u){g.location.assign(s)}p(i)}},replace:function t(e,n){var i=r.Replace,a=f(e,n);x.length&&(x.call({action:i,location:a,retry:function(){t(e,n)}}),1)||(a=[{usr:a.state,key:a.key,idx:_},o(a)],v.replaceState(a[0],"",a[1]),p(i))},go:d,back:function(){d(-1)},forward:function(){d(1)},listen:function(t){return w.push(t)},block:function(t){var e=x.push(t);return 1===x.length&&g.addEventListener("beforeunload",s),function(){e(),x.length||g.removeEventListener("beforeunload",s)}}}}function d(t){function e(t,e){return void 0===e&&(e=null),a(Object(i.a)({pathname:v.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:e,key:c()}))}function n(t,e,n){return!m.length||(m.call({action:t,location:e,retry:n}),!1)}function o(t,e){g=t,v=e,y.call({action:g,location:v})}function s(t){var e=Math.min(Math.max(d+t,0),p.length-1),i=r.Pop,a=p[e];n(i,a,(function(){s(t)}))&&(d=e,o(i,a))}void 0===t&&(t={});var f=t;t=f.initialEntries,f=f.initialIndex;var p=(void 0===t?["/"]:t).map((function(t){return a(Object(i.a)({pathname:"/",search:"",hash:"",state:null,key:c()},"string"===typeof t?h(t):t))})),d=Math.min(Math.max(null==f?p.length-1:f,0),p.length-1),g=r.Pop,v=p[d],y=u(),m=u();return{get index(){return d},get action(){return g},get location(){return v},createHref:function(t){return"string"===typeof t?t:l(t)},push:function t(i,a){var s=r.Push,u=e(i,a);n(s,u,(function(){t(i,a)}))&&(d+=1,p.splice(d,p.length,u),o(s,u))},replace:function t(i,a){var s=r.Replace,u=e(i,a);n(s,u,(function(){t(i,a)}))&&(p[d]=u,o(s,u))},go:s,back:function(){s(-1)},forward:function(){s(1)},listen:function(t){return y.push(t)},block:function(t){return m.push(t)}}}},function(t,e,n){"use strict";var r=n(1),i=r.createContext(null);i.displayName="NavbarContext",e.a=i},function(t,e,n){!function(t){"use strict";function e(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}var n=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var i=0;function o(t){return t._leaflet_id=t._leaflet_id||++i,t._leaflet_id}function a(t,e,n){var r,i,o,a;return a=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(a,e),r=!0)}}function s(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function u(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function l(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function h(t){return l(t).split(/\s+/)}function f(t,e){for(var r in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[r]=e[r];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var d=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(d,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"===typeof r&&(r=r(e)),r}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var m="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var b=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-b));return b=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||_("RequestAnimationFrame")||w,E=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function O(t,e,n){if(!n||x!==w)return x.call(window,r(t,e));t.call(e)}function k(t){t&&E.call(window,t)}var I={extend:e,create:n,bind:r,lastId:i,stamp:o,throttle:a,wrapNum:s,falseFn:u,formatNum:c,trim:l,splitWords:h,setOptions:f,getParamString:p,template:g,isArray:v,indexOf:y,emptyImageUrl:m,requestFn:x,cancelFn:E,requestAnimFrame:O,cancelAnimFrame:k};function S(){}S.extend=function(t){var r=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=r.__super__=this.prototype,o=n(i);for(var a in o.constructor=r,r.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(r[a]=this[a]);return t.statics&&(e(r,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!==typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(n(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},r},S.include=function(t){return e(this.prototype,t),this},S.mergeOptions=function(t){return e(this.prototype.options,t),this},S.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var C={on:function(t,e,n){if("object"===typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(t)if("object"===typeof t)for(var r in t)this._off(r,t[r],e);else for(var i=0,o=(t=h(t)).length;i<o;i++)this._off(t[i],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(i)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(e){if(n===this&&(n=void 0),r)for(i=0,o=r.length;i<o;i++){var a=r[i];if(a.ctx===n&&a.fn===e)return a.fn=u,this._firingCount&&(this._events[t]=r=r.slice()),void r.splice(i,1)}}else{for(i=0,o=r.length;i<o;i++)r[i].fn=u;delete this._events[t]}},fire:function(t,n,r){if(!this.listens(t,r))return this;var i=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"===typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};C.addEventListener=C.on,C.removeEventListener=C.clearAllEventListeners=C.off,C.addOneTimeEventListener=C.once,C.fireEvent=C.fire,C.hasEventListeners=C.listens;var T=S.extend(C);function N(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var P=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function j(t,e,n){return t instanceof N?t:v(t)?new N(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new N(t.x,t.y):new N(t,e,n)}function M(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function R(t,e){return!t||t instanceof M?t:new M(t,e)}function A(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function D(t,e){return t instanceof A?t:new A(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function z(t,e,n){return t instanceof F?t:v(t)&&"object"!==typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}N.prototype={clone:function(){return new N(this.x,this.y)},add:function(t){return this.clone()._add(j(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(j(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new N(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new N(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=P(this.x),this.y=P(this.y),this},distanceTo:function(t){var e=(t=j(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=j(t)).x===this.x&&t.y===this.y},contains:function(t){return t=j(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},M.prototype={extend:function(t){return t=j(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new N(this.min.x,this.max.y)},getTopRight:function(){return new N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"===typeof t[0]||t instanceof N?j(t):R(t))instanceof M?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=R(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,a=i.y>=e.y&&r.y<=n.y;return o&&a},overlaps:function(t){t=R(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,a=i.y>e.y&&r.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},A.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof A))return t?this.extend(z(t)||D(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new A(new F(e.lat-r,e.lng-i),new F(n.lat+r,n.lng+i))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof F||"lat"in t?z(t):D(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof A?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=D(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,a=i.lng>=e.lng&&r.lng<=n.lng;return o&&a},overlaps:function(t){t=D(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,a=i.lng>e.lng&&r.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=D(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=z(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return U.distance(this,z(t))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return D([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var B={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new M(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new A(new F(o.lat-r,o.lng-i),new F(a.lat-r,a.lng-i))}},U=e({},B,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(r)*Math.cos(i)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),V={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new N(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new M([-t,-t],[t,t])}()};function q(t,e,n,r){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function G(t,e,n,r){return new q(t,e,n,r)}q.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new N((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var H=e({},U,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R);return G(t,.5,-t,.5)}()}),W=e({},H,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t,e){var n,r,i,o,a,s,u="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(a=t[n]).length;r<o;r++)u+=(r?"L":"M")+(s=a[r]).x+" "+s.y;u+=e?It?"z":"x":""}return u||"M0 0"}var Z=document.documentElement.style,K="ActiveXObject"in window,Q=K&&!document.addEventListener,J="msLaunchUri"in navigator&&!("documentMode"in document),$=Ct("webkit"),tt=Ct("android"),et=Ct("android 2")||Ct("android 3"),nt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rt=tt&&Ct("Google")&&nt<537&&!("AudioNode"in window),it=!!window.opera,ot=!J&&Ct("chrome"),at=Ct("gecko")&&!$&&!it&&!K,st=!ot&&Ct("safari"),ut=Ct("phantom"),ct="OTransition"in Z,lt=0===navigator.platform.indexOf("Win"),ht=K&&"transition"in Z,ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,pt="MozPerspective"in Z,dt=!window.L_DISABLE_3D&&(ht||ft||pt)&&!ct&&!ut,gt="undefined"!==typeof orientation||Ct("mobile"),vt=gt&&$,yt=gt&&ft,mt=!window.PointerEvent&&window.MSPointerEvent,_t=!(!window.PointerEvent&&!mt),bt=!window.L_NO_TOUCH&&(_t||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),wt=gt&&it,xt=gt&&at,Et=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ot=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(n){}return t}(),kt=!!document.createElement("canvas").getContext,It=!(!document.createElementNS||!X("svg").createSVGRect),St=!It&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(n){return!1}}();function Ct(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Tt={ie:K,ielt9:Q,edge:J,webkit:$,android:tt,android23:et,androidStock:rt,opera:it,chrome:ot,gecko:at,safari:st,phantom:ut,opera12:ct,win:lt,ie3d:ht,webkit3d:ft,gecko3d:pt,any3d:dt,mobile:gt,mobileWebkit:vt,mobileWebkit3d:yt,msPointer:mt,pointer:_t,touch:bt,mobileOpera:wt,mobileGecko:xt,retina:Et,passiveEvents:Ot,canvas:kt,svg:It,vml:St},Nt=mt?"MSPointerDown":"pointerdown",Pt=mt?"MSPointerMove":"pointermove",Lt=mt?"MSPointerUp":"pointerup",jt=mt?"MSPointerCancel":"pointercancel",Mt={},Rt=!1;function At(t,e,n,i){return"touchstart"===e?function(t,e,n){var i=r((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&je(t),Bt(t,e)}));t["_leaflet_touchstart"+n]=i,t.addEventListener(Nt,i,!1),Rt||(document.addEventListener(Nt,Dt,!0),document.addEventListener(Pt,Ft,!0),document.addEventListener(Lt,zt,!0),document.addEventListener(jt,zt,!0),Rt=!0)}(t,n,i):"touchmove"===e?function(t,e,n){var r=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Bt(t,e)};t["_leaflet_touchmove"+n]=r,t.addEventListener(Pt,r,!1)}(t,n,i):"touchend"===e&&function(t,e,n){var r=function(t){Bt(t,e)};t["_leaflet_touchend"+n]=r,t.addEventListener(Lt,r,!1),t.addEventListener(jt,r,!1)}(t,n,i),this}function Dt(t){Mt[t.pointerId]=t}function Ft(t){Mt[t.pointerId]&&(Mt[t.pointerId]=t)}function zt(t){delete Mt[t.pointerId]}function Bt(t,e){for(var n in t.touches=[],Mt)t.touches.push(Mt[n]);t.changedTouches=[t],e(t)}var Ut,Vt,qt,Gt,Ht,Wt=mt?"MSPointerDown":_t?"pointerdown":"touchstart",Xt=mt?"MSPointerUp":_t?"pointerup":"touchend",Yt="_leaflet_",Zt=he(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Kt=he(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Qt="webkitTransition"===Kt||"OTransition"===Kt?Kt+"End":"transitionend";function Jt(t){return"string"===typeof t?document.getElementById(t):t}function $t(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function te(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function ee(t){var e=t.parentNode;e&&e.removeChild(t)}function ne(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function re(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ie(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function oe(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ce(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function ae(t,e){if(void 0!==t.classList)for(var n=h(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!oe(t,e)){var o=ce(t);ue(t,(o?o+" ":"")+e)}}function se(t,e){void 0!==t.classList?t.classList.remove(e):ue(t,l((" "+ce(t)+" ").replace(" "+e+" "," ")))}function ue(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ce(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function le(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}(t,e)}function he(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function fe(t,e,n){var r=e||new N(0,0);t.style[Zt]=(ht?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function pe(t,e){t._leaflet_pos=e,dt?fe(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function de(t){return t._leaflet_pos||new N(0,0)}if("onselectstart"in document)Ut=function(){Ee(window,"selectstart",je)},Vt=function(){ke(window,"selectstart",je)};else{var ge=he(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ut=function(){if(ge){var t=document.documentElement.style;qt=t[ge],t[ge]="none"}},Vt=function(){ge&&(document.documentElement.style[ge]=qt,qt=void 0)}}function ve(){Ee(window,"dragstart",je)}function ye(){ke(window,"dragstart",je)}function me(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(_e(),Gt=t,Ht=t.style.outline,t.style.outline="none",Ee(window,"keydown",_e))}function _e(){Gt&&(Gt.style.outline=Ht,Gt=void 0,Ht=void 0,ke(window,"keydown",_e))}function be(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function we(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var xe={TRANSFORM:Zt,TRANSITION:Kt,TRANSITION_END:Qt,get:Jt,getStyle:$t,create:te,remove:ee,empty:ne,toFront:re,toBack:ie,hasClass:oe,addClass:ae,removeClass:se,setClass:ue,getClass:ce,setOpacity:le,testProp:he,setTransform:fe,setPosition:pe,getPosition:de,disableTextSelection:Ut,enableTextSelection:Vt,disableImageDrag:ve,enableImageDrag:ye,preventOutline:me,restoreOutline:_e,getSizedParentNode:be,getScale:we};function Ee(t,e,n,r){if("object"===typeof e)for(var i in e)Ce(t,i,e[i],n);else for(var o=0,a=(e=h(e)).length;o<a;o++)Ce(t,e[o],n,r);return this}var Oe="_leaflet_events";function ke(t,e,n,r){if("object"===typeof e)for(var i in e)Te(t,i,e[i],n);else if(e)for(var o=0,a=(e=h(e)).length;o<a;o++)Te(t,e[o],n,r);else{for(var s in t[Oe])Te(t,s,t[Oe][s]);delete t[Oe]}return this}function Ie(){if(_t)return!(J||st)}var Se={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ce(t,e,n,r){var i=e+o(n)+(r?"_"+o(r):"");if(t[Oe]&&t[Oe][i])return this;var a=function(e){return n.call(r||t,e||window.event)},s=a;_t&&0===e.indexOf("touch")?At(t,e,a,i):bt&&"dblclick"===e&&!Ie()?function(t,e,n){var r,i,o=!1;function a(t){if(_t){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(r||e);i=t.touches?t.touches[0]:t,o=n>0&&n<=250,r=e}function s(t){if(o&&!i.cancelBubble){if(_t){if("mouse"===t.pointerType)return;var n,a,s={};for(a in i)n=i[a],s[a]=n&&n.bind?n.bind(i):n;i=s}i.type="dblclick",i.button=0,e(i),r=null}}t[Yt+Wt+n]=a,t[Yt+Xt+n]=s,t[Yt+"dblclick"+n]=e,t.addEventListener(Wt,a,!!Ot&&{passive:!1}),t.addEventListener(Xt,s,!!Ot&&{passive:!1}),t.addEventListener("dblclick",e,!1)}(t,a,i):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Se[e]||e,a,!!Ot&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(a=function(e){e=e||window.event,Ue(t,e)&&s(e)},t.addEventListener(Se[e],a,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,a),t[Oe]=t[Oe]||{},t[Oe][i]=a}function Te(t,e,n,r){var i=e+o(n)+(r?"_"+o(r):""),a=t[Oe]&&t[Oe][i];if(!a)return this;_t&&0===e.indexOf("touch")?function(t,e,n){var r=t["_leaflet_"+e+n];"touchstart"===e?t.removeEventListener(Nt,r,!1):"touchmove"===e?t.removeEventListener(Pt,r,!1):"touchend"===e&&(t.removeEventListener(Lt,r,!1),t.removeEventListener(jt,r,!1))}(t,e,i):bt&&"dblclick"===e&&!Ie()?function(t,e){var n=t[Yt+Wt+e],r=t[Yt+Xt+e],i=t[Yt+"dblclick"+e];t.removeEventListener(Wt,n,!!Ot&&{passive:!1}),t.removeEventListener(Xt,r,!!Ot&&{passive:!1}),t.removeEventListener("dblclick",i,!1)}(t,i):"removeEventListener"in t?t.removeEventListener(Se[e]||e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[Oe][i]=null}function Ne(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Be(t),this}function Pe(t){return Ce(t,"wheel",Ne),this}function Le(t){return Ee(t,"mousedown touchstart dblclick",Ne),Ce(t,"click",ze),this}function je(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Me(t){return je(t),Ne(t),this}function Re(t,e){if(!e)return new N(t.clientX,t.clientY);var n=we(e),r=n.boundingClientRect;return new N((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var Ae=lt&&ot?2*window.devicePixelRatio:at?window.devicePixelRatio:1;function De(t){return J?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ae:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Fe={};function ze(t){Fe[t.type]=!0}function Be(t){var e=Fe[t.type];return Fe[t.type]=!1,e}function Ue(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(r){return!1}return n!==t}var Ve={on:Ee,off:ke,stopPropagation:Ne,disableScrollPropagation:Pe,disableClickPropagation:Le,preventDefault:je,stop:Me,getMousePosition:Re,getWheelDelta:De,fakeStop:ze,skipped:Be,isExternalTarget:Ue,addListener:Ee,removeListener:ke},qe=T.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=de(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),pe(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ge=T.extend({options:{crs:H,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(z(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Kt&&dt&&!wt&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,Qt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,r){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(z(t),n,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=e({animate:r.animate},r.zoom),r.pan=e({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,r.zoom):this._tryAnimatedPan(t,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(dt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof N?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),a=this.containerPointToLatLng(i.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():D(t);var n=j(e.paddingTopLeft||e.padding||[0,0]),r=j(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"===typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),i),s=this.project(t.getNorthEast(),i);return{center:this.unproject(a.add(s).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=D(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=j(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ae(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!dt)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),a=this._zoom;t=z(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),c=i.distanceTo(r)||1;function l(t){var e=(u*u-s*s+2.0164*(t?-1:1)*2.0164*c*c)/(2*(t?u:s)*2.0164*c),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function h(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var p=l(0);function d(t){return s*(f(p)*(h(e=p+1.42*t)/f(e))-h(p))/2.0164;var e}var g=Date.now(),v=(l(1)-p)/1.42,y=n.duration?1e3*n.duration:1e3*v*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o=(Date.now()-g)/y,u=function(t){return 1-Math.pow(1-t,1.5)}(o)*v;o<=1?(this._flyToFrame=O(n,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(d(u)/c)),a),this.getScaleZoom(s/function(t){return s*(f(p)/f(p+1.42*t))}(u),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=D(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,D(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=j((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=j(e.paddingBottomRight||e.padding||[0,0]),i=this.getCenter(),o=this.project(i),a=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),c=R([s.min.add(n),s.max.subtract(r)]);if(!c.contains(a)){this._enforcingBounds=!0;var l=o.subtract(a),h=j(a.x+l.x,a.y+l.y);(a.x<c.min.x||a.x>c.max.x)&&(h.x=o.x-l.x,l.x>0?h.x+=u.x-n.x:h.x-=u.x-r.x),(a.y<c.min.y||a.y>c.max.y)&&(h.y=o.y-l.y,l.y>0?h.y+=u.y-n.y:h.y-=u.y-r.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=n.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,i,t):navigator.geolocation.getCurrentPosition(n,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"===typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ee(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ee(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=te("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new A(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=D(t),n=j(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),c=R(this.project(s,r),this.project(a,r)).getSize(),l=dt?this.options.zoomSnap:1,h=u.x/c.x,f=u.y/c.y,p=e?Math.max(h,f):Math.min(h,f);return r=this.getScaleZoom(p,r),l&&(r=Math.round(r/(l/100))*(l/100),r=e?Math.ceil(r/l)*l:Math.floor(r/l)*l),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new N(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new M(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(z(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(j(t),e)},layerPointToLatLng:function(t){var e=j(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(z(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(z(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(D(t))},distance:function(t,e){return this.options.crs.distance(z(t),z(e))},containerPointToLayerPoint:function(t){return j(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return j(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(j(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(t)))},mouseEventToContainerPoint:function(t){return Re(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Jt(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ee(e,"scroll",this._onScroll,this),this._containerId=o(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&dt,ae(t,"leaflet-container"+(bt?" leaflet-touch":"")+(Et?" leaflet-retina":"")+(Q?" leaflet-oldie":"")+(st?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=$t(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pe(this._mapPane,new N(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ae(t.markerPane,"leaflet-zoom-hide"),ae(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){pe(this._mapPane,new N(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var r=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(r||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){pe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[o(this._container)]=this;var e=t?ke:Ee;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),dt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=O((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,a=t.target||t.srcElement,s=!1;a;){if((n=this._targets[o(a)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(i&&!Ue(a,t))break;if(r.push(n),i)break}if(a===this._container)break;a=a.parentNode}return r.length||s||i||!Ue(a,t)||(r=[this]),r},_handleDOMEvent:function(t){if(this._loaded&&!Be(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||me(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,r){if("click"===t.type){var i=e({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,n))).length){var o=r[0];"contextmenu"===n&&o.listens(n,!0)&&je(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<r.length;u++)if(r[u].fire(n,a,!0),a.originalEvent._stopped||!1===r[u].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return de(this._mapPane)||new N(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return R([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new M(r.subtract(i),r.add(i)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(r.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new M(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=R(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new N(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=dt?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){se(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=te("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=Zt,n=this._proxy.style[e];fe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ee(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();fe(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(O((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ae(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&se(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),O((function(){this._moveEnd(!0)}),this))}}),He=S.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return ae(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ee(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),We=function(t){return new He(t)};Ge.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=te("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=te("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ee(this._controlCorners[t]);ee(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Xe=He.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return He.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ae(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ae(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):se(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return se(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=te("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Le(e),Pe(e);var r=this._section=te("section",t+"-list");n&&(this._map.on("click",this.collapse,this),tt||Ee(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var i=this._layersLink=te("a",t+"-toggle",e);i.href="#",i.title="Layers",bt?(Ee(i,"click",Me),Ee(i,"click",this.expand,this)):Ee(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=te("div",t+"-base",r),this._separator=te("div",t+"-separator",r),this._overlaysList=te("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ne(this._baseLayersList),ne(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+o(this),r),this._layerControlInputs.push(e),e.layerId=o(t.layer),Ee(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var a=document.createElement("div");return n.appendChild(a),a.appendChild(e),a.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Ye=He.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=te("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=te("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Le(o),Ee(o,"click",Me),Ee(o,"click",i,this),Ee(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";se(this._zoomInButton,e),se(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ae(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ae(this._zoomInButton,e)}});Ge.mergeOptions({zoomControl:!0}),Ge.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new Ye,this.addControl(this.zoomControl))}));var Ze=He.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=te("div","leaflet-control-scale"),n=this.options;return this._addScales(n,"leaflet-control-scale-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=te("div",e,n)),t.imperial&&(this._iScale=te("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),Ke=He.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=te("div","leaflet-control-attribution"),Le(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ge.mergeOptions({attributionControl:!0}),Ge.addInitHook((function(){this.options.attributionControl&&(new Ke).addTo(this)})),He.Layers=Xe,He.Zoom=Ye,He.Scale=Ze,He.Attribution=Ke,We.layers=function(t,e,n){return new Xe(t,e,n)},We.zoom=function(t){return new Ye(t)},We.scale=function(t){return new Ze(t)},We.attribution=function(t){return new Ke(t)};var Qe=S.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qe.addTo=function(t,e){return t.addHandler(e,this),this};var Je,$e={Events:C},tn=bt?"touchstart mousedown":"mousedown",en={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},nn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},rn=T.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ee(this._dragStartTarget,tn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rn._dragging===this&&this.finishDrag(),ke(this._dragStartTarget,tn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!oe(this._element,"leaflet-zoom-anim")&&!(rn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(rn._dragging=this,this._preventOutline&&me(this._element),ve(),Ut(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=be(this._element);this._startPoint=new N(e.clientX,e.clientY),this._parentScale=we(n),Ee(document,nn[t.type],this._onMove,this),Ee(document,en[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new N(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,je(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=de(this._element).subtract(n),ae(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ae(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,k(this._animRequest),this._lastEvent=t,this._animRequest=O(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),pe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in se(document.body,"leaflet-dragging"),this._lastTarget&&(se(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nn)ke(document,nn[t],this._onMove,this),ke(document,en[t],this._onUp,this);ye(),Vt(),this._moved&&this._moving&&(k(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,rn._dragging=!1}});function on(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=function(t,e){var n=t.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,function t(e,n,r,i,o){var a,s,u,c=0;for(s=i+1;s<=o-1;s++)(u=hn(e[s],e[i],e[o],!0))>c&&(a=s,c=u);c>r&&(n[a]=1,t(e,n,r,i,a),t(e,n,r,a,o))}(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}(t=function(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)ln(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<o-1&&n.push(t[o-1]),n}(t,n),n)}function an(t,e,n){return Math.sqrt(hn(t,e,n,!0))}function sn(t,e,n,r,i){var o,a,s,u=r?Je:cn(t,n),c=cn(e,n);for(Je=c;;){if(!(u|c))return[t,e];if(u&c)return!1;s=cn(a=un(t,e,o=u||c,n,i),n),o===u?(t=a,u=s):(e=a,c=s)}}function un(t,e,n,r,i){var o,a,s=e.x-t.x,u=e.y-t.y,c=r.min,l=r.max;return 8&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):4&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):2&n?(o=l.x,a=t.y+u*(l.x-t.x)/s):1&n&&(o=c.x,a=t.y+u*(c.x-t.x)/s),new N(o,a,i)}function cn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function ln(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function hn(t,e,n,r){var i,o=e.x,a=e.y,s=n.x-o,u=n.y-a,c=s*s+u*u;return c>0&&((i=((t.x-o)*s+(t.y-a)*u)/c)>1?(o=n.x,a=n.y):i>0&&(o+=s*i,a+=u*i)),s=t.x-o,u=t.y-a,r?s*s+u*u:new N(o,a)}function fn(t){return!v(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function pn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),fn(t)}var dn={simplify:on,pointToSegmentDistance:an,closestPointOnSegment:function(t,e,n){return hn(t,e,n)},clipSegment:sn,_getEdgeIntersection:un,_getBitCode:cn,_sqClosestPointOnSegment:hn,isFlat:fn,_flat:pn};function gn(t,e,n){var r,i,o,a,s,u,c,l,h,f=[1,4,2,8];for(i=0,c=t.length;i<c;i++)t[i]._code=cn(t[i],e);for(a=0;a<4;a++){for(l=f[a],r=[],i=0,o=(c=t.length)-1;i<c;o=i++)s=t[i],u=t[o],s._code&l?u._code&l||((h=un(u,s,l,e,n))._code=cn(h,e),r.push(h)):(u._code&l&&((h=un(u,s,l,e,n))._code=cn(h,e),r.push(h)),r.push(s));t=r}return t}var vn={clipPolygon:gn},yn={project:function(t){return new N(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new M([-180,-90],[180,90])},mn={R:6378137,R_MINOR:6356752.314245179,bounds:new M([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),a=o*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/Math.pow((1-a)/(1+a),o/2);return r=-n*Math.log(Math.max(s,1e-10)),new N(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),a=Math.exp(-t.y/r),s=Math.PI/2-2*Math.atan(a),u=0,c=.1;u<15&&Math.abs(c)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*n,t.x*n/r)}},_n={LonLat:yn,Mercator:mn,SphericalMercator:V},bn=e({},U,{code:"EPSG:3395",projection:mn,transformation:function(){var t=.5/(Math.PI*mn.R);return G(t,.5,-t,.5)}()}),wn=e({},U,{code:"EPSG:4326",projection:yn,transformation:G(1/180,1,-1/180,.5)}),xn=e({},B,{projection:yn,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});B.Earth=U,B.EPSG3395=bn,B.EPSG3857=H,B.EPSG900913=W,B.EPSG4326=wn,B.Simple=xn;var En=T.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Ge.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=o(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=o(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?v(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var On=En.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"===typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o(t)}}),kn=On.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),On.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),On.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new A;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),In=S.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"===typeof r&&(r=[r,r]);var i=j(r),o=j("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Et&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),Sn=In.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Sn.imagePath||(Sn.imagePath=this._detectIconPath()),(this.options.imagePath||Sn.imagePath)+In.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=te("div","leaflet-default-icon-path",document.body),e=$t(t,"background-image")||$t(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Cn=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new rn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ae(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&se(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=de(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=R(a.min._subtract(s).add(i),a.max._subtract(s).subtract(i));if(!u.contains(o)){var c=j((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(r);n.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),pe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=O(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=de(e._icon),i=e._map.layerPointToLatLng(r);n&&pe(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Tn=En.extend({options:{icon:new Sn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=z(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),ae(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(ae(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ee(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ee(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&pe(this._icon,t),this._shadow&&pe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ae(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&le(this._icon,t),this._shadow&&le(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Nn=En.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Pn=Nn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=z(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=z(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Nn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new M(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Ln=Pn.extend({initialize:function(t,n,r){if("number"===typeof n&&(n=e({},r,{radius:n})),f(this,n),this._latlng=z(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new A(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Nn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===U.distance){var i=Math.PI/180,o=this._mRadius/U.R/i,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),c=n.unproject(u).lat,l=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(c*i))/(Math.cos(e*i)*Math.cos(c*i)))/i;(isNaN(l)||0===l)&&(l=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(l)?0:u.x-n.project([c,t-l]).x,this._radiusY=u.y-a.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}}),jn=Nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=hn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],c=1,l=u.length;c<l;c++){var h=o(t,e=u[c-1],n=u[c],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,r=0;t<u-1;t++)if(i=s[t],o=s[t+1],(r+=n=i.distanceTo(o))>e)return a=(r-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-i.x),o.y-a*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=z(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new A,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return fn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=fn(t),r=0,i=t.length;r<i;r++)n?(e[r]=z(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new M;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new N(t,t);this._pxBounds=new M([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof F,a=t.length;if(o){for(i=[],r=0;r<a;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<a;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,a,s,u=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=sn(s[n],s[n+1],t,n,!0))&&(u[r]=u[r]||[],u[r].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[r].push(a[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=on(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(a=(s=this._parts[n]).length)-1;r<a;i=r++)if((e||0!==r)&&an(t,s[i],s[r])<=u)return!0;return!1}});jn._flat=pn;var Mn=jn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,a,s,u,c=this._rings[0],l=c.length;if(!l)return null;for(o=a=s=0,t=0,e=l-1;t<l;e=t++)n=c[t],r=c[e],i=n.y*r.x-r.y*n.x,a+=(n.x+r.x)*i,s+=(n.y+r.y)*i,o+=3*i;return u=0===o?c[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=jn.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){jn.prototype._setLatLngs.call(this,t),fn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return fn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new N(e,e);if(t=new M(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=gn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,a,s,u,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,s=this._parts.length;i<s;i++)for(o=0,a=(u=(e=this._parts[i]).length)-1;o<u;a=o++)n=e[o],r=e[a],n.y>t.y!==r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(c=!c);return c||jn.prototype._containsPoint.call(this,t,!0)}}),Rn=kn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=v(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=An(t,o);return a?(a.feature=qn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function An(t,e){var n,r,i,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],c=e&&e.pointToLayer,l=e&&e.coordsToLatLng||Fn;if(!s&&!a)return null;switch(a.type){case"Point":return Dn(c,t,n=l(s),e);case"MultiPoint":for(i=0,o=s.length;i<o;i++)n=l(s[i]),u.push(Dn(c,t,n,e));return new kn(u);case"LineString":case"MultiLineString":return r=zn(s,"LineString"===a.type?0:1,l),new jn(r,e);case"Polygon":case"MultiPolygon":return r=zn(s,"Polygon"===a.type?1:2,l),new Mn(r,e);case"GeometryCollection":for(i=0,o=a.geometries.length;i<o;i++){var h=An({geometry:a.geometries[i],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new kn(u);default:throw new Error("Invalid GeoJSON object.")}}function Dn(t,e,n,r){return t?t(e,n):new Tn(n,r&&r.markersInheritOptions&&r)}function Fn(t){return new F(t[1],t[0],t[2])}function zn(t,e,n){for(var r,i=[],o=0,a=t.length;o<a;o++)r=e?zn(t[o],e-1,n):(n||Fn)(t[o]),i.push(r);return i}function Bn(t,e){return e="number"===typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function Un(t,e,n,r){for(var i=[],o=0,a=t.length;o<a;o++)i.push(e?Un(t[o],e-1,n,r):Bn(t[o],r));return!e&&n&&i.push(i[0]),i}function Vn(t,n){return t.feature?e({},t.feature,{geometry:n}):qn(n)}function qn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Gn={toGeoJSON:function(t){return Vn(this,{type:"Point",coordinates:Bn(this.getLatLng(),t)})}};function Hn(t,e){return new Rn(t,e)}Tn.include(Gn),Ln.include(Gn),Pn.include(Gn),jn.include({toGeoJSON:function(t){var e=!fn(this._latlngs);return Vn(this,{type:(e?"Multi":"")+"LineString",coordinates:Un(this._latlngs,e?1:0,!1,t)})}}),Mn.include({toGeoJSON:function(t){var e=!fn(this._latlngs),n=e&&!fn(this._latlngs[0]),r=Un(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),Vn(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),On.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Vn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=qn(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?Vn(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var Wn=Hn,Xn=En.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=D(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ae(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ee(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&re(this._image),this},bringToBack:function(){return this._map&&ie(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=D(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:te("img");ae(e,"leaflet-image-layer"),this._zoomAnimated&&ae(e,"leaflet-zoom-animated"),this.options.className&&ae(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;fe(this._image,n,e)},_reset:function(){var t=this._image,e=new M(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();pe(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){le(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Yn=Xn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:te("video");if(ae(e,"leaflet-image-layer"),this._zoomAnimated&&ae(e,"leaflet-zoom-animated"),this.options.className&&ae(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=te("source");s.src=this._url[a],e.appendChild(s)}}}}),Zn=Xn.extend({_initImage:function(){var t=this._image=this._url;ae(t,"leaflet-image-layer"),this._zoomAnimated&&ae(t,"leaflet-zoom-animated"),this.options.className&&ae(t,this.options.className),t.onselectstart=u,t.onmousemove=u}}),Kn=En.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){f(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&le(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&le(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(le(this._container,0),this._removeTimeout=setTimeout(r(ee,void 0,this._container),200)):ee(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=z(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&re(this._container),this},bringToBack:function(){return this._map&&ie(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof En||(n=e,e=t),e instanceof kn)for(var r in t._layers){e=t._layers[r];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=j(this.options.offset),n=this._getAnchor();this._zoomAnimated?pe(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}}),Qn=Kn.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Kn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Nn||this._source.on("preclick",Ne))},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Nn||this._source.off("preclick",Ne))},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=te("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=te("div",t+"-content-wrapper",e);if(this._contentNode=te("div",t+"-content",n),Le(e),Pe(this._contentNode),Ee(e,"contextmenu",Ne),this._tipContainer=te("div",t+"-tip-container",e),this._tip=te("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=te("a",t+"-close-button",e);r.href="#close",r.innerHTML="&#215;",Ee(r,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight;i&&r>i?(e.height=i+"px",ae(t,"leaflet-popup-scrolled")):se(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();pe(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt($t(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,r=this._containerWidth,i=new N(this._containerLeft,-n-this._containerBottom);i._add(de(this._container));var o=t.layerPointToContainerPoint(i),a=j(this.options.autoPanPadding),s=j(this.options.autoPanPaddingTopLeft||a),u=j(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),l=0,h=0;o.x+r+u.x>c.x&&(l=o.x+r-c.x+u.x),o.x-l-s.x<0&&(l=o.x-s.x),o.y+n+u.y>c.y&&(h=o.y+n-c.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(l||h)&&t.fire("autopanstart").panBy([l,h])}},_onCloseButtonClick:function(t){this._close(),Me(t)},_getAnchor:function(){return j(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ge.mergeOptions({closePopupOnClick:!0}),Ge.include({openPopup:function(t,e,n){return t instanceof Qn||(t=new Qn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),En.include({bindPopup:function(t,e){return t instanceof Qn?(f(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Qn(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Me(t),e instanceof Nn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Jn=Kn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Kn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Kn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Kn.prototype.getEvents.call(this);return bt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=te("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),a=r.layerPointToContainerPoint(t),s=this.options.direction,u=i.offsetWidth,c=i.offsetHeight,l=j(this.options.offset),h=this._getAnchor();"top"===s?(e=u/2,n=c):"bottom"===s?(e=u/2,n=0):"center"===s?(e=u/2,n=c/2):"right"===s?(e=0,n=c/2):"left"===s?(e=u,n=c/2):a.x<o.x?(s="right",e=0,n=c/2):(s="left",e=u+2*(l.x+h.x),n=c/2),t=t.subtract(j(e,n,!0)).add(l).add(h),se(i,"leaflet-tooltip-right"),se(i,"leaflet-tooltip-left"),se(i,"leaflet-tooltip-top"),se(i,"leaflet-tooltip-bottom"),ae(i,"leaflet-tooltip-"+s),pe(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&le(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return j(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ge.include({openTooltip:function(t,e,n){return t instanceof Jn||(t=new Jn(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),En.include({bindTooltip:function(t,e){return t instanceof Jn?(f(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Jn(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),bt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ae(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(se(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var $n=In.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(ne(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=j(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});In.Default=Sn;var tr=En.extend({options:{tileSize:256,opacity:1,updateWhenIdle:gt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ee(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(re(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ie(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof N?t:new N(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Q){le(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);le(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=te("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ee(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=te("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ee(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new N(+i,+o);s.z=+a;var u=this._tileCoordsToKey(s),c=this._tiles[u];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>r&&this._retainParent(i,o,a,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var a=new N(i,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=Math.round(e);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();dt?fe(t.el,i,r):pe(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new M(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),a=[],s=this.options.keepBuffer,u=new M(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var l=this._tiles[c].coords;l.z===this._tileZoom&&u.contains(new N(l.x,l.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var f=i.min.x;f<=i.max.x;f++){var p=new N(f,h);if(p.z=this._tileZoom,this._isValidTile(p)){var d=this._tiles[this._tileCoordsToKey(p)];d?d.current=!0:a.push(p)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(f=0;f<a.length;f++)this._addTile(a[f],g);this._level.el.appendChild(g)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return D(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new A(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new N(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ee(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ae(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,Q&&this.options.opacity<1&&le(t,this.options.opacity),tt&&!et&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&O(r(this._tileReady,this,t,null,o)),pe(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(le(n.el,0),k(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(ae(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Q||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new N(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new M(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),er=tr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Et&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),tt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ee(n,"load",r(this._tileOnLoad,this,e,n)),Ee(n,"error",r(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n={r:Et?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(n.y=r),n["-y"]=r}return g(this._url,e(n,this.options))},_tileOnLoad:function(t,e){Q?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,e.complete||(e.src=m,ee(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return rt||e.el.setAttribute("src",m),tr.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==m))return tr.prototype._tileReady.call(this,t,e,n)}});function nr(t,e){return new er(t,e)}var rr=er.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var r=e({},this.defaultWmsParams);for(var i in n)i in this.options||(r[i]=n[i]);var o=(n=f(this,n)).detectRetina&&Et?2:1,a=this.getTileSize();r.width=a.x*o,r.height=a.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,er.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=R(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,a=(this._wmsVersion>=1.3&&this._crs===wn?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),s=er.prototype.getTileUrl.call(this,t);return s+p(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});er.WMS=rr,nr.wms=function(t,e){return new rr(t,e)};var ir=En.extend({options:{padding:.1,tolerance:0},initialize:function(t){f(this,t),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ae(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=de(this._container),i=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=i.multiplyBy(-n).add(r).add(i).subtract(a);dt?fe(this._container,s,n):pe(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new M(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),or=ir.extend({getEvents:function(){var t=ir.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ir.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ee(t,"mousemove",this._onMouseMove,this),Ee(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,ee(this._container),ke(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){ir.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=Et?2:1;pe(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Et&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){ir.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[o(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new M,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(r=0,i=a[n].length;r<i;r++)o=a[n][r],u[r?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(ze(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(se(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(ae(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ar(t){return kt?new or(t):null}var sr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),ur={_initContainer:function(){this._container=te("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ir.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=sr("shape");ae(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=sr("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ee(e),t.removeInteractiveTarget(e),delete this._layers[o(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=sr("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=v(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=sr("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){re(t._container)},_bringToBack:function(t){ie(t._container)}},cr=St?sr:X,lr=ir.extend({getEvents:function(){var t=ir.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=cr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=cr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ee(this._container),ke(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){ir.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),pe(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=cr("path");t.options.className&&ae(e,t.options.className),t.options.interactive&&ae(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ee(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Y(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){re(t._path)},_bringToBack:function(t){ie(t._path)}});function hr(t){return It||St?new lr(t):null}St&&lr.include(ur),Ge.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ar(t)||hr(t)}});var fr=Mn.extend({initialize:function(t,e){Mn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=D(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});lr.create=cr,lr.pointsToPath=Y,Rn.geometryToLayer=An,Rn.coordsToLatLng=Fn,Rn.coordsToLatLngs=zn,Rn.latLngToCoords=Bn,Rn.latLngsToCoords=Un,Rn.getFeature=Vn,Rn.asFeature=qn,Ge.mergeOptions({boxZoom:!0});var pr=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ee(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Ut(),ve(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ee(document,{contextmenu:Me,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=te("div","leaflet-zoom-box",this._container),ae(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new M(this._point,this._startPoint),n=e.getSize();pe(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ee(this._box),se(this._container,"leaflet-crosshair")),Vt(),ye(),ke(document,{contextmenu:Me,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new A(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ge.addInitHook("addHandler","boxZoom",pr),Ge.mergeOptions({doubleClickZoom:!0});var dr=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Ge.addInitHook("addHandler","doubleClickZoom",dr),Ge.mergeOptions({dragging:!0,inertia:!et,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gr=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new rn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ae(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){se(this._map._container,"leaflet-grab"),se(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=D(this._map.options.maxBounds);this._offsetLimit=R(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,a=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=i.multiplyBy(a/o),u=s.distanceTo([0,0]),c=Math.min(n.inertiaMaxSpeed,u),l=s.multiplyBy(c/u),h=c/(n.inertiaDeceleration*a),f=l.multiplyBy(-h/2).round();f.x||f.y?(f=e._limitOffset(f,e.options.maxBounds),O((function(){e.panBy(f,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Ge.addInitHook("addHandler","dragging",gr),Ge.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vr=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ee(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ke(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=j(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Me(t)}}});Ge.addInitHook("addHandler","keyboard",vr),Ge.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yr=Qe.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=De(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Me(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ge.addInitHook("addHandler","scrollWheelZoom",yr),Ge.mergeOptions({tap:!0,tapTolerance:15});var mr=Qe.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(je(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new N(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&ae(n,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ee(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),ke(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&se(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new N(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!bt||_t&&!st||Ge.addInitHook("addHandler","tap",mr),Ge.mergeOptions({touchZoom:bt&&!et,bounceAtZoomLimits:!0});var _r=Qe.extend({addHooks:function(){ae(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){se(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend",this._onTouchEnd,this),je(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=O(s,this,!0),je(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ge.addInitHook("addHandler","touchZoom",_r),Ge.BoxZoom=pr,Ge.DoubleClickZoom=dr,Ge.Drag=gr,Ge.Keyboard=vr,Ge.ScrollWheelZoom=yr,Ge.Tap=mr,Ge.TouchZoom=_r,t.version="1.7.1",t.Control=He,t.control=We,t.Browser=Tt,t.Evented=T,t.Mixin=$e,t.Util=I,t.Class=S,t.Handler=Qe,t.extend=e,t.bind=r,t.stamp=o,t.setOptions=f,t.DomEvent=Ve,t.DomUtil=xe,t.PosAnimation=qe,t.Draggable=rn,t.LineUtil=dn,t.PolyUtil=vn,t.Point=N,t.point=j,t.Bounds=M,t.bounds=R,t.Transformation=q,t.transformation=G,t.Projection=_n,t.LatLng=F,t.latLng=z,t.LatLngBounds=A,t.latLngBounds=D,t.CRS=B,t.GeoJSON=Rn,t.geoJSON=Hn,t.geoJson=Wn,t.Layer=En,t.LayerGroup=On,t.layerGroup=function(t,e){return new On(t,e)},t.FeatureGroup=kn,t.featureGroup=function(t,e){return new kn(t,e)},t.ImageOverlay=Xn,t.imageOverlay=function(t,e,n){return new Xn(t,e,n)},t.VideoOverlay=Yn,t.videoOverlay=function(t,e,n){return new Yn(t,e,n)},t.SVGOverlay=Zn,t.svgOverlay=function(t,e,n){return new Zn(t,e,n)},t.DivOverlay=Kn,t.Popup=Qn,t.popup=function(t,e){return new Qn(t,e)},t.Tooltip=Jn,t.tooltip=function(t,e){return new Jn(t,e)},t.Icon=In,t.icon=function(t){return new In(t)},t.DivIcon=$n,t.divIcon=function(t){return new $n(t)},t.Marker=Tn,t.marker=function(t,e){return new Tn(t,e)},t.TileLayer=er,t.tileLayer=nr,t.GridLayer=tr,t.gridLayer=function(t){return new tr(t)},t.SVG=lr,t.svg=hr,t.Renderer=ir,t.Canvas=or,t.canvas=ar,t.Path=Nn,t.CircleMarker=Pn,t.circleMarker=function(t,e){return new Pn(t,e)},t.Circle=Ln,t.circle=function(t,e,n){return new Ln(t,e,n)},t.Polyline=jn,t.polyline=function(t,e){return new jn(t,e)},t.Polygon=Mn,t.polygon=function(t,e){return new Mn(t,e)},t.Rectangle=fr,t.rectangle=function(t,e){return new fr(t,e)},t.Map=Ge,t.map=function(t,e){return new Ge(t,e)};var br=window.L;t.noConflict=function(){return window.L=br,this},window.L=t}(e)},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(80)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1),i=n(37);function o(t){var e=Object(i.a)(t);return Object(r.useCallback)((function(){return e.current&&e.current.apply(e,arguments)}),[e])}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n(1),i=1,o=Object(r.createContext)(null),a=o.Provider;function s(){var t=Object(r.useContext)(o);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}},function(t,e,n){"use strict";var r=n(69);n.d(e,"a",(function(){return r.a})),n.d(e,"b",(function(){return r.b})),n.d(e,"c",(function(){return r.c})),n.d(e,"d",(function(){return r.d})),n.d(e,"e",(function(){return r.e})),n.d(e,"f",(function(){return r.f}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return d}));var r=n(0),i=n.n(r),o=n(21),a=n(3),s=n(13),u=n(9),c=n(2),l=n(4),h=n(8),f=function(){function t(e,n,r){Object(c.a)(this,t),this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Object(l.a)(t,[{key:"setInstantiationMode",value:function(t){return this.instantiationMode=t,this}},{key:"setMultipleInstances",value:function(t){return this.multipleInstances=t,this}},{key:"setServiceProps",value:function(t){return this.serviceProps=t,this}},{key:"setInstanceCreatedCallback",value:function(t){return this.onInstanceCreated=t,this}}]),t}(),p=function(){function t(e,n){Object(c.a)(this,t),this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Object(l.a)(t,[{key:"get",value:function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new h.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise}},{key:"getImmediate",value:function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(l){}var e,n=Object(u.a)(this.instancesDeferred.entries());try{for(n.s();!(e=n.n()).done;){var r=Object(s.a)(e.value,2),i=r[0],o=r[1],a=this.normalizeInstanceIdentifier(i);try{var c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch(l){}}}catch(h){n.e(h)}finally{n.f()}}}},{key:"clearInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}},{key:"delete",value:function(){var t=Object(a.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Array.from(this.instances.values()),t.next=3,Promise.all([].concat(Object(o.a)(e.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()}))),Object(o.a)(e.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instances.has(t)}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.instancesOptions.get(t)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.options,n=void 0===e?{}:e,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),a=Object(u.a)(this.instancesDeferred.entries());try{for(a.s();!(i=a.n()).done;){var c=Object(s.a)(i.value,2),l=c[0],h=c[1],f=this.normalizeInstanceIdentifier(l);r===f&&h.resolve(o)}}catch(p){a.e(p)}finally{a.f()}return o}},{key:"onInit",value:function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}}},{key:"invokeOnInitCallbacks",value:function(t,e){var n=this.onInitCallbacks.get(e);if(n){var r,i=Object(u.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(t,e)}catch(a){}}}catch(s){i.e(s)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[DEFAULT]";return this.component?this.component.multipleInstances?t:"[DEFAULT]":t}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();var d=function(){function t(e){Object(c.a)(this,t),this.name=e,this.providers=new Map}return Object(l.a)(t,[{key:"addComponent",value:function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}},{key:"addOrOverwriteComponent",value:function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}},{key:"getProvider",value:function(t){if(this.providers.has(t))return this.providers.get(t);var e=new p(t,this);return this.providers.set(t,e),e}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}()},function(t,e,n){"use strict";n.d(e,"b",(function(){return o}));var r=n(1),i=r.createContext(null),o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=t?String(t):e||null};e.a=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return ye})),n.d(e,"b",(function(){return Le})),n.d(e,"c",(function(){return cr})),n.d(e,"d",(function(){return Me})),n.d(e,"e",(function(){return On})),n.d(e,"f",(function(){return Re}));var r=n(22),i=n(17),o=n(39),a=n(11),s=n(12),u=n(9),c=n(0),l=n.n(c),h=n(13),f=n(3),p=n(2),d=n(4),g=n(21),v=n(5),y=n(8),m=n(18);function _(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;var b,w=n(24),x=n(34);function E(){return Object(v.a)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var O=E,k=new y.b("auth","Firebase",E()),I=new w.b("@firebase/auth");function S(t){if(I.logLevel<=w.a.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];I.error.apply(I,["Auth (".concat(m.a,"): ").concat(t)].concat(n))}}function C(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw L.apply(void 0,[t].concat(n))}function T(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return L.apply(void 0,[t].concat(n))}function N(t,e,n){var r=Object.assign(Object.assign({},O()),Object(v.a)({},e,n));return new y.b("auth","Firebase",r).create(e,{appName:t.name})}function P(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&C(t,"argument-error"),N(t,"argument-error","Type of ".concat(e.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function L(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("string"!==typeof t){var i,o=n[0],a=Object(g.a)(n.slice(1));return a[0]&&(a[0].appName=t.name),(i=t._errorFactory).create.apply(i,[o].concat(Object(g.a)(a)))}return k.create.apply(k,[t].concat(n))}function j(t,e){if(!t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw L.apply(void 0,[e].concat(r))}}function M(t){var e="INTERNAL ASSERTION FAILED: "+t;throw S(e),new Error(e)}function R(t,e){t||M(e)}var A=new Map;function D(t){R(t instanceof Function,"Expected a class definition");var e=A.get(t);return e?(R(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A.set(t,e),e)}function F(t,e){var n=Object(m.b)(t,"auth");if(n.isInitialized()){var r=n.getImmediate(),i=n.getOptions();if(Object(y.g)(i,null!==e&&void 0!==e?e:{}))return r;C(r,"already-initialized")}return n.initialize({options:e})}function z(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function B(){return"http:"===U()||"https:"===U()}function U(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}var V=function(){function t(e,n){Object(p.a)(this,t),this.shortDelay=e,this.longDelay=n,R(n>e,"Short delay should be less than long delay!"),this.isMobile=Object(y.p)()||Object(y.q)()}return Object(d.a)(t,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(B()||Object(y.k)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),t}();function q(t,e){R(t.emulator,"Emulator should always be set here");var n=t.emulator.url;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}var G=function(){function t(){Object(p.a)(this,t)}return Object(d.a)(t,null,[{key:"initialize",value:function(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void M("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void M("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void M("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),t}(),H=(b={},Object(v.a)(b,"CREDENTIAL_MISMATCH","custom-token-mismatch"),Object(v.a)(b,"MISSING_CUSTOM_TOKEN","internal-error"),Object(v.a)(b,"INVALID_IDENTIFIER","invalid-email"),Object(v.a)(b,"MISSING_CONTINUE_URI","internal-error"),Object(v.a)(b,"INVALID_PASSWORD","wrong-password"),Object(v.a)(b,"MISSING_PASSWORD","internal-error"),Object(v.a)(b,"EMAIL_EXISTS","email-already-in-use"),Object(v.a)(b,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Object(v.a)(b,"INVALID_IDP_RESPONSE","invalid-credential"),Object(v.a)(b,"INVALID_PENDING_TOKEN","invalid-credential"),Object(v.a)(b,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Object(v.a)(b,"MISSING_REQ_TYPE","internal-error"),Object(v.a)(b,"EMAIL_NOT_FOUND","user-not-found"),Object(v.a)(b,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Object(v.a)(b,"EXPIRED_OOB_CODE","expired-action-code"),Object(v.a)(b,"INVALID_OOB_CODE","invalid-action-code"),Object(v.a)(b,"MISSING_OOB_CODE","internal-error"),Object(v.a)(b,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Object(v.a)(b,"INVALID_ID_TOKEN","invalid-user-token"),Object(v.a)(b,"TOKEN_EXPIRED","user-token-expired"),Object(v.a)(b,"USER_NOT_FOUND","user-token-expired"),Object(v.a)(b,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Object(v.a)(b,"INVALID_CODE","invalid-verification-code"),Object(v.a)(b,"INVALID_SESSION_INFO","invalid-verification-id"),Object(v.a)(b,"INVALID_TEMPORARY_PROOF","invalid-credential"),Object(v.a)(b,"MISSING_SESSION_INFO","missing-verification-id"),Object(v.a)(b,"SESSION_EXPIRED","code-expired"),Object(v.a)(b,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Object(v.a)(b,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Object(v.a)(b,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Object(v.a)(b,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Object(v.a)(b,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Object(v.a)(b,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Object(v.a)(b,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Object(v.a)(b,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Object(v.a)(b,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Object(v.a)(b,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Object(v.a)(b,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),b),W=new V(3e4,6e4);function X(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Y(t,e,n,r){return Z.apply(this,arguments)}function Z(){return(Z=Object(f.a)(l.a.mark((function t(e,n,r,i){var o,a=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>4&&void 0!==a[4]?a[4]:{},t.abrupt("return",K(e,o,(function(){var t={},o={};i&&("GET"===n?o=i:t={body:JSON.stringify(i)});var a=Object(y.t)(Object.assign({key:e.config.apiKey},o)).slice(1),s=new(G.headers());return s.set("Content-Type","application/json"),s.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&s.set("X-Firebase-Locale",e.languageCode),G.fetch()(tt(e,e.config.apiHost,r,a),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},t))})));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t,e,n){return Q.apply(this,arguments)}function Q(){return(Q=Object(f.a)(l.a.mark((function t(e,n,r){var i,o,a,s,u,c,f,p,d,g;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e._canInitEmulator=!1,i=Object.assign(Object.assign({},H),n),t.prev=2,o=new et(e),t.next=6,Promise.race([r(),o.promise]);case 6:return a=t.sent,o.clearNetworkTimeout(),t.next=10,a.json();case 10:if(!("needConfirmation"in(s=t.sent))){t.next=13;break}throw nt(e,"account-exists-with-different-credential",s);case 13:if(!a.ok||"errorMessage"in s){t.next=17;break}return t.abrupt("return",s);case 17:if(u=a.ok?s.errorMessage:s.error.message,c=u.split(" : "),f=Object(h.a)(c,2),p=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==p){t.next=23;break}throw nt(e,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==p){t.next=25;break}throw nt(e,"email-already-in-use",s);case 25:if(g=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-"),!d){t.next=30;break}throw N(e,g,d);case 30:C(e,g);case 31:t.next=38;break;case 33:if(t.prev=33,t.t0=t.catch(2),!(t.t0 instanceof y.c)){t.next=37;break}throw t.t0;case 37:C(e,"network-request-failed");case 38:case"end":return t.stop()}}),t,null,[[2,33]])})))).apply(this,arguments)}function J(t,e,n,r){return $.apply(this,arguments)}function $(){return($=Object(f.a)(l.a.mark((function t(e,n,r,i){var o,a,s=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},t.next=3,Y(e,n,r,i,o);case 3:return"mfaPendingCredential"in(a=t.sent)&&C(e,"multi-factor-auth-required",{_serverResponse:a}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(t,e,n,r){var i="".concat(e).concat(n,"?").concat(r);return t.config.emulator?q(t.config,i):"".concat(t.config.apiScheme,"://").concat(i)}var et=function(){function t(e){var n=this;Object(p.a)(this,t),this.auth=e,this.timer=null,this.promise=new Promise((function(t,e){n.timer=setTimeout((function(){return e(T(n.auth,"timeout"))}),W.get())}))}return Object(d.a)(t,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),t}();function nt(t,e,n){var r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=T(t,e,r);return i.customData._tokenResponse=n,i}function rt(t,e){return it.apply(this,arguments)}function it(){return(it=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Y(e,"POST","/v1/accounts:delete",n));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ot(t,e){return at.apply(this,arguments)}function at(){return(at=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Y(e,"POST","/v1/accounts:lookup",n));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(t){if(t)try{var e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(n){}}function ut(){return(ut=Object(f.a)(l.a.mark((function t(e){var n,r,i,o,a,s,u=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=Object(y.i)(e),t.next=4,r.getIdToken(n);case 4:return i=t.sent,j((o=lt(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),a="object"===typeof o.firebase?o.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider,t.abrupt("return",{claims:o,token:i,authTime:st(ct(o.auth_time)),issuedAtTime:st(ct(o.iat)),expirationTime:st(ct(o.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ct(t){return 1e3*Number(t)}function lt(t){var e=t.split("."),n=Object(h.a)(e,3),r=n[0],i=n[1],o=n[2];if(void 0===r||void 0===i||void 0===o)return S("JWT malformed, contained fewer than 3 sections"),null;try{var a=Object(y.d)(i);return a?JSON.parse(a):(S("Failed to decode base64 JWT payload"),null)}catch(s){return S("Caught error parsing JWT payload as JSON",s),null}}function ht(t,e){return ft.apply(this,arguments)}function ft(){return(ft=Object(f.a)(l.a.mark((function t(e,n){var r=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){t.next=3;break}return t.abrupt("return",n);case 3:return t.prev=3,t.next=6,n;case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(3),!(t.t0 instanceof y.c&&pt(t.t0))){t.next=15;break}if(e.auth.currentUser!==e){t.next=15;break}return t.next=15,e.auth.signOut();case 15:throw t.t0;case 16:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function pt(t){var e=t.code;return e==="auth/".concat("user-disabled")||e==="auth/".concat("user-token-expired")}var dt=function(){function t(e){Object(p.a)(this,t),this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Object(d.a)(t,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(t){var e;if(t){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout(Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.iteration();case 2:case"end":return e.stop()}}),e)}))),n)}}},{key:"iteration",value:function(){var t=Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.user.getIdToken(!0);case 3:t.next=9;break;case 5:return t.prev=5,t.t0=t.catch(0),t.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),t.abrupt("return");case 9:this.schedule();case 10:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(){return t.apply(this,arguments)}}()}]),t}(),gt=function(){function t(e,n){Object(p.a)(this,t),this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}return Object(d.a)(t,[{key:"_initializeTime",value:function(){this.lastSignInTime=st(this.lastLoginAt),this.creationTime=st(this.createdAt)}},{key:"_copy",value:function(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),t}();function vt(t){return yt.apply(this,arguments)}function yt(){return(yt=Object(f.a)(l.a.mark((function t(e){var n,r,i,o,a,s,u,c,h,f,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.auth,t.next=3,e.getIdToken();case 3:return i=t.sent,t.next=6,ht(e,ot(r,{idToken:i}));case 6:j(null===(o=t.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),a=o.users[0],e._notifyReloadListener(a),s=(null===(n=a.providerUserInfo)||void 0===n?void 0:n.length)?bt(a.providerUserInfo):[],u=_t(e.providerData,s),c=e.isAnonymous,h=!(e.email&&a.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&h,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new gt(a.createdAt,a.lastLoginAt),isAnonymous:f},Object.assign(e,p);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(){return(mt=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(y.i)(e),t.next=3,vt(n);case 3:return t.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(t,e){var n=t.filter((function(t){return!e.some((function(e){return e.providerId===t.providerId}))}));return[].concat(Object(g.a)(n),Object(g.a)(e))}function bt(t){return t.map((function(t){var e=t.providerId,n=_(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function wt(t,e){return xt.apply(this,arguments)}function xt(){return(xt=Object(f.a)(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(e,{},(function(){var t=Object(y.t)({grant_type:"refresh_token",refresh_token:n}).slice(1),r=e.config,i=r.tokenApiHost,o=r.apiKey,a=tt(e,i,"/v1/token","key=".concat(o));return G.fetch()(a,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:t})}));case 2:return r=t.sent,t.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Et=function(){function t(){Object(p.a)(this,t),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Object(d.a)(t,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(t){j(t.idToken,"internal-error"),j("undefined"!==typeof t.idToken,"internal-error"),j("undefined"!==typeof t.refreshToken,"internal-error");var e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):function(t){var e=lt(t);return j(e,"internal-error"),j("undefined"!==typeof e.exp,"internal-error"),j("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}},{key:"getToken",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],j(!this.accessToken||this.refreshToken,e,"user-token-expired"),n||!this.accessToken||this.isExpired){t.next=4;break}return t.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){t.next=8;break}return t.next=7,this.refresh(e,this.refreshToken);case 7:return t.abrupt("return",this.accessToken);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n){var r,i,o,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wt(e,n);case 2:r=t.sent,i=r.accessToken,o=r.refreshToken,a=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(a));case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}},{key:"_clone",value:function(){return Object.assign(new t,this.toJSON())}},{key:"_performRefresh",value:function(){return M("not implemented")}}],[{key:"fromJSON",value:function(e,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,a=new t;return r&&(j("string"===typeof r,"internal-error",{appName:e}),a.refreshToken=r),i&&(j("string"===typeof i,"internal-error",{appName:e}),a.accessToken=i),o&&(j("number"===typeof o,"internal-error",{appName:e}),a.expirationTime=o),a}}]),t}();function Ot(t,e){j("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}var kt=function(){function t(e){Object(p.a)(this,t);var n=e.uid,r=e.auth,i=e.stsTokenManager,o=_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.metadata=new gt(o.createdAt||void 0,o.lastLoginAt||void 0)}return Object(d.a)(t,[{key:"getIdToken",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht(this,this.stsTokenManager.getToken(this.auth,e));case 2:if(j(n=t.sent,this.auth,"internal-error"),this.accessToken===n){t.next=9;break}return this.accessToken=n,t.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(t){return function(t){return ut.apply(this,arguments)}(this,t)}},{key:"reload",value:function(){return function(t){return mt.apply(this,arguments)}(this)}},{key:"_assign",value:function(t){this!==t&&(j(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((function(t){return Object.assign({},t)})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}},{key:"_clone",value:function(e){return new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(t){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r,i=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),!n){t.next=6;break}return t.next=6,vt(this);case 6:return t.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getIdToken();case 2:return e=t.sent,t.next=5,ht(this,rt(this.auth,{idToken:e}));case 5:return this.stsTokenManager.clearRefreshToken(),t.abrupt("return",this.auth.signOut());case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(t){return Object.assign({},t)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(e,n){var r,i,o,a,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,p=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,d=null!==(a=n.photoURL)&&void 0!==a?a:void 0,g=null!==(s=n.tenantId)&&void 0!==s?s:void 0,v=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,m=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,_=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,E=n.stsTokenManager;j(_&&E,e,"internal-error");var O=Et.fromJSON(this.name,E);j("string"===typeof _,e,"internal-error"),Ot(h,e.name),Ot(f,e.name),j("boolean"===typeof b,e,"internal-error"),j("boolean"===typeof w,e,"internal-error"),Ot(p,e.name),Ot(d,e.name),Ot(g,e.name),Ot(v,e.name),Ot(y,e.name),Ot(m,e.name);var k=new t({uid:_,auth:e,email:f,emailVerified:b,displayName:h,isAnonymous:w,photoURL:d,phoneNumber:p,tenantId:g,stsTokenManager:O,createdAt:y,lastLoginAt:m});return x&&Array.isArray(x)&&(k.providerData=x.map((function(t){return Object.assign({},t)}))),v&&(k._redirectEventId=v),k}},{key:"_fromIdTokenResponse",value:function(){var e=Object(f.a)(l.a.mark((function e(n,r){var i,o,a,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(o=new Et).updateFromServerResponse(r),a=new t({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),e.next=6,vt(a);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),t}(),It=function(){function t(){Object(p.a)(this,t),this.type="NONE",this.storage={}}return Object(d.a)(t,[{key:"_isAvailable",value:function(){var t=Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"_set",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.storage[e]=n;case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_get",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.storage[e],t.abrupt("return",void 0===n?null:n);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_remove",value:function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:delete this.storage[e];case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_addListener",value:function(t,e){}},{key:"_removeListener",value:function(t,e){}}]),t}();It.type="NONE";var St=It;function Ct(t,e,n){return"firebase".concat(":",t,":").concat(e,":").concat(n)}var Tt=function(){function t(e,n,r){Object(p.a)(this,t),this.persistence=e,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,a=i.name;this.fullUserKey=Ct(this.userKey,o.apiKey,a),this.fullPersistenceKey=Ct("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Object(d.a)(t,[{key:"setCurrentUser",value:function(t){return this.persistence._set(this.fullUserKey,t.toJSON())}},{key:"getCurrentUser",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.persistence._get(this.fullUserKey);case 2:return e=t.sent,t.abrupt("return",e?kt._fromJSON(this.auth,e):null);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.persistence!==e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.getCurrentUser();case 4:return n=t.sent,t.next=7,this.removeCurrentUser();case 7:if(this.persistence=e,!n){t.next=10;break}return t.abrupt("return",this.setCurrentUser(n));case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var e=Object(f.a)(l.a.mark((function e(n,r){var i,o,a,s,c,h,p,d,g,v,y,m=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){e.next=3;break}return e.abrupt("return",new t(D(St),n,i));case 3:return e.next=5,Promise.all(r.map(function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._isAvailable();case 2:if(!t.sent){t.next=4;break}return t.abrupt("return",e);case 4:return t.abrupt("return",void 0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:o=e.sent.filter((function(t){return t})),a=o[0]||D(St),s=Ct(i,n.config.apiKey,n.name),c=null,h=Object(u.a)(r),e.prev=10,h.s();case 12:if((p=h.n()).done){e.next=29;break}return d=p.value,e.prev=14,e.next=17,d._get(s);case 17:if(!(g=e.sent)){e.next=23;break}return v=kt._fromJSON(n,g),d!==a&&(c=v),a=d,e.abrupt("break",29);case 23:e.next=27;break;case 25:e.prev=25,e.t0=e.catch(14);case 27:e.next=12;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(10),h.e(e.t1);case 34:return e.prev=34,h.f(),e.finish(34);case 37:if(y=o.filter((function(t){return t._shouldAllowMigration})),a._shouldAllowMigration&&y.length){e.next=40;break}return e.abrupt("return",new t(a,n,i));case 40:if(a=y[0],!c){e.next=44;break}return e.next=44,a._set(s,c.toJSON());case 44:return e.next=46,Promise.all(r.map(function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===a){t.next=8;break}return t.prev=1,t.next=4,e._remove(s);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()));case 46:return e.abrupt("return",new t(a,n,i));case 47:case"end":return e.stop()}}),e,null,[[10,31,34,37],[14,25]])})));return function(t,n){return e.apply(this,arguments)}}()}]),t}();function Nt(t){var e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(At(e))return"Blackberry";if(Dt(e))return"Webos";if(Lt(e))return"Safari";if((e.includes("chrome/")||jt(e))&&!e.includes("edge/"))return"Chrome";if(Rt(e))return"Android";var n=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Pt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return/firefox\//i.test(t)}function Lt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)(),e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return/crios\//i.test(t)}function Mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return/iemobile/i.test(t)}function Rt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return/android/i.test(t)}function At(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return/blackberry/i.test(t)}function Dt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return/webos/i.test(t)}function Ft(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return/iphone|ipad|ipod/i.test(t)}function zt(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return Ft(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function Bt(){return Object(y.n)()&&10===document.documentMode}function Ut(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.j)();return Ft(t)||Rt(t)||Dt(t)||At(t)||/windows phone/i.test(t)||Mt(t)}function Vt(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(t){case"Browser":e=Nt(Object(y.j)());break;case"Worker":e="".concat(Nt(Object(y.j)()),"-").concat(t);break;default:e=t}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(e,"/","JsCore","/").concat(m.a,"/").concat(r)}var qt=function(){function t(e,n){Object(p.a)(this,t),this.app=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ht(this),this.idTokenSubscription=new Ht(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}return Object(d.a)(t,[{key:"_initializeWithPersistence",value:function(t,e){var n=this;return e&&(this._popupRedirectResolver=D(e)),this._initializationPromise=this.queue(Object(f.a)(l.a.mark((function r(){var i,o;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Tt.create(n,t);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=10;break}return r.next=10,n._popupRedirectResolver._initialize(n);case 10:return r.next=12,n.initializeCurrentUser(e);case 12:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=15;break}return r.abrupt("return");case 15:n._isInitialized=!0;case 16:case"end":return r.stop()}}),r)})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.assertedPersistence.getCurrentUser();case 4:if(e=t.sent,this.currentUser||e){t.next=7;break}return t.abrupt("return");case 7:if(!this.currentUser||!e||this.currentUser.uid!==e.uid){t.next=12;break}return this._currentUser._assign(e),t.next=11,this.currentUser.getIdToken();case 11:return t.abrupt("return");case 12:return t.next=14,this._updateCurrentUser(e);case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r,i,o,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=t.sent,!e||!this.config.authDomain){t.next=12;break}return t.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,t.next=10,this.tryRedirectSignIn(e);case 10:a=t.sent,i&&i!==o||!(null===a||void 0===a?void 0:a.user)||(r=a.user);case 12:if(r){t.next=14;break}return t.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){t.next=16;break}return t.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return j(this._popupRedirectResolver,this,"argument-error"),t.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){t.next=21;break}return t.abrupt("return",this.directlySetCurrentUser(r));case 21:return t.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,t.next=4,this._popupRedirectResolver._completeRedirectFn(this,e,!0);case 4:n=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),t.next=11,this._setRedirectUser(null);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vt(e);case 3:t.next=9;break;case 5:if(t.prev=5,t.t0=t.catch(0),t.t0.code==="auth/".concat("network-request-failed")){t.next=9;break}return t.abrupt("return",this.directlySetCurrentUser(null));case 9:return t.abrupt("return",this.directlySetCurrentUser(e));case 10:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var t=navigator;return t.languages&&t.languages[0]||t.language||null}()}},{key:"_delete",value:function(){var t=Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._deleted=!0;case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e?Object(y.i)(e):null)&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),t.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._deleted){t.next=2;break}return t.abrupt("return");case 2:return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t.abrupt("return",this.queue(Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.directlySetCurrentUser(e);case 2:n.notifyAuthListeners();case 3:case"end":return t.stop()}}),t)})))));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"signOut",value:function(){var t=Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){t.next=3;break}return t.next=3,this._setRedirectUser(null);case 3:return t.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setPersistence",value:function(t){var e=this;return this.queue(Object(f.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.assertedPersistence.setPersistence(D(t));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(t){this._errorFactory=new y.b("auth","Firebase",t())}},{key:"onAuthStateChanged",value:function(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}},{key:"onIdTokenChanged",value:function(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}},{key:"toJSON",value:function(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}},{key:"_setRedirectUser",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=t.sent,t.abrupt("return",null===e?r.removeCurrentUser():r.setCurrentUser(e));case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.redirectPersistenceManager){t.next=9;break}return j(n=e&&D(e)||this._popupRedirectResolver,this,"argument-error"),t.next=5,Tt.create(this,[D(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=t.sent,t.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=t.sent;case 9:return t.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isInitialized){t.next=3;break}return t.next=3,this.queue(Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==e){t.next=5;break}return t.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==e){t.next=7;break}return t.abrupt("return",this.redirectUser);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this.currentUser){t.next=2;break}return t.abrupt("return",this.queue(Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.directlySetCurrentUser(e));case 1:case"end":return t.stop()}}),t)})))));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(t){t===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var t,e;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(t,e,n,r){var i=this;if(this._deleted)return function(){};var o="function"===typeof e?e:e.next.bind(e),a=this._isInitialized?Promise.resolve():this._initializationPromise;return j(a,this,"internal-error"),a.then((function(){return o(i.currentUser)})),"function"===typeof e?t.addObserver(e,n,r):t.addObserver(e)}},{key:"directlySetCurrentUser",value:function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,!e){t.next=7;break}return t.next=5,this.assertedPersistence.setCurrentUser(e);case 5:t.next=9;break;case 7:return t.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"queue",value:function(t){return this.operations=this.operations.then(t,t),this.operations}},{key:"assertedPersistence",get:function(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Vt(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),t}();function Gt(t){return Object(y.i)(t)}var Ht=function(){function t(e){var n=this;Object(p.a)(this,t),this.auth=e,this.observer=null,this.addObserver=Object(y.f)((function(t){return n.observer=t}))}return Object(d.a)(t,[{key:"next",get:function(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),t}();var Wt=function(){function t(e,n){Object(p.a)(this,t),this.providerId=e,this.signInMethod=n}return Object(d.a)(t,[{key:"toJSON",value:function(){return M("not implemented")}},{key:"_getIdTokenResponse",value:function(t){return M("not implemented")}},{key:"_linkToIdToken",value:function(t,e){return M("not implemented")}},{key:"_getReauthenticationResolver",value:function(t){return M("not implemented")}}]),t}();function Xt(t,e){return Yt.apply(this,arguments)}function Yt(){return(Yt=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Y(e,"POST","/v1/accounts:update",n));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zt(t,e){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J(e,"POST","/v1/accounts:signInWithPassword",X(e,n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qt(t,e){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J(e,"POST","/v1/accounts:signInWithEmailLink",X(e,n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $t(t,e){return te.apply(this,arguments)}function te(){return(te=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J(e,"POST","/v1/accounts:signInWithEmailLink",X(e,n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ee=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(p.a)(this,n),(o=e.call(this,"password",i))._email=t,o._password=r,o._tenantId=a,o}return Object(d.a)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=this.signInMethod,t.next="password"===t.t0?3:"emailLink"===t.t0?4:5;break;case 3:return t.abrupt("return",Zt(e,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return t.abrupt("return",Qt(e,{email:this._email,oobCode:this._password}));case 5:C(e,"internal-error");case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=this.signInMethod,t.next="password"===t.t0?3:"emailLink"===t.t0?4:5;break;case 3:return t.abrupt("return",Xt(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return t.abrupt("return",$t(e,{idToken:n,email:this._email,oobCode:this._password}));case 5:C(e,"internal-error");case 6:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(t){return this._getIdTokenResponse(t)}}],[{key:"_fromEmailAndPassword",value:function(t,e){return new n(t,e,"password")}},{key:"_fromEmailAndCode",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(t,e,"emailLink",r)}},{key:"fromJSON",value:function(t){var e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}}]),n}(Wt);function ne(t,e){return re.apply(this,arguments)}function re(){return(re=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J(e,"POST","/v1/accounts:signInWithIdp",X(e,n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ie=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.apply(this,arguments)).pendingToken=null,t}return Object(d.a)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(t){return ne(t,this.buildRequest())}},{key:"_linkToIdToken",value:function(t,e){var n=this.buildRequest();return n.idToken=e,ne(t,n)}},{key:"_getReauthenticationResolver",value:function(t){var e=this.buildRequest();return e.autoCreate=!1,ne(t,e)}},{key:"buildRequest",value:function(){var t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{var e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Object(y.t)(e)}return t}}],[{key:"_fromParams",value:function(t){var e=new n(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):C("argument-error"),e}},{key:"fromJSON",value:function(t){var e="string"===typeof t?JSON.parse(t):t,r=e.providerId,i=e.signInMethod,o=_(e,["providerId","signInMethod"]);if(!r||!i)return null;var a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}}]),n}(Wt);function oe(t,e){return ae.apply(this,arguments)}function ae(){return(ae=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Y(e,"POST","/v1/accounts:sendVerificationCode",X(e,n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function se(){return(se=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J(e,"POST","/v1/accounts:signInWithPhoneNumber",X(e,n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ue(){return(ue=Object(f.a)(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e,"POST","/v1/accounts:signInWithPhoneNumber",X(e,n));case 2:if(!(r=t.sent).temporaryProof){t.next=5;break}throw nt(e,"account-exists-with-different-credential",r);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ce=Object(v.a)({},"USER_NOT_FOUND","user-not-found");function le(){return(le=Object(f.a)(l.a.mark((function t(e,n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),t.abrupt("return",J(e,"POST","/v1/accounts:signInWithPhoneNumber",X(e,r),ce));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var he=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var r;return Object(p.a)(this,n),(r=e.call(this,"phone","phone")).params=t,r}return Object(d.a)(n,[{key:"_getIdTokenResponse",value:function(t){return function(t,e){return se.apply(this,arguments)}(t,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(t,e){return function(t,e){return ue.apply(this,arguments)}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(t){return function(t,e){return le.apply(this,arguments)}(t,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var t=this.params,e=t.temporaryProof,n=t.phoneNumber,r=t.verificationId,i=t.verificationCode;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}}],[{key:"_fromVerification",value:function(t,e){return new n({verificationId:t,verificationCode:e})}},{key:"_fromTokenResponse",value:function(t,e){return new n({phoneNumber:t,temporaryProof:e})}},{key:"fromJSON",value:function(t){"string"===typeof t&&(t=JSON.parse(t));var e=t,r=e.verificationId,i=e.verificationCode,o=e.phoneNumber,a=e.temporaryProof;return i||r||o||a?new n({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:a}):null}}]),n}(Wt);var fe=function(){function t(e){var n,r,i,o,a,s;Object(p.a)(this,t);var u=Object(y.u)(Object(y.h)(e)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);j(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(o=u.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=u.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return Object(d.a)(t,null,[{key:"parseLink",value:function(e){var n=function(t){var e=Object(y.u)(Object(y.h)(t)).link,n=e?Object(y.u)(Object(y.h)(e)).deep_link_id:null,r=Object(y.u)(Object(y.h)(t)).deep_link_id;return(r?Object(y.u)(Object(y.h)(r)).link:null)||r||n||e||t}(e);try{return new t(n)}catch(r){return null}}}]),t}();var pe=function(){function t(){Object(p.a)(this,t),this.providerId=t.PROVIDER_ID}return Object(d.a)(t,null,[{key:"credential",value:function(t,e){return ee._fromEmailAndPassword(t,e)}},{key:"credentialWithLink",value:function(t,e){var n=fe.parseLink(e);return j(n,"argument-error"),ee._fromEmailAndCode(t,n.code,n.tenantId)}}]),t}();pe.PROVIDER_ID="password",pe.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pe.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var de=function(){function t(e){Object(p.a)(this,t),this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}return Object(d.a)(t,[{key:"setDefaultLanguage",value:function(t){this.defaultLanguageCode=t}},{key:"setCustomParameters",value:function(t){return this.customParameters=t,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),t}(),ge=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.apply(this,arguments)).scopes=[],t}return Object(d.a)(n,[{key:"addScope",value:function(t){return this.scopes.includes(t)||this.scopes.push(t),this}},{key:"getScopes",value:function(){return Object(g.a)(this.scopes)}}]),n}(de),ve=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){return Object(p.a)(this,n),e.call(this,"facebook.com")}return Object(d.a)(n,null,[{key:"credential",value:function(t){return ie._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}},{key:"credentialFromResult",value:function(t){return n.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return n.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(t){var e=t._tokenResponse;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch(r){return null}}}]),n}(ge);ve.FACEBOOK_SIGN_IN_METHOD="facebook.com",ve.PROVIDER_ID="facebook.com";var ye=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this,"google.com")).addScope("profile"),t}return Object(d.a)(n,null,[{key:"credential",value:function(t,e){return ie._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}},{key:"credentialFromResult",value:function(t){return n.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return n.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(t){var e=t._tokenResponse;if(!e)return null;var r=e.oauthIdToken,i=e.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(ge);ye.GOOGLE_SIGN_IN_METHOD="google.com",ye.PROVIDER_ID="google.com";var me=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){return Object(p.a)(this,n),e.call(this,"github.com")}return Object(d.a)(n,null,[{key:"credential",value:function(t){return ie._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:t})}},{key:"credentialFromResult",value:function(t){return n.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return n.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(t){var e=t._tokenResponse;if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return n.credential(e.oauthAccessToken)}catch(r){return null}}}]),n}(ge);me.GITHUB_SIGN_IN_METHOD="github.com",me.PROVIDER_ID="github.com";var _e=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){return Object(p.a)(this,n),e.call(this,"twitter.com")}return Object(d.a)(n,null,[{key:"credential",value:function(t,e){return ie._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}},{key:"credentialFromResult",value:function(t){return n.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return n.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(t){var e=t._tokenResponse;if(!e)return null;var r=e.oauthAccessToken,i=e.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(ge);function be(t,e){return we.apply(this,arguments)}function we(){return(we=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",J(e,"POST","/v1/accounts:signUp",X(e,n)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}_e.TWITTER_SIGN_IN_METHOD="twitter.com",_e.PROVIDER_ID="twitter.com";var xe=function(){function t(e){Object(p.a)(this,t),this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}return Object(d.a)(t,null,[{key:"_fromIdTokenResponse",value:function(){var e=Object(f.a)(l.a.mark((function e(n,r,i){var o,a,s,u,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>3&&void 0!==c[3]&&c[3],e.next=3,kt._fromIdTokenResponse(n,i,o);case 3:return a=e.sent,s=Ee(i),u=new t({user:a,providerId:s,_tokenResponse:i,operationType:r}),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var e=Object(f.a)(l.a.mark((function e(n,r,i){var o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=Ee(i),e.abrupt("return",new t({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}();function Ee(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Oe=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,r,i,a){var s,u;return Object(p.a)(this,n),(s=e.call(this,r.code,r.message)).operationType=i,s.user=a,Object.setPrototypeOf(Object(o.a)(s),n.prototype),s.customData={appName:t.name,tenantId:null!==(u=t.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},s}return Object(d.a)(n,null,[{key:"_fromErrorAndOperation",value:function(t,e,r,i){return new n(t,e,r,i)}}]),n}(y.c);function ke(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Oe._fromErrorAndOperation(t,n,e,r);throw n}))}function Ie(t,e){return Se.apply(this,arguments)}function Se(){return(Se=Object(f.a)(l.a.mark((function t(e,n){var r,i,o=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],t.t0=ht,t.t1=e,t.t2=n,t.t3=e.auth,t.next=7,e.getIdToken();case 7:return t.t4=t.sent,t.t5=t.t2._linkToIdToken.call(t.t2,t.t3,t.t4),t.t6=r,t.next=12,(0,t.t0)(t.t1,t.t5,t.t6);case 12:return i=t.sent,t.abrupt("return",xe._forOperation(e,"link",i));case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ce(t,e){return Te.apply(this,arguments)}function Te(){return(Te=Object(f.a)(l.a.mark((function t(e,n){var r,i,o,a,s,u,c=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=e.auth,o="reauthenticate",t.prev=3,t.next=6,ht(e,ke(i,o,n,e),r);case 6:return j((a=t.sent).idToken,i,"internal-error"),j(s=lt(a.idToken),i,"internal-error"),u=s.sub,j(e.uid===u,i,"user-mismatch"),t.abrupt("return",xe._forOperation(e,o,a));case 15:throw t.prev=15,t.t0=t.catch(3),(null===t.t0||void 0===t.t0?void 0:t.t0.code)==="auth/".concat("user-not-found")&&C(i,"user-mismatch"),t.t0;case 19:case"end":return t.stop()}}),t,null,[[3,15]])})))).apply(this,arguments)}function Ne(t,e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(f.a)(l.a.mark((function t(e,n){var r,i,o,a,s=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",t.next=4,ke(e,i,n);case 4:return o=t.sent,t.next=7,xe._fromIdTokenResponse(e,i,o);case 7:if(a=t.sent,r){t.next=11;break}return t.next=11,e._updateCurrentUser(a.user);case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Le(t,e,n){return je.apply(this,arguments)}function je(){return(je=Object(f.a)(l.a.mark((function t(e,n,r){var i,o,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Gt(e),t.next=3,be(i,{returnSecureToken:!0,email:n,password:r});case 3:return o=t.sent,t.next=6,xe._fromIdTokenResponse(i,"signIn",o);case 6:return a=t.sent,t.next=9,i._updateCurrentUser(a.user);case 9:return t.abrupt("return",a);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Me(t,e,n,r){return Object(y.i)(t).onAuthStateChanged(e,n,r)}function Re(t){return Object(y.i)(t).signOut()}function Ae(t,e){return Y(t,"POST","/v2/accounts/mfaEnrollment:start",X(t,e))}new WeakMap;var De=function(){function t(e,n){Object(p.a)(this,t),this.storageRetriever=e,this.type=n}return Object(d.a)(t,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}},{key:"_set",value:function(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}},{key:"_get",value:function(t){var e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}},{key:"_remove",value:function(t){return this.storage.removeItem(t),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),t}();var Fe=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(e,n){return t.onStorageEvent(e,n)},t.listeners={},t.localCache={},t.pollTimer=null,t.safariLocalStorageNotSynced=function(){var t=Object(y.j)();return Lt(t)||Ft(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),t.fallbackToPolling=Ut(),t._shouldAllowMigration=!0,t}return Object(d.a)(n,[{key:"forAllChangedKeys",value:function(t){for(var e=0,n=Object.keys(this.listeners);e<n.length;e++){var r=n[e],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}},{key:"onStorageEvent",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.key){var r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}var o=function(){var t=e.storage.getItem(r);(n||e.localCache[r]!==t)&&e.notifyListeners(r,t)},a=this.storage.getItem(r);Bt()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,10):o()}else this.forAllChangedKeys((function(t,n,r){e.notifyListeners(t,r)}))}},{key:"notifyListeners",value:function(t,e){this.localCache[t]=e;var n=this.listeners[t];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(e?JSON.parse(e):e)}}},{key:"startPolling",value:function(){var t=this;this.stopPolling(),this.pollTimer=setInterval((function(){t.forAllChangedKeys((function(e,n,r){t.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}},{key:"_removeListener",value:function(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var t=Object(f.a)(l.a.mark((function t(e,o){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.a)(Object(i.a)(n.prototype),"_set",this).call(this,e,o);case 2:this.localCache[e]=JSON.stringify(o);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_get",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.a)(Object(i.a)(n.prototype),"_get",this).call(this,e);case 2:return o=t.sent,this.localCache[e]=JSON.stringify(o),t.abrupt("return",o);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_remove",value:function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.a)(Object(i.a)(n.prototype),"_remove",this).call(this,e);case 2:delete this.localCache[e];case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(De);Fe.type="LOCAL";var ze=Fe,Be=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(){return Object(p.a)(this,n),e.call(this,(function(){return window.sessionStorage}),"SESSION")}return Object(d.a)(n,[{key:"_addListener",value:function(t,e){}},{key:"_removeListener",value:function(t,e){}}]),n}(De);Be.type="SESSION";var Ue=Be;function Ve(t){return Promise.all(t.map(function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return n=t.sent,t.abrupt("return",{fulfilled:!0,value:n});case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",{fulfilled:!1,reason:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}var qe=function(){function t(e){Object(p.a)(this,t),this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Object(d.a)(t,[{key:"isListeningto",value:function(t){return this.eventTarget===t}},{key:"handleEvent",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r,i,o,a,s,u,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(n=e).data,i=r.eventId,o=r.eventType,a=r.data,null===(s=this.handlersMap[o])||void 0===s?void 0:s.size){t.next=5;break}return t.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),u=Array.from(s).map(function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(n.origin,a));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=9,Ve(u);case 9:c=t.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:c});case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_subscribe",value:function(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}},{key:"_unsubscribe",value:function(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(e){var n=this.receivers.find((function(t){return t.isListeningto(e)}));if(n)return n;var r=new t(e);return this.receivers.push(r),r}}]),t}();function Ge(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}qe.receivers=[];var He=function(){function t(e){Object(p.a)(this,t),this.target=e,this.handlers=new Set}return Object(d.a)(t,[{key:"removeMessageHandler",value:function(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}},{key:"_send",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n){var r,i,o,a,s=this,u=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){t.next=4;break}throw new Error("connection_unavailable");case 4:return t.abrupt("return",new Promise((function(t,u){var c=Ge("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);a={messageChannel:i,onMessage:function(e){var n=e;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),t(n.data.response);break;default:clearTimeout(l),clearTimeout(o),u(new Error("invalid_response"))}}},s.handlers.add(a),i.port1.addEventListener("message",a.onMessage),s.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])})).finally((function(){a&&s.removeMessageHandler(a)})));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}();function We(){return window}function Xe(){return"undefined"!==typeof We().WorkerGlobalScope&&"function"===typeof We().importScripts}function Ye(){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(f.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){t.next=2;break}return t.abrupt("return",null);case 2:return t.prev=2,t.next=5,navigator.serviceWorker.ready;case 5:return e=t.sent,t.abrupt("return",e.active);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",null);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}function Ke(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}var Qe="firebaseLocalStorageDb",Je=function(){function t(e){Object(p.a)(this,t),this.request=e}return Object(d.a)(t,[{key:"toPromise",value:function(){var t=this;return new Promise((function(e,n){t.request.addEventListener("success",(function(){e(t.request.result)})),t.request.addEventListener("error",(function(){n(t.request.error)}))}))}}]),t}();function $e(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function tn(){var t=indexedDB.deleteDatabase(Qe);return new Je(t).toPromise()}function en(){var t=indexedDB.open(Qe,1);return new Promise((function(e,n){t.addEventListener("error",(function(){n(t.error)})),t.addEventListener("upgradeneeded",(function(){var e=t.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(r){n(r)}})),t.addEventListener("success",Object(f.a)(l.a.mark((function n(){var r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=t.result).objectStoreNames.contains("firebaseLocalStorage")){n.next=12;break}return r.close(),n.next=5,tn();case 5:return n.t0=e,n.next=8,en();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:e(r);case 13:case"end":return n.stop()}}),n)}))))}))}function nn(t,e,n){return rn.apply(this,arguments)}function rn(){return(rn=Object(f.a)(l.a.mark((function t(e,n,r){var i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=$e(e,!0).put((i={},Object(v.a)(i,"fbase_key",n),Object(v.a)(i,"value",r),i)),t.abrupt("return",new Je(o).toPromise());case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function on(t,e){return an.apply(this,arguments)}function an(){return(an=Object(f.a)(l.a.mark((function t(e,n){var r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=$e(e,!1).get(n),t.next=3,new Je(r).toPromise();case 3:return i=t.sent,t.abrupt("return",void 0===i?null:i.value);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function sn(t,e){var n=$e(t,!0).delete(e);return new Je(n).toPromise()}var un=function(){function t(){Object(p.a)(this,t),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Object(d.a)(t,[{key:"_openDb",value:function(){var t=Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.db){t.next=2;break}return t.abrupt("return",this.db);case 2:return t.next=4,en();case 4:return this.db=t.sent,t.abrupt("return",this.db);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:return t.prev=2,t.next=5,this._openDb();case 5:return r=t.sent,t.next=8,e(r);case 8:return t.abrupt("return",t.sent);case 11:if(t.prev=11,t.t0=t.catch(2),!(n++>3)){t.next=15;break}throw t.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:t.next=1;break;case 18:case"end":return t.stop()}}),t,this,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var t=Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Xe()?this.initializeReceiver():this.initializeSender());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.receiver=qe._getInstance(Xe()?self:null),this.receiver._subscribe("keyChanged",function(){var t=Object(f.a)(l.a.mark((function t(n,r){var i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return i=t.sent,t.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var t=Object(f.a)(l.a.mark((function t(e,n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",["keyChanged"]);case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye();case 2:if(this.activeServiceWorker=t.sent,this.activeServiceWorker){t.next=5;break}return t.abrupt("return");case 5:return this.sender=new He(this.activeServiceWorker),t.next=8,this.sender._send("ping",{},800);case 8:if(r=t.sent){t.next=11;break}return t.abrupt("return");case 11:(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.sender&&this.activeServiceWorker&&Ke()===this.activeServiceWorker){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50);case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,this,[[2,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,indexedDB){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,en();case 5:return e=t.sent,t.next=8,nn(e,"__sak","1");case 8:return t.next=10,sn(e,"__sak");case 10:return t.abrupt("return",!0);case 13:t.prev=13,t.t0=t.catch(0);case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var t=Object(f.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.pendingWrites++,t.prev=1,t.next=4,e();case 4:return t.prev=4,this.pendingWrites--,t.finish(4);case 7:case"end":return t.stop()}}),t,this,[[1,,4,7]])})));return function(e){return t.apply(this,arguments)}}()},{key:"_set",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n){var r=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._withPendingWrite(Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._withRetries((function(t){return nn(t,e,n)}));case 2:return r.localCache[e]=n,t.abrupt("return",r.notifyServiceWorker(e));case 4:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"_get",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._withRetries((function(t){return on(t,e)}));case 2:return n=t.sent,this.localCache[e]=n,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_remove",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._withPendingWrite(Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._withRetries((function(t){return sn(t,e)}));case 2:return delete n.localCache[e],t.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return t.stop()}}),t)})))));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_poll",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e,n,r,i,o,a,s,c,h,f,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._withRetries((function(t){var e=$e(t,!1).getAll();return new Je(e).toPromise()}));case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===this.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:n=[],r=new Set,i=Object(u.a)(e);try{for(i.s();!(o=i.n()).done;)a=o.value,s=a.fbase_key,c=a.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(l){i.e(l)}finally{i.f()}for(h=0,f=Object.keys(this.localCache);h<f.length;h++)p=f[h],this.localCache[p]&&!r.has(p)&&(this.notifyListeners(p,null),n.push(p));return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"notifyListeners",value:function(t,e){this.localCache[t]=e;var n=this.listeners[t];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(e)}}},{key:"startPolling",value:function(){var t=this;this.stopPolling(),this.pollTimer=setInterval(Object(f.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._poll());case 1:case"end":return e.stop()}}),e)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}},{key:"_removeListener",value:function(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),t}();un.type="LOCAL";var cn=un;function ln(t,e){return Y(t,"POST","/v2/accounts/mfaSignIn:start",X(t,e))}function hn(t){return new Promise((function(e,n){var r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=function(t){var e=T("internal-error");e.customData=t,n(e)},r.type="text/javascript",r.charset="UTF-8",function(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}))}function fn(t){return"__".concat(t).concat(Math.floor(1e6*Math.random()))}fn("rcb"),new V(3e4,6e4);function pn(t,e,n){return dn.apply(this,arguments)}function dn(){return(dn=Object(f.a)(l.a.mark((function t(e,n,r){var i,o,a,s,u,c,h,f,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.verify();case 2:if(o=t.sent,t.prev=3,j("string"===typeof o,e,"argument-error"),j("recaptcha"===r.type,e,"argument-error"),!("session"in(a="string"===typeof n?{phoneNumber:n}:n))){t.next=26;break}if(s=a.session,!("phoneNumber"in a)){t.next=17;break}return j("enroll"===s.type,e,"internal-error"),t.next=13,Ae(e,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}});case 13:return u=t.sent,t.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return j("signin"===s.type,e,"internal-error"),j(c=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid,e,"missing-multi-factor-info"),t.next=22,ln(e,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:o}});case 22:return h=t.sent,t.abrupt("return",h.phoneResponseInfo.sessionInfo);case 24:t.next=31;break;case 26:return t.next=28,oe(e,{phoneNumber:a.phoneNumber,recaptchaToken:o});case 28:return f=t.sent,p=f.sessionInfo,t.abrupt("return",p);case 31:return t.prev=31,r._reset(),t.finish(31);case 34:case"end":return t.stop()}}),t,null,[[3,,31,34]])})))).apply(this,arguments)}var gn=function(){function t(e){Object(p.a)(this,t),this.providerId=t.PROVIDER_ID,this.auth=Gt(e)}return Object(d.a)(t,[{key:"verifyPhoneNumber",value:function(t,e){return pn(this.auth,t,Object(y.i)(e))}}],[{key:"credential",value:function(t,e){return he._fromVerification(t,e)}},{key:"credentialFromResult",value:function(e){var n=e;return t.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(e){return t.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(t){var e=t._tokenResponse;if(!e)return null;var n=e.phoneNumber,r=e.temporaryProof;return n&&r?he._fromTokenResponse(n,r):null}}]),t}();function vn(t,e){return e?D(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}gn.PROVIDER_ID="phone",gn.PHONE_SIGN_IN_METHOD="phone";var yn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var r;return Object(p.a)(this,n),(r=e.call(this,"custom","custom")).params=t,r}return Object(d.a)(n,[{key:"_getIdTokenResponse",value:function(t){return ne(t,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(t,e){return ne(t,this._buildIdpRequest(e))}},{key:"_getReauthenticationResolver",value:function(t){return ne(t,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(t){var e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}]),n}(Wt);function mn(t){return Ne(t.auth,new yn(t),t.bypassAuthState)}function _n(t){var e=t.auth,n=t.user;return j(n,e,"internal-error"),Ce(n,new yn(t),t.bypassAuthState)}function bn(t){return wn.apply(this,arguments)}function wn(){return(wn=Object(f.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.auth,j(r=e.user,n,"internal-error"),t.abrupt("return",Ie(r,new yn(e),e.bypassAuthState));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var xn=function(){function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Object(p.a)(this,t),this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Object(d.a)(t,[{key:"execute",value:function(){var t=this;return new Promise(function(){var e=Object(f.a)(l.a.mark((function e(n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:n,reject:r},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r,i,o,a,s,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.urlResponse,r=e.sessionId,i=e.postBody,o=e.tenantId,a=e.error,s=e.type,!a){t.next=4;break}return this.reject(a),t.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},t.prev=5,t.t0=this,t.next=9,this.getIdpTask(s)(u);case 9:t.t1=t.sent,t.t0.resolve.call(t.t0,t.t1),t.next=16;break;case 13:t.prev=13,t.t2=t.catch(5),this.reject(t.t2);case 16:case"end":return t.stop()}}),t,this,[[5,13]])})));return function(e){return t.apply(this,arguments)}}()},{key:"onError",value:function(t){this.reject(t)}},{key:"getIdpTask",value:function(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mn;case"linkViaPopup":case"linkViaRedirect":return bn;case"reauthViaPopup":case"reauthViaRedirect":return _n;default:C(this.auth,"internal-error")}}},{key:"resolve",value:function(t){R(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}},{key:"reject",value:function(t){R(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),t}(),En=new V(2e3,1e4);function On(t,e,n){return kn.apply(this,arguments)}function kn(){return(kn=Object(f.a)(l.a.mark((function t(e,n,r){var i,o,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=Gt(e),P(e,n,de),o=vn(i,r),a=new In(i,"signInViaPopup",n,o),t.abrupt("return",a.executeNotNull());case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var In=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,r,i,a,s){var u;return Object(p.a)(this,n),(u=e.call(this,t,r,a,s)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Object(o.a)(u),u}return Object(d.a)(n,[{key:"executeNotNull",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.execute();case 2:return j(e=t.sent,this.auth,"internal-error"),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onExecution",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e,n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R(1===this.filter.length,"Popup operations only handle one event"),e=Ge(),t.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],e);case 4:this.authWindow=t.sent,this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((function(t){n.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(t){t||n.reject(T(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"eventId",get:function(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(T(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var t=this;!function e(){var n,r;(null===(r=null===(n=t.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?t.pollId=window.setTimeout((function(){t.pollId=null,t.reject(T(t.auth,"popup-closed-by-user"))}),2e3):t.pollId=window.setTimeout(e,En.get())}()}}]),n}(xn);In.currentPopupAction=null;var Sn=new Map,Cn=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(p.a)(this,n),(i=e.call(this,t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return Object(d.a)(n,[{key:"execute",value:function(){var t=Object(f.a)(l.a.mark((function t(){var e,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Sn.get(this.auth._key())){t.next=21;break}return t.prev=2,t.next=5,Tn(this.resolver,this.auth);case 5:if(!t.sent){t.next=12;break}return t.next=9,Object(r.a)(Object(i.a)(n.prototype),"execute",this).call(this);case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=null;case 13:o=t.t0,e=function(){return Promise.resolve(o)},t.next=20;break;case 17:t.prev=17,t.t1=t.catch(2),e=function(){return Promise.reject(t.t1)};case 20:Sn.set(this.auth._key(),e);case 21:return this.bypassAuthState||Sn.set(this.auth._key(),(function(){return Promise.resolve(null)})),t.abrupt("return",e());case 23:case"end":return t.stop()}}),t,this,[[2,17]])})));return function(){return t.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=4;break}return t.abrupt("return",Object(r.a)(Object(i.a)(n.prototype),"onAuthEvent",this).call(this,e));case 4:if("unknown"!==e.type){t.next=7;break}return this.resolve(null),t.abrupt("return");case 7:if(!e.eventId){t.next=17;break}return t.next=10,this.auth._redirectUserForId(e.eventId);case 10:if(!(o=t.sent)){t.next=16;break}return this.user=o,t.abrupt("return",Object(r.a)(Object(i.a)(n.prototype),"onAuthEvent",this).call(this,e));case 16:this.resolve(null);case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onExecution",value:function(){var t=Object(f.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(xn);function Tn(t,e){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(f.a)(l.a.mark((function t(e,n){var r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Ln(n),i=Pn(e),t.next=4,i._isAvailable();case 4:if(t.sent){t.next=6;break}return t.abrupt("return",!1);case 6:return t.next=8,i._get(r);case 8:return t.t0=t.sent,o="true"===t.t0,t.next=12,i._remove(r);case 12:return t.abrupt("return",o);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pn(t){return D(t._redirectPersistence)}function Ln(t){return Ct("pendingRedirect",t.config.apiKey,t.name)}function jn(t,e){return Mn.apply(this,arguments)}function Mn(){return(Mn=Object(f.a)(l.a.mark((function t(e,n){var r,i,o,a,s,u=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Gt(e),o=vn(i,n),a=new Cn(i,o,r),t.next=6,a.execute();case 6:if(!(s=t.sent)||r){t.next=13;break}return delete s.user._redirectEventId,t.next=11,i._persistUserIfCurrent(s.user);case 11:return t.next=13,i._setRedirectUser(null,n);case 13:return t.abrupt("return",s);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Rn=function(){function t(e){Object(p.a)(this,t),this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Object(d.a)(t,[{key:"registerConsumer",value:function(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(t){this.consumers.delete(t)}},{key:"onEvent",value:function(t){var e=this;if(this.hasEventBeenHandled(t))return!1;var n=!1;return this.consumers.forEach((function(r){e.isEventForConsumer(t,r)&&(n=!0,e.sendToConsumer(t,r),e.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dn(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}},{key:"sendToConsumer",value:function(t,e){var n;if(t.error&&!Dn(t)){var r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(T(this.auth,r))}else e.onAuthEvent(t)}},{key:"isEventForConsumer",value:function(t,e){var n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}},{key:"hasEventBeenHandled",value:function(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(An(t))}},{key:"saveEventToCache",value:function(t){this.cachedEventUids.add(An(t)),this.lastProcessedEventTime=Date.now()}}]),t}();function An(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((function(t){return t})).join("-")}function Dn(t){var e=t.type,n=t.error;return"unknown"===e&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Fn(t){return zn.apply(this,arguments)}function zn(){return(zn=Object(f.a)(l.a.mark((function t(e){var n,r=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t.abrupt("return",Y(e,"GET","/v1/projects",n));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Bn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Un=/^https?/;function Vn(){return(Vn=Object(f.a)(l.a.mark((function t(e){var n,r,i,o,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.config.emulator){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Fn(e);case 4:n=t.sent,r=n.authorizedDomains,i=Object(u.a)(r),t.prev=7,i.s();case 9:if((o=i.n()).done){t.next=20;break}if(a=o.value,t.prev=11,!qn(a)){t.next=14;break}return t.abrupt("return");case 14:t.next=18;break;case 16:t.prev=16,t.t0=t.catch(11);case 18:t.next=9;break;case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(7),i.e(t.t1);case 25:return t.prev=25,i.f(),t.finish(25);case 28:C(e,"unauthorized-domain");case 29:case"end":return t.stop()}}),t,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function qn(t){var e=z(),n=new URL(e),r=n.protocol,i=n.hostname;if(t.startsWith("chrome-extension://")){var o=new URL(t);return""===o.hostname&&""===i?"chrome-extension:"===r&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===i}if(!Un.test(r))return!1;if(Bn.test(t))return i===t;var a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}var Gn=new V(3e4,6e4);function Hn(){var t=We().___jsl;if(null===t||void 0===t?void 0:t.H)for(var e=0,n=Object.keys(t.H);e<n.length;e++){var r=n[e];if(t.H[r].r=t.H[r].r||[],t.H[r].L=t.H[r].L||[],t.H[r].r=Object(g.a)(t.H[r].L),t.CP)for(var i=0;i<t.CP.length;i++)t.CP[i]=null}}var Wn=null;function Xn(t){return Wn=Wn||function(t){return new Promise((function(e,n){var r,i,o;function a(){Hn(),gapi.load("gapi.iframes",{callback:function(){e(gapi.iframes.getContext())},ontimeout:function(){Hn(),n(T(t,"network-request-failed"))},timeout:Gn.get()})}if(null===(i=null===(r=We().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(o=We().gapi)||void 0===o?void 0:o.load)){var s=fn("iframefcb");return We()[s]=function(){gapi.load?a():n(T(t,"network-request-failed"))},hn("https://apis.google.com/js/api.js?onload=".concat(s))}a()}})).catch((function(t){throw Wn=null,t}))}(t)}var Yn=new V(5e3,15e3),Zn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qn(t){var e=t.config;j(e.authDomain,t,"auth-domain-config-required");var n=e.emulator?q(e,"emulator/auth/iframe"):"https://".concat(t.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:e.apiKey,appName:t.name,v:m.a},i=Kn.get(t.config.apiHost);i&&(r.eid=i);var o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Object(y.t)(r).slice(1))}function Jn(t){return $n.apply(this,arguments)}function $n(){return($n=Object(f.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xn(e);case 2:return n=t.sent,j(r=We().gapi,e,"internal-error"),t.abrupt("return",n.open({where:document.body,url:Qn(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zn,dontclear:!0},(function(t){return new Promise(function(){var n=Object(f.a)(l.a.mark((function n(r,i){var o,a,s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){We().clearTimeout(a),r(t)},n.next=3,t.restyle({setHideOnLeave:!1});case 3:o=T(e,"network-request-failed"),a=We().setTimeout((function(){i(o)}),Yn.get()),t.ping(s).then(s,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())})));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var tr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},er=function(){function t(e){Object(p.a)(this,t),this.window=e,this.associatedEvent=null}return Object(d.a)(t,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(t){}}}]),t}();function nr(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},tr),{width:r.toString(),height:i.toString(),top:o,left:a}),c=Object(y.j)().toLowerCase();n&&(s=jt(c)?"_blank":n),Pt(c)&&(e=e||"http://localhost",u.scrollbars="yes");var l=Object.entries(u).reduce((function(t,e){var n=Object(h.a)(e,2),r=n[0],i=n[1];return"".concat(t).concat(r,"=").concat(i,",")}),"");if(zt(c)&&"_self"!==s)return rr(e||"",s),new er(null);var f=window.open(e||"",s,l);j(f,t,"popup-blocked");try{f.focus()}catch(p){}return new er(f)}function rr(t,e){var n=document.createElement("a");n.href=t,n.target=e;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}function ir(t,e,n,r,i,o){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");var a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:m.a,eventId:i};if(e instanceof de){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Object(y.m)(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(var s=0,u=Object.entries(o||{});s<u.length;s++){var c=Object(h.a)(u[s],2),l=c[0],f=c[1];a[l]=f}}if(e instanceof ge){var p=e.getScopes().filter((function(t){return""!==t}));p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);for(var d=a,g=0,v=Object.keys(d);g<v.length;g++){var _=v[g];void 0===d[_]&&delete d[_]}return"".concat(function(t){var e=t.config;if(!e.emulator)return"https://".concat(e.authDomain,"/").concat("__/auth/handler");return q(e,"emulator/auth/handler")}(t),"?").concat(Object(y.t)(d).slice(1))}var or=function(){function t(){Object(p.a)(this,t),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ue,this._completeRedirectFn=jn}return Object(d.a)(t,[{key:"_openPopup",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n,r,i){var o,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),a=ir(e,n,r,z(),i),t.abrupt("return",nr(e,a,Ge()));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var t=Object(f.a)(l.a.mark((function t(e,n,r,i){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._originValidation(e);case 2:return o=ir(e,n,r,z(),i),We().location.href=o,t.abrupt("return",new Promise((function(){})));case 4:case"end":return t.stop()}var o}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"_initialize",value:function(t){var e=t._key();if(this.eventManagers[e]){var n=this.eventManagers[e],r=n.manager,i=n.promise;return r?Promise.resolve(r):(R(i,"If manager is not set, promise should be"),i)}var o=this.initAndGetManager(t);return this.eventManagers[e]={promise:o},o}},{key:"initAndGetManager",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jn(e);case 2:return n=t.sent,r=new Rn(e),n.register("authEvent",(function(t){return j(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(t,e){this.iframes[t._key()].send("webStorageSupport",{type:"webStorageSupport"},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&e(!!i),C(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(t){var e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=function(t){return Vn.apply(this,arguments)}(t)),this.originValidationPromises[e]}},{key:"_shouldInitProactively",get:function(){return Ut()||Lt()||Ft()}}]),t}(),ar=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var r;return Object(p.a)(this,n),(r=e.call(this,"phone")).credential=t,r}return Object(d.a)(n,[{key:"_finalizeEnroll",value:function(t,e,n){return function(t,e){return Y(t,"POST","/v2/accounts/mfaEnrollment:finalize",X(t,e))}(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(t,e){return function(t,e){return Y(t,"POST","/v2/accounts/mfaSignIn:finalize",X(t,e))}(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(t){return new n(t)}}]),n}(function(){function t(e){Object(p.a)(this,t),this.factorId=e}return Object(d.a)(t,[{key:"_process",value:function(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return M("unexpected MultiFactorSessionType")}}}]),t}());(function(){function t(){Object(p.a)(this,t)}return Object(d.a)(t,null,[{key:"assertion",value:function(t){return ar._fromCredential(t)}}]),t}()).FACTOR_ID="phone";var sr,ur=function(){function t(e){Object(p.a)(this,t),this.auth=e,this.internalListeners=new Map}return Object(d.a)(t,[{key:"getUid",value:function(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}},{key:"getToken",value:function(){var t=Object(f.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.assertAuthConfigured(),t.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,this.auth.currentUser.getIdToken(e);case 7:return n=t.sent,t.abrupt("return",{accessToken:n});case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(t){if(this.assertAuthConfigured(),!this.internalListeners.has(t)){var e=this.auth.onIdTokenChanged((function(e){var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(t){this.assertAuthConfigured();var e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),t}();function cr(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(m.e)(),e=Object(m.b)(t,"auth");return e.isInitialized()?e.getImmediate():F(t,{popupRedirectResolver:or,persistence:[cn,ze,Ue]})}sr="Browser",Object(m.c)(new x.a("auth",(function(t,e){var n=e.options,r=t.getProvider("app").getImmediate(),i=r.options,o=i.apiKey,a=i.authDomain;return function(t){j(o&&!o.includes(":"),"invalid-api-key",{appName:t.name}),j(!(null===a||void 0===a?void 0:a.includes(":")),"argument-error",{appName:t.name});var e={apiKey:o,authDomain:a,clientPlatform:sr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vt(sr)},r=new qt(t,e);return function(t,e){var n=(null===e||void 0===e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(D);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null===e||void 0===e?void 0:e.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider("auth-internal").initialize()}))),Object(m.c)(new x.a("auth-internal",(function(t){return function(t){return new ur(t)}(Gt(t.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(m.g)("@firebase/auth","0.19.3",function(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(sr)),Object(m.g)("@firebase/auth","0.19.3","esm2017")},function(t,e,n){"use strict";var r=n(1);e.a=function(t){var e=Object(r.useRef)(t);return Object(r.useEffect)((function(){e.current=t}),[t]),e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=Function.prototype.bind.call(Function.prototype.call,[].slice);function i(t,e){return r(t.querySelectorAll(e))}},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));function r(t){return"".concat("data-rr-ui-").concat(t)}function i(t){return"".concat("rrUi").concat(t)}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(50);function i(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return s}));var r=n(13),i=n(1),o=n(7),a=["as","disabled"];function s(t){var e=t.tagName,n=t.disabled,r=t.href,i=t.target,o=t.rel,a=t.onClick,s=t.tabIndex,u=void 0===s?0:s,c=t.type;e||(e=null!=r||null!=i||null!=o?"a":"button");var l={tagName:e};if("button"===e)return[{type:c||"button",disabled:n},l];var h=function(t){(n||"a"===e&&function(t){return!t||"#"===t.trim()}(r))&&t.preventDefault(),n?t.stopPropagation():null==a||a(t)};return[{role:"button",disabled:void 0,tabIndex:n?void 0:u,href:"a"===e&&n?void 0:r,target:"a"===e?i:void 0,"aria-disabled":n||void 0,rel:"a"===e?o:void 0,onClick:h,onKeyDown:function(t){" "===t.key&&(t.preventDefault(),h(t))}},l]}var u=i.forwardRef((function(t,e){var n=t.as,i=t.disabled,u=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,a),c=s(Object.assign({tagName:n,disabled:i},u)),l=Object(r.a)(c,2),h=l[0],f=l[1].tagName;return Object(o.jsx)(f,Object.assign({},u,h,{ref:e}))}));u.displayName="Button",e.a=u},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(6);function i(t,e){var n,i=null!==(n=t.pane)&&void 0!==n?n:e.pane;return i?Object(r.a)(Object(r.a)({},t),{},{pane:i}):t}},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(1),u=n(23),c=n(15),l=n(7),h=["id","bsPrefix","className","type","isValid","isInvalid","as"],f=s.forwardRef((function(t,e){var n=t.id,o=t.bsPrefix,f=t.className,p=t.type,d=void 0===p?"checkbox":p,g=t.isValid,v=void 0!==g&&g,y=t.isInvalid,m=void 0!==y&&y,_=t.as,b=void 0===_?"input":_,w=Object(i.a)(t,h),x=Object(s.useContext)(u.a).controlId;return o=Object(c.a)(o,"form-check-input"),Object(l.jsx)(b,Object(r.a)(Object(r.a)({},w),{},{ref:e,type:d,id:n||x,className:a()(f,o,v&&"is-valid",m&&"is-invalid")}))}));f.displayName="FormCheckInput",e.a=f},function(t,e,n){(function(t){!function(e){"use strict";var n=6371008.8,r={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*n,kilometers:6371.0088,kilometres:6371.0088,meters:n,metres:n,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:n/1852,radians:1,yards:6967335.223679999},i={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/n,yards:1.0936133},o={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function a(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function s(t,e,n){switch(t){case"Point":return u(e).geometry;case"LineString":return f(e).geometry;case"Polygon":return l(e).geometry;case"MultiPoint":return v(e).geometry;case"MultiLineString":return g(e).geometry;case"MultiPolygon":return y(e).geometry;default:throw new Error(t+" is invalid")}}function u(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!C(t[0])||!C(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return u(t,e)})),n)}function l(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return a({type:"Polygon",coordinates:t},e,n)}function h(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return l(t,e)})),n)}function f(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return a({type:"LineString",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),d(t.map((function(t){return f(t,e)})),n)}function d(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function g(t,e,n){return void 0===n&&(n={}),a({type:"MultiLineString",coordinates:t},e,n)}function v(t,e,n){return void 0===n&&(n={}),a({type:"MultiPoint",coordinates:t},e,n)}function y(t,e,n){return void 0===n&&(n={}),a({type:"MultiPolygon",coordinates:t},e,n)}function m(t,e,n){return void 0===n&&(n={}),a({type:"GeometryCollection",geometries:t},e,n)}function _(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function b(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t*n}function w(t,e){void 0===e&&(e="kilometers");var n=r[e];if(!n)throw new Error(e+" units is invalid");return t/n}function x(t,e){return O(w(t,e))}function E(t){var e=t%360;return e<0&&(e+=360),e}function O(t){return t%(2*Math.PI)*180/Math.PI}function k(t){return t%360*Math.PI/180}function I(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return b(w(t,e),n)}function S(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=o[e];if(!r)throw new Error("invalid original units");var i=o[n];if(!i)throw new Error("invalid final units");return t/r*i}function C(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function T(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!C(t))throw new Error("bbox must only contain numbers")}))}function P(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}var L=Object.freeze({__proto__:null,earthRadius:n,factors:r,unitsFactors:i,areaFactors:o,feature:a,geometry:s,point:u,points:c,polygon:l,polygons:h,lineString:f,lineStrings:p,featureCollection:d,multiLineString:g,multiPoint:v,multiPolygon:y,geometryCollection:m,round:_,radiansToLength:b,lengthToRadians:w,lengthToDegrees:x,bearingToAzimuth:E,radiansToDegrees:O,degreesToRadians:k,convertLength:I,convertArea:S,isNumber:C,isObject:T,validateBBox:N,validateId:P});function j(t,e,n){if(null!==t)for(var r,i,o,a,s,u,c,l,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,v=d?t.features.length:1,y=0;y<v;y++){s=(l=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<s;m++){var _=0,b=0;if(null!==(a=l?c.geometries[m]:c)){u=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,f,y,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,b))return!1;f++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,y,_,b))return!1;f++}"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,y,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===j(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(t,e,n,r){var i=n;return j(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i}function R(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function A(t,e,n){var r=n;return R(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function D(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function F(t,e,n){var r=n;return D(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r}function z(t){var e=[];return j(t,(function(t){e.push(t)})),e}function B(t,e){var n,r,i,o,a,s,u,c,l,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,c,l,h))return!1;f++}}function U(t,e,n){var r=n;return B(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r}function V(t,e){B(t,(function(t,n,r,i,o){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(a(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l=t.coordinates[c];if(!1===e(a({type:s,coordinates:l},r),n,c))return!1}}))}function q(t,e,n){var r=n;return V(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r}function G(t,e){V(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,u=0,c=0;return!1!==j(t,(function(o,l,h,p,d){if(void 0===a||n>s||p>u||d>c)return a=o,s=n,u=p,c=d,void(i=0);var g=f([a,o],t.properties);if(!1===e(g,n,r,d,i))return!1;i++,a=o}))&&void 0}}}))}function H(t,e,n){var r=n,i=!1;return G(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r}function W(t,e){if(!t)throw new Error("geojson is required");V(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(f(o[a],t.properties),n,r,a))return!1}}}))}function X(t,e,n){var r=n;return W(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r}function Y(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),f([u[a],u[a+1]],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),f([u[o][a],u[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),f([u[i][a],u[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),f([u[i][o][a],u[i][o][a+1]],s,e)}throw new Error("geojson is invalid")}function Z(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var c=n.coordinates;switch(n.type){case"Point":return u(c,s,e);case"MultiPoint":return i<0&&(i=c.length+i),u(c[i],s,e);case"LineString":return a<0&&(a=c.length+a),u(c[a],s,e);case"Polygon":return o<0&&(o=c.length+o),a<0&&(a=c[o].length+a),u(c[o][a],s,e);case"MultiLineString":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),u(c[i][a],s,e);case"MultiPolygon":return i<0&&(i=c.length+i),o<0&&(o=c[i].length+o),a<0&&(a=c[i][o].length-a),u(c[i][o][a],s,e)}throw new Error("geojson is invalid")}var K=Object.freeze({__proto__:null,coordAll:z,coordEach:j,coordReduce:M,featureEach:D,featureReduce:F,findPoint:Z,findSegment:Y,flattenEach:V,flattenReduce:q,geomEach:B,geomReduce:U,lineEach:W,lineReduce:X,propEach:R,propReduce:A,segmentEach:G,segmentReduce:H});function Q(t){var e=[1/0,1/0,-1/0,-1/0];return j(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function J(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function tt(t){if(t.length>1&&C(t[0])&&C(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return tt(t[0]);throw new Error("coordinates must only contain numbers")}function et(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function nt(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function rt(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}}function it(t){return"Feature"===t.type?t.geometry:t}function ot(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}Q.default=Q;var at=Object.freeze({__proto__:null,getCoord:J,getCoords:$,containsNumber:tt,geojsonType:et,featureOf:nt,collectionOf:rt,getGeom:it,getType:ot}),st=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;function lt(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var ht=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,r,i=lt(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))ut.call(n,a)&&(i[a]=n[a]);if(st){r=st(n);for(var s=0;s<r.length;s++)ct.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},ft={successCallback:null,verbose:!1},pt={};function dt(t,e,n){n=n||{};for(var r=Object.keys(ft),i=0;i<r.length;i++){var o=r[i],a=n[o];a=null!=a?a:ft[o],pt[o]=a}pt.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var s=function(t){var e=[],n=0;return t.cells.forEach((function(r,i){r.forEach((function(r,o){if(void 0!==r&&5!==(f=r).cval&&10!==f.cval&&!vt(r)){var a=function(t,e,n){var r,i,o=t.length,a=[],s=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],u=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],c=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],l=t[e][n],h=l.cval,f=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"][h],p=mt(l,f);a.push([n+p[0],e+p[1]]),p=mt(l,f=c[h]),a.push([n+p[0],e+p[1]]),yt(l);for(var d=n+s[h],g=e+u[h],v=h;d>=0&&g>=0&&g<o&&(d!=n||g!=e)&&void 0!==(l=t[g][d]);){if(0===(h=l.cval)||15===h)return{path:a,info:"mergeable"};f=c[h],r=s[h],i=u[h],5!==h&&10!==h||(5===h?l.flipped?-1===u[v]?(f="left",r=-1,i=0):(f="right",r=1,i=0):-1===s[v]&&(f="bottom",r=0,i=-1):10===h&&(l.flipped?-1===s[v]?(f="top",r=0,i=1):(f="bottom",r=0,i=-1):1===u[v]&&(f="left",r=-1,i=0))),p=mt(l,f),a.push([d+p[0],g+p[1]]),yt(l),d+=r,g+=i,v=h}return{path:a,info:"closed"}}(t.cells,i,o),s=!1;if("mergeable"===a.info)for(var u=a.path[a.path.length-1][0],c=a.path[a.path.length-1][1],l=n-1;l>=0;l--)if(Math.abs(e[l][0][0]-u)<=1e-7&&Math.abs(e[l][0][1]-c)<=1e-7){for(var h=a.path.length-2;h>=0;--h)e[l].unshift(a.path[h]);s=!0;break}s||(e[n++]=a.path)}var f}))})),e}(function(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var a=0;a<r;++a){var s=0,u=t[o+1][a],c=t[o+1][a+1],l=t[o][a+1],h=t[o][a];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(h))){s|=u>=e?8:0,s|=c>=e?4:0,s|=l>=e?2:0;var f,p,d,g,v=!1;if(5===(s|=h>=e?1:0)||10===s){var y=(u+c+l+h)/4;5===s&&y<e?(s=10,v=!0):10===s&&y<e&&(s=5,v=!0)}0!==s&&15!==s&&(f=p=d=g=.5,1===s?(d=1-gt(e,u,h),p=1-gt(e,l,h)):2===s?(p=gt(e,h,l),g=1-gt(e,c,l)):3===s?(d=1-gt(e,u,h),g=1-gt(e,c,l)):4===s?(f=gt(e,u,c),g=gt(e,l,c)):5===s?(f=gt(e,u,c),g=gt(e,l,c),p=1-gt(e,l,h),d=1-gt(e,u,h)):6===s?(p=gt(e,h,l),f=gt(e,u,c)):7===s?(d=1-gt(e,u,h),f=gt(e,u,c)):8===s?(d=gt(e,h,u),f=1-gt(e,c,u)):9===s?(p=1-gt(e,l,h),f=1-gt(e,c,u)):10===s?(f=1-gt(e,c,u),g=1-gt(e,c,l),p=gt(e,h,l),d=gt(e,h,u)):11===s?(f=1-gt(e,c,u),g=1-gt(e,c,l)):12===s?(d=gt(e,h,u),g=gt(e,l,c)):13===s?(p=1-gt(e,l,h),g=gt(e,l,c)):14===s?(d=gt(e,h,u),p=gt(e,h,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+s),i.cells[o][a]={cval:s,flipped:v,top:f,right:g,bottom:p,left:d})}}}return i}(t,e));return"function"==typeof pt.successCallback&&pt.successCallback(s),s}function gt(t,e,n){return(t-e)/(n-e)}function vt(t){return 0===t.cval||15===t.cval}function yt(t){vt(t)||5===t.cval||10===t.cval||(t.cval=15)}function mt(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}var _t=wt,bt=wt;function wt(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*c/a+l)),Math.min(i,Math.floor(n+(a-s)*c/a+l)),o)}var h=e[n],f=r,p=i;for(xt(e,r,n),o(e[i],h)>0&&xt(e,r,i);f<p;){for(xt(e,f,p),f++,p--;o(e[f],h)<0;)f++;for(;o(e[p],h)>0;)p--}0===o(e[r],h)?xt(e,r,p):xt(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||Et)}function xt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Et(t,e){return t<e?-1:t>e?1:0}_t.default=bt;var Ot=It,kt=It;function It(t,e){if(!(this instanceof It))return new It(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function St(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function Ct(t,e){Tt(t,0,t.children.length,e,t)}function Tt(t,e,n,r,i){i||(i=Dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,a=e;a<n;a++)o=t.children[a],Nt(i,t.leaf?r(o):o);return i}function Nt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Pt(t,e){return t.minX-e.minX}function Lt(t,e){return t.minY-e.minY}function jt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Mt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Rt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function At(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ft(t,e,n,r,i){for(var o,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(o=e+Math.ceil((n-e)/r/2)*r,_t(t,o,e,n,i),a.push(e,o,o,n))}function zt(t){var e={exports:{}};return t(e,e.exports),e.exports}It.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!At(t,e))return n;for(var i,o,a,s,u=[];e;){for(i=0,o=e.children.length;i<o;i++)a=e.children[i],At(t,s=e.leaf?r(a):a)&&(e.leaf?n.push(a):Rt(t,s)?this._all(a,n):u.push(a));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!At(t,e))return!1;for(var r,i,o,a,s=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],At(t,a=e.leaf?n(o):o)){if(e.leaf||Rt(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,a=this.data,s=this.toBBox(t),u=[],c=[];a||u.length;){if(a||(a=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),a.leaf&&-1!==(i=St(t,a.children,e)))return a.children.splice(i,1),u.push(a),this._condense(u),this;o||a.leaf||!Rt(a,s)?r?(n++,a=r.children[n],o=!1):a=null:(u.push(a),c.push(n),n=0,r=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:Pt,compareMinY:Lt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,a=this._maxEntries;if(o<=a)return Ct(i=Dt(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,r-1))),(i=Dt([])).leaf=!1,i.height=r;var s,u,c,l,h=Math.ceil(o/a),f=h*Math.ceil(Math.sqrt(a));for(Ft(t,e,n,f,this.compareMinX),s=e;s<=n;s+=f)for(Ft(t,s,c=Math.min(s+f-1,n),h,this.compareMinY),u=s;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return Ct(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,a,s,u,c,l,h,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(l=h=1/0,i=0,o=e.children.length;i<o;i++)u=jt(a=e.children[i]),f=t,p=a,(c=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<h?(h=c,l=u<l?u:l,s=a):c===h&&u<l&&(l=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],a=this._chooseSubtree(i,this.data,e,o);for(a.children.push(t),Nt(a,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),a=Dt(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,Ct(n,this.toBBox),Ct(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},_splitRoot:function(t,e){this.data=Dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Ct(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,a,s,u,c,l,h,f,p,d,g,v;for(u=c=1/0,r=e;r<=n-e;r++)h=i=Tt(t,0,r,this.toBBox),f=o=Tt(t,r,n,this.toBBox),p=Math.max(h.minX,f.minX),d=Math.max(h.minY,f.minY),g=Math.min(h.maxX,f.maxX),v=Math.min(h.maxY,f.maxY),a=Math.max(0,g-p)*Math.max(0,v-d),s=jt(i)+jt(o),a<u?(u=a,l=r,c=s<c?s:c):a===u&&s<c&&(c=s,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Pt,i=t.leaf?this.compareMinY:Lt;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,a=this.toBBox,s=Tt(t,0,e,a),u=Tt(t,n-e,n,a),c=Mt(s)+Mt(u);for(i=e;i<n-e;i++)o=t.children[i],Nt(s,t.leaf?a(o):o),c+=Mt(s);for(i=n-e-1;i>=e;i--)o=t.children[i],Nt(u,t.leaf?a(o):o),c+=Mt(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Nt(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():Ct(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},Ot.default=kt;var Bt=function(t,e,n){var r=t*e,i=Ut*t,o=i-(i-t),a=t-o,s=Ut*e,u=s-(s-e),c=e-u,l=a*c-(r-o*u-a*u-o*c);return n?(n[0]=l,n[1]=r,n):[l,r]},Ut=+(Math.pow(2,27)+1),Vt=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(f=l(h=t[u]))):(o=p,(c+=1)<r&&(d=l(p=e[c]))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c])));for(var g,v,y=i+o,m=y-i,_=o-m,b=_,w=y;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=e[c]))),(_=(o=b)-(m=(y=i+o)-i))&&(a[s++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g;for(;u<n;)(_=(o=b)-(m=(y=(i=h)+o)-i))&&(a[s++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(u+=1)<n&&(h=t[u]);for(;c<r;)(_=(o=b)-(m=(y=(i=p)+o)-i))&&(a[s++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(c+=1)<r&&(p=e[c]);return b&&(a[s++]=b),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a},qt=function(t,e,n){var r=t+e,i=r-t,o=e-i,a=t-(r-i);return n?(n[0]=a+o,n[1]=r,n):[a+o,r]},Gt=function(t,e){var n=t.length;if(1===n){var r=Bt(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],a=[.1,.1],s=0;Bt(t[0],e,o),o[0]&&(i[s++]=o[0]);for(var u=1;u<n;++u){Bt(t[u],e,a);var c=o[1];qt(c,a[0],o),o[0]&&(i[s++]=o[0]);var l=a[1],h=o[1],f=l+h,p=h-(f-l);o[1]=f,p&&(i[s++]=p)}return o[1]&&(i[s++]=o[1]),0===s&&(i[s++]=0),i.length=s,i},Ht=function(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return function(t,e){var n=t+e,r=n-t,i=t-(n-r)+(e-r);return i?[i,n]:[n]}(t[0],-e[0]);var i,o,a=new Array(n+r),s=0,u=0,c=0,l=Math.abs,h=t[u],f=l(h),p=-e[c],d=l(p);f<d?(o=h,(u+=1)<n&&(f=l(h=t[u]))):(o=p,(c+=1)<r&&(d=l(p=-e[c]))),u<n&&f<d||c>=r?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c])));for(var g,v,y=i+o,m=y-i,_=o-m,b=_,w=y;u<n&&c<r;)f<d?(i=h,(u+=1)<n&&(f=l(h=t[u]))):(i=p,(c+=1)<r&&(d=l(p=-e[c]))),(_=(o=b)-(m=(y=i+o)-i))&&(a[s++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g;for(;u<n;)(_=(o=b)-(m=(y=(i=h)+o)-i))&&(a[s++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(u+=1)<n&&(h=t[u]);for(;c<r;)(_=(o=b)-(m=(y=(i=p)+o)-i))&&(a[s++]=_),b=w-((g=w+y)-(v=g-w))+(y-v),w=g,(c+=1)<r&&(p=-e[c]);return b&&(a[s++]=b),w&&(a[s++]=w),s||(a[s++]=0),a.length=s,a},Wt=zt((function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[r][o]);return n}function n(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",n(t.slice(0,e)),",",n(t.slice(e)),")"].join("")}function r(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var i=[],o=0;o<t.length;++o)i.push(["scale(",n(r(e(t,o))),",",(a=o,1&a?"-":""),t[0][o],")"].join(""));return i;var a}function i(t){for(var i=[],o=[],a=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}(t),s=[],u=0;u<t;++u)0==(1&u)?i.push.apply(i,r(e(a,u))):o.push.apply(o,r(e(a,u))),s.push("m"+u);var c=n(i),l=n(o),h="orientation"+t+"Exact",f=["function ",h,"(",s.join(),"){var p=",c,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",h].join("");return new Function("sum","prod","scale","sub",f)(Vt,Bt,Gt,Ht)}var o=i(3),a=i(4),s=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),a=(t[0]-n[0])*(e[1]-n[1]),s=i-a;if(i>0){if(a<=0)return s;r=i+a}else{if(!(i<0))return s;if(a>=0)return s;r=-(i+a)}var u=33306690738754716e-32*r;return s>=u||s<=-u?s:o(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],u=t[1]-r[1],c=e[1]-r[1],l=n[1]-r[1],h=t[2]-r[2],f=e[2]-r[2],p=n[2]-r[2],d=o*l,g=s*c,v=s*u,y=i*l,m=i*c,_=o*u,b=h*(d-g)+f*(v-y)+p*(m-_),w=7771561172376103e-31*((Math.abs(d)+Math.abs(g))*Math.abs(h)+(Math.abs(v)+Math.abs(y))*Math.abs(f)+(Math.abs(m)+Math.abs(_))*Math.abs(p));return b>w||-b>w?b:a(t,e,n,r)}];function u(t){var e=s[t.length];return e||(e=s[t.length]=i(t.length)),e.apply(void 0,t)}!function(){for(;s.length<=5;)s.push(i(s.length));for(var e=[],n=["slow"],r=0;r<=5;++r)e.push("a"+r),n.push("o"+r);var o=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)o.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");o.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(o.join(""));var a=Function.apply(void 0,n);for(t.exports=a.apply(void 0,[u].concat(s)),r=0;r<=5;++r)t.exports[r]=s[r]}()})),Xt=Wt[3],Yt=Kt,Zt=Kt;function Kt(t,e){if(!(this instanceof Kt))return new Kt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Qt,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Qt(t,e){return t<e?-1:t>e?1:0}Kt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&n(e[a],s)<0&&(o=a,s=e[a]),n(s,i)>=0)break;e[t]=s,t=o}e[t]=i}},Yt.default=Zt;var Jt=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,a=e.length-1;o<e.length;a=o++){var s=e[o][0],u=e[o][1],c=e[a][0],l=e[a][1];u>r!=l>r&&n<(c-s)*(r-u)/(l-u)+s&&(i=!i)}return i},$t=Wt[3],te=ne,ee=ne;function ne(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=function(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var a=t[o];a[0]<e[0]&&(e=a),a[0]>r[0]&&(r=a),a[1]<n[1]&&(n=a),a[1]>i[1]&&(i=a)}var s=[e,n,r,i],u=s.slice();for(o=0;o<t.length;o++)Jt(t[o],s)||u.push(t[o]);var c=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var i=new Array(e);for(r=0;r<e;++r)i[r]=r;i.sort((function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]}));var o=[i[0],i[1]],a=[i[0],i[1]];for(r=2;r<e;++r){for(var s=i[r],u=t[s],c=o.length;c>1&&Xt(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(s),c=a.length;c>1&&Xt(t[a[c-2]],t[a[c-1]],u)>=0;)c-=1,a.pop();a.push(s)}n=new Array(a.length+o.length-2);for(var l=0,h=(r=0,o.length);r<h;++r)n[l++]=o[r];for(var f=a.length-2;f>0;--f)n[l++]=a[f];return n}(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}(t),o=Ot(16,["[0]","[1]","[0]","[1]"]).load(t),a=[],s=0;s<i.length;s++){var u=i[s];o.remove(u),r=ce(u,r),a.push(r)}var c=Ot(16);for(s=0;s<a.length;s++)c.insert(ue(a[s]));for(var l=e*e,h=n*n;a.length;){var f=a.shift(),p=f.p,d=f.next.p,g=le(p,d);if(!(g<h)){var v=g/l;(u=re(o,f.prev.p,p,d,f.next.next.p,v,c))&&Math.min(le(u,p),le(u,d))<=v&&(a.push(f),a.push(ce(u,f)),o.remove(u),c.remove(f),c.insert(ue(f)),c.insert(ue(f.next)))}}f=r;var y=[];do{y.push(f.p),f=f.next}while(f!==r);return y.push(f.p),y}function re(t,e,n,r,i,o,a){for(var s=new Yt(null,ie),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],h=u.leaf?he(l,n,r):oe(n,r,l);h>o||s.push({node:l,dist:h})}for(;s.length&&!s.peek().node.children;){var f=s.pop(),p=f.node,d=he(p,e,n),g=he(p,r,i);if(f.dist<d&&f.dist<g&&se(n,p,a)&&se(r,p,a))return p}(u=s.pop())&&(u=u.node)}return null}function ie(t,e){return t.dist-e.dist}function oe(t,e,n){if(ae(t,n)||ae(e,n))return 0;var r=fe(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=fe(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=fe(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var a=fe(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,i,o,a)}function ae(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function se(t,e,n){for(var r,i,o,a,s=Math.min(t[0],e[0]),u=Math.min(t[1],e[1]),c=Math.max(t[0],e[0]),l=Math.max(t[1],e[1]),h=n.search({minX:s,minY:u,maxX:c,maxY:l}),f=0;f<h.length;f++)if(r=h[f].p,i=h[f].next.p,o=t,r!==(a=e)&&i!==o&&$t(r,i,o)>0!=$t(r,i,a)>0&&$t(o,a,r)>0!=$t(o,a,i)>0)return!1;return!0}function ue(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function ce(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function le(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function he(t,e,n){var r=e[0],i=e[1],o=n[0]-r,a=n[1]-i;if(0!==o||0!==a){var s=((t[0]-r)*o+(t[1]-i)*a)/(o*o+a*a);s>1?(r=n[0],i=n[1]):s>0&&(r+=o*s,i+=a*s)}return(o=t[0]-r)*o+(a=t[1]-i)*a}function fe(t,e,n,r,i,o,a,s){var u,c,l,h,f=n-t,p=r-e,d=a-i,g=s-o,v=t-i,y=e-o,m=f*f+p*p,_=f*d+p*g,b=d*d+g*g,w=f*v+p*y,x=d*v+g*y,E=m*b-_*_,O=E,k=E;0===E?(c=0,O=1,h=x,k=b):(h=m*x-_*w,(c=_*x-b*w)<0?(c=0,h=x,k=b):c>O&&(c=O,h=x+_,k=b)),h<0?(h=0,-w<0?c=0:-w>m?c=O:(c=-w,O=m)):h>k&&(h=k,-w+_<0?c=0:-w+_>m?c=O:(c=-w+_,O=m));var I=(1-(l=0===h?0:h/k))*i+l*a-((1-(u=0===c?0:c/O))*t+u*n),S=(1-l)*o+l*s-((1-u)*e+u*r);return I*I+S*S}function pe(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(j(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=te(n,e.concavity);return r.length>3?l([r]):null}function de(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=J(t),i=it(e),o=i.type,a=e.bbox,s=i.coordinates;if(a&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,a))return!1;"Polygon"===o&&(s=[s]);for(var u=!1,c=0;c<s.length&&!u;c++)if(ge(r,s[c][0],n.ignoreBoundary)){for(var l=!1,h=1;h<s[c].length&&!l;)ge(r,s[c][h],!n.ignoreBoundary)&&(l=!0),h++;l||(u=!0)}return u}function ge(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var a=e[i][0],s=e[i][1],u=e[o][0],c=e[o][1];if(t[1]*(a-u)+s*(u-t[0])+c*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!n;s>t[1]!=c>t[1]&&t[0]<(u-a)*(t[1]-s)/(c-s)+a&&(r=!r)}return r}function ve(t,e){var n=[];return D(t,(function(t){var r=!1;if("Point"===t.geometry.type)B(e,(function(e){de(t,e)&&(r=!0)})),r&&n.push(t);else{if("MultiPoint"!==t.geometry.type)throw new Error("Input geometry must be a Point or MultiPoint");var i=[];B(e,(function(e){j(t,(function(t){de(t,e)&&(r=!0,i.push(t))}))})),r&&n.push(v(i))}})),d(n)}function ye(t,e,n){void 0===n&&(n={});var r=J(t),i=J(e),o=k(i[1]-r[1]),a=k(i[0]-r[0]),s=k(r[1]),u=k(i[1]),c=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return b(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function me(t,e){var n=!1;return d(function(t){if(t.length<3)return[];t.sort(be);for(var e,n,r,i,o,a,s=t.length-1,u=t[s].x,c=t[0].x,l=t[s].y,h=l;s--;)t[s].y<l&&(l=t[s].y),t[s].y>h&&(h=t[s].y);var f,p=c-u,d=h-l,g=p>d?p:d,v=.5*(c+u),y=.5*(h+l),m=[new _e({__sentinel:!0,x:v-20*g,y:y-g},{__sentinel:!0,x:v,y:y+20*g},{__sentinel:!0,x:v+20*g,y:y-g})],_=[],b=[];for(s=t.length;s--;){for(b.length=0,f=m.length;f--;)(p=t[s].x-m[f].x)>0&&p*p>m[f].r?(_.push(m[f]),m.splice(f,1)):p*p+(d=t[s].y-m[f].y)*d>m[f].r||(b.push(m[f].a,m[f].b,m[f].b,m[f].c,m[f].c,m[f].a),m.splice(f,1));for(we(b),f=b.length;f;)n=b[--f],e=b[--f],r=t[s],i=n.x-e.x,o=n.y-e.y,a=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(a)>1e-12&&m.push(new _e(e,n,r))}for(Array.prototype.push.apply(_,m),s=_.length;s--;)(_[s].a.__sentinel||_[s].b.__sentinel||_[s].c.__sentinel)&&_.splice(s,1);return _}(t.features.map((function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r}))).map((function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],o={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):o={a:t.a.z,b:t.b.z,c:t.c.z},l([[e,r,i,e]],o)})))}te.default=ee;var _e=function(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,a=e.y-t.y,s=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+a*(t.y+e.y),l=s*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-a*(n.x-e.x));this.x=(u*c-a*l)/h,this.y=(o*l-s*c)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i};function be(t,e){return e.x-t.x}function we(t){var e,n,r,i,o,a=t.length;t:for(;a;)for(n=t[--a],e=t[--a],r=a;r;)if(o=t[--r],e===(i=t[--r])&&n===o||e===o&&n===i){t.splice(a,2),t.splice(r,2),a-=2;continue t}}function xe(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return Ee(t);case"FeatureCollection":return function(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}})),e.features=t.features.map((function(t){return Ee(t)})),e}(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Oe(t);default:throw new Error("unknown GeoJSON type")}}function Ee(t){var e={type:"Feature"};return Object.keys(t).forEach((function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}})),e.properties=function t(e){var n={};return e?(Object.keys(e).forEach((function(r){var i=e[r];"object"==typeof i?null===i?n[r]=null:Array.isArray(i)?n[r]=i.map((function(t){return t})):n[r]=t(i):n[r]=i})),n):n}(t.properties),e.geometry=Oe(t.geometry),e}function Oe(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map((function(t){return Oe(t)})),e):(e.coordinates=function t(e){var n=e;return"object"!=typeof n[0]?n.slice():n.map((function(e){return t(e)}))}(t.coordinates),e)}function ke(t){return t[0].toString()+","+t[1].toString()}function Ie(t){return t}function Se(t,e){var n=function(t){if(null==t)return Ie;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,s){s||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+a;u<c;)l[u]=t[u],++u;return l}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],o=0,a=i.length;o<a;++o)e.push(n(i[o],o));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,a)}function o(t){return n(t)}function a(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=a(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=o(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(o);break;case"LineString":n=a(e.arcs);break;case"MultiLineString":n=e.arcs.map(a);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(e)}function Ce(t,e){var n={},r=[],i=[];function o(t){t.forEach((function(e){e.forEach((function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)}))})),r.push(t)}function a(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(Se(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":o(e.arcs);break;case"MultiPolygon":e.arcs.forEach(o)}})),r.forEach((function(t){if(!t._){var e=[],r=[t];for(t._=1,i.push(e);t=r.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].forEach((function(t){t._||(t._=1,r.push(t))}))}))}))}})),r.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var r,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){n[t<0?~t:t].length<2&&i.push(t)}))}))})),(r=(i=function(t,e){var n={},r={},i={},o=[],a=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)})),e.forEach((function(e){var n,o,a=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=u,o=r[u]){delete r[o.start];var c=o===n?n:n.concat(o);r[c.start=n.start]=i[c.end=o.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(e),n.start=s,o=i[s]){delete i[o.end];var l=o===n?n:o.concat(n);r[l.start=o.start]=i[l.end=n.end]=l}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||o.push([t])})),o}(t,i)).length)>1)for(var o,s,u=1,c=a(i[0]);u<r;++u)(o=a(i[u]))>c&&(s=i[0],i[0]=i[u],i[u]=s,c=o);return i})).filter((function(t){return t.length>0}))}}var Te=Object.prototype.hasOwnProperty;function Ne(t,e,n,r,i,o){3===arguments.length&&(r=o=Array,i=null);for(var a=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),s=new o(t),u=t-1,c=0;c<t;++c)a[c]=i;function l(r,o){for(var c=e(r)&u,l=a[c],h=0;l!=i;){if(n(l,r))return s[c]=o;if(++h>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o}function h(r,o){for(var c=e(r)&u,l=a[c],h=0;l!=i;){if(n(l,r))return s[c];if(++h>=t)throw new Error("full hashmap");l=a[c=c+1&u]}return a[c]=r,s[c]=o,o}function f(r,o){for(var c=e(r)&u,l=a[c],h=0;l!=i;){if(n(l,r))return s[c];if(++h>=t)break;l=a[c=c+1&u]}return o}function p(){for(var t=[],e=0,n=a.length;e<n;++e){var r=a[e];r!=i&&t.push(r)}return t}return{set:l,maybeSet:h,get:f,keys:p}}function Pe(t,e){return t[0]===e[0]&&t[1]===e[1]}var Le=new ArrayBuffer(16),je=new Float64Array(Le),Me=new Uint32Array(Le);function Re(t){je[0]=t[0],je[1]=t[1];var e=Me[0]^Me[1];return 2147483647&(e<<5^e>>7^Me[2]^Me[3])}function Ae(t,e,n,r){De(t,e,n),De(t,e,e+r),De(t,e+r,n)}function De(t,e,n){for(var r,i=e+(n---e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Fe(t){var e={type:"GeometryCollection",geometries:t.features.map(ze)};return null!=t.bbox&&(e.bbox=t.bbox),e}function ze(t){var e,n=Be(t.geometry);for(e in null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox),t.properties){n.properties=t.properties;break}return n}function Be(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Be)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),e}function Ue(t,e){var n=function(t){var e=1/0,n=1/0,r=-1/0,i=-1/0;function o(t){null!=t&&Te.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},Point:function(t){s(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(s)},LineString:function(t){u(t.arcs)},MultiLineString:function(t){t.arcs.forEach(u)},Polygon:function(t){t.arcs.forEach(u)},MultiPolygon:function(t){t.arcs.forEach(c)}};function s(t){var o=t[0],a=t[1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>i&&(i=a)}function u(t){t.forEach(s)}function c(t){t.forEach(u)}for(var l in t)o(t[l]);return r>=e&&i>=n?[e,n,r,i]:void 0}(t=function(t){var e,n,r={};for(e in t)r[e]=null==(n=t[e])?{type:null}:("FeatureCollection"===n.type?Fe:"Feature"===n.type?ze:Be)(n);return r}(t)),r=e>0&&n&&function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=o-r?(n-1)/(o-r):1,u=a-i?(n-1)/(a-i):1;function c(t){return[Math.round((t[0]-r)*s),Math.round((t[1]-i)*u)]}function l(t,e){for(var n,o,a,c,l,h=-1,f=0,p=t.length,d=new Array(p);++h<p;)n=t[h],c=Math.round((n[0]-r)*s),l=Math.round((n[1]-i)*u),c===o&&l===a||(d[f++]=[o=c,a=l]);for(d.length=f;f<e;)f=d.push([d[0][0],d[0][1]]);return d}function h(t){return l(t,2)}function f(t){return l(t,4)}function p(t){return t.map(f)}function d(t){null!=t&&Te.call(g,t.type)&&g[t.type](t)}var g={GeometryCollection:function(t){t.geometries.forEach(d)},Point:function(t){t.coordinates=c(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(c)},LineString:function(t){t.arcs=h(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(h)},Polygon:function(t){t.arcs=p(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(p)}};for(var v in t)d(t[v]);return{scale:[1/s,1/u],translate:[r,i]}}(t,n,e),i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=a.length+s.length;for(delete t.lines,delete t.rings,r=0,i=a.length;r<i;++r)for(e=a[r];e=e.next;)++u;for(r=0,i=s.length;r<i;++r)for(n=s[r];n=n.next;)++u;var c=Ne(2*u*1.4,Re,Pe),l=t.arcs=[];for(r=0,i=a.length;r<i;++r){e=a[r];do{h(e)}while(e=e.next)}for(r=0,i=s.length;r<i;++r)if((n=s[r]).next)do{h(n)}while(n=n.next);else f(n);function h(t){var e,n,r,i,a,s,u,h;if(r=c.get(e=o[t[0]]))for(u=0,h=r.length;u<h;++u)if(p(i=r[u],t))return t[0]=i[0],void(t[1]=i[1]);if(a=c.get(n=o[t[1]]))for(u=0,h=a.length;u<h;++u)if(d(s=a[u],t))return t[1]=s[0],void(t[0]=s[1]);r?r.push(t):c.set(e,[t]),a?a.push(t):c.set(n,[t]),l.push(t)}function f(t){var e,n,r,i,a;if(n=c.get(o[t[0]]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(v(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=c.get(e=o[t[0]+y(t)]))for(i=0,a=n.length;i<a;++i){if(g(r=n[i],t))return t[0]=r[0],void(t[1]=r[1]);if(v(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):c.set(e,[t]),l.push(t)}function p(t,e){var n=t[0],r=e[0],i=t[1];if(n-i!=r-e[1])return!1;for(;n<=i;++n,++r)if(!Pe(o[n],o[r]))return!1;return!0}function d(t,e){var n=t[0],r=e[0],i=t[1],a=e[1];if(n-i!=r-a)return!1;for(;n<=i;++n,--a)if(!Pe(o[n],o[a]))return!1;return!0}function g(t,e){var n=t[0],r=e[0],i=t[1]-n;if(i!==e[1]-r)return!1;for(var a=y(t),s=y(e),u=0;u<i;++u)if(!Pe(o[n+(u+a)%i],o[r+(u+s)%i]))return!1;return!0}function v(t,e){var n=t[0],r=e[0],i=t[1],a=e[1],s=i-n;if(s!==a-r)return!1;for(var u=y(t),c=s-y(e),l=0;l<s;++l)if(!Pe(o[n+(l+u)%s],o[a-(l+c)%s]))return!1;return!0}function y(t){for(var e=t[0],n=t[1],r=e,i=r,a=o[r];++r<n;){var s=o[r];(s[0]<a[0]||s[0]===a[0]&&s[1]<a[1])&&(i=r,a=s)}return i-e}return t}(function(t){var e,n,r,i=function(t){var e,n,r,i,o=t.coordinates,a=t.lines,s=t.rings,u=function(){for(var t=Ne(1.4*o.length,w,x,Int32Array,-1,Int32Array),e=new Int32Array(o.length),n=0,r=o.length;n<r;++n)e[n]=t.maybeSet(n,n);return e}(),c=new Int32Array(o.length),l=new Int32Array(o.length),h=new Int32Array(o.length),f=new Int8Array(o.length),p=0;for(e=0,n=o.length;e<n;++e)c[e]=l[e]=h[e]=-1;for(e=0,n=a.length;e<n;++e){var d=a[e],g=d[0],v=d[1];for(r=u[g],i=u[++g],++p,f[r]=1;++g<=v;)b(e,r,r=i,i=u[g]);++p,f[i]=1}for(e=0,n=o.length;e<n;++e)c[e]=-1;for(e=0,n=s.length;e<n;++e){var y=s[e],m=y[0]+1,_=y[1];for(b(e,u[_-1],r=u[m-1],i=u[m]);++m<=_;)b(e,r,r=i,i=u[m])}function b(t,e,n,r){if(c[n]!==t){c[n]=t;var i=l[n];if(i>=0){var o=h[n];i===e&&o===r||i===r&&o===e||(++p,f[n]=1)}else l[n]=e,h[n]=r}}function w(t){return Re(o[t])}function x(t,e){return Pe(o[t],o[e])}c=l=h=null;var E,O=function(t,e,n,r,i){3===arguments.length&&(r=Array,i=null);for(var o=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),a=t-1,s=0;s<t;++s)o[s]=i;function u(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)throw new Error("full hashset");u=o[s=s+1&a]}return o[s]=r,!0}function c(r){for(var s=e(r)&a,u=o[s],c=0;u!=i;){if(n(u,r))return!0;if(++c>=t)break;u=o[s=s+1&a]}return!1}function l(){for(var t=[],e=0,n=o.length;e<n;++e){var r=o[e];r!=i&&t.push(r)}return t}return{add:u,has:c,values:l}}(1.4*p,Re,Pe);for(e=0,n=o.length;e<n;++e)f[E=u[e]]&&O.add(o[E]);return O}(t),o=t.coordinates,a=t.lines,s=t.rings;for(n=0,r=a.length;n<r;++n)for(var u=a[n],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=s.length;n<r;++n)for(var h=s[n],f=h[0],p=f,d=h[1],g=i.has(o[f]);++p<d;)i.has(o[p])&&(g?(e={0:p,1:h[1]},h[1]=p,h=h.next=e):(Ae(o,f,d,d-p),o[d]=o[f],g=!0,p=f));return t}(function(t){var e=-1,n=[],r=[],i=[];function o(t){t&&Te.call(a,t.type)&&a[t.type](t)}var a={GeometryCollection:function(t){t.geometries.forEach(o)},LineString:function(t){t.arcs=s(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(s)},Polygon:function(t){t.arcs=t.arcs.map(u)},MultiPolygon:function(t){t.arcs=t.arcs.map(c)}};function s(t){for(var r=0,o=t.length;r<o;++r)i[++e]=t[r];var a={0:e-o+1,1:e};return n.push(a),a}function u(t){for(var n=0,o=t.length;n<o;++n)i[++e]=t[n];var a={0:e-o+1,1:e};return r.push(a),a}function c(t){return t.map(u)}for(var l in t)o(t[l]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:t}}(t))),o=i.coordinates,a=Ne(1.4*i.arcs.length,Ve,qe);function s(t){t&&Te.call(u,t.type)&&u[t.type](t)}t=i.objects,i.bbox=n,i.arcs=i.arcs.map((function(t,e){return a.set(t,e),o.slice(t[0],t[1]+1)})),delete i.coordinates,o=null;var u={GeometryCollection:function(t){t.geometries.forEach(s)},LineString:function(t){t.arcs=c(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(c)},Polygon:function(t){t.arcs=t.arcs.map(c)},MultiPolygon:function(t){t.arcs=t.arcs.map(l)}};function c(t){var e=[];do{var n=a.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function l(t){return t.map(c)}for(var h in t)s(t[h]);return r&&(i.transform=r,i.arcs=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],a=0,s=1,u=o.length,c=o[0],l=c[0],h=c[1];++a<u;)r=(c=o[a])[0],i=c[1],r===l&&i===h||(o[s++]=[r-l,i-h],l=r,h=i);1===s&&(o[s++]=[0,0]),o.length=s}return t}(i.arcs)),i}function Ve(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function qe(t,e){var n,r=t[0],i=t[1],o=e[0],a=e[1];return i<r&&(n=r,r=i,i=n),a<o&&(n=o,o=a,a=n),r===o&&i===a}function Ge(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=xe(t));var r=function(t){var e={};V(t,(function(t){e[t.geometry.type]=!0}));var n=Object.keys(e);return 1===n.length?n[0]:null}(t);if(!r)throw new Error("geojson must be homogenous");var i=t;switch(r){case"LineString":return function(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==n&&void 0!==n||(t=xe(t));var r=[],i=X(t,(function(t,e){return function(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=ke(r[0]),a=ke(r[r.length-1]),s=ke(i[0]),u=ke(i[i.length-1]);if(o===u)n=i.concat(r.slice(1));else if(s===a)n=r.concat(i.slice(1));else if(o===s)n=r.slice(1).reverse().concat(i);else{if(a!==u)return null;n=r.concat(i.reverse().slice(1))}return f(n)}(t,e)||(r.push(t),e)}));return i&&r.push(i),r.length?1===r.length?r[0]:g(r.map((function(t){return t.coordinates}))):null}(i,e);case"Polygon":return function(t,e){if(void 0===e&&(e={}),"FeatureCollection"!==ot(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");!1!==e.mutate&&void 0!==e.mutate||(t=xe(t));var n=[];V(t,(function(t){n.push(t.geometry)}));var r=Ue({geoms:m(n).geometry});return function(t){return Se(t,Ce.apply(this,arguments))}(r,r.objects.geoms.geometries)}(i,e);default:throw new Error(r+" is not supported")}}function He(t,e){void 0===e&&(e={});var n="object"==typeof e?e.mutate:e;if(!t)throw new Error("geojson is required");var r=ot(t),i=[];switch(r){case"LineString":i=We(t);break;case"MultiLineString":case"Polygon":$(t).forEach((function(t){i.push(We(t))}));break;case"MultiPolygon":$(t).forEach((function(t){var e=[];t.forEach((function(t){e.push(We(t))})),i.push(e)}));break;case"Point":return t;case"MultiPoint":var o={};$(t).forEach((function(t){var e=t.join("-");Object.prototype.hasOwnProperty.call(o,e)||(i.push(t),o[e]=!0)}));break;default:throw new Error(r+" geometry not supported")}return t.coordinates?!0===n?(t.coordinates=i,t):{type:r,coordinates:i}:!0===n?(t.geometry.coordinates=i,t):a({type:r,coordinates:i},t.properties,{bbox:t.bbox,id:t.id})}function We(t){var e=$(t);if(2===e.length&&!Xe(e[0],e[1]))return e;var n=[],r=e.length-1,i=n.length;n.push(e[0]);for(var o=1;o<r;o++){var a=n[n.length-1];e[o][0]===a[0]&&e[o][1]===a[1]||(n.push(e[o]),(i=n.length)>2&&Ye(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1))}if(n.push(e[e.length-1]),i=n.length,Xe(e[0],e[e.length-1])&&i<4)throw new Error("invalid polygon");return Ye(n[i-3],n[i-1],n[i-2])&&n.splice(n.length-2,1),n}function Xe(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ye(t,e,n){var r=n[0],i=n[1],o=t[0],a=t[1],s=e[0],u=e[1],c=s-o,l=u-a;return 0===(r-o)*l-(i-a)*c&&(Math.abs(c)>=Math.abs(l)?c>0?o<=r&&r<=s:s<=r&&r<=o:l>0?a<=i&&i<=u:u<=i&&i<=a)}function Ze(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function Ke(t,e){var n=t.length-1,r=[t[0]];return function t(e,n,r,i,o){for(var a,s=i,u=n+1;u<r;u++){var c=Ze(e[u],e[n],e[r]);c>s&&(a=u,s=c)}s>i&&(a-n>1&&t(e,n,a,i,o),o.push(e[a]),r-a>1&&t(e,a,r,i,o))}(t,0,n,e,r),r.push(t[n]),r}function Qe(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return Ke(t=n?t:function(t,e){for(var n,r,i,o,a,s=t[0],u=[s],c=1,l=t.length;c<l;c++)i=s,(o=(r=n=t[c]).x-i.x)*o+(a=r.y-i.y)*a>e&&(u.push(n),s=n);return s!==n&&u.push(n),u}(t,r),r)}function Je(t,e,n){return Qe(t.map((function(t){return{x:t[0],y:t[1],z:t[2]}})),e,n).map((function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]}))}function $e(t,e,n){return t.map((function(t){var r=t.map((function(t){return{x:t[0],y:t[1]}}));if(r.length<4)throw new Error("invalid polygon");for(var i=Qe(r,e,n).map((function(t){return[t.x,t.y]}));!tn(i);)i=Qe(r,e-=.01*e,n).map((function(t){return[t.x,t.y]}));return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i}))}function tn(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}var en=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){var i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,a=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+a)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+a)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return t.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r);Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z))>t&&(e.push(r),n=i)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var r=Math.floor((this.points.length-1)*n);return function(t,e,n,r,i){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:i.x*o[0]+r.x*o[1]+n.x*o[2]+e.x*o[3],y:i.y*o[0]+r.y*o[1]+n.y*o[2]+e.y*o[3],z:i.z*o[0]+r.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-r,this.points[r],this.controls[r][1],this.controls[r+1][0],this.points[r+1])},t}();function nn(t,e){void 0===e&&(e={});for(var n=e.resolution||1e4,r=e.sharpness||.85,i=[],o=it(t).coordinates.map((function(t){return{x:t[0],y:t[1]}})),a=new en({duration:n,points:o,sharpness:r}),s=function(t){var e=a.pos(t);Math.floor(t/100)%2==0&&i.push([e.x,e.y])},u=0;u<a.duration;u+=10)s(u);return s(a.duration),f(i,e.properties)}function rn(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return l([[a,[i,r],[i,o],[n,o],a]],e.properties,{bbox:t,id:e.id})}function on(t){return rn(Q(t))}function an(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(ye(t.slice(0,2),[r,n])>=ye(t.slice(0,2),[e,i])){var o=(n+i)/2;return[e,o-(r-e)/2,r,o+(r-e)/2]}var a=(e+r)/2;return[a-(i-n)/2,n,a+(i-n)/2,i]}function sn(t,e,n,r){void 0===r&&(r={});var i=J(t),o=k(i[0]),a=k(i[1]),s=k(n),c=w(e,r.units),l=Math.asin(Math.sin(a)*Math.cos(c)+Math.cos(a)*Math.sin(c)*Math.cos(s));return u([O(o+Math.atan2(Math.sin(s)*Math.sin(c)*Math.cos(a),Math.cos(c)-Math.sin(a)*Math.sin(l))),O(l)],r.properties)}function un(t,e,n){void 0===n&&(n={});for(var r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&"Feature"===t.type&&t.properties?t.properties:{},o=[],a=0;a<r;a++)o.push(sn(t,e,-360*a/r,n).geometry.coordinates);return o.push(o[0]),l([o],i)}function cn(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=cn(e,t);return(n+180)%360}(t,e);var r=J(t),i=J(e),o=k(r[0]),a=k(i[0]),s=k(r[1]),u=k(i[1]),c=Math.sin(a-o)*Math.cos(u),l=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-o);return O(Math.atan2(c,l))}function ln(t,e){void 0===e&&(e={});var n=Q(t);return u([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function hn(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return j(t,(function(t){n+=t[0],r+=t[1],i++}),!0),u([n/i,r/i],e.properties)}function fn(t){var e=[];return"FeatureCollection"===t.type?D(t,(function(t){j(t,(function(n){e.push(u(n,t.properties))}))})):j(t,(function(n){e.push(u(n,t.properties))})),d(e)}var pn=gn,dn=gn;function gn(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,h=l?e[0]*n:t.length,f=vn(t,0,h,n,!0),p=[];if(!f)return p;if(l&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=vn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(In(a));for(s.sort(En),i=0;i<s.length;i++)On(s[i],n),n=yn(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return mn(f,p,n,r,i,c),p}function vn(t,e,n,r,i){var o,a;if(i===Dn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Mn(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Mn(o,t[o],t[o+1],a);return a&&Nn(a,a.next)&&(Rn(a),a=a.next),a}function yn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Nn(r,r.next)&&0!==Tn(r.prev,r,r.next))r=r.next;else{if(Rn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function mn(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=kn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?bn(t,r,i,o):_n(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Rn(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?mn(t=wn(t,e,n),e,n,r,i,o,2):2===a&&xn(t,e,n,r,i,o):mn(yn(t),e,n,r,i,o,1);break}}}function _n(t){var e=t.prev,n=t,r=t.next;if(Tn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Sn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Tn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function bn(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Tn(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=kn(s,u,e,n,r),f=kn(c,l,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Tn(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Tn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Tn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Tn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function wn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Nn(i,o)&&Pn(i,r,r.next,o)&&Ln(i,o)&&Ln(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Rn(r),Rn(r.next),r=t=o),r=r.next}while(r!==t);return r}function xn(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Cn(a,s)){var u=jn(a,s);return a=yn(a,a.next),u=yn(u,u.next),mn(a,e,n,r,i,o),void mn(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function En(t,e){return t.x-e.x}function On(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&Sn(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&Ln(r,t)&&(n=r,f=u),r=r.next;return n}(t,e)){var n=jn(e,t);yn(n,n.next)}}function kn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function In(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Sn(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Cn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Pn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&Ln(t,e)&&Ln(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function Tn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Nn(t,e){return t.x===e.x&&t.y===e.y}function Pn(t,e,n,r){return!!(Nn(t,e)&&Nn(n,r)||Nn(t,r)&&Nn(n,e))||Tn(t,e,n)>0!=Tn(t,e,r)>0&&Tn(n,r,t)>0!=Tn(n,r,e)>0}function Ln(t,e){return Tn(t.prev,t,t.next)<0?Tn(t,e,t.next)>=0&&Tn(t,t.prev,e)>=0:Tn(t,e,t.prev)<0||Tn(t,t.next,e)<0}function jn(t,e){var n=new An(t.i,t.x,t.y),r=new An(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Mn(t,e,n,r){var i=new An(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Rn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function An(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Fn(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}(t),n=pn(e.vertices,e.holes,2),r=[],i=[];n.forEach((function(t,r){var o=n[r];i.push([e.vertices[2*o],e.vertices[2*o+1]])}));for(var o=0;o<i.length;o+=3){var a=i.slice(o,o+3);a.push(i[o]),r.push(l([a]))}return r}function zn(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0,i=0;return D(e,(function(e,n){var o=ye(t,e);o<r&&(i=n,r=o)})),(n=xe(e.features[i])).properties.featureIndex=i,n.properties.distanceToPoint=r,n}function Bn(t){if(!t)throw new Error("geojson is required");var e=[];return V(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=$(r);break;case"LineString":n=[$(r)]}n.forEach((function(n){(function(t,e){var n=[];return t.reduce((function(t,r){var i=f([t,r],e);return i.bbox=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return[n<i?n:i,r<o?r:o,n>i?n:i,r>o?r:o]}(t,r),n.push(i),r})),n})(n,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),d(e)}gn.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(Dn(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(Dn(t,c,l,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},gn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},pn.default=dn;var Un=zt((function(t,e){function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){if(void 0===r&&(r={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(t[0])||!p(t[1]))throw new Error("coordinates must contain numbers");return n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function c(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function l(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function h(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function f(t){return t%(2*Math.PI)*180/Math.PI}function p(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:1.0936*e.earthRadius},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1.0936133},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return c(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=u,e.multiPolygon=c,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=l,e.lengthToRadians=h,e.lengthToDegrees=function(t,e){return f(h(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=f,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return l(h(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=p,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!p(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}}));function Vn(t,e,n){if(null!==t)for(var r,i,o,a,s,u,c,l,h=0,f=0,p=t.type,d="FeatureCollection"===p,g="Feature"===p,v=d?t.features.length:1,y=0;y<v;y++){s=(l=!!(c=d?t.features[y].geometry:g?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;m<s;m++){var _=0,b=0;if(null!==(a=l?c.geometries[m]:c)){u=a.coordinates;var w=a.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(u,f,y,_,b))return!1;f++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],f,y,_,b))return!1;f++,"MultiPoint"===w&&_++}"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++){if(!1===e(u[r][i],f,y,_,b))return!1;f++}"MultiLineString"===w&&_++,"Polygon"===w&&b++}"Polygon"===w&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++){if(!1===e(u[r][i][o],f,y,_,b))return!1;f++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===Vn(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function qn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function Gn(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function Hn(t,e){var n,r,i,o,a,s,u,c,l,h,f=0,p="FeatureCollection"===t.type,d="Feature"===t.type,g=p?t.features.length:1;for(n=0;n<g;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,h=p?t.features[n].id:d?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,f,c,l,h))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],f,c,l,h))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,f,c,l,h))return!1;f++}}function Wn(t,e){Hn(t,(function(t,n,r,i,o){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Un.feature(t,r,{bbox:i,id:o}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var c={type:a,coordinates:t.coordinates[u]};if(!1===e(Un.feature(c,r),n,u))return!1}}))}function Xn(t,e){Wn(t,(function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var a,s=0,u=0,c=0;return!1!==Vn(t,(function(o,l,h,f,p){if(void 0===a||n>s||f>u||p>c)return a=o,s=n,u=f,c=p,void(i=0);var d=Un.lineString([a,o],t.properties);if(!1===e(d,n,r,p,i))return!1;i++,a=o}))&&void 0}}}))}function Yn(t,e){if(!t)throw new Error("geojson is required");Wn(t,(function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(!1===e(Un.lineString(o[a],t.properties),n,r,a))return!1}}}))}var Zn=Vn,Kn=Gn,Qn=Wn,Jn=Hn,$n=Yn,tr=qn,er=Xn,nr=Object.defineProperty({coordAll:function(t){var e=[];return Vn(t,(function(t){e.push(t)})),e},coordEach:Zn,coordReduce:function(t,e,n,r){var i=n;return Vn(t,(function(t,r,o,a,s){i=0===r&&void 0===n?t:e(i,t,r,o,a,s)}),r),i},featureEach:Kn,featureReduce:function(t,e,n){var r=n;return Gn(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},findPoint:function(t,e){if(e=e||{},!Un.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Un.point(u,s,e);case"MultiPoint":return i<0&&(i=u.length+i),Un.point(u[i],s,e);case"LineString":return a<0&&(a=u.length+a),Un.point(u[a],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),Un.point(u[o][a],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a),Un.point(u[i][a],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a),Un.point(u[i][o][a],s,e)}throw new Error("geojson is invalid")},findSegment:function(t,e){if(e=e||{},!Un.isObject(e))throw new Error("options is invalid");var n,r=e.featureIndex||0,i=e.multiFeatureIndex||0,o=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),Un.lineString([u[a],u[a+1]],s,e);case"Polygon":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),Un.lineString([u[o][a],u[o][a+1]],s,e);case"MultiLineString":return i<0&&(i=u.length+i),a<0&&(a=u[i].length+a-1),Un.lineString([u[i][a],u[i][a+1]],s,e);case"MultiPolygon":return i<0&&(i=u.length+i),o<0&&(o=u[i].length+o),a<0&&(a=u[i][o].length-a-1),Un.lineString([u[i][o][a],u[i][o][a+1]],s,e)}throw new Error("geojson is invalid")},flattenEach:Qn,flattenReduce:function(t,e,n){var r=n;return Wn(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},geomEach:Jn,geomReduce:function(t,e,n){var r=n;return Hn(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},lineEach:$n,lineReduce:function(t,e,n){var r=n;return Yn(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},propEach:tr,propReduce:function(t,e,n){var r=n;return qn(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},segmentEach:er,segmentReduce:function(t,e,n){var r=n,i=!1;return Xn(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r}},"__esModule",{value:!0});function rr(t){var e=[1/0,1/0,-1/0,-1/0];return nr.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}rr.default=rr;var ir=rr,or=Object.defineProperty({default:ir},"__esModule",{value:!0}).default,ar=nr.featureEach,sr=(nr.coordEach,Un.polygon,Un.featureCollection);function ur(t){var e=Ot(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:or(t),Ot.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:or(t),e.push(t)})):ar(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:or(t),e.push(t)})),Ot.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:or(t),Ot.prototype.remove.call(this,t,e)},e.clear=function(){return Ot.prototype.clear.call(this)},e.search=function(t){var e=Ot.prototype.search.call(this,this.toBBox(t));return sr(e)},e.collides=function(t){return Ot.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Ot.prototype.all.call(this);return sr(t)},e.toJSON=function(){return Ot.prototype.toJSON.call(this)},e.fromJSON=function(t){return Ot.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=or(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=or(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var cr=ur,lr=ur;function hr(t,e){var n={},r=[];if("LineString"===t.type&&(t=a(t)),"LineString"===e.type&&(e=a(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var i=fr(t,e);return i&&r.push(i),d(r)}var o=cr();return o.load(Bn(e)),D(Bn(t),(function(t){D(o.search(t),(function(e){var i=fr(t,e);if(i){var o=$(i).join(",");n[o]||(n[o]=!0,r.push(i))}}))})),d(r)}function fr(t,e){var n=$(t),r=$(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],o=n[0][1],a=n[1][0],s=n[1][1],c=r[0][0],l=r[0][1],h=r[1][0],f=r[1][1],p=(f-l)*(a-i)-(h-c)*(s-o);if(0===p)return null;var d=((h-c)*(o-l)-(f-l)*(i-c))/p,g=((a-i)*(o-l)-(s-o)*(i-c))/p;return d>=0&&d<=1&&g>=0&&g<=1?u([i+d*(a-i),o+d*(s-o)]):null}function pr(t,e,n){void 0===n&&(n={});var r=u([1/0,1/0],{dist:1/0}),i=0;return V(t,(function(t){for(var o=$(t),a=0;a<o.length-1;a++){var s=u(o[a]);s.properties.dist=ye(e,s,n);var c=u(o[a+1]);c.properties.dist=ye(e,c,n);var l=ye(s,c,n),h=Math.max(s.properties.dist,c.properties.dist),p=cn(s,c),d=sn(e,h,p+90,n),g=sn(e,h,p-90,n),v=hr(f([d.geometry.coordinates,g.geometry.coordinates]),f([s.geometry.coordinates,c.geometry.coordinates])),y=null;v.features.length>0&&((y=v.features[0]).properties.dist=ye(e,y,n),y.properties.location=i+ye(s,y,n)),s.properties.dist<r.properties.dist&&((r=s).properties.index=a,r.properties.location=i),c.properties.dist<r.properties.dist&&((r=c).properties.index=a+1,r.properties.location=i+l),y&&y.properties.dist<r.properties.dist&&((r=y).properties.index=a),i+=l}})),r}function dr(t,e,r){void 0===r&&(r={});var i=J(t),o=J(e);return o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0,I(function(t,e,r){var i=r=void 0===r?n:Number(r),o=t[1]*Math.PI/180,a=e[1]*Math.PI/180,s=a-o,u=Math.abs(e[0]-t[0])*Math.PI/180;u>Math.PI&&(u-=2*Math.PI);var c=Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(o/2+Math.PI/4)),l=Math.abs(c)>1e-11?s/c:Math.cos(o);return Math.sqrt(s*s+l*l*u*u)*i}(i,o),"meters",r.units)}function gr(t,e,n){if(void 0===n&&(n={}),n.method||(n.method="geodesic"),n.units||(n.units="kilometers"),!t)throw new Error("pt is required");if(Array.isArray(t)?t=u(t):"Point"===t.type?t=a(t):nt(t,"Point","point"),!e)throw new Error("line is required");Array.isArray(e)?e=f(e):"LineString"===e.type?e=a(e):nt(e,"LineString","line");var r=1/0,i=t.geometry.coordinates;return G(e,(function(t){var e=t.geometry.coordinates[0],o=t.geometry.coordinates[1],a=function(t,e,n,r){var i=[n[0]-e[0],n[1]-e[1]],o=vr([t[0]-e[0],t[1]-e[1]],i);if(o<=0)return yr(t,e,{method:r.method,units:"degrees"});var a=vr(i,i);if(a<=o)return yr(t,n,{method:r.method,units:"degrees"});var s=o/a;return yr(t,[e[0]+s*i[0],e[1]+s*i[1]],{method:r.method,units:"degrees"})}(i,e,o,n);a<r&&(r=a)})),I(r,"degrees",n.units)}function vr(t,e){return t[0]*e[0]+t[1]*e[1]}function yr(t,e,n){return"planar"===n.method?dr(t,e,n):ye(t,e,n)}function mr(t,e,n,r,i,o,a,s){var u,c,l,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0===(u=(s-o)*(n-t)-(a-i)*(r-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(c=e-o)-(r-e)*(l=t-i),c=((a-i)*c-(s-o)*l)/u,l=h/u,f.x=t+c*(n-t),f.y=e+c*(r-e),c>=0&&c<=1&&(f.onLine1=!0),l>=0&&l<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function _r(t){for(var e=function(t){return"FeatureCollection"!==t.type?"Feature"!==t.type?d([a(t)]):d([t]):t}(t),n=ln(e),r=!1,i=0;!r&&i<e.features.length;){var o,s=e.features[i].geometry,c=!1;if("Point"===s.type)n.geometry.coordinates[0]===s.coordinates[0]&&n.geometry.coordinates[1]===s.coordinates[1]&&(r=!0);else if("MultiPoint"===s.type){var l=!1;for(o=0;!l&&o<s.coordinates.length;)n.geometry.coordinates[0]===s.coordinates[o][0]&&n.geometry.coordinates[1]===s.coordinates[o][1]&&(r=!0,l=!0),o++}else if("LineString"===s.type)for(o=0;!c&&o<s.coordinates.length-1;)br(n.geometry.coordinates[0],n.geometry.coordinates[1],s.coordinates[o][0],s.coordinates[o][1],s.coordinates[o+1][0],s.coordinates[o+1][1])&&(c=!0,r=!0),o++;else if("MultiLineString"===s.type)for(var h=0;h<s.coordinates.length;){c=!1,o=0;for(var f=s.coordinates[h];!c&&o<f.length-1;)br(n.geometry.coordinates[0],n.geometry.coordinates[1],f[o][0],f[o][1],f[o+1][0],f[o+1][1])&&(c=!0,r=!0),o++;h++}else"Polygon"!==s.type&&"MultiPolygon"!==s.type||de(n,s)&&(r=!0);i++}if(r)return n;var p=d([]);for(i=0;i<e.features.length;i++)p.features=p.features.concat(fn(e.features[i]).features);return u(zn(n,p).geometry.coordinates)}function br(t,e,n,r,i,o){return Math.sqrt((i-n)*(i-n)+(o-r)*(o-r))===Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))+Math.sqrt((i-t)*(i-t)+(o-e)*(o-e))}function wr(t){return U(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return xr(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=xr(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function xr(t){var e=0;if(t&&t.length>0){e+=Math.abs(Er(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(Er(t[n]))}return e}function Er(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(Or(t[o][0])-Or(e[0]))*Math.sin(Or(n[1]));s=6378137*s*6378137/2}return s}function Or(t){return t*Math.PI/180}function kr(t,e){return void 0===e&&(e={}),H(t,(function(t,n){var r=n.geometry.coordinates;return t+ye(r[0],r[1],e)}),0)}function Ir(t,e,n,r){if(!T(r=r||{}))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}for(var a,s,u,c=i.length,l=0,h=0;h<i.length&&!(e>=l&&h===i.length-1);h++){if(l>e&&0===o.length){if(!(a=e-l))return o.push(i[h]),f(o);s=cn(i[h],i[h-1])-180,u=sn(i[h],a,s,r),o.push(u.geometry.coordinates)}if(l>=n)return(a=n-l)?(s=cn(i[h],i[h-1])-180,u=sn(i[h],a,s,r),o.push(u.geometry.coordinates),f(o)):(o.push(i[h]),f(o));if(l>=e&&o.push(i[h]),h===i.length-1)return f(o);l+=ye(i[h],i[h+1],r)}if(l<e&&i.length===c)throw new Error("Start position is beyond line");var p=i[i.length-1];return f([p,p])}function Sr(t,e,n){void 0===n&&(n={});for(var r=J(t),i=$(e),o=0;o<i.length-1;o++){var a=!1;if(n.ignoreEndVertices&&(0===o&&(a="start"),o===i.length-2&&(a="end"),0===o&&o+1===i.length-1&&(a="both")),Cr(i[o],i[o+1],r,a,void 0===n.epsilon?null:n.epsilon))return!0}return!1}function Cr(t,e,n,r,i){var o=n[0],a=n[1],s=t[0],u=t[1],c=e[0],l=e[1],h=c-s,f=l-u,p=(n[0]-s)*f-(n[1]-u)*h;if(null!==i){if(Math.abs(p)>i)return!1}else if(0!==p)return!1;return r?"start"===r?Math.abs(h)>=Math.abs(f)?h>0?s<o&&o<=c:c<=o&&o<s:f>0?u<a&&a<=l:l<=a&&a<u:"end"===r?Math.abs(h)>=Math.abs(f)?h>0?s<=o&&o<c:c<o&&o<=s:f>0?u<=a&&a<l:l<a&&a<=u:"both"===r&&(Math.abs(h)>=Math.abs(f)?h>0?s<o&&o<c:c<o&&o<s:f>0?u<a&&a<l:l<a&&a<u):Math.abs(h)>=Math.abs(f)?h>0?s<=o&&o<=c:c<=o&&o<=s:f>0?u<=a&&a<=l:l<=a&&a<=u}function Tr(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;switch(i){case"Point":switch(o){case"MultiPoint":return function(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Pr(e.coordinates[n],t.coordinates)){r=!0;break}return r}(n,r);case"LineString":return Sr(n,r,{ignoreEndVertices:!0});case"Polygon":case"MultiPolygon":return de(n,r,{ignoreBoundary:!0});default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"MultiPoint":return function(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Pr(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}(n,r);case"LineString":return function(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!Sr(t.coordinates[r],e))return!1;n||(n=Sr(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){if(!(r=de(t.coordinates[1],e))){n=!1;break}r=de(t.coordinates[1],e,{ignoreBoundary:!0})}return n&&r}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"LineString":return function(t,e){for(var n=0;n<t.coordinates.length;n++)if(!Sr(t.coordinates[n],e))return!1;return!0}(n,r);case"Polygon":case"MultiPolygon":return function(t,e){if(!Nr(Q(e),Q(t)))return!1;for(var n=!1,r=0;r<t.coordinates.length-1;r++){if(!de(t.coordinates[r],e))return!1;n||(n=de(t.coordinates[r],e,{ignoreBoundary:!0})),n||(n=de(Lr(t.coordinates[r],t.coordinates[r+1]),e,{ignoreBoundary:!0}))}return n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Polygon":case"MultiPolygon":return function(t,e){var n=Q(t);if(!Nr(Q(e),n))return!1;for(var r=0;r<t.coordinates[0].length;r++)if(!de(t.coordinates[0][r],e))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Nr(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Pr(t,e){return t[0]===e[0]&&t[1]===e[1]}function Lr(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function jr(t,e,n){void 0===n&&(n={}),n.mask&&!n.units&&(n.units="kilometers");for(var r=[],i=t[0],o=t[1],a=t[2],s=t[3],c=e/ye([i,o],[a,o],n)*(a-i),l=e/ye([i,o],[i,s],n)*(s-o),h=a-i,f=s-o,p=Math.floor(h/c),g=(f-Math.floor(f/l)*l)/2,v=i+(h-p*c)/2;v<=a;){for(var y=o+g;y<=s;){var m=u([v,y],n.properties);n.mask?Tr(m,n.mask)&&r.push(m):r.push(m),y+=l}v+=c}return d(r)}function Mr(t,e){void 0===e&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=null==n||isNaN(n)?6:n,r=null==r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");!1!==i&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return j(t,(function(t){!function(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e}(t,o,r)})),t}function Rr(t){if(!t)throw new Error("geojson is required");var e=[];return V(t,(function(t){e.push(t)})),d(e)}function Ar(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Ar(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Dr(t){if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var e=t.geometry.coordinates.length,n=[],r=0;r<e;r++){var i=t.geometry.coordinates[r];Vr(i[0],i[i.length-1])||i.push(i[0]),n.push.apply(n,i.slice(0,i.length-1))}if(!function(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(Object.prototype.hasOwnProperty.call(e,t[r])){n=0;break}e[t[r]]=1}return n}(n))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var o=n.length,a=function(t,e,n){if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var r=t.geometry.coordinates,i=[],o={};if(n){for(var a=[],s=0;s<r.length;s++)for(var u=0;u<r[s].length-1;u++)a.push(g(s,u));var c=Ot();c.load(a)}for(var l=0;l<r.length;l++)for(var h=0;h<r[l].length-1;h++)if(n)c.search(g(l,h)).forEach((function(t){var e=t.ring,n=t.edge;d(l,h,e,n)}));else for(var f=0;f<r.length;f++)for(var p=0;p<r[f].length-1;p++)d(l,h,f,p);return e||(i={type:"Feature",geometry:{type:"MultiPoint",coordinates:i}}),i;function d(t,n,a,s){var u,c,l=r[t][n],h=r[t][n+1],f=r[a][s],p=r[a][s+1],d=function(t,e,n,r){if(Ar(t,n)||Ar(t,r)||Ar(e,n)||Ar(r,n))return null;var i=t[0],o=t[1],a=e[0],s=e[1],u=n[0],c=n[1],l=r[0],h=r[1],f=(i-a)*(c-h)-(o-s)*(u-l);return 0===f?null:[((i*s-o*a)*(u-l)-(i-a)*(u*h-c*l))/f,((i*s-o*a)*(c-h)-(o-s)*(u*h-c*l))/f]}(l,h,f,p);if(null!==d&&(u=h[0]!==l[0]?(d[0]-l[0])/(h[0]-l[0]):(d[1]-l[1])/(h[1]-l[1]),c=p[0]!==f[0]?(d[0]-f[0])/(p[0]-f[0]):(d[1]-f[1])/(p[1]-f[1]),!(u>=1||u<=0||c>=1||c<=0))){var g=d,v=!o[g];v&&(o[g]=!0),e?i.push(e(d,t,n,l,h,u,a,s,f,p,c,v)):i.push(d)}}function g(t,e){var n,i,o,a,s=r[t][e],u=r[t][e+1];return s[0]<u[0]?(n=s[0],i=u[0]):(n=u[0],i=s[0]),s[1]<u[1]?(o=s[1],a=u[1]):(o=u[1],a=s[1]),{minX:n,minY:o,maxX:i,maxY:a,ring:t,edge:e}}}(t,(function(t,e,n,r,i,o,a,s,u,c,l,h){return[t,e,n,r,i,o,a,s,u,c,l,h]})),s=a.length;if(0==s){var u=[];for(r=0;r<e;r++)u.push(l([t.geometry.coordinates[r]],{parent:-1,winding:Ur(t.geometry.coordinates[r])}));var c=d(u);return F(),z(),c}var h=[],f=[];for(r=0;r<e;r++){h.push([]);for(var p=0;p<t.geometry.coordinates[r].length-1;p++)h[r].push([new Fr(t.geometry.coordinates[r][qr(p+1,t.geometry.coordinates[r].length-1)],1,[r,p],[r,qr(p+1,t.geometry.coordinates[r].length-1)],void 0)]),f.push(new zr(t.geometry.coordinates[r][p],[r,qr(p-1,t.geometry.coordinates[r].length-1)],[r,p],void 0,void 0,!1,!0))}for(r=0;r<s;r++)h[a[r][1]][a[r][2]].push(new Fr(a[r][0],a[r][5],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0)),a[r][11]&&f.push(new zr(a[r][0],[a[r][1],a[r][2]],[a[r][6],a[r][7]],void 0,void 0,!0,!0));var g=f.length;for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)h[r][p].sort((function(t,e){return t.param<e.param?-1:1}));var v=[];for(r=0;r<g;r++)v.push({minX:f[r].coord[0],minY:f[r].coord[1],maxX:f[r].coord[0],maxY:f[r].coord[1],index:r});var y=Ot();for(y.load(v),r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(var m=0;m<h[r][p].length;m++){b=m==h[r][p].length-1?h[r][qr(p+1,t.geometry.coordinates[r].length-1)][0].coord:h[r][p][m+1].coord;var _=y.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0];h[r][p][m].nxtIsectAlongEdgeIn=_.index}for(r=0;r<h.length;r++)for(p=0;p<h[r].length;p++)for(m=0;m<h[r][p].length;m++){var b=h[r][p][m].coord,w=(_=y.search({minX:b[0],minY:b[1],maxX:b[0],maxY:b[1]})[0]).index;w<o?f[w].nxtIsectAlongRingAndEdge2=h[r][p][m].nxtIsectAlongEdgeIn:Vr(f[w].ringAndEdge1,h[r][p][m].ringAndEdgeIn)?f[w].nxtIsectAlongRingAndEdge1=h[r][p][m].nxtIsectAlongEdgeIn:f[w].nxtIsectAlongRingAndEdge2=h[r][p][m].nxtIsectAlongEdgeIn}var x=[];for(r=0,p=0;p<e;p++){var E=r;for(m=0;m<t.geometry.coordinates[p].length-1;m++)f[r].coord[0]<f[E].coord[0]&&(E=r),r++;var O=f[E].nxtIsectAlongRingAndEdge2;for(m=0;m<f.length;m++)if(f[m].nxtIsectAlongRingAndEdge1==E||f[m].nxtIsectAlongRingAndEdge2==E){var k=m;break}var I=Br([f[k].coord,f[E].coord,f[O].coord],!0)?1:-1;x.push({isect:E,parent:-1,winding:I})}for(x.sort((function(t,e){return f[t.isect].coord>f[e.isect].coord?-1:1})),u=[];x.length>0;){var S=x.pop(),C=S.isect,T=S.parent,N=S.winding,P=u.length,L=[f[C].coord],j=C;if(f[C].ringAndEdge1Walkable)var M=f[C].ringAndEdge1,R=f[C].nxtIsectAlongRingAndEdge1;else M=f[C].ringAndEdge2,R=f[C].nxtIsectAlongRingAndEdge2;for(;!Vr(f[C].coord,f[R].coord);){L.push(f[R].coord);var A=void 0;for(r=0;r<x.length;r++)if(x[r].isect==R){A=r;break}if(null!=A&&x.splice(A,1),Vr(M,f[R].ringAndEdge1)){if(M=f[R].ringAndEdge2,f[R].ringAndEdge2Walkable=!1,f[R].ringAndEdge1Walkable){var D={isect:R};Br([f[j].coord,f[R].coord,f[f[R].nxtIsectAlongRingAndEdge2].coord],1==N)?(D.parent=T,D.winding=-N):(D.parent=P,D.winding=N),x.push(D)}j=R,R=f[R].nxtIsectAlongRingAndEdge2}else M=f[R].ringAndEdge1,f[R].ringAndEdge1Walkable=!1,f[R].ringAndEdge2Walkable&&(D={isect:R},Br([f[j].coord,f[R].coord,f[f[R].nxtIsectAlongRingAndEdge1].coord],1==N)?(D.parent=T,D.winding=-N):(D.parent=P,D.winding=N),x.push(D)),j=R,R=f[R].nxtIsectAlongRingAndEdge1}L.push(f[R].coord),u.push(l([L],{index:P,parent:T,winding:N,netWinding:void 0}))}function F(){for(var t=[],e=0;e<c.features.length;e++)-1==c.features[e].properties.parent&&t.push(e);if(t.length>1)for(e=0;e<t.length;e++){for(var n=-1,r=0;r<c.features.length;r++)t[e]!=r&&de(c.features[t[e]].geometry.coordinates[0][0],c.features[r],{ignoreBoundary:!0})&&wr(c.features[r])<1/0&&(n=r);c.features[t[e]].properties.parent=n}}function z(){for(var t=0;t<c.features.length;t++)if(-1==c.features[t].properties.parent){var e=c.features[t].properties.winding;c.features[t].properties.netWinding=e,B(t,e)}}function B(t,e){for(var n=0;n<c.features.length;n++)if(c.features[n].properties.parent==t){var r=e+c.features[n].properties.winding;c.features[n].properties.netWinding=r,B(n,r)}}return c=d(u),F(),z(),c}cr.default=lr;var Fr=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},zr=function(t,e,n,r,i,o,a){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=a};function Br(t,e){if(void 0===e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");return(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0])>=0==e}function Ur(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Br([t[qr(e-1,t.length-1)],t[e],t[qr(e+1,t.length-1)]],!0))var r=1;else r=-1;return r}function Vr(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Vr(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function qr(t,e){return(t%e+e)%e}var Gr=Math.PI/180,Hr=180/Math.PI,Wr=function(t,e){this.lon=t,this.lat=e,this.x=Gr*t,this.y=Gr*e};Wr.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Wr.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new Wr(e,t)};var Xr=function(){this.coords=[],this.length=0};Xr.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Yr=function(t){this.properties=t||{},this.geometries=[]};Yr.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Yr.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";this.geometries[r].coords.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Zr=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Wr(t.x,t.y),this.end=new Wr(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};function Kr(t,e){var n=[],r=cr();return V(e,(function(e){if(n.forEach((function(t,e){t.id=e})),n.length){var i=r.search(e);if(i.features.length){var o=Jr(e,i);n=n.filter((function(t){return t.id!==o.id})),r.remove(o),D(Qr(o,e),(function(t){n.push(t),r.insert(t)}))}}else(n=Qr(t,e).features).forEach((function(t){t.bbox||(t.bbox=an(Q(t)))})),r.load(d(n))})),d(n)}function Qr(t,e){var n=[],r=$(t)[0],i=$(t)[t.geometry.coordinates.length-1];if($r(r,J(e))||$r(i,J(e)))return d([t]);var o=cr(),a=Bn(t);o.load(a);var s=o.search(e);if(!s.features.length)return d([t]);var u=Jr(e,s),c=F(a,(function(t,r,i){var o=$(r)[1],a=J(e);return i===u.id?(t.push(a),n.push(f(t)),$r(a,o)?[a]:[a,o]):(t.push(o),t)}),[r]);return c.length>1&&n.push(f(c)),d(n)}function Jr(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return D(e,(function(e){var i=pr(e,t).properties.dist;i<r&&(n=e,r=i)})),n}function $r(t,e){return t[0]===e[0]&&t[1]===e[1]}function ti(t,e,n,r,i){void 0===i&&(i={});var o=i.steps||64,a=ei(n),s=ei(r),u=Array.isArray(t)||"Feature"!==t.type?{}:t.properties;if(a===s)return f(un(t,e,i).geometry.coordinates[0],u);for(var c=a,l=a<s?s:s+360,h=c,p=[],d=0;h<l;)p.push(sn(t,e,h,i).geometry.coordinates),h=c+360*++d/o;return h>l&&p.push(sn(t,e,l,i).geometry.coordinates),f(p,u)}function ei(t){var e=t%360;return e<0&&(e+=360),e}function ni(t,e){void 0===e&&(e={});var n=it(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return ri(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=it(t).coordinates,r=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return n.forEach((function(t){i.push(ii(t,r))})),d(i)}(n,e);default:throw new Error("invalid poly")}}function ri(t,e){return void 0===e&&(e={}),ii(it(t).coordinates,e.properties?e.properties:"Feature"===t.type?t.properties:{})}function ii(t,e){return t.length>1?g(t,e):f(t[0],e)}function oi(t,e){var n,r,i;void 0===e&&(e={});var o=e.properties,a=null===(n=e.autoComplete)||void 0===n||n,s=null===(r=e.orderCoords)||void 0===r||r;switch(null!==(i=e.mutate)&&void 0!==i&&i||(t=xe(t)),t.type){case"FeatureCollection":var u=[];return t.features.forEach((function(t){u.push($(ai(t,{},a,s)))})),y(u,o);default:return ai(t,o,a,s)}}function ai(t,e,n,r){e=e||("Feature"===t.type?t.properties:{});var i=it(t),o=i.coordinates,a=i.type;if(!o.length)throw new Error("line must contain coordinates");switch(a){case"LineString":return n&&(o=si(o)),l([o],e);case"MultiLineString":var s=[],u=0;return o.forEach((function(t){if(n&&(t=si(t)),r){var e=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}(Q(f(t)));e>u?(s.unshift(t),u=e):s.push(t)}else s.push(t)})),l(s,e);default:throw new Error("geometry type "+a+" is not supported")}}function si(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],a=i[1];return n===o&&r===a||t.push(e),t}function ui(t,e){var n,r,i,o,a,s,u;for(r=1;r<=8;r*=2){for(n=[],o=!(li(i=t[t.length-1],e)&r),a=0;a<t.length;a++)(u=!(li(s=t[a],e)&r))!==o&&n.push(ci(i,s,r,e)),u&&n.push(s),i=s,o=u;if(!(t=n).length)break}return n}function ci(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function li(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function hi(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=ui(i[r],e);o.length>0&&(o[0][0]===o[o.length-1][0]&&o[0][1]===o[o.length-1][1]||o.push(o[0]),o.length>=4&&n.push(o))}return n}Zr.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),a=Hr*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2)));return[Hr*Math.atan2(i,r),a]},Zr.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,a=this.interpolate(o);n.push(a)}for(var s=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,h=-180+c,f=360-c,p=1;p<n.length;++p){var d=n[p-1][0],g=n[p][0],v=Math.abs(g-d);v>f&&(g>l&&d<h||d>l&&g<h)?s=!0:v>u&&(u=v)}var y=[];if(s&&u<c){var m=[];y.push(m);for(var _=0;_<n.length;++_){var b=parseFloat(n[_][0]);if(_>0&&Math.abs(b-n[_-1][0])>f){var w=parseFloat(n[_-1][0]),x=parseFloat(n[_-1][1]),E=parseFloat(n[_][0]),O=parseFloat(n[_][1]);if(w>-180&&w<h&&180===E&&_+1<n.length&&n[_-1][0]>-180&&n[_-1][0]<h){m.push([-180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(w>l&&w<180&&-180===E&&_+1<n.length&&n[_-1][0]>l&&n[_-1][0]<180){m.push([180,n[_][1]]),_++,m.push([n[_][0],n[_][1]]);continue}if(w<h&&E>l){var k=w;w=E,E=k;var I=x;x=O,O=I}if(w>l&&E<h&&(E+=360),w<=180&&E>=180&&w<E){var S=(180-w)/(E-w),C=S*O+(1-S)*x;m.push([n[_-1][0]>l?180:-180,C]),(m=[]).push([n[_-1][0]>l?-180:180,C]),y.push(m)}else m=[],y.push(m);m.push([b,n[_][1]])}else m.push([n[_][0],n[_][1]])}}else{var T=[];y.push(T);for(var N=0;N<n.length;++N)T.push([n[N][0],n[N][1]])}for(var P=new Yr(this.properties),L=0;L<y.length;++L){var j=new Xr;P.geometries.push(j);for(var M=y[L],R=0;R<M.length;++R)j.move_to(M[R])}return P};var fi=zt((function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n})),pi=zt((function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?r:i).supported=r,e.unsupported=i})),di=zt((function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,a){return a||(a={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?a.strict?t===o:t==o:function(t,o,a){var s,u;if(r(t)||r(o))return!1;if(t.prototype!==o.prototype)return!1;if(pi(t))return!!pi(o)&&(t=e.call(t),o=e.call(o),n(t,o,a));if(i(t)){if(!i(o))return!1;if(t.length!==o.length)return!1;for(s=0;s<t.length;s++)if(t[s]!==o[s])return!1;return!0}try{var c=fi(t),l=fi(o)}catch(t){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),s=c.length-1;s>=0;s--)if(c[s]!=l[s])return!1;for(s=c.length-1;s>=0;s--)if(u=c[s],!n(t[u],o[u],a))return!1;return typeof t==typeof o}(t,o,a))};function r(t){return null==t}function i(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&"function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0])}}));function gi(t,e,n){if(void 0===n&&(n={}),!T(n=n||{}))throw new Error("options is invalid");var r,i=n.tolerance||0,o=[],a=cr(),s=Bn(t);return a.load(s),G(e,(function(t){var e=!1;t&&(D(a.search(t),(function(n){if(!1===e){var o=$(t).sort(),a=$(n).sort();di(o,a)||(0===i?Sr(o[0],n)&&Sr(o[1],n):pr(n,o[0]).properties.dist<=i&&pr(n,o[1]).properties.dist<=i)?(e=!0,r=r?vi(r,t):t):(0===i?Sr(a[0],t)&&Sr(a[1],t):pr(t,a[0]).properties.dist<=i&&pr(t,a[1]).properties.dist<=i)&&(r=r?vi(r,n):n)}})),!1===e&&r&&(o.push(r),r=void 0))})),r&&o.push(r),d(o)}function vi(t,e){var n=$(e),r=$(t),i=r[0],o=r[r.length-1],a=t.geometry.coordinates;return di(n[0],i)?a.unshift(n[1]):di(n[0],o)?a.push(n[1]):di(n[1],i)?a.unshift(n[0]):di(n[1],o)&&a.push(n[0]),t}function yi(t){var e=t%360;return e<0&&(e+=360),e}function mi(t,e,n){var r;return void 0===n&&(n={}),(r=n.final?_i(J(e),J(t)):_i(J(t),J(e)))>180?-(360-r):r}function _i(t,e){var n=k(t[1]),r=k(e[1]),i=k(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4));return(O(Math.atan2(i,o))+360)%360}function bi(t,e,r,i){void 0===i&&(i={});var o=e<0,a=I(Math.abs(e),i.units,"meters");o&&(a=-Math.abs(a));var s=J(t),c=function(t,e,r,i){var o=e/(i=void 0===i?n:Number(i)),a=t[0]*Math.PI/180,s=k(t[1]),u=k(r),c=o*Math.cos(u),l=s+c;Math.abs(l)>Math.PI/2&&(l=l>0?Math.PI-l:-Math.PI-l);var h=Math.log(Math.tan(l/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),f=Math.abs(h)>1e-11?c/h:Math.cos(s);return[(180*(a+o*Math.sin(u)/f)/Math.PI+540)%360-180,180*l/Math.PI]}(s,a,r);return c[0]+=c[0]-s[0]>180?-360:s[0]-c[0]>180?360:0,u(c,i.properties)}function wi(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=t[a],u=t[a+1];a===t.length-1&&(u=t[0]),r=Ei(s,u,e),n<=0&&r>0?Ei(e,s,i)<0||(i=s):n>0&&r<=0&&(xi(e,s,o)||(o=s)),n=r}return[i,o]}function xi(t,e,n){return Ei(t,e,n)>0}function Ei(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function Oi(t){for(var e,n,r=$(t),i=0,o=1;o<r.length;)e=n||r[0],i+=((n=r[o])[0]-e[0])*(n[1]+e[1]),o++;return i>0}function ki(t,e){switch("Feature"===t.type?t.geometry.type:t.type){case"GeometryCollection":return B(t,(function(t){ki(t,e)})),t;case"LineString":return Ii($(t),e),t;case"Polygon":return Si($(t),e),t;case"MultiLineString":return $(t).forEach((function(t){Ii(t,e)})),t;case"MultiPolygon":return $(t).forEach((function(t){Si(t,e)})),t;case"Point":case"MultiPoint":return t}}function Ii(t,e){Oi(t)===e&&t.reverse()}function Si(t,e){Oi(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)Oi(t[n])===e&&t[n].reverse()}var Ci={successCallback:null,verbose:!1,polygons:!1},Ti={};function Ni(t,e,n,r){r=r||{};for(var i=Object.keys(Ci),o=0;o<i.length;o++){var a=i[o],s=r[a];s=null!=s?s:Ci[a],Ti[a]=s}Ti.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=function(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},a=e+Math.abs(n),s=0;s<r;++s){o.cells[s]=[];for(var u=0;u<i;++u){var c=0,l=t[s+1][u],h=t[s+1][u+1],f=t[s][u+1],p=t[s][u];if(!(isNaN(l)||isNaN(h)||isNaN(f)||isNaN(p))){c|=l<e?0:l>a?128:64,c|=h<e?0:h>a?32:16,c|=f<e?0:f>a?8:4;var d=+(c|=p<e?0:p>a?2:1),g=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var v=(l+h+f+p)/4;g=v>a?2:v<e?0:1,34===c?1===g?c=35:0===g&&(c=136):136===c?1===g?(c=35,g=4):0===g&&(c=34):17===c?1===g?(c=155,g=4):0===g&&(c=153):68===c?1===g?(c=103,g=4):0===g&&(c=102):153===c?1===g&&(c=155):102===c?1===g&&(c=103):152===c?g<2&&(c=156,g=1):137===c?g<2&&(c=139,g=1):98===c?g<2&&(c=99,g=1):38===c?g<2&&(c=39,g=1):18===c?g>0?(c=156,g=4):c=152:33===c?g>0?(c=139,g=4):c=137:72===c?g>0?(c=99,g=4):c=98:132===c&&(g>0?(c=39,g=4):c=38)}if(0!=c&&170!=c){var y,m,_,b,w,x,E,O;y=m=_=b=w=x=E=O=.5;var k=[];1===c?(_=1-_o(e,f,p),O=1-_o(e,l,p),k.push(fo[c])):169===c?(_=_o(a,p,f),O=_o(a,p,l),k.push(fo[c])):4===c?(x=1-_o(e,h,f),b=_o(e,p,f),k.push(lo[c])):166===c?(x=_o(a,f,h),b=1-_o(a,f,p),k.push(lo[c])):16===c?(w=_o(e,f,h),m=_o(e,l,h),k.push(co[c])):154===c?(w=1-_o(a,h,f),m=1-_o(a,h,l),k.push(co[c])):64===c?(E=_o(e,p,l),y=1-_o(e,h,l),k.push(go[c])):106===c?(E=1-_o(a,l,p),y=_o(a,l,h),k.push(go[c])):168===c?(b=_o(a,p,f),_=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),k.push(ho[c]),k.push(fo[c])):2===c?(b=1-_o(e,f,p),_=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),k.push(ho[c]),k.push(fo[c])):162===c?(w=_o(a,f,h),x=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),k.push(ho[c]),k.push(fo[c])):8===c?(w=1-_o(e,h,f),x=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),k.push(co[c]),k.push(lo[c])):138===c?(w=1-_o(e,h,f),x=1-_o(a,h,f),y=1-_o(a,h,l),m=1-_o(e,h,l),k.push(co[c]),k.push(lo[c])):32===c?(w=_o(a,f,h),x=_o(e,f,h),y=_o(e,l,h),m=_o(a,l,h),k.push(co[c]),k.push(lo[c])):42===c?(O=1-_o(a,l,p),E=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h),k.push(po[c]),k.push(go[c])):128===c&&(O=_o(e,p,l),E=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l),k.push(po[c]),k.push(go[c])),5===c?(x=1-_o(e,h,f),O=1-_o(e,l,p),k.push(lo[c])):165===c?(x=_o(a,f,h),O=_o(a,p,l),k.push(lo[c])):20===c?(b=_o(e,p,f),m=_o(e,l,h),k.push(ho[c])):150===c?(b=1-_o(a,f,p),m=1-_o(a,h,l),k.push(ho[c])):80===c?(w=_o(e,f,h),E=_o(e,p,l),k.push(co[c])):90===c?(w=1-_o(a,h,f),E=1-_o(a,l,p),k.push(co[c])):65===c?(_=1-_o(e,f,p),y=1-_o(e,h,l),k.push(fo[c])):105===c?(_=_o(a,p,f),y=_o(a,l,h),k.push(fo[c])):160===c?(w=_o(a,f,h),x=_o(e,f,h),O=_o(e,p,l),E=_o(a,p,l),k.push(co[c]),k.push(lo[c])):10===c?(w=1-_o(e,h,f),x=1-_o(a,h,f),O=1-_o(a,l,p),E=1-_o(e,l,p),k.push(co[c]),k.push(lo[c])):130===c?(b=1-_o(e,f,p),_=1-_o(a,f,p),y=1-_o(a,h,l),m=1-_o(e,h,l),k.push(ho[c]),k.push(fo[c])):40===c?(b=_o(a,p,f),_=_o(e,p,f),y=_o(e,l,h),m=_o(a,l,h),k.push(ho[c]),k.push(fo[c])):101===c?(x=_o(a,f,h),y=_o(a,l,h),k.push(lo[c])):69===c?(x=1-_o(e,h,f),y=1-_o(e,h,l),k.push(lo[c])):149===c?(O=_o(a,p,l),m=1-_o(a,h,l),k.push(po[c])):21===c?(O=1-_o(e,l,p),m=_o(e,l,h),k.push(po[c])):86===c?(b=1-_o(a,f,p),E=1-_o(a,l,p),k.push(ho[c])):84===c?(b=_o(e,p,f),E=_o(e,p,l),k.push(ho[c])):89===c?(w=1-_o(a,h,f),_=_o(a,p,f),k.push(fo[c])):81===c?(w=_o(e,f,h),_=1-_o(e,f,p),k.push(fo[c])):96===c?(w=_o(a,f,h),x=_o(e,f,h),E=_o(e,p,l),y=_o(a,l,h),k.push(co[c]),k.push(lo[c])):74===c?(w=1-_o(e,h,f),x=1-_o(a,h,f),E=1-_o(a,l,p),y=1-_o(e,h,l),k.push(co[c]),k.push(lo[c])):24===c?(w=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),m=_o(e,l,h),k.push(co[c]),k.push(fo[c])):146===c?(w=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),m=1-_o(a,h,l),k.push(co[c]),k.push(fo[c])):6===c?(x=1-_o(e,h,f),b=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),k.push(lo[c]),k.push(ho[c])):164===c?(x=_o(a,f,h),b=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),k.push(lo[c]),k.push(ho[c])):129===c?(_=1-_o(e,f,p),O=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l),k.push(fo[c]),k.push(po[c])):41===c?(_=_o(a,p,f),O=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h),k.push(fo[c]),k.push(po[c])):66===c?(b=1-_o(e,f,p),_=1-_o(a,f,p),E=1-_o(a,l,p),y=1-_o(e,h,l),k.push(ho[c]),k.push(fo[c])):104===c?(b=_o(a,p,f),_=_o(e,p,f),E=_o(e,p,l),y=_o(a,l,h),k.push(fo[c]),k.push(vo[c])):144===c?(w=_o(e,f,h),O=_o(e,p,l),E=_o(a,p,l),m=1-_o(a,h,l),k.push(co[c]),k.push(go[c])):26===c?(w=1-_o(a,h,f),O=1-_o(a,l,p),E=1-_o(e,l,p),m=_o(e,l,h),k.push(co[c]),k.push(go[c])):36===c?(x=_o(a,f,h),b=_o(e,p,f),y=_o(e,l,h),m=_o(a,l,h),k.push(lo[c]),k.push(ho[c])):134===c?(x=1-_o(e,h,f),b=1-_o(a,f,p),y=1-_o(a,h,l),m=1-_o(e,h,l),k.push(lo[c]),k.push(ho[c])):9===c?(w=1-_o(e,h,f),x=1-_o(a,h,f),_=_o(a,p,f),O=1-_o(e,l,p),k.push(co[c]),k.push(lo[c])):161===c?(w=_o(a,f,h),x=_o(e,f,h),_=1-_o(e,f,p),O=_o(a,p,l),k.push(co[c]),k.push(lo[c])):37===c?(x=_o(a,f,h),O=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h),k.push(lo[c]),k.push(po[c])):133===c?(x=1-_o(e,h,f),O=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l),k.push(lo[c]),k.push(po[c])):148===c?(b=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),m=1-_o(a,h,l),k.push(ho[c]),k.push(go[c])):22===c?(b=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),m=_o(e,l,h),k.push(ho[c]),k.push(go[c])):82===c?(w=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),E=1-_o(a,l,p),k.push(co[c]),k.push(fo[c])):88===c?(w=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),E=_o(e,p,l),k.push(co[c]),k.push(fo[c])):73===c?(w=1-_o(e,h,f),x=1-_o(a,h,f),_=_o(a,p,f),y=1-_o(e,h,l),k.push(co[c]),k.push(lo[c])):97===c?(w=_o(a,f,h),x=_o(e,f,h),_=1-_o(e,f,p),y=_o(a,l,h),k.push(co[c]),k.push(lo[c])):145===c?(w=_o(e,f,h),_=1-_o(e,f,p),O=_o(a,p,l),m=1-_o(a,h,l),k.push(co[c]),k.push(po[c])):25===c?(w=1-_o(a,h,f),_=_o(a,p,f),O=1-_o(e,l,p),m=_o(e,l,h),k.push(co[c]),k.push(po[c])):70===c?(x=1-_o(e,h,f),b=1-_o(a,f,p),E=1-_o(a,l,p),y=1-_o(e,h,l),k.push(lo[c]),k.push(ho[c])):100===c?(x=_o(a,f,h),b=_o(e,p,f),E=_o(e,p,l),y=_o(a,l,h),k.push(lo[c]),k.push(ho[c])):34===c?(0===g?(w=1-_o(e,h,f),x=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l)):(w=_o(a,f,h),x=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h)),k.push(co[c]),k.push(lo[c]),k.push(po[c]),k.push(go[c])):35===c?(4===g?(w=1-_o(e,h,f),x=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l)):(w=_o(a,f,h),x=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h)),k.push(co[c]),k.push(lo[c]),k.push(fo[c]),k.push(go[c])):136===c?(0===g?(w=_o(a,f,h),x=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h)):(w=1-_o(e,h,f),x=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l)),k.push(co[c]),k.push(lo[c]),k.push(po[c]),k.push(go[c])):153===c?(0===g?(w=_o(e,f,h),_=1-_o(e,f,p),O=1-_o(e,l,p),m=_o(e,l,h)):(w=1-_o(a,h,f),_=_o(a,p,f),O=_o(a,p,l),m=1-_o(a,h,l)),k.push(co[c]),k.push(fo[c])):102===c?(0===g?(x=1-_o(e,h,f),b=_o(e,p,f),E=_o(e,p,l),y=1-_o(e,h,l)):(x=_o(a,f,h),b=1-_o(a,f,p),E=1-_o(a,l,p),y=_o(a,l,h)),k.push(lo[c]),k.push(go[c])):155===c?(4===g?(w=_o(e,f,h),_=1-_o(e,f,p),O=1-_o(e,l,p),m=_o(e,l,h)):(w=1-_o(a,h,f),_=_o(a,p,f),O=_o(a,p,l),m=1-_o(a,h,l)),k.push(co[c]),k.push(po[c])):103===c?(4===g?(x=1-_o(e,h,f),b=_o(e,p,f),E=_o(e,p,l),y=1-_o(e,h,l)):(x=_o(a,f,h),b=1-_o(a,f,p),E=1-_o(a,l,p),y=_o(a,l,h)),k.push(lo[c]),k.push(ho[c])):152===c?(0===g?(w=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),m=_o(e,l,h)):(w=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),m=1-_o(a,h,l)),k.push(co[c]),k.push(ho[c]),k.push(fo[c])):156===c?(4===g?(w=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),m=_o(e,l,h)):(w=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),m=1-_o(a,h,l)),k.push(co[c]),k.push(fo[c]),k.push(go[c])):137===c?(0===g?(w=_o(a,f,h),x=_o(e,f,h),_=1-_o(e,f,p),O=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h)):(w=1-_o(e,h,f),x=1-_o(a,h,f),_=_o(a,p,f),O=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l)),k.push(co[c]),k.push(lo[c]),k.push(fo[c])):139===c?(4===g?(w=_o(a,f,h),x=_o(e,f,h),_=1-_o(e,f,p),O=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h)):(w=1-_o(e,h,f),x=1-_o(a,h,f),_=_o(a,p,f),O=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l)),k.push(co[c]),k.push(lo[c]),k.push(po[c])):98===c?(0===g?(w=1-_o(e,h,f),x=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),E=_o(e,p,l),y=1-_o(e,h,l)):(w=_o(a,f,h),x=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),E=1-_o(a,l,p),y=_o(a,l,h)),k.push(co[c]),k.push(lo[c]),k.push(go[c])):99===c?(4===g?(w=1-_o(e,h,f),x=1-_o(a,h,f),b=_o(a,p,f),_=_o(e,p,f),E=_o(e,p,l),y=1-_o(e,h,l)):(w=_o(a,f,h),x=_o(e,f,h),b=1-_o(e,f,p),_=1-_o(a,f,p),E=1-_o(a,l,p),y=_o(a,l,h)),k.push(co[c]),k.push(lo[c]),k.push(fo[c])):38===c?(0===g?(x=1-_o(e,h,f),b=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l)):(x=_o(a,f,h),b=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h)),k.push(lo[c]),k.push(po[c]),k.push(go[c])):39===c?(4===g?(x=1-_o(e,h,f),b=_o(e,p,f),O=_o(e,p,l),E=_o(a,p,l),y=1-_o(a,h,l),m=1-_o(e,h,l)):(x=_o(a,f,h),b=1-_o(a,f,p),O=1-_o(a,l,p),E=1-_o(e,l,p),y=_o(e,l,h),m=_o(a,l,h)),k.push(lo[c]),k.push(ho[c]),k.push(go[c])):85===c&&(w=1,x=0,b=1,_=0,O=0,E=1,y=0,m=1),(y<0||y>1||m<0||m>1||w<0||w>1||b<0||b>1||O<0||O>1||E<0||E>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+d+" "+l+","+h+","+f+","+p+" "+g+" "+y+" "+m+" "+w+" "+x+" "+b+" "+_+" "+O+" "+E),o.cells[s][u]={cval:c,cval_real:d,flipped:g,topleft:y,topright:m,righttop:w,rightbottom:x,bottomright:b,bottomleft:_,leftbottom:O,lefttop:E,edges:k}}}}}return o}(t,e,n);return Ti.polygons?(Ti.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=function(t){var e=[],n=0;return t.cells.forEach((function(t,r){t.forEach((function(t,i){if(void 0!==t){var o=mo[t.cval](t);"object"==typeof o&&bo(o)?"object"==typeof o[0]&&bo(o[0])?"object"==typeof o[0][0]&&bo(o[0][0])?o.forEach((function(t){t.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=t})):(o.forEach((function(t){t[0]+=i,t[1]+=r})),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}}))})),e}(c)):(Ti.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=function(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var a=0;a<r;a++)if(void 0!==t.cells[o][a]&&t.cells[o][a].edges.length>0){var s=xo(t.cells[o][a]),u=null,c=a,l=o;null!==s&&i.push([s.p[0]+c,s.p[1]+l]);do{if(null===(u=Eo(t.cells[l][c],s.x,s.y,s.o)))break;if(i.push([u.p[0]+c,u.p[1]+l]),c+=u.x,s=u,(l+=u.y)<0||l>=n||c<0||c>=r||void 0===t.cells[l][c]){var h=wo(t,c-=u.x,l-=u.y,u.x,u.y,u.o);if(null===h)break;h.path.forEach((function(t){i.push(t)})),c=h.i,l=h.j,s=h}}while(void 0!==t.cells[l][c]&&t.cells[l][c].edges.length>0);e.push(i),i=[],t.cells[o][a].edges.length>0&&a--}return e}(c)),"function"==typeof Ti.successCallback&&Ti.successCallback(u),u}var Pi=[],Li=[],ji=[],Mi=[],Ri=[],Ai=[],Di=[],Fi=[],zi=[],Bi=[],Ui=[],Vi=[],qi=[],Gi=[],Hi=[],Wi=[],Xi=[],Yi=[],Zi=[],Ki=[],Qi=[],Ji=[],$i=[],to=[];Di[85]=Bi[85]=-1,Fi[85]=Ui[85]=0,zi[85]=Vi[85]=1,Zi[85]=Ji[85]=1,Ki[85]=$i[85]=0,Qi[85]=to[85]=1,Pi[85]=Mi[85]=0,Li[85]=Ri[85]=-1,ji[85]=Hi[85]=0,Wi[85]=qi[85]=0,Xi[85]=Gi[85]=1,Ai[85]=Yi[85]=1,Ji[1]=Ji[169]=0,$i[1]=$i[169]=-1,to[1]=to[169]=0,qi[1]=qi[169]=-1,Gi[1]=Gi[169]=0,Hi[1]=Hi[169]=0,Bi[4]=Bi[166]=0,Ui[4]=Ui[166]=-1,Vi[4]=Vi[166]=1,Wi[4]=Wi[166]=1,Xi[4]=Xi[166]=0,Yi[4]=Yi[166]=0,Di[16]=Di[154]=0,Fi[16]=Fi[154]=1,zi[16]=zi[154]=1,Mi[16]=Mi[154]=1,Ri[16]=Ri[154]=0,Ai[16]=Ai[154]=1,Zi[64]=Zi[106]=0,Ki[64]=Ki[106]=1,Qi[64]=Qi[106]=0,Pi[64]=Pi[106]=-1,Li[64]=Li[106]=0,ji[64]=ji[106]=1,Zi[2]=Zi[168]=0,Ki[2]=Ki[168]=-1,Qi[2]=Qi[168]=1,Ji[2]=Ji[168]=0,$i[2]=$i[168]=-1,to[2]=to[168]=0,qi[2]=qi[168]=-1,Gi[2]=Gi[168]=0,Hi[2]=Hi[168]=0,Wi[2]=Wi[168]=-1,Xi[2]=Xi[168]=0,Yi[2]=Yi[168]=1,Di[8]=Di[162]=0,Fi[8]=Fi[162]=-1,zi[8]=zi[162]=0,Bi[8]=Bi[162]=0,Ui[8]=Ui[162]=-1,Vi[8]=Vi[162]=1,qi[8]=qi[162]=1,Gi[8]=Gi[162]=0,Hi[8]=Hi[162]=1,Wi[8]=Wi[162]=1,Xi[8]=Xi[162]=0,Yi[8]=Yi[162]=0,Di[32]=Di[138]=0,Fi[32]=Fi[138]=1,zi[32]=zi[138]=1,Bi[32]=Bi[138]=0,Ui[32]=Ui[138]=1,Vi[32]=Vi[138]=0,Pi[32]=Pi[138]=1,Li[32]=Li[138]=0,ji[32]=ji[138]=0,Mi[32]=Mi[138]=1,Ri[32]=Ri[138]=0,Ai[32]=Ai[138]=1,Ji[128]=Ji[42]=0,$i[128]=$i[42]=1,to[128]=to[42]=1,Zi[128]=Zi[42]=0,Ki[128]=Ki[42]=1,Qi[128]=Qi[42]=0,Pi[128]=Pi[42]=-1,Li[128]=Li[42]=0,ji[128]=ji[42]=1,Mi[128]=Mi[42]=-1,Ri[128]=Ri[42]=0,Ai[128]=Ai[42]=0,Bi[5]=Bi[165]=-1,Ui[5]=Ui[165]=0,Vi[5]=Vi[165]=0,Ji[5]=Ji[165]=1,$i[5]=$i[165]=0,to[5]=to[165]=0,Wi[20]=Wi[150]=0,Xi[20]=Xi[150]=1,Yi[20]=Yi[150]=1,Mi[20]=Mi[150]=0,Ri[20]=Ri[150]=-1,Ai[20]=Ai[150]=1,Di[80]=Di[90]=-1,Fi[80]=Fi[90]=0,zi[80]=zi[90]=1,Zi[80]=Zi[90]=1,Ki[80]=Ki[90]=0,Qi[80]=Qi[90]=1,qi[65]=qi[105]=0,Gi[65]=Gi[105]=1,Hi[65]=Hi[105]=0,Pi[65]=Pi[105]=0,Li[65]=Li[105]=-1,ji[65]=ji[105]=0,Di[160]=Di[10]=-1,Fi[160]=Fi[10]=0,zi[160]=zi[10]=1,Bi[160]=Bi[10]=-1,Ui[160]=Ui[10]=0,Vi[160]=Vi[10]=0,Ji[160]=Ji[10]=1,$i[160]=$i[10]=0,to[160]=to[10]=0,Zi[160]=Zi[10]=1,Ki[160]=Ki[10]=0,Qi[160]=Qi[10]=1,Wi[130]=Wi[40]=0,Xi[130]=Xi[40]=1,Yi[130]=Yi[40]=1,qi[130]=qi[40]=0,Gi[130]=Gi[40]=1,Hi[130]=Hi[40]=0,Pi[130]=Pi[40]=0,Li[130]=Li[40]=-1,ji[130]=ji[40]=0,Mi[130]=Mi[40]=0,Ri[130]=Ri[40]=-1,Ai[130]=Ai[40]=1,Bi[37]=Bi[133]=0,Ui[37]=Ui[133]=1,Vi[37]=Vi[133]=1,Ji[37]=Ji[133]=0,$i[37]=$i[133]=1,to[37]=to[133]=0,Pi[37]=Pi[133]=-1,Li[37]=Li[133]=0,ji[37]=ji[133]=0,Mi[37]=Mi[133]=1,Ri[37]=Ri[133]=0,Ai[37]=Ai[133]=0,Wi[148]=Wi[22]=-1,Xi[148]=Xi[22]=0,Yi[148]=Yi[22]=0,Ji[148]=Ji[22]=0,$i[148]=$i[22]=-1,to[148]=to[22]=1,Zi[148]=Zi[22]=0,Ki[148]=Ki[22]=1,Qi[148]=Qi[22]=1,Mi[148]=Mi[22]=-1,Ri[148]=Ri[22]=0,Ai[148]=Ai[22]=1,Di[82]=Di[88]=0,Fi[82]=Fi[88]=-1,zi[82]=zi[88]=1,Wi[82]=Wi[88]=1,Xi[82]=Xi[88]=0,Yi[82]=Yi[88]=1,qi[82]=qi[88]=-1,Gi[82]=Gi[88]=0,Hi[82]=Hi[88]=1,Zi[82]=Zi[88]=0,Ki[82]=Ki[88]=-1,Qi[82]=Qi[88]=0,Di[73]=Di[97]=0,Fi[73]=Fi[97]=1,zi[73]=zi[97]=0,Bi[73]=Bi[97]=0,Ui[73]=Ui[97]=-1,Vi[73]=Vi[97]=0,qi[73]=qi[97]=1,Gi[73]=Gi[97]=0,Hi[73]=Hi[97]=0,Pi[73]=Pi[97]=1,Li[73]=Li[97]=0,ji[73]=ji[97]=1,Di[145]=Di[25]=0,Fi[145]=Fi[25]=-1,zi[145]=zi[25]=0,qi[145]=qi[25]=1,Gi[145]=Gi[25]=0,Hi[145]=Hi[25]=1,Ji[145]=Ji[25]=0,$i[145]=$i[25]=1,to[145]=to[25]=1,Mi[145]=Mi[25]=-1,Ri[145]=Ri[25]=0,Ai[145]=Ai[25]=0,Bi[70]=Bi[100]=0,Ui[70]=Ui[100]=1,Vi[70]=Vi[100]=0,Wi[70]=Wi[100]=-1,Xi[70]=Xi[100]=0,Yi[70]=Yi[100]=1,Zi[70]=Zi[100]=0,Ki[70]=Ki[100]=-1,Qi[70]=Qi[100]=1,Pi[70]=Pi[100]=1,Li[70]=Li[100]=0,ji[70]=ji[100]=0,Bi[101]=Bi[69]=0,Ui[101]=Ui[69]=1,Vi[101]=Vi[69]=0,Pi[101]=Pi[69]=1,Li[101]=Li[69]=0,ji[101]=ji[69]=0,Ji[149]=Ji[21]=0,$i[149]=$i[21]=1,to[149]=to[21]=1,Mi[149]=Mi[21]=-1,Ri[149]=Ri[21]=0,Ai[149]=Ai[21]=0,Wi[86]=Wi[84]=-1,Xi[86]=Xi[84]=0,Yi[86]=Yi[84]=1,Zi[86]=Zi[84]=0,Ki[86]=Ki[84]=-1,Qi[86]=Qi[84]=1,Di[89]=Di[81]=0,Fi[89]=Fi[81]=-1,zi[89]=zi[81]=0,qi[89]=qi[81]=1,Gi[89]=Gi[81]=0,Hi[89]=Hi[81]=1,Di[96]=Di[74]=0,Fi[96]=Fi[74]=1,zi[96]=zi[74]=0,Bi[96]=Bi[74]=-1,Ui[96]=Ui[74]=0,Vi[96]=Vi[74]=1,Zi[96]=Zi[74]=1,Ki[96]=Ki[74]=0,Qi[96]=Qi[74]=0,Pi[96]=Pi[74]=1,Li[96]=Li[74]=0,ji[96]=ji[74]=1,Di[24]=Di[146]=0,Fi[24]=Fi[146]=-1,zi[24]=zi[146]=1,Wi[24]=Wi[146]=1,Xi[24]=Xi[146]=0,Yi[24]=Yi[146]=1,qi[24]=qi[146]=0,Gi[24]=Gi[146]=1,Hi[24]=Hi[146]=1,Mi[24]=Mi[146]=0,Ri[24]=Ri[146]=-1,Ai[24]=Ai[146]=0,Bi[6]=Bi[164]=-1,Ui[6]=Ui[164]=0,Vi[6]=Vi[164]=1,Wi[6]=Wi[164]=-1,Xi[6]=Xi[164]=0,Yi[6]=Yi[164]=0,Ji[6]=Ji[164]=0,$i[6]=$i[164]=-1,to[6]=to[164]=1,Zi[6]=Zi[164]=1,Ki[6]=Ki[164]=0,Qi[6]=Qi[164]=0,qi[129]=qi[41]=0,Gi[129]=Gi[41]=1,Hi[129]=Hi[41]=1,Ji[129]=Ji[41]=0,$i[129]=$i[41]=1,to[129]=to[41]=0,Pi[129]=Pi[41]=-1,Li[129]=Li[41]=0,ji[129]=ji[41]=0,Mi[129]=Mi[41]=0,Ri[129]=Ri[41]=-1,Ai[129]=Ai[41]=0,Wi[66]=Wi[104]=0,Xi[66]=Xi[104]=1,Yi[66]=Yi[104]=0,qi[66]=qi[104]=-1,Gi[66]=Gi[104]=0,Hi[66]=Hi[104]=1,Zi[66]=Zi[104]=0,Ki[66]=Ki[104]=-1,Qi[66]=Qi[104]=0,Pi[66]=Pi[104]=0,Li[66]=Li[104]=-1,ji[66]=ji[104]=1,Di[144]=Di[26]=-1,Fi[144]=Fi[26]=0,zi[144]=zi[26]=0,Ji[144]=Ji[26]=1,$i[144]=$i[26]=0,to[144]=to[26]=1,Zi[144]=Zi[26]=0,Ki[144]=Ki[26]=1,Qi[144]=Qi[26]=1,Mi[144]=Mi[26]=-1,Ri[144]=Ri[26]=0,Ai[144]=Ai[26]=1,Bi[36]=Bi[134]=0,Ui[36]=Ui[134]=1,Vi[36]=Vi[134]=1,Wi[36]=Wi[134]=0,Xi[36]=Xi[134]=1,Yi[36]=Yi[134]=0,Pi[36]=Pi[134]=0,Li[36]=Li[134]=-1,ji[36]=ji[134]=1,Mi[36]=Mi[134]=1,Ri[36]=Ri[134]=0,Ai[36]=Ai[134]=0,Di[9]=Di[161]=-1,Fi[9]=Fi[161]=0,zi[9]=zi[161]=0,Bi[9]=Bi[161]=0,Ui[9]=Ui[161]=-1,Vi[9]=Vi[161]=0,qi[9]=qi[161]=1,Gi[9]=Gi[161]=0,Hi[9]=Hi[161]=0,Ji[9]=Ji[161]=1,$i[9]=$i[161]=0,to[9]=to[161]=1,Di[136]=0,Fi[136]=1,zi[136]=1,Bi[136]=0,Ui[136]=1,Vi[136]=0,Wi[136]=-1,Xi[136]=0,Yi[136]=1,qi[136]=-1,Gi[136]=0,Hi[136]=0,Ji[136]=0,$i[136]=-1,to[136]=0,Zi[136]=0,Ki[136]=-1,Qi[136]=1,Pi[136]=1,Li[136]=0,ji[136]=0,Mi[136]=1,Ri[136]=0,Ai[136]=1,Di[34]=0,Fi[34]=-1,zi[34]=0,Bi[34]=0,Ui[34]=-1,Vi[34]=1,Wi[34]=1,Xi[34]=0,Yi[34]=0,qi[34]=1,Gi[34]=0,Hi[34]=1,Ji[34]=0,$i[34]=1,to[34]=1,Zi[34]=0,Ki[34]=1,Qi[34]=0,Pi[34]=-1,Li[34]=0,ji[34]=1,Mi[34]=-1,Ri[34]=0,Ai[34]=0,Di[35]=0,Fi[35]=1,zi[35]=1,Bi[35]=0,Ui[35]=-1,Vi[35]=1,Wi[35]=1,Xi[35]=0,Yi[35]=0,qi[35]=-1,Gi[35]=0,Hi[35]=0,Ji[35]=0,$i[35]=-1,to[35]=0,Zi[35]=0,Ki[35]=1,Qi[35]=0,Pi[35]=-1,Li[35]=0,ji[35]=1,Mi[35]=1,Ri[35]=0,Ai[35]=1,Di[153]=0,Fi[153]=1,zi[153]=1,qi[153]=-1,Gi[153]=0,Hi[153]=0,Ji[153]=0,$i[153]=-1,to[153]=0,Mi[153]=1,Ri[153]=0,Ai[153]=1,Bi[102]=0,Ui[102]=-1,Vi[102]=1,Wi[102]=1,Xi[102]=0,Yi[102]=0,Zi[102]=0,Ki[102]=1,Qi[102]=0,Pi[102]=-1,Li[102]=0,ji[102]=1,Di[155]=0,Fi[155]=-1,zi[155]=0,qi[155]=1,Gi[155]=0,Hi[155]=1,Ji[155]=0,$i[155]=1,to[155]=1,Mi[155]=-1,Ri[155]=0,Ai[155]=0,Bi[103]=0,Ui[103]=1,Vi[103]=0,Wi[103]=-1,Xi[103]=0,Yi[103]=1,Zi[103]=0,Ki[103]=-1,Qi[103]=1,Pi[103]=1,Li[103]=0,ji[103]=0,Di[152]=0,Fi[152]=1,zi[152]=1,Wi[152]=-1,Xi[152]=0,Yi[152]=1,qi[152]=-1,Gi[152]=0,Hi[152]=0,Ji[152]=0,$i[152]=-1,to[152]=0,Zi[152]=0,Ki[152]=-1,Qi[152]=1,Mi[152]=1,Ri[152]=0,Ai[152]=1,Di[156]=0,Fi[156]=-1,zi[156]=1,Wi[156]=1,Xi[156]=0,Yi[156]=1,qi[156]=-1,Gi[156]=0,Hi[156]=0,Ji[156]=0,$i[156]=-1,to[156]=0,Zi[156]=0,Ki[156]=1,Qi[156]=1,Mi[156]=-1,Ri[156]=0,Ai[156]=1,Di[137]=0,Fi[137]=1,zi[137]=1,Bi[137]=0,Ui[137]=1,Vi[137]=0,qi[137]=-1,Gi[137]=0,Hi[137]=0,Ji[137]=0,$i[137]=-1,to[137]=0,Pi[137]=1,Li[137]=0,ji[137]=0,Mi[137]=1,Ri[137]=0,Ai[137]=1,Di[139]=0,Fi[139]=1,zi[139]=1,Bi[139]=0,Ui[139]=-1,Vi[139]=0,qi[139]=1,Gi[139]=0,Hi[139]=0,Ji[139]=0,$i[139]=1,to[139]=0,Pi[139]=-1,Li[139]=0,ji[139]=0,Mi[139]=1,Ri[139]=0,Ai[139]=1,Di[98]=0,Fi[98]=-1,zi[98]=0,Bi[98]=0,Ui[98]=-1,Vi[98]=1,Wi[98]=1,Xi[98]=0,Yi[98]=0,qi[98]=1,Gi[98]=0,Hi[98]=1,Zi[98]=0,Ki[98]=1,Qi[98]=0,Pi[98]=-1,Li[98]=0,ji[98]=1,Di[99]=0,Fi[99]=1,zi[99]=0,Bi[99]=0,Ui[99]=-1,Vi[99]=1,Wi[99]=1,Xi[99]=0,Yi[99]=0,qi[99]=-1,Gi[99]=0,Hi[99]=1,Zi[99]=0,Ki[99]=-1,Qi[99]=0,Pi[99]=1,Li[99]=0,ji[99]=1,Bi[38]=0,Ui[38]=-1,Vi[38]=1,Wi[38]=1,Xi[38]=0,Yi[38]=0,Ji[38]=0,$i[38]=1,to[38]=1,Zi[38]=0,Ki[38]=1,Qi[38]=0,Pi[38]=-1,Li[38]=0,ji[38]=1,Mi[38]=-1,Ri[38]=0,Ai[38]=0,Bi[39]=0,Ui[39]=1,Vi[39]=1,Wi[39]=-1,Xi[39]=0,Yi[39]=0,Ji[39]=0,$i[39]=-1,to[39]=1,Zi[39]=0,Ki[39]=1,Qi[39]=0,Pi[39]=-1,Li[39]=0,ji[39]=1,Mi[39]=1,Ri[39]=0,Ai[39]=0;var eo=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},no=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},ro=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},io=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},oo=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},ao=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},so=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},uo=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},co=[],lo=[],ho=[],fo=[],po=[],go=[],vo=[],yo=[];fo[1]=po[1]=18,fo[169]=po[169]=18,ho[4]=lo[4]=12,ho[166]=lo[166]=12,co[16]=yo[16]=4,co[154]=yo[154]=4,go[64]=vo[64]=22,go[106]=vo[106]=22,ho[2]=go[2]=17,fo[2]=po[2]=18,ho[168]=go[168]=17,fo[168]=po[168]=18,co[8]=fo[8]=9,lo[8]=ho[8]=12,co[162]=fo[162]=9,lo[162]=ho[162]=12,co[32]=yo[32]=4,lo[32]=vo[32]=1,co[138]=yo[138]=4,lo[138]=vo[138]=1,po[128]=yo[128]=21,go[128]=vo[128]=22,po[42]=yo[42]=21,go[42]=vo[42]=22,lo[5]=po[5]=14,lo[165]=po[165]=14,ho[20]=yo[20]=6,ho[150]=yo[150]=6,co[80]=go[80]=11,co[90]=go[90]=11,fo[65]=vo[65]=3,fo[105]=vo[105]=3,co[160]=go[160]=11,lo[160]=po[160]=14,co[10]=go[10]=11,lo[10]=po[10]=14,ho[130]=yo[130]=6,fo[130]=vo[130]=3,ho[40]=yo[40]=6,fo[40]=vo[40]=3,lo[101]=vo[101]=1,lo[69]=vo[69]=1,po[149]=yo[149]=21,po[21]=yo[21]=21,ho[86]=go[86]=17,ho[84]=go[84]=17,co[89]=fo[89]=9,co[81]=fo[81]=9,co[96]=vo[96]=0,lo[96]=go[96]=15,co[74]=vo[74]=0,lo[74]=go[74]=15,co[24]=ho[24]=8,fo[24]=yo[24]=7,co[146]=ho[146]=8,fo[146]=yo[146]=7,lo[6]=go[6]=15,ho[6]=po[6]=16,lo[164]=go[164]=15,ho[164]=po[164]=16,fo[129]=yo[129]=7,po[129]=vo[129]=20,fo[41]=yo[41]=7,po[41]=vo[41]=20,ho[66]=vo[66]=2,fo[66]=go[66]=19,ho[104]=vo[104]=2,fo[104]=go[104]=19,co[144]=po[144]=10,go[144]=yo[144]=23,co[26]=po[26]=10,go[26]=yo[26]=23,lo[36]=yo[36]=5,ho[36]=vo[36]=2,lo[134]=yo[134]=5,ho[134]=vo[134]=2,co[9]=po[9]=10,lo[9]=fo[9]=13,co[161]=po[161]=10,lo[161]=fo[161]=13,lo[37]=yo[37]=5,po[37]=vo[37]=20,lo[133]=yo[133]=5,po[133]=vo[133]=20,ho[148]=po[148]=16,go[148]=yo[148]=23,ho[22]=po[22]=16,go[22]=yo[22]=23,co[82]=ho[82]=8,fo[82]=go[82]=19,co[88]=ho[88]=8,fo[88]=go[88]=19,co[73]=vo[73]=0,lo[73]=fo[73]=13,co[97]=vo[97]=0,lo[97]=fo[97]=13,co[145]=fo[145]=9,po[145]=yo[145]=21,co[25]=fo[25]=9,po[25]=yo[25]=21,lo[70]=vo[70]=1,ho[70]=go[70]=17,lo[100]=vo[100]=1,ho[100]=go[100]=17,co[34]=fo[34]=9,lo[34]=ho[34]=12,po[34]=yo[34]=21,go[34]=vo[34]=22,co[136]=yo[136]=4,lo[136]=vo[136]=1,ho[136]=go[136]=17,fo[136]=po[136]=18,co[35]=yo[35]=4,lo[35]=ho[35]=12,fo[35]=po[35]=18,go[35]=vo[35]=22,co[153]=yo[153]=4,fo[153]=po[153]=18,lo[102]=ho[102]=12,go[102]=vo[102]=22,co[155]=fo[155]=9,po[155]=yo[155]=23,lo[103]=vo[103]=1,ho[103]=go[103]=17,co[152]=yo[152]=4,ho[152]=go[152]=17,fo[152]=po[152]=18,co[156]=ho[156]=8,fo[156]=po[156]=18,go[156]=yo[156]=23,co[137]=yo[137]=4,lo[137]=vo[137]=1,fo[137]=po[137]=18,co[139]=yo[139]=4,lo[139]=fo[139]=13,po[139]=vo[139]=20,co[98]=fo[98]=9,lo[98]=ho[98]=12,go[98]=vo[98]=22,co[99]=vo[99]=0,lo[99]=ho[99]=12,fo[99]=go[99]=19,lo[38]=ho[38]=12,po[38]=yo[38]=21,go[38]=vo[38]=22,lo[39]=yo[39]=5,ho[39]=po[39]=16,go[39]=vo[39]=22;var mo=[];function _o(t,e,n){return(t-e)/(n-e)}function bo(t){return t.constructor.toString().indexOf("Array")>-1}function wo(t,e,n,r,i,o){for(var a=t.cells[n][e],s=a.cval_real,u=e+r,c=n+i,l=[],h=!1;!h;){if(void 0===t.cells[c]||void 0===t.cells[c][u])if(c-=i,u-=r,s=(a=t.cells[c][u]).cval_real,-1===i)if(0===o)if(1&s)l.push([u,c]),r=-1,i=0,o=0;else{if(!(4&s)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+1,c]),r=1,i=0,o=0}else{if(!(1&s)){if(4&s){l.push([u+a.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+a.bottomleft,c]),r=0,i=1,o=0,h=!0;break}l.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(16&s)){if(64&s){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+a.topright,c+1]),r=0,i=-1,o=1,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}else l.push([u+1,c+1]),r=1,i=0,o=1;else if(-1===r)if(0===o){if(!(64&s)){if(1&s){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+a.lefttop]),r=1,i=0,o=1,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}else{if(!(64&s)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(4&s)){l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}else{if(!(4&s)){if(16&s){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1;break}l.push([u+1,c+a.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else if(s=(a=t.cells[c][u]).cval_real,-1===r)if(0===o)if(void 0!==t.cells[c-1]&&void 0!==t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(1&s)){l.push([u+a.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u,c])}else{if(!(64&s)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c+1]&&void 0!==t.cells[c+1][u])r=0,i=1,o=0;else{if(!(16&s)){l.push([u+a.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}}else if(-1===i){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u+1])r=1,i=0,o=1;else{if(!(4&s)){l.push([u+1,c+a.righttop]),r=-1,i=0,o=1,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if(void 0!==t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(64&s)){l.push([u,c+a.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}}if(c+=i,(u+=r)===e&&c===n)break}return{path:l,i:u,j:c,x:r,y:i,o:o}}function xo(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return 16&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return 4&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return 1&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return 16&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return 4&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return 1&n?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return 1&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return 64&n?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return 1&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return 64&n?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return 4&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return 64&n?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return 1&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return 64&n?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return 64&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return 16&n?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return 64&n?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return 16&n?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Eo(t,e,n,r){var i,o,a,s,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=lo[c],a=Bi[c],s=Ui[c],u=Vi[c];break;default:i=co[c],a=Di[c],s=Fi[c],u=zi[c]}break;case 1:switch(r){case 0:i=po[c],a=Ji[c],s=$i[c],u=to[c];break;default:i=go[c],a=Zi[c],s=Ki[c],u=Qi[c]}break;default:switch(n){case-1:switch(r){case 0:i=vo[c],a=Pi[c],s=Li[c],u=ji[c];break;default:i=yo[c],a=Mi[c],s=Ri[c],u=Ai[c]}break;case 1:switch(r){case 0:i=fo[c],a=qi[c],s=Gi[c],u=Hi[c];break;default:i=ho[c],a=Wi[c],s=Xi[c],u=Yi[c]}}}if(o=t.edges.indexOf(i),void 0===t.edges[o])return null;switch(function(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}(t,o),c=t.cval_real,i){case 0:16&c?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:4&c?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:4&c?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:1&c?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:16&c?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:4&c?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:4&c?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:1&c?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:4&c?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:1&c?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:1&c?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:64&c?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:4&c?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:1&c?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:1&c?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:64&c?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:4&c?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:64&c?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:1&c?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:64&c?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:64&c?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:16&c?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:64&c?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:16&c?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return void 0!==e&&void 0!==n&&void 0!==a&&void 0!==s&&void 0!==u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+a+" "+s+" "+u)),{p:[e,n],x:a,y:s,o:u}}function Oo(t){var e=[],n=[];t.forEach((function(t){var r=wr(l([t]));n.push(r),e.push({ring:t,area:r})})),n.sort((function(t,e){return e-t}));var r=[];return n.forEach((function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}})),r}function ko(t){for(var e=t.map((function(t){return{lrCoordinates:t,grouped:!1}})),n=[];!So(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var o=l([e[r].lrCoordinates]),a=r+1;a<e.length;a++)e[a].grouped||Io(l([e[a].lrCoordinates]),o)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0);n.push(i)}return n}function Io(t,e){for(var n=fn(t),r=0;r<n.features.length;r++)if(!de(n.features[r],e))return!1;return!0}function So(t){for(var e=0;e<t.length;e++)if(!1===t[e].grouped)return!1;return!0}function Co(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("angle is required");return 0===e||(r||(r=hn(t)),!1!==i&&void 0!==i||(t=xe(t)),j(t,(function(t){var n=mi(r,t)+e,i=dr(r,t),o=$(bi(r,i,n));t[0]=o[0],t[1]=o[1]}))),t}function To(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return!0!==i&&(t=xe(t)),"FeatureCollection"!==t.type||o?No(t,e,r):(D(t,(function(n,i){t.features[i]=No(n,e,r)})),t)}function No(t,e,n){var r="Point"===ot(t);return n=function(t,e){if(null==e&&(e="centroid"),Array.isArray(e)||"object"==typeof e)return J(e);var n=t.bbox?t.bbox:Q(t),r=n[0],i=n[1],o=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return u([r,i]);case"se":case"southeast":case"eastsouth":case"bottomright":return u([o,i]);case"nw":case"northwest":case"westnorth":case"topleft":return u([r,a]);case"ne":case"northeast":case"eastnorth":case"topright":return u([o,a]);case"center":return ln(t);case void 0:case null:case"centroid":return hn(t);default:throw new Error("invalid origin")}}(t,n),1===e||r||j(t,(function(t){var r=dr(n,t),i=mi(n,t),o=$(bi(n,r*e,i));t[0]=o[0],t[1]=o[1],3===t.length&&(t[2]*=e)})),t}function Po(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Lo(t,e){return t[0]*e[1]-e[0]*t[1]}function jo(t,e,n){var r=[],i=x(e,n),o=$(t),a=[];return o.forEach((function(t,e){if(e!==o.length-1){var n=(c=t,l=o[e+1],h=i,f=Math.sqrt((c[0]-l[0])*(c[0]-l[0])+(c[1]-l[1])*(c[1]-l[1])),p=c[0]+h*(l[1]-c[1])/f,d=l[0]+h*(l[1]-c[1])/f,[[p,c[1]+h*(c[0]-l[0])/f],[d,l[1]+h*(c[0]-l[0])/f]]);if(r.push(n),e>0){var s=r[e-1],u=function(t,e){return!function(t,e){return 0===Lo(Po(t),Po(e))}(t,e)&&function(t,e){var n,r,i=t[0],o=Po(t),a=e[0],s=Po(e),u=Lo(o,s);return function(t,e){return[t[0]+e[0],t[1]+e[1]]}(i,function(t,e){return[t*e[0],t*e[1]]}(Lo((r=i,[(n=a)[0]-r[0],n[1]-r[1]]),s)/u,o))}(t,e)}(n,s);!1!==u&&(s[1]=u,n[0]=u),a.push(s[0]),e===o.length-2&&(a.push(n[0]),a.push(n[1]))}2===o.length&&(a.push(n[0]),a.push(n[1]))}var c,l,h,f,p,d})),f(a,t.properties)}function Mo(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0];return function(t){return(t>0)-(t<0)||+t}(r*(n[1]-e[1])-o*i)}function Ro(t,e){return e.geometry.coordinates[0].every((function(e){return de(u(e),t)}))}mo[1]=mo[169]=eo,mo[4]=mo[166]=no,mo[16]=mo[154]=ro,mo[64]=mo[106]=io,mo[168]=mo[2]=oo,mo[162]=mo[8]=ao,mo[138]=mo[32]=so,mo[42]=mo[128]=uo,mo[5]=mo[165]=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},mo[20]=mo[150]=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},mo[80]=mo[90]=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},mo[65]=mo[105]=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},mo[160]=mo[10]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},mo[130]=mo[40]=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},mo[85]=function(){return[[0,0],[0,1],[1,1],[1,0]]},mo[101]=mo[69]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},mo[149]=mo[21]=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},mo[86]=mo[84]=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},mo[89]=mo[81]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},mo[96]=mo[74]=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},mo[24]=mo[146]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},mo[6]=mo[164]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},mo[129]=mo[41]=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},mo[66]=mo[104]=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},mo[144]=mo[26]=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},mo[36]=mo[134]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},mo[9]=mo[161]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},mo[37]=mo[133]=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},mo[148]=mo[22]=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},mo[82]=mo[88]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},mo[73]=mo[97]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},mo[145]=mo[25]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},mo[70]=mo[100]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},mo[34]=function(t){return[uo(t),ao(t)]},mo[35]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},mo[136]=function(t){return[so(t),oo(t)]},mo[153]=function(t){return[ro(t),eo(t)]},mo[102]=function(t){return[no(t),io(t)]},mo[155]=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},mo[103]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},mo[152]=function(t){return[ro(t),oo(t)]},mo[156]=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},mo[137]=function(t){return[so(t),eo(t)]},mo[139]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},mo[98]=function(t){return[ao(t),io(t)]},mo[99]=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},mo[38]=function(t){return[no(t),uo(t)]},mo[39]=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]};var Ao=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]==0&&i.coordinates[0]-t.coordinates[0]==0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=Mo(t.coordinates,r.coordinates,i.coordinates);return o<0?1:o>0?-1:Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2)-(Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),Do=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return f([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return Mo(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),Fo=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e}),0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=Mo(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},t.prototype.toMultiPoint=function(){return v(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=l([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=on(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var n,r,i=t.getEnvelope();return e.forEach((function(e){var o,a,s,c,l,h,f=e.getEnvelope();if(r&&(n=r.getEnvelope()),a=i,s=(o=f).geometry.coordinates[0].map((function(t){return t[0]})),c=o.geometry.coordinates[0].map((function(t){return t[1]})),l=a.geometry.coordinates[0].map((function(t){return t[0]})),h=a.geometry.coordinates[0].map((function(t){return t[1]})),(Math.max.apply(null,s)!==Math.max.apply(null,l)||Math.max.apply(null,c)!==Math.max.apply(null,h)||Math.min.apply(null,s)!==Math.min.apply(null,l)||Math.min.apply(null,c)!==Math.min.apply(null,h))&&Ro(f,i)){for(var p=t.map((function(t){return t.from.coordinates})),d=void 0,g=function(t){e.some((function(e){return n=t,r=e.from.coordinates,n[0]===r[0]&&n[1]===r[1];var n,r}))||(d=t)},v=0,y=p;v<y.length;v++)g(y[v]);d&&e.inside(u(d))&&(r&&!Ro(n,f)||(r=e))}})),r},t.prototype.inside=function(t){return de(t,this.toPolygon())},t}(),zo=function(){function t(){this.edges=[],this.nodes={}}return t.fromGeoJson=function(e){!function(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}(e);var n=new t;return V(e,(function(t){nt(t,"LineString","Graph::fromGeoJson"),M(t,(function(t,e){if(t){var r=n.getNode(t),i=n.getNode(e);n.addEdge(r,i)}return e}))})),n},t.prototype.getNode=function(t){var e=Ao.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Ao(t)),n},t.prototype.addEdge=function(t,e){var n=new Do(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),n.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;void 0===t?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var a=i[o],s=a.symetric,u=void 0,c=void 0;a.label===e&&(u=a),s.label===e&&(c=s),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(n){if(!(n.label>=0)){t.push(n);var r=n;do{r.label=e,r=r.next}while(!n.isEqual(r));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(n){t._computeNextCCWEdges(n,e.label)}))}));var e=[];return this.edges.forEach((function(n){n.ring||e.push(t._findEdgeRing(n))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach((function(e){e.label===t.label&&++r})),r>1&&e.push(n.from),n=n.next};do{r()}while(!t.isEqual(n));return e},t.prototype._findEdgeRing=function(t){var e=t,n=new Fo;do{n.push(e),e.ring=n,e=e.next}while(!t.isEqual(e));return n},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();function Bo(t,e){var n=!0;return V(t,(function(t){V(e,(function(e){if(!1===n)return!1;n=function(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return n=t.coordinates,r=e.coordinates,!(n[0]===r[0]&&n[1]===r[1]);case"LineString":return!Uo(e,t);case"Polygon":return!de(t,e)}break;case"LineString":switch(e.type){case"Point":return!Uo(t,e);case"LineString":return!function(t,e){return hr(t,e).features.length>0}(t,e);case"Polygon":return!Vo(e,t)}break;case"Polygon":switch(e.type){case"Point":return!de(e,t);case"LineString":return!Vo(t,e);case"Polygon":return!function(t,e){for(var n=0,r=t.coordinates[0];n<r.length;n++)if(de(r[n],e))return!0;for(var i=0,o=e.coordinates[0];i<o.length;i++)if(de(o[i],t))return!0;return hr(ni(t),ni(e)).features.length>0}(e,t)}}var n,r;return!1}(t.geometry,e.geometry)}))})),n}function Uo(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(qo(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function Vo(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(de(r[n],t))return!0;return hr(e,ni(t)).features.length>0}function qo(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1];return 0==r*a-i*o&&(Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function Go(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Ho(t,e){return t[0]===e[0]&&t[1]===e[1]}function Wo(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Xo(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var a=0;a<e.coordinates.length-1;a++){var s=!0;0!==a&&a!==e.coordinates.length-2||(s=!1),Ko(e.coordinates[a],e.coordinates[a+1],t.coordinates[o],s)?n=!0:r=!0}o++}return n&&r}function Yo(t,e){return hr(t,ri(e)).features.length>0}function Zo(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&(!n||!r);o++)de(u(t.coordinates[o]),e)?n=!0:r=!0;return r&&n}function Ko(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],a=e[0]-t[0],s=e[1]-t[1];return 0==i*s-o*a&&(r?Math.abs(a)>=Math.abs(s)?a>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(a)>=Math.abs(s)?a>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:s>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}var Qo=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:ta};function Jo(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function $o(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function ta(t,e){return di(t,e,{strict:!0})}Qo.prototype.compare=function(t,e){if(t.type!==e.type||!$o(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=Jo(t),i=Jo(e);return r.every((function(t){return this.some((function(e){return n.compare(t,e)}))}),i)}}return!1},Qo.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Qo.prototype.compareLine=function(t,e,n,r){if(!$o(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var a=this.compareCoord(i[n],o[n]);return this.direction||a?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Qo.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Qo.prototype.comparePath=function(t,e){var n=this;return t.every((function(t,e){return n.compareCoord(t,this[e])}),e)},Qo.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every((function(t){return this.some((function(e){return i.compareLine(t,e,1,!0)}))}),r)}return!1},Qo.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Qo.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Qo.prototype.removePseudo=function(t){return t};var ea=Qo;function na(t,e){var n=!1;return V(t,(function(t){V(e,(function(e){if(!0===n)return!0;n=!Bo(t.geometry,e.geometry)}))})),n}var ra=zt((function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var a=this.clusters.length;this.clusters.push([]),this._addToCluster(i,a),this._expandCluster(a,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++)this.distance(this.dataset[t],this.dataset[n])<this.epsilon&&e.push(n);return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)})),ia=zt((function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],void 0!==t&&(this.dataset=t),void 0!==e&&(this.k=e),void 0!==n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var a=new Array(l),s=0,u=0;u<l;u++)a[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(u=0;u<l;u++)a[u]+=this.dataset[c][u];s++}}if(s>0){for(u=0;u<l;u++)a[u]/=s;this.centroids[o]=a}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do{e=Math.round(Math.random()*n),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)(t=this.argmin(this.dataset[r],this.centroids,this.distance))!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)void 0===e[t=this.assignments[n]]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,a=e.length,s=0;s<a;s++)(r=n(t,e[s]))<i&&(i=r,o=s);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)})),oa=zt((function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;)if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)})),aa=zt((function(t){if(t.exports)var e=oa;function n(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}n.prototype.run=function(t,n,r,i){this._init(t,n,r,i);for(var o=0,a=this.dataset.length;o<a;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var s=this.clusters.length-1;this._orderedList.push(o);var u=new e(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(s,u))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},n.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},n.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var a=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,a,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++)if(this._regionQuery(t,n).length>=this.minPts)return n},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},n.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=n)})),sa=zt((function(t){t.exports&&(t.exports={DBSCAN:ra,KMEANS:ia,OPTICS:aa,PriorityQueue:oa})})),ua=function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var a=(t[o]||0)-(e[o]||0);i+=a*a}return n?Math.sqrt(i):i},ca=ua,la=function(t,e,n){var r=Math.abs(t-e);return n?r:r*r},ha=ua;function fa(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}var pa=function(t,e,n,r){var i=[],o=[],a=[],s=[],u=!1,c=r||1e4,l=t.length,h=t[0].length,f=h>0,p=[];if(n)i="kmrand"==n?function(t,e){for(var n={},r=[],i=e<<2,o=t.length,a=t[0].length>0;r.length<e&&i-- >0;){var s=t[Math.floor(Math.random()*o)],u=a?s.join("_"):""+s;n[u]||(n[u]=!0,r.push(s))}if(r.length<e)throw new Error("Error initializating clusters");return r}(t,e):"kmpp"==n?function(t,e){var n=t[0].length?ca:la,r=[],i=t.length,o=t[0].length>0,a=t[Math.floor(Math.random()*i)];for(o&&a.join("_"),r.push(a);r.length<e;){for(var s=[],u=r.length,c=0,l=[],h=0;h<i;h++){for(var f=1/0,p=0;p<u;p++){var d=n(t[h],r[p]);d<=f&&(f=d)}s[h]=f}for(var g=0;g<i;g++)c+=s[g];for(var v=0;v<i;v++)l[v]={i:v,v:t[v],pr:s[v]/c,cs:0};l.sort((function(t,e){return t.pr-e.pr})),l[0].cs=l[0].pr;for(var y=1;y<i;y++)l[y].cs=l[y-1].cs+l[y].pr;for(var m=Math.random(),_=0;_<i-1&&l[_++].cs<m;);r.push(l[_-1].v)}return r}(t,e):n;else for(var d={};i.length<e;){var g=Math.floor(Math.random()*l);d[g]||(d[g]=!0,i.push(t[g]))}do{fa(e,0,p);for(var v=0;v<l;v++){for(var y=1/0,m=0,_=0;_<e;_++)(s=f?ha(t[v],i[_]):Math.abs(t[v]-i[_]))<=y&&(y=s,m=_);a[v]=m,p[m]++}for(var b=[],w=(o=[],0);w<e;w++)b[w]=f?fa(h,0,b[w]):0,o[w]=i[w];if(f){for(var x=0;x<e;x++)i[x]=[];for(var E=0;E<l;E++)for(var O=b[a[E]],k=t[E],I=0;I<h;I++)O[I]+=k[I];u=!0;for(var S=0;S<e;S++){for(var C=i[S],T=b[S],N=o[S],P=p[S],L=0;L<h;L++)C[L]=T[L]/P||0;if(u)for(var j=0;j<h;j++)if(N[j]!=C[j]){u=!1;break}}}else{for(var M=0;M<l;M++)b[a[M]]+=t[M];for(var R=0;R<e;R++)i[R]=b[R]/p[R]||0;u=!0;for(var A=0;A<e;A++)if(o[A]!=i[A]){u=!1;break}}u=u||--c<=0}while(!u);return{it:1e4-c,k:e,idxs:a,centroids:i}};function da(t,e){return E(mi(t[0],t[1]))===E(mi(e[0],e[1]))}function ga(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function va(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}var ya={search:function(t,e,n,r){t.cleanDirty();var i=(r=r||{}).heuristic||ya.heuristics.manhattan,o=r.closest||!1,a=new ba((function(t){return t.f})),s=e;for(e.h=i(e,n),a.push(e);a.size()>0;){var u=a.pop();if(u===n)return va(u);u.closed=!0;for(var c=t.neighbors(u),l=0,h=c.length;l<h;++l){var f=c[l];if(!f.closed&&!f.isWall()){var p=u.g+f.getCost(u),d=f.visited;(!d||p<f.g)&&(f.visited=!0,f.parent=u,f.h=f.h||i(f,n),f.g=p,f.f=f.g+f.h,t.markDirty(f),o&&(f.h<s.h||f.h===s.h&&f.g<s.g)&&(s=f),d?a.rescoreElement(f):a.push(f))}}}return o?va(s):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var n=Math.sqrt(2),r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return 1*(r+i)+(n-2)*Math.min(r,i)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function ma(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new _a(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function _a(t,e,n){this.x=t,this.y=e,this.weight=n}function ba(t){this.content=[],this.scoreFunction=t}function wa(t,e){for(var n=0;n<e.features.length;n++)if(de(t,e.features[n]))return!0;return!1}function xa(t){return function(){return t}}function Ea(t){return t[0]}function Oa(t){return t[1]}function ka(){this._=null}function Ia(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Sa(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ca(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Ta(t){for(;t.L;)t=t.L;return t}function Na(t,e,n,r){var i=[null,null],o=ts.push(i)-1;return i.left=t,i.right=e,n&&La(i,t,e,n),r&&La(i,e,t,r),Ja[t.index].halfedges.push(o),Ja[e.index].halfedges.push(o),i}function Pa(t,e,n){var r=[e,n];return r.left=t,r}function La(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function ja(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=0,h=1,f=s[0]-u,p=s[1]-c;if(o=e-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<h&&(h=o)}else if(f>0){if(o>h)return;o>l&&(l=o)}if(o=r-u,f||!(o<0)){if(o/=f,f<0){if(o>h)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<h&&(h=o)}if(o=n-c,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=i-c,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}return!(l>0||h<1)||(l>0&&(t[0]=[u+l*f,c+l*p]),h<1&&(t[1]=[u+h*f,c+h*p]),!0)}}}}}function Ma(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],p=l[0],d=l[1],g=(h+p)/2,v=(f+d)/2;if(d===f){if(g<e||g>=r)return;if(h>p){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(s=v-(a=(h-p)/(d-f))*g,a<-1||a>1)if(h>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(f<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function Ra(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Aa(t,e){return e[+(e.left!==t.site)]}function Da(t,e){return e[+(e.left===t.site)]}ma.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)ya.cleanNode(this.nodes[t])},ma.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)ya.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},ma.prototype.markDirty=function(t){this.dirtyNodes.push(t)},ma.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},ma.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,a=0,s=o.length;a<s;a++){for(t=[],n=0,r=(e=o[a]).length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},_a.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},_a.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},_a.prototype.isWall=function(){return 0===this.weight},ba.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,a=o-1,s=null;if(a<e){var u=this.content[a];(i=this.scoreFunction(u))<r&&(s=a)}if(o<e){var c=this.content[o];this.scoreFunction(c)<(null===s?r:i)&&(s=o)}if(null===s)break;this.content[t]=this.content[s],this.content[s]=n,t=s}}},ka.prototype={constructor:ka,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Ta(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Sa(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ca(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ca(this,n),n=(t=n).U),n.C=!1,r.C=!0,Sa(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Ta(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Sa(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ca(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Sa(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ca(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Sa(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ca(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Fa,za=[];function Ba(){Ia(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ua(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,h=o[1]-s,f=2*(u*h-c*l);if(!(f>=-ns)){var p=u*u+c*c,d=l*l+h*h,g=(h*p-c*d)/f,v=(u*d-l*p)/f,y=za.pop()||new Ba;y.arc=t,y.site=i,y.x=g+a,y.y=(y.cy=v+s)+Math.sqrt(g*g+v*v),t.circle=y;for(var m=null,_=$a._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){m=_.P;break}_=_.L}else{if(!_.R){m=_;break}_=_.R}$a.insert(m,y),m||(Fa=y)}}}}function Va(t){var e=t.circle;e&&(e.P||(Fa=e.N),$a.remove(e),za.push(e),Ia(e),t.circle=null)}var qa=[];function Ga(){Ia(this),this.edge=this.site=this.circle=null}function Ha(t){var e=qa.pop()||new Ga;return e.site=t,e}function Wa(t){Va(t),Qa.remove(t),qa.push(t),Ia(t)}function Xa(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];Wa(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<es&&Math.abs(r-u.circle.cy)<es;)o=u.P,s.unshift(u),Wa(u),u=o;s.unshift(u),Va(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<es&&Math.abs(r-c.circle.cy)<es;)a=c.N,s.push(c),Wa(c),c=a;s.push(c),Va(c);var l,h=s.length;for(l=1;l<h;++l)c=s[l],u=s[l-1],La(c.edge,u.site,c.site,i);u=s[0],(c=s[h-1]).edge=Na(u.site,c.site,null,i),Ua(u),Ua(c)}function Ya(t){for(var e,n,r,i,o=t[0],a=t[1],s=Qa._;s;)if((r=Za(s,a)-o)>es)s=s.L;else{if(!((i=o-Ka(s,a))>es)){r>-es?(e=s.P,n=s):i>-es?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){Ja[t.index]={site:t,halfedges:[]}}(t);var u=Ha(t);if(Qa.insert(e,u),e||n){if(e===n)return Va(e),n=Ha(e.site),Qa.insert(u,n),u.edge=n.edge=Na(e.site,u.site),Ua(e),void Ua(n);if(n){Va(e),Va(n);var c=e.site,l=c[0],h=c[1],f=t[0]-l,p=t[1]-h,d=n.site,g=d[0]-l,v=d[1]-h,y=2*(f*v-p*g),m=f*f+p*p,_=g*g+v*v,b=[(v*m-p*_)/y+l,(f*_-g*m)/y+h];La(n.edge,c,d,b),u.edge=Na(c,t,null,b),n.edge=Na(t,d,null,b),Ua(e),Ua(n)}else u.edge=Na(e.site,u.site)}}function Za(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+s)/2}function Ka(t,e){var n=t.N;if(n)return Za(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Qa,Ja,$a,ts,es=1e-6,ns=1e-12;function rs(t,e){return e[1]-t[1]||e[0]-t[0]}function is(t,e){var n,r,i,o=t.sort(rs).pop();for(ts=[],Ja=new Array(t.length),Qa=new ka,$a=new ka;;)if(i=Fa,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ya(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Xa(i.arc)}if(function(){for(var t,e,n,r,i=0,o=Ja.length;i<o;++i)if((t=Ja[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Ra(t,ts[e[n]]);for(a.sort((function(t,e){return s[e]-s[t]})),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];!function(t,e,n,r){for(var i,o=ts.length;o--;)Ma(i=ts[o],t,e,n,r)&&ja(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>es||Math.abs(i[0][1]-i[1][1])>es)||delete ts[o]}(a,s,u,c),function(t,e,n,r){var i,o,a,s,u,c,l,h,f,p,d,g,v=Ja.length,y=!0;for(i=0;i<v;++i)if(o=Ja[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)ts[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)d=(p=Da(o,ts[u[s]]))[0],g=p[1],h=(l=Aa(o,ts[u[++s%c]]))[0],f=l[1],(Math.abs(d-h)>es||Math.abs(g-f)>es)&&(u.splice(s,0,ts.push(Pa(a,p,Math.abs(d-t)<es&&r-g>es?[t,Math.abs(h-t)<es?f:r]:Math.abs(g-r)<es&&n-d>es?[Math.abs(f-r)<es?h:n,r]:Math.abs(d-n)<es&&g-e>es?[n,Math.abs(h-n)<es?f:e]:Math.abs(g-e)<es&&d-t>es?[Math.abs(f-e)<es?h:t,e]:null))-1),++c);c&&(y=!1)}if(y){var m,_,b,w=1/0;for(i=0,y=null;i<v;++i)(o=Ja[i])&&(b=(m=(a=o.site)[0]-t)*m+(_=a[1]-e)*_)<w&&(w=b,y=o);if(y){var x=[t,e],E=[t,r],O=[n,r],k=[n,e];y.halfedges.push(ts.push(Pa(a=y.site,x,E))-1,ts.push(Pa(a,E,O))-1,ts.push(Pa(a,O,k))-1,ts.push(Pa(a,k,x))-1)}}for(i=0;i<v;++i)(o=Ja[i])&&(o.halfedges.length||delete Ja[i])}(a,s,u,c)}this.edges=ts,this.cells=Ja,Qa=$a=ts=Ja=null}function os(t){return(t=t.slice()).push(t[0]),l([t])}function as(t,e,n,r){var i=(r=r||{}).steps||64,o=r.units||"kilometers",a=r.angle||0,s=r.pivot||t,u=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!T(r))throw new Error("options must be an object");if(!C(i))throw new Error("steps must be a number");if(!C(a))throw new Error("angle must be a number");var c=J(t);if("degrees"===o)var h=k(a);else e=bi(t,e,90,{units:o}),n=bi(t,n,0,{units:o}),e=J(e)[0]-c[0],n=J(n)[1]-c[1];for(var f=[],p=0;p<i;p+=1){var d=-360*p/i,g=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(ss(d),2)),v=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(ss(d),2));if(d<-90&&d>=-270&&(g=-g),d<-180&&d>=-360&&(v=-v),"degrees"===o){var y=g*Math.cos(h)+v*Math.sin(h),m=v*Math.cos(h)-g*Math.sin(h);g=y,v=m}f.push([g+c[0],v+c[1]])}return f.push(f[0]),"degrees"===o?l([f],u):Co(l([f],u),a,{pivot:s})}function ss(t){var e=t*Math.PI/180;return Math.tan(e)}function us(t,e){void 0===e&&(e={});var n=0,r=0,i=0;return B(t,(function(t,o,a){var s=e.weight?null==a?void 0:a[e.weight]:void 0;if(!C(s=null==s?1:s))throw new Error("weight value must be a number for feature index "+o);(s=Number(s))>0&&j(t,(function(t){n+=t[0]*s,r+=t[1]*s,i+=s}))})),u([n/i,r/i],e.properties,e)}function cs(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function ls(t,e){var n=0,r=0;j(t,(function(i,o,a,s,u){u>n&&(n=u,r=o,e.push([]));var c=o-r,l=t.coordinates[u][c+1],h=i[0],f=i[1],p=l[0],d=l[1];e[u].push([.75*h+.25*p,.75*f+.25*d]),e[u].push([.25*h+.75*p,.25*f+.75*d])}),!0),e.forEach((function(t){t.push(t[0])}))}function hs(t,e){var n=0,r=0,i=0;j(t,(function(o,a,s,u,c){u>i&&(i=u,r=a,e.push([[]])),c>n&&(n=c,r=a,e[u].push([]));var l=a-r,h=t.coordinates[u][c][l+1],f=o[0],p=o[1],d=h[0],g=h[1];e[u][c].push([.75*f+.25*d,.75*p+.25*g]),e[u][c].push([.25*f+.75*d,.25*p+.75*g])}),!0),e.forEach((function(t){t.forEach((function(t){t.push(t[0])}))}))}function fs(t,e,n){void 0===n&&(n=2);var r=J(t),i=J(e),o=r[0]-i[0],a=r[1]-i[1];return 1===n?Math.abs(o)+Math.abs(a):Math.pow(Math.pow(o,n)+Math.pow(a,n),1/n)}function ps(t,e){var n=(e=e||{}).threshold||1e4,r=e.p||2,i=e.binary||!1,o=e.alpha||-1,a=e.standardization||!1,s=[];D(t,(function(t){s.push(hn(t))}));for(var u=[],c=0;c<s.length;c++)u[c]=[];for(c=0;c<s.length;c++)for(var l=c;l<s.length;l++){c===l&&(u[c][l]=0);var h=fs(s[c],s[l],r);u[c][l]=h,u[l][c]=h}for(c=0;c<s.length;c++)for(l=0;l<s.length;l++)0!==(h=u[c][l])&&(u[c][l]=i?h<=n?1:0:h<=n?Math.pow(h,o):0);if(a)for(c=0;c<s.length;c++){var f=u[c].reduce((function(t,e){return t+e}),0);for(l=0;l<s.length;l++)u[c][l]=u[c][l]/f}return u}function ds(t){for(var e=0,n=0,r=t;n<r.length;n++)e+=r[n];return e/t.length}function gs(t,e){return void 0===e&&(e={}),ys(t,"mercator",e)}function vs(t,e){return void 0===e&&(e={}),ys(t,"wgs84",e)}function ys(t,e,n){void 0===n&&(n={});var r=(n=n||{}).mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&C(t[0])?t="mercator"===e?ms(t):_s(t):(!0!==r&&(t=xe(t)),j(t,(function(t){var n="mercator"===e?ms(t):_s(t);t[0]=n[0],t[1]=n[1]}))),t}function ms(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=[n*(Math.abs(t[0])<=180?t[0]:t[0]-360*function(t){return t<0?-1:t>0?1:0}(t[0]))*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function _s(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}is.prototype={constructor:is,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return Aa(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,u,c,l=n.site,h=-1,f=e[i[o-1]],p=f.left===l?f.right:f.left;++h<o;)a=p,p=(f=e[i[h]]).left===l?f.right:f.left,a&&p&&r<a.index&&r<p.index&&(u=a,c=p,((s=l)[0]-c[0])*(u[1]-s[1])-(s[0]-u[0])*(c[1]-s[1])<0)&&t.push([l.data,a.data,p.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do{i=o.cells[r=a],a=null,i.halfedges.forEach((function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],h=u*u+c*c;h<l&&(l=h,a=s.index)}}))}while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var bs=Object.freeze({__proto__:null,toMercator:gs,toWgs84:vs});function ws(t){return Array.isArray(t)?Is(t):t&&t.bbox?Is(t.bbox):[360*ks(),180*ks()]}function xs(t,e){void 0===e&&(e={}),null==t&&(t=1);for(var n=[],r=0;r<t;r++)n.push(u(ws(e.bbox)));return d(n)}function Es(t,e){void 0===e&&(e={}),null==t&&(t=1),C(e.num_vertices)&&void 0!==e.num_vertices||(e.num_vertices=10),C(e.max_radial_length)&&void 0!==e.max_radial_length||(e.max_radial_length=10);for(var n=[],r=function(t){var r,i=[],o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(Array(e.num_vertices+1)).map(Math.random);o.forEach((function(t,e,n){n[e]=e>0?t+n[e-1]:t})),o.forEach((function(t){t=2*t*Math.PI/o[o.length-1];var n=Math.random();i.push([n*(e.max_radial_length||10)*Math.sin(t),n*(e.max_radial_length||10)*Math.cos(t)])})),i[i.length-1]=i[0],i=i.map((r=ws(e.bbox),function(t){return[t[0]+r[0],t[1]+r[1]]})),n.push(l([i]))},i=0;i<t;i++)r();return d(n)}function Os(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;null==t&&(t=1),(!C(r)||void 0===r||r<2)&&(r=10),C(i)&&void 0!==i||(i=1e-4),C(o)&&void 0!==o||(o=Math.PI/8);for(var a=[],s=0;s<t;s++){for(var u=[ws(n)],c=0;c<r-1;c++){var l=(0===c?2*Math.random()*Math.PI:Math.tan((u[c][1]-u[c-1][1])/(u[c][0]-u[c-1][0])))+(Math.random()-.5)*o*2,h=Math.random()*i;u.push([u[c][0]+h*Math.cos(l),u[c][1]+h*Math.sin(l)])}a.push(f(u))}return d(a)}function ks(){return Math.random()-.5}function Is(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}var Ss=Object.freeze({__proto__:null,randomPosition:ws,randomPoint:xs,randomPolygon:Es,randomLineString:Os});function Cs(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("filter is required");var n=[];return D(t,(function(t){Ls(t.properties,e)&&n.push(t)})),d(n)}function Ts(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(null==e)throw new Error("property is required");for(var r=Ps(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var a=i[o],s=r[a],u=[],c=0;c<s.length;c++)u.push(t.features[s[c]]);n(d(u),a,o)}}function Ns(t,e,n,r){var i=r;return Ts(t,e,(function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)})),i}function Ps(t,e){var n={};return D(t,(function(t,r){var i=t.properties||{};if(Object.prototype.hasOwnProperty.call(i,String(e))){var o=i[e];Object.prototype.hasOwnProperty.call(n,o)?n[o].push(r):n[o]=[r]}})),n}function Ls(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return Object.prototype.hasOwnProperty.call(t,e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!Ls(t,e[r]))return!1;return!0}return js(t,e)}function js(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function Ms(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}var Rs=Object.freeze({__proto__:null,getCluster:Cs,clusterEach:Ts,clusterReduce:Ns,createBins:Ps,applyFilter:Ls,propertiesContainsFilter:js,filterProperties:Ms}),As=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function Ds(t,e){return t>e?1:t<e?-1:0}function Fs(t,e,n){for(var r=new As(null,null),i=r,o=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,null===(e=s).left)break}o.left=e,o=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(s=e.right,e.right=s.left,s.left=e,null===(e=s).right))break;i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function zs(t,e,n,r){var i=new As(t,e);if(null===n)return i.left=i.right=null,i;var o=r(t,(n=Fs(t,n,r)).key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function Bs(t,e,n){var r=null,i=null;if(e){var o=n((e=Fs(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}var Us=function(){function t(t){void 0===t&&(t=Ds),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=zs(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new As(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=Fs(t,this._root,r),o=r(t,i.key);return 0===o?this._root=i:(o<0?(n.left=i.left,n.right=i,i.left=null):o>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=Fs(t,e,n)).key)?(null===e.left?r=e.right:(r=Fs(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Fs(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=Fs(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(o((a=i.pop()).key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,i=new As(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=o=o.next=n.pop()).right:r=!0;return o.next=null,i.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&function t(e,n,r,i,o){if(!(r>=i)){for(var a=e[r+i>>1],s=r-1,u=i+1;;){do{s++}while(o(e[s],a)<0);do{u--}while(o(e[u],a)>0);if(s>=u)break;var c=e[s];e[s]=e[u],e[u]=c,c=n[s],n[s]=n[u],n[u]=c}t(e,n,r,u,o),t(e,n,u+1,i,o)}}(t,e,0,r-1,i),null===this._root)this._root=function t(e,n,r,i){var o=i-r;if(o>0){var a=r+Math.floor(o/2),s=e[a],u=n[a],c=new As(s,u);return c.left=t(e,n,r,a),c.right=t(e,n,a+1,i),c}return null}(t,e,0,r),this._size=r;else{var o=function(t,e,n){for(var r=new As(null,null),i=r,o=t,a=e;null!==o&&null!==a;)n(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return null!==o?i.next=o:null!==a&&(i.next=a),r.next}(this.toList(),function(t,e){for(var n=new As(null,null),r=n,i=0;i<t.length;i++)r=r.next=new As(t[i],e[i]);return r.next=null,n.next}(t,e),i);r=this._size+r,this._root=function t(e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),a=t(e,n,o),s=e.head;return s.left=a,e.head=e.head.next,s.right=t(e,o+1,r),s}return null}({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return function t(e,n,r,i,o){if(e){i(n+(r?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+o(e)+"\n");var a=n+(r?"    ":"\u2502   ");e.left&&t(e.left,a,!1,i,o),e.right&&t(e.right,a,!0,i,o)}}(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=Bs(t,this._root,r),o=i.left,a=i.right;r(t,e)<0?a=zs(e,n,a,r):o=zs(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=Fs(t.key,e,n)).left=t),e)}(o,a,r)},t.prototype.split=function(t){return Bs(t,this._root,this._comparator)},t}();function Vs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gs(t,e,n){return e&&qs(t.prototype,e),n&&qs(t,n),t}var Hs=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},Ws=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},Xs=Number.EPSILON;void 0===Xs&&(Xs=Math.pow(2,-52));var Ys=Xs*Xs,Zs=function(t,e){if(-Xs<t&&t<Xs&&-Xs<e&&e<Xs)return 0;var n=t-e;return n*n<Ys*t*e?0:t<e?-1:1},Ks=function(){function t(){Vs(this,t),this.reset()}return Gs(t,[{key:"reset",value:function(){this.xRounder=new Qs,this.yRounder=new Qs}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),t}(),Qs=function(){function t(){Vs(this,t),this.tree=new Us,this.round(0)}return Gs(t,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===Zs(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===Zs(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),t}(),Js=new Ks,$s=function(t,e){return t.x*e.y-t.y*e.x},tu=function(t,e){return t.x*e.x+t.y*e.y},eu=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=$s(r,i);return Zs(o,0)},nu=function(t){return Math.sqrt(tu(t,t))},ru=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return tu(i,r)/nu(i)/nu(r)},iu=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},ou=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},au=function(){function t(e,n){Vs(this,t),void 0===e.events?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return Gs(t,null,[{key:"compare",value:function(e,n){var r=t.comparePoints(e.point,n.point);return 0!==r?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:uu.compare(e.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),Gs(t,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,a,s,u,c=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,a=c.point,s={x:o.x-i.x,y:o.y-i.y},u={x:a.x-i.x,y:a.y-i.y},$s(u,s)/nu(u)/nu(s)),cosine:ru(e.point,t.point,c.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),u=s.sine,c=s.cosine;return o>=0&&u>=0?a<c?1:a>c?-1:0:o<0&&u<0?a<c?-1:a>c?1:0:u<o?-1:u>o?1:0}}}]),t}(),su=0,uu=function(){function t(e,n,r,i){Vs(this,t),this.id=++su,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return Gs(t,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,u=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(s<a&&s<u)return 1;if(s>a&&s>u)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var h=e.comparePoint(t.rightSE.point);return 0!==h?h:-1}if(n>r){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var f=e.comparePoint(t.leftSE.point);if(0!==f)return f;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var v=u-a,y=i-n,m=c-s,_=o-r;if(v>y&&m<_)return 1;if(v<y&&m>_)return-1}return i>o?1:i<o||u<c?-1:u>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),Gs(t,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=Ws(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,u=Hs(e,a)&&0===this.comparePoint(a),c=Hs(n,i)&&0===t.comparePoint(i),l=Hs(e,s)&&0===this.comparePoint(s),h=Hs(n,o)&&0===t.comparePoint(o);if(c&&u)return h&&!l?o:!h&&l?s:null;if(c)return l&&i.x===s.x&&i.y===s.y?null:i;if(u)return h&&o.x===a.x&&o.y===a.y?null:a;if(h&&l)return null;if(h)return o;if(l)return s;var f=function(t,e,n,r){if(0===e.x)return ou(n,r,t.x);if(0===r.x)return ou(t,e,n.x);if(0===e.y)return iu(n,r,t.y);if(0===r.y)return iu(t,e,n.y);var i=$s(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=$s(o,e)/i,s=$s(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}}(i,this.vector(),a,t.vector());return null===f?null:Hs(r,f)?Js.round(f.x,f.y):null}},{key:"split",value:function(e){var n=[],r=void 0!==e.events,i=new au(e,!0),o=new au(e,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new t(i,a,this.rings.slice(),this.windings.slice());return au.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),au.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(e){for(var n=this,r=e;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=t.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,u=r.rings.length;s<u;s++){var c=r.rings[s],l=r.windings[s],h=n.rings.indexOf(c);-1===h?(n.rings.push(c),n.windings.push(l)):n.windings[h]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],u=e.indexOf(a);-1===u?(e.push(a),n.push(s)):n[u]+=s}for(var c=[],l=[],h=0,f=e.length;h<f;h++)if(0!==n[h]){var p=e[h],d=p.poly;if(-1===l.indexOf(d))if(p.isExterior)c.push(d);else{-1===l.indexOf(d)&&l.push(d);var g=c.indexOf(p.poly);-1!==g&&c.splice(g,1)}}for(var v=0,y=c.length;v<y;v++){var m=c[v].multiPoly;-1===r.indexOf(m)&&r.push(m)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(mu.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===mu.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(mu.type))}return this._isInResult}}],[{key:"fromRing",value:function(e,n,r){var i,o,a,s=au.comparePoints(e,n);if(s<0)i=e,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(e.x,", ").concat(e.y,"]"));i=n,o=e,a=-1}return new t(new au(i,!0),new au(o,!1),[r],[a])}}]),t}(),cu=function(){function t(e,n,r){if(Vs(this,t),!Array.isArray(e)||0===e.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof e[0][0]||"number"!=typeof e[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Js.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var o=i,a=1,s=e.length;a<s;a++){if("number"!=typeof e[a][0]||"number"!=typeof e[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=Js.round(e[a][0],e[a][1]);u.x===o.x&&u.y===o.y||(this.segments.push(uu.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}i.x===o.x&&i.y===o.y||this.segments.push(uu.fromRing(o,i,this))}return Gs(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),t}(),lu=function(){function t(e,n){if(Vs(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new cu(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var o=new cu(e[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}return Gs(t,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),hu=function(){function t(e,n){if(Vs(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof e[0][0][0]&&(e=[e])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var o=new lu(e[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}return Gs(t,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),t}(),fu=function(){function t(e){Vs(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return Gs(t,null,[{key:"factory",value:function(e){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,u=o.rightSE,c=[s],l=s.point,h=[];a=s,s=u,c.push(s),s.point!==l;)for(;;){var f=s.getAvailableLinkedEvents();if(0===f.length){var p=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===f.length){u=f[0].otherSE;break}for(var g=null,v=0,y=h.length;v<y;v++)if(h[v].point===s.point){g=v;break}if(null===g){h.push({index:c.length,point:s.point});var m=s.getLeftmostComparator(a);u=f.sort(m)[0].otherSE;break}var _=h.splice(g)[0],b=c.splice(_.index);b.unshift(b[0].otherSE),n.push(new t(b.reverse()))}n.push(new t(c))}}return n}}]),Gs(t,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==eu(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===eu(a,t,s)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,h=[],f=c;f!=l;f+=u)h.push([e[f].x,e[f].y]);return h}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];au.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),t}(),pu=function(){function t(e){Vs(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Gs(t,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),t}(),du=function(){function t(e){Vs(this,t),this.rings=e,this.polys=this._composePolys(e)}return Gs(t,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new pu(i));else{var o=i.enclosingRing();o.poly||e.push(new pu(o)),o.poly.addInterior(i)}}return e}}]),t}(),gu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uu.compare;Vs(this,t),this.queue=e,this.tree=new Us(n),this.segments=[]}return Gs(t,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)null===(i=this.tree.prev(i))?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)null===(o=this.tree.next(o))?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var u=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(u=c),!a.isAnEndpoint(c)))for(var l=this._splitSafely(a,c),h=0,f=l.length;h<f;h++)n.push(l[h])}var p=null;if(s){var d=s.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!s.isAnEndpoint(d)))for(var g=this._splitSafely(s,d),v=0,y=g.length;v<y;v++)n.push(g[v])}if(null!==u||null!==p){var m=null;m=null===u?p:null===p||au.comparePoints(u,p)<=0?u:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var _=e.split(m),b=0,w=_.length;b<w;b++)n.push(_[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var x=a.getIntersection(s);if(null!==x){if(!a.isAnEndpoint(x))for(var E=this._splitSafely(a,x),O=0,k=E.length;O<k;O++)n.push(E[O]);if(!s.isAnEndpoint(x))for(var I=this._splitSafely(s,x),S=0,C=I.length;S<C;S++)n.push(I[S])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),t}(),vu="undefined"!=typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:"/my-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,yu="undefined"!=typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:"/my-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,mu=new(function(){function t(){Vs(this,t)}return Gs(t,[{key:"run",value:function(t,e,n){mu.type=t,Js.reset();for(var r=[new hu(e,!0)],i=0,o=n.length;i<o;i++)r.push(new hu(n[i],!1));if(mu.numMultiPolys=r.length,"difference"===mu.type)for(var a=r[0],s=1;s<r.length;)null!==Ws(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===mu.type)for(var u=0,c=r.length;u<c;u++)for(var l=r[u],h=u+1,f=r.length;h<f;h++)if(null===Ws(l.bbox,r[h].bbox))return[];for(var p=new Us(au.compare),d=0,g=r.length;d<g;d++)for(var v=r[d].getSweepEvents(),y=0,m=v.length;y<m;y++)if(p.insert(v[y]),p.size>vu)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new gu(p),b=p.size,w=p.pop();w;){var x=w.key;if(p.size===b){var E=x.segment;throw new Error("Unable to pop() ".concat(x.isLeft?"left":"right"," SweepEvent ")+"[".concat(x.point.x,", ").concat(x.point.y,"] from segment #").concat(E.id," ")+"[".concat(E.leftSE.point.x,", ").concat(E.leftSE.point.y,"] -> ")+"[".concat(E.rightSE.point.x,", ").concat(E.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>vu)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>yu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var O=_.process(x),k=0,I=O.length;k<I;k++){var S=O[k];void 0===S.consumedBy&&p.insert(S)}b=p.size,w=p.pop()}Js.reset();var C=fu.factory(_.segments);return new du(C).getGeom()}}]),t}()),_u={union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return mu.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return mu.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return mu.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return mu.run("difference",t,n)}};"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments&&parseInt(Number(arguments[1]),10)||0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var bu=function(){};bu.prototype.interfaces_=function(){return[]},bu.prototype.getClass=function(){return bu},bu.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var wu=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),xu=function(){},Eu={MAX_VALUE:{configurable:!0}};xu.isNaN=function(t){return Number.isNaN(t)},xu.doubleToLongBits=function(t){return t},xu.longBitsToDouble=function(t){return t},xu.isInfinite=function(t){return!Number.isFinite(t)},Eu.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(xu,Eu);var Ou=function(){},ku=function(){},Iu=function(){};function Su(){}var Cu=function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},Tu={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};Cu.prototype.setOrdinate=function(t,e){switch(t){case Cu.X:this.x=e;break;case Cu.Y:this.y=e;break;case Cu.Z:this.z=e;break;default:throw new wu("Invalid ordinate index: "+t)}},Cu.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!bu.equalsWithTolerance(this.x,e.x,n)&&!!bu.equalsWithTolerance(this.y,e.y,n)}},Cu.prototype.getOrdinate=function(t){switch(t){case Cu.X:return this.x;case Cu.Y:return this.y;case Cu.Z:return this.z}throw new wu("Invalid ordinate index: "+t)},Cu.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||xu.isNaN(this.z))&&xu.isNaN(t.z)},Cu.prototype.equals=function(t){return t instanceof Cu&&this.equals2D(t)},Cu.prototype.equalInZ=function(t,e){return bu.equalsWithTolerance(this.z,t.z,e)},Cu.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},Cu.prototype.clone=function(){},Cu.prototype.copy=function(){return new Cu(this)},Cu.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},Cu.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},Cu.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},Cu.prototype.hashCode=function(){var t=17;return 37*(t=37*t+Cu.hashCode(this.x))+Cu.hashCode(this.y)},Cu.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},Cu.prototype.interfaces_=function(){return[Ou,ku,Su]},Cu.prototype.getClass=function(){return Cu},Cu.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=xu.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},Tu.DimensionalComparator.get=function(){return Nu},Tu.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},Tu.NULL_ORDINATE.get=function(){return xu.NaN},Tu.X.get=function(){return 0},Tu.Y.get=function(){return 1},Tu.Z.get=function(){return 2},Object.defineProperties(Cu,Tu);var Nu=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new wu("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};Nu.prototype.compare=function(t,e){var n=t,r=e,i=Nu.compare(n.x,r.x);if(0!==i)return i;var o=Nu.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:Nu.compare(n.z,r.z)},Nu.prototype.interfaces_=function(){return[Iu]},Nu.prototype.getClass=function(){return Nu},Nu.compare=function(t,e){return t<e?-1:t>e?1:xu.isNaN(t)?xu.isNaN(e)?0:-1:xu.isNaN(e)?1:0};var Pu=function(){};Pu.prototype.create=function(){},Pu.prototype.interfaces_=function(){return[]},Pu.prototype.getClass=function(){return Pu};var Lu=function(){},ju={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};Lu.prototype.interfaces_=function(){return[]},Lu.prototype.getClass=function(){return Lu},Lu.toLocationSymbol=function(t){switch(t){case Lu.EXTERIOR:return"e";case Lu.BOUNDARY:return"b";case Lu.INTERIOR:return"i";case Lu.NONE:return"-"}throw new wu("Unknown location value: "+t)},ju.INTERIOR.get=function(){return 0},ju.BOUNDARY.get=function(){return 1},ju.EXTERIOR.get=function(){return 2},ju.NONE.get=function(){return-1},Object.defineProperties(Lu,ju);var Mu=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},Ru=function(){},Au={LOG_10:{configurable:!0}};Ru.prototype.interfaces_=function(){return[]},Ru.prototype.getClass=function(){return Ru},Ru.log10=function(t){var e=Math.log(t);return xu.isInfinite(e)||xu.isNaN(e)?e:e/Ru.LOG_10},Ru.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},Ru.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},Ru.wrap=function(t,e){return t<0?e- -t%e:t%e},Ru.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=i;return o>u&&(u=o),a>u&&(u=a),s>u&&(u=s),u}},Ru.average=function(t,e){return(t+e)/2},Au.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(Ru,Au);var Du=function(t){this.str=t};Du.prototype.append=function(t){this.str+=t},Du.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},Du.prototype.toString=function(t){return this.str};var Fu=function(t){this.value=t};Fu.prototype.intValue=function(){return this.value},Fu.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Fu.isNaN=function(t){return Number.isNaN(t)};var zu=function(){};zu.isWhitespace=function(t){return t<=32&&t>=0||127===t},zu.toUpperCase=function(t){return t.toUpperCase()};var Bu=function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}else if("string"==typeof arguments[0]){var r=arguments[0];t.call(this,t.parse(r))}}else if(2===arguments.length){var i=arguments[0],o=arguments[1];this.init(i,o)}},Uu={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Bu.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Bu.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Bu.magnitude(n._hi),i=Bu.TEN.pow(r);(n=n.divide(i)).gt(Bu.TEN)?(n=n.divide(Bu.TEN),r+=1):n.lt(Bu.ONE)&&(n=n.multiply(Bu.TEN),r-=1);for(var o=r+1,a=new Du,s=Bu.MAX_PRINT_DIGITS-1,u=0;u<=s;u++){t&&u===o&&a.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,h=0;c>9?(l=!0,h="9"):h="0"+c,a.append(h),n=n.subtract(Bu.valueOf(c)).multiply(Bu.TEN),l&&n.selfAdd(Bu.TEN);var f=!0,p=Bu.magnitude(n._hi);if(p<0&&Math.abs(p)>=s-u&&(f=!1),!f)break}return e[0]=r,a.toString()},Bu.prototype.sqr=function(){return this.multiply(this)},Bu.prototype.doubleValue=function(){return this._hi+this._lo},Bu.prototype.subtract=function(){if(arguments[0]instanceof Bu){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Bu.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Bu.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Bu.prototype.selfSubtract=function(){if(arguments[0]instanceof Bu){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Bu.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Bu.prototype.min=function(t){return this.le(t)?this:t},Bu.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Bu){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null,l=null,h=null;return u=this._hi/n,h=(i=(c=Bu.SPLIT*u)-(i=c-u))*(a=(h=Bu.SPLIT*n)-(a=h-n))-(l=u*n)+i*(s=n-a)+(o=u-i)*a+o*s,h=u+(c=(this._hi-l-h+this._lo-u*r)/n),this._hi=h,this._lo=u-h+c,this}},Bu.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Bu.prototype.divide=function(){if(arguments[0]instanceof Bu){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,a=null,s=null,u=null;n=(o=this._hi/t._hi)-(e=(a=Bu.SPLIT*o)-(e=a-o)),u=e*(r=(u=Bu.SPLIT*t._hi)-(r=u-t._hi))-(s=o*t._hi)+e*(i=t._hi-r)+n*r+n*i;var c=u=o+(a=(this._hi-s-u+this._lo-o*t._lo)/t._hi),l=o-u+a;return new Bu(c,l)}if("number"==typeof arguments[0]){var h=arguments[0];return xu.isNaN(h)?Bu.createNaN():Bu.copy(this).selfDivide(h,0)}},Bu.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Bu.prototype.pow=function(t){if(0===t)return Bu.valueOf(1);var e=new Bu(this),n=Bu.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2==1&&n.selfMultiply(e),(r/=2)>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Bu.prototype.ceil=function(){if(this.isNaN())return Bu.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Bu(t,e)},Bu.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Bu.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},Bu.prototype.setValue=function(){if(arguments[0]instanceof Bu){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Bu.prototype.max=function(t){return this.ge(t)?this:t},Bu.prototype.sqrt=function(){if(this.isZero())return Bu.valueOf(0);if(this.isNegative())return Bu.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Bu.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},Bu.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Bu){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,a=null,s=null;return o=(i=this._hi+e)-(a=i-this._hi),r=(s=(o=e-a+(this._hi-o))+this._lo)+(i-(n=i+s)),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,h=null,f=null,p=null,d=null,g=null,v=null;p=this._hi+u,h=this._lo+c,d=p-(g=p-this._hi),f=h-(v=h-this._lo);var y=(l=p+(g=(d=u-g+(this._hi-d))+h))+(g=(f=c-v+(this._lo-f))+(g+(p-l))),m=g+(l-y);return this._hi=y,this._lo=m,this}},Bu.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Bu){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,a=null,s=null,u=null,c=null;i=(u=Bu.SPLIT*this._hi)-this._hi,c=Bu.SPLIT*n,i=u-i,o=this._hi-i,a=c-n;var l=(u=this._hi*n)+(c=i*(a=c-a)-u+i*(s=n-a)+o*a+o*s+(this._hi*r+this._lo*n)),h=c+(i=u-l);return this._hi=l,this._lo=h,this}},Bu.prototype.selfSqr=function(){return this.selfMultiply(this)},Bu.prototype.floor=function(){if(this.isNaN())return Bu.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Bu(t,e)},Bu.prototype.negate=function(){return this.isNaN()?this:new Bu(-this._hi,-this._lo)},Bu.prototype.clone=function(){},Bu.prototype.multiply=function(){if(arguments[0]instanceof Bu){var t=arguments[0];return t.isNaN()?Bu.createNaN():Bu.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return xu.isNaN(e)?Bu.createNaN():Bu.copy(this).selfMultiply(e,0)}},Bu.prototype.isNaN=function(){return xu.isNaN(this._hi)},Bu.prototype.intValue=function(){return Math.trunc(this._hi)},Bu.prototype.toString=function(){var t=Bu.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Bu.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Bu.stringOfChar("0",-r)+n;else if(-1===n.indexOf(".")){var o=r-n.length;i=n+Bu.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+i:i},Bu.prototype.reciprocal=function(){var t,e,n,r,i=null,o=null,a=null,s=null;t=(n=1/this._hi)-(i=(a=Bu.SPLIT*n)-(i=a-n)),o=(s=Bu.SPLIT*this._hi)-this._hi;var u=n+(a=(1-(r=n*this._hi)-(s=i*(o=s-o)-r+i*(e=this._hi-o)+t*o+t*e)-n*this._lo)/this._hi);return new Bu(u,n-u+a)},Bu.prototype.toSciNotation=function(){if(this.isZero())return Bu.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Bu.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Bu.prototype.abs=function(){return this.isNaN()?Bu.NaN:this.isNegative()?this.negate():new Bu(this)},Bu.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Bu.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Bu.prototype.add=function(){if(arguments[0]instanceof Bu){var t=arguments[0];return Bu.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Bu.copy(this).selfAdd(e)}},Bu.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Bu){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Bu.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Bu.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Bu.prototype.trunc=function(){return this.isNaN()?Bu.NaN:this.isPositive()?this.floor():this.ceil()},Bu.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Bu.prototype.interfaces_=function(){return[Su,Ou,ku]},Bu.prototype.getClass=function(){return Bu},Bu.sqr=function(t){return Bu.valueOf(t).selfMultiply(t)},Bu.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Bu.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Bu(e)}},Bu.sqrt=function(t){return Bu.valueOf(t).sqrt()},Bu.parse=function(t){for(var e=0,n=t.length;zu.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Bu,a=0,s=0,u=0;!(e>=n);){var c=t.charAt(e);if(e++,zu.isDigit(c)){var l=c-"0";o.selfMultiply(Bu.TEN),o.selfAdd(l),a++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=Fu.parseInt(h)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+h+" in string "+t):e}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}s=a}}var f=o,p=a-s-u;if(0===p)f=o;else if(p>0){var d=Bu.TEN.pow(p);f=o.divide(d)}else if(p<0){var g=Bu.TEN.pow(-p);f=o.multiply(g)}return r?f.negate():f},Bu.createNaN=function(){return new Bu(xu.NaN,xu.NaN)},Bu.copy=function(t){return new Bu(t)},Bu.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},Bu.stringOfChar=function(t,e){for(var n=new Du,r=0;r<e;r++)n.append(t);return n.toString()},Uu.PI.get=function(){return new Bu(3.141592653589793,12246467991473532e-32)},Uu.TWO_PI.get=function(){return new Bu(6.283185307179586,24492935982947064e-32)},Uu.PI_2.get=function(){return new Bu(1.5707963267948966,6123233995736766e-32)},Uu.E.get=function(){return new Bu(2.718281828459045,14456468917292502e-32)},Uu.NaN.get=function(){return new Bu(xu.NaN,xu.NaN)},Uu.EPS.get=function(){return 123259516440783e-46},Uu.SPLIT.get=function(){return 134217729},Uu.MAX_PRINT_DIGITS.get=function(){return 32},Uu.TEN.get=function(){return Bu.valueOf(10)},Uu.ONE.get=function(){return Bu.valueOf(1)},Uu.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Uu.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Bu,Uu);var Vu=function(){},qu={DP_SAFE_EPSILON:{configurable:!0}};Vu.prototype.interfaces_=function(){return[]},Vu.prototype.getClass=function(){return Vu},Vu.orientationIndex=function(t,e,n){var r=Vu.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Bu.valueOf(e.x).selfAdd(-t.x),o=Bu.valueOf(e.y).selfAdd(-t.y),a=Bu.valueOf(n.x).selfAdd(-e.x),s=Bu.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},Vu.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},Vu.intersection=function(t,e,n,r){var i=Bu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Bu.valueOf(e.x).selfSubtract(t.x)),o=Bu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Bu.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=Bu.valueOf(r.x).selfSubtract(n.x).selfMultiply(Bu.valueOf(t.y).selfSubtract(n.y)),u=Bu.valueOf(r.y).selfSubtract(n.y).selfMultiply(Bu.valueOf(t.x).selfSubtract(n.x)),c=s.subtract(u).selfDivide(a).doubleValue(),l=Bu.valueOf(t.x).selfAdd(Bu.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),h=Bu.valueOf(e.x).selfSubtract(t.x).selfMultiply(Bu.valueOf(t.y).selfSubtract(n.y)),f=Bu.valueOf(e.y).selfSubtract(t.y).selfMultiply(Bu.valueOf(t.x).selfSubtract(n.x)),p=h.subtract(f).selfDivide(a).doubleValue(),d=Bu.valueOf(n.y).selfAdd(Bu.valueOf(r.y).selfSubtract(n.y).selfMultiply(p)).doubleValue();return new Cu(l,d)},Vu.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(i>0){if(o<=0)return Vu.signum(a);r=i+o}else{if(!(i<0))return Vu.signum(a);if(o>=0)return Vu.signum(a);r=-i-o}var s=Vu.DP_SAFE_EPSILON*r;return a>=s||-a>=s?Vu.signum(a):2},Vu.signum=function(t){return t>0?1:t<0?-1:0},qu.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Vu,qu);var Gu=function(){},Hu={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Hu.X.get=function(){return 0},Hu.Y.get=function(){return 1},Hu.Z.get=function(){return 2},Hu.M.get=function(){return 3},Gu.prototype.setOrdinate=function(t,e,n){},Gu.prototype.size=function(){},Gu.prototype.getOrdinate=function(t,e){},Gu.prototype.getCoordinate=function(){},Gu.prototype.getCoordinateCopy=function(t){},Gu.prototype.getDimension=function(){},Gu.prototype.getX=function(t){},Gu.prototype.clone=function(){},Gu.prototype.expandEnvelope=function(t){},Gu.prototype.copy=function(){},Gu.prototype.getY=function(t){},Gu.prototype.toCoordinateArray=function(){},Gu.prototype.interfaces_=function(){return[ku]},Gu.prototype.getClass=function(){return Gu},Object.defineProperties(Gu,Hu);var Wu=function(){},Xu=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Wu),Yu=function(){};Yu.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},Yu.getProperty=function(t){return{"line.separator":"\n"}[t]};var Zu=function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this.x=n,this.y=r,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var i=arguments[0],o=arguments[1];this.x=i.y*o.w-o.y*i.w,this.y=o.x*i.w-i.x*o.w,this.w=i.x*o.y-o.x*i.y}else if(arguments[0]instanceof Cu&&arguments[1]instanceof Cu){var a=arguments[0],s=arguments[1];this.x=a.y-s.y,this.y=s.x-a.x,this.w=a.x*s.y-s.x*a.y}}else if(3===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2];this.x=u,this.y=c,this.w=l}else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3],g=h.y-f.y,v=f.x-h.x,y=h.x*f.y-f.x*h.y,m=p.y-d.y,_=d.x-p.x,b=p.x*d.y-d.x*p.y;this.x=v*b-_*y,this.y=m*y-g*b,this.w=g*_-m*v}};Zu.prototype.getY=function(){var t=this.y/this.w;if(xu.isNaN(t)||xu.isInfinite(t))throw new Xu;return t},Zu.prototype.getX=function(){var t=this.x/this.w;if(xu.isNaN(t)||xu.isInfinite(t))throw new Xu;return t},Zu.prototype.getCoordinate=function(){var t=new Cu;return t.x=this.getX(),t.y=this.getY(),t},Zu.prototype.interfaces_=function(){return[]},Zu.prototype.getClass=function(){return Zu},Zu.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=i*u-s*o,h=(o*c-u*a)/l,f=(s*a-i*c)/l;if(xu.isNaN(h)||xu.isInfinite(h)||xu.isNaN(f)||xu.isInfinite(f))throw new Xu;return new Cu(h,f)};var Ku=function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof Cu){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var n=arguments[0];this.init(n)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r.x,i.x,r.y,i.y)}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this.init(o,a,s,u)}},Qu={serialVersionUID:{configurable:!0}};Ku.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Ku.prototype.equals=function(t){if(!(t instanceof Ku))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Ku.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Ku;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Ku(e,r,n,i)},Ku.prototype.isNull=function(){return this._maxx<this._minx},Ku.prototype.getMaxX=function(){return this._maxx},Ku.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof Cu){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Ku){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Ku.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Ku){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof Cu){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Ku.prototype.getMinY=function(){return this._miny},Ku.prototype.getMinX=function(){return this._minx},Ku.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof Cu){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Ku){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Ku.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Ku.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Ku.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Ku.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Ku.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Ku.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Ku.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Ku.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Ku.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Ku.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Ku){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof Cu){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Ku.prototype.centre=function(){return this.isNull()?null:new Cu((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Ku.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof Cu){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Ku){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a)}},Ku.prototype.getMaxY=function(){return this._maxy},Ku.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Ku.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+Cu.hashCode(this._minx))+Cu.hashCode(this._maxx))+Cu.hashCode(this._miny))+Cu.hashCode(this._maxy)},Ku.prototype.interfaces_=function(){return[Ou,Su]},Ku.prototype.getClass=function(){return Ku},Ku.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),u=Math.max(o.x,a.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&!(l<s)&&(s=Math.min(o.y,a.y),u=Math.max(o.y,a.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<s))}},Qu.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Ku,Qu);var Ju={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},$u=function(t){this.geometryFactory=t||new Fl};$u.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Ju.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Ju.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],ec[n]&&(e=ec[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},$u.prototype.write=function(t){return this.extractGeometry(t)},$u.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!tc[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+tc[e].apply(this,[t])+")"};var tc={coordinate:function(t){return t.x+" "+t.y},point:function(t){return tc.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+tc.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(tc.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(tc.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+tc.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+tc.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+tc.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+tc.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},ec={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Ju.spaces);return this.geometryFactory.createPoint(new Cu(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ju.trimParens,"$1"),r.push(ec.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Ju.spaces),r.push(new Cu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Ju.spaces),r.push(new Cu(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n=t.trim().split(Ju.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ju.trimParens,"$1"),r.push(ec.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){var e,n,r;if(void 0===t)return this.geometryFactory.createPolygon();for(var i,o=t.trim().split(Ju.parenComma),a=[],s=0,u=o.length;s<u;++s)e=o[s].replace(Ju.trimParens,"$1"),n=ec.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){var e;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n=t.trim().split(Ju.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Ju.trimParens,"$1"),r.push(ec.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}},nc=function(t){this.parser=new $u(t)};nc.prototype.write=function(t){return this.parser.write(t)},nc.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var rc=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),ic=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(rc),oc=function(){};oc.prototype.interfaces_=function(){return[]},oc.prototype.getClass=function(){return oc},oc.shouldNeverReachHere=function(){if(0===arguments.length)oc.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new ic("Should never reach here"+(null!==t?": "+t:""))}},oc.isTrue=function(){var t;if(1===arguments.length)oc.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new ic:new ic(t)},oc.equals=function(){var t,e,n;if(2===arguments.length)oc.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new ic("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var ac=function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new Cu,this._intPt[1]=new Cu,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},sc={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ac.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ac.prototype.getTopologySummary=function(){var t=new Du;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ac.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ac.prototype.getIntersectionNum=function(){return this._result},ac.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},ac.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ac.prototype.setPrecisionModel=function(t){this._precisionModel=t},ac.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},ac.prototype.getIntersection=function(t){return this._intPt[t]},ac.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ac.prototype.hasIntersection=function(){return this._result!==ac.NO_INTERSECTION},ac.prototype.getEdgeDistance=function(t,e){return ac.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ac.prototype.isCollinear=function(){return this._result===ac.COLLINEAR_INTERSECTION},ac.prototype.toString=function(){return nc.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+nc.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ac.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ac.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ac.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ac.prototype.interfaces_=function(){return[]},ac.prototype.getClass=function(){return ac},ac.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var a=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);0!==(o=r>i?a:s)||t.equals(e)||(o=Math.max(a,s))}return oc.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},ac.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return oc.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},sc.DONT_INTERSECT.get=function(){return 0},sc.DO_INTERSECT.get=function(){return 1},sc.COLLINEAR.get=function(){return 2},sc.NO_INTERSECTION.get=function(){return 0},sc.POINT_INTERSECTION.get=function(){return 1},sc.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ac,sc);var uc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Ku(this._inputLines[0][0],this._inputLines[0][1]),n=new Ku(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];if(this._isProper=!1,Ku.intersects(n,r,e)&&0===hc.orientationIndex(n,r,e)&&0===hc.orientationIndex(r,n,e))return this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Zu.intersection(t,n,r,i)}catch(s){if(!(s instanceof Xu))throw s;o=e.nearestEndpoint(t,n,r,i)}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new Cu(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Vu.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);Yu.out.println("DD in env = "+a+"  --------------------- "+o),i.distance(o)>1e-4&&Yu.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new Cu(t),o=new Cu(e),a=new Cu(n),s=new Cu(r),u=new Cu;this.normalizeToEnvCentre(i,o,a,s,u);var c=this.safeHCoordinateIntersection(i,o,a,s);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Ku.intersects(e,n,r),a=Ku.intersects(e,n,i),s=Ku.intersects(r,i,e),u=Ku.intersects(r,i,n);return o&&a?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):s&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||a||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||a||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&s?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):a&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||s?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,f=n.y>r.y?n.y:r.y,p=((o>c?o:c)+(s<h?s:h))/2,d=((a>l?a:l)+(u<f?u:f))/2;i.x=p,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Ku.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=hc.orientationIndex(e,n,r),a=hc.orientationIndex(e,n,i);if(o>0&&a>0||o<0&&a<0)return t.NO_INTERSECTION;var s=hc.orientationIndex(r,i,e),u=hc.orientationIndex(r,i,n);return s>0&&u>0||s<0&&u<0?t.NO_INTERSECTION:0===o&&0===a&&0===s&&0===u?this.computeCollinearIntersection(e,n,r,i):(0===o||0===a||0===s||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new Cu(r):0===a?this._intPt[0]=new Cu(i):0===s?this._intPt[0]=new Cu(e):0===u&&(this._intPt[0]=new Cu(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=hc.distancePointLine(t,n,r),a=hc.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=hc.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=hc.distancePointLine(r,t,e))<o&&(o=a,i=r),i},e}(ac),cc=function(){};cc.prototype.interfaces_=function(){return[]},cc.prototype.getClass=function(){return cc},cc.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return cc.signOfDet2x2(r,i,o,a)},cc.signOfDet2x2=function(t,e,n,r){var i=null,o=null,a=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if((r-=(a=Math.floor(n/t))*e)<0)return-i;if(r>e)return i;if(t>(n-=a*t)+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if((e-=(a=Math.floor(t/n))*r)<0)return i;if(e>r)return-i;if(n>(t-=a*n)+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var lc=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};lc.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,u=cc.signOfDet2x2(i,o,a,s);if(0===u)return this._isPointOnSegment=!0,null;s<o&&(u=-u),u>0&&this._crossingCount++}},lc.prototype.isPointInPolygon=function(){return this.getLocation()!==Lu.EXTERIOR},lc.prototype.getLocation=function(){return this._isPointOnSegment?Lu.BOUNDARY:this._crossingCount%2==1?Lu.INTERIOR:Lu.EXTERIOR},lc.prototype.isOnSegment=function(){return this._isPointOnSegment},lc.prototype.interfaces_=function(){return[]},lc.prototype.getClass=function(){return lc},lc.locatePointInRing=function(){if(arguments[0]instanceof Cu&&Mu(arguments[1],Gu)){for(var t=arguments[0],e=arguments[1],n=new lc(t),r=new Cu,i=new Cu,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof Cu&&arguments[1]instanceof Array){for(var a=arguments[0],s=arguments[1],u=new lc(a),c=1;c<s.length;c++){var l=s[c],h=s[c-1];if(u.countSegment(l,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var hc=function(){},fc={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};hc.prototype.interfaces_=function(){return[]},hc.prototype.getClass=function(){return hc},hc.orientationIndex=function(t,e,n){return Vu.orientationIndex(t,e,n)},hc.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,a=t[r-1].y;e+=i*(a-o)}return e/2}if(Mu(arguments[0],Gu)){var s=arguments[0],u=s.size();if(u<3)return 0;var c=new Cu,l=new Cu,h=new Cu;s.getCoordinate(0,l),s.getCoordinate(1,h);var f=l.x;h.x-=f;for(var p=0,d=1;d<u-1;d++)c.y=l.y,l.x=h.x,l.y=h.y,s.getCoordinate(d+1,h),h.x-=f,p+=l.x*(c.y-h.y);return p/2}},hc.distanceLineLine=function(t,e,n,r){if(t.equals(e))return hc.distancePointLine(t,n,r);if(n.equals(r))return hc.distancePointLine(r,t,e);var i=!1;if(Ku.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var a=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),s=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=a/o;(u<0||u>1||s<0||s>1)&&(i=!0)}}else i=!0;return i?Ru.min(hc.distancePointLine(t,n,r),hc.distancePointLine(e,n,r),hc.distancePointLine(n,t,e),hc.distancePointLine(r,t,e)):0},hc.isPointInRing=function(t,e){return hc.locatePointInRing(t,e)!==Lu.EXTERIOR},hc.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new Cu;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,u=r.y,c=s-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=s,o=u}return n},hc.isCCW=function(t){var e=t.length-1;if(e<3)throw new wu("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var a=r;do{(a-=1)<0&&(a=e)}while(t[a].equals2D(n)&&a!==r);var s=r;do{s=(s+1)%e}while(t[s].equals2D(n)&&s!==r);var u=t[a],c=t[s];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=hc.computeOrientation(u,n,c);return 0===l?u.x>c.x:l>0},hc.locatePointInRing=function(t,e){return lc.locatePointInRing(t,e)},hc.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},hc.computeOrientation=function(t,e,n){return hc.orientationIndex(t,e,n)},hc.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new wu("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=hc.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var u=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),c=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/u;if(c<=0)return o.distance(a);if(c>=1)return o.distance(s);var l=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/u;return Math.abs(l)*Math.sqrt(u)}},hc.isOnLine=function(t,e){for(var n=new uc,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},fc.CLOCKWISE.get=function(){return-1},fc.RIGHT.get=function(){return hc.CLOCKWISE},fc.COUNTERCLOCKWISE.get=function(){return 1},fc.LEFT.get=function(){return hc.COUNTERCLOCKWISE},fc.COLLINEAR.get=function(){return 0},fc.STRAIGHT.get=function(){return hc.COLLINEAR},Object.defineProperties(hc,fc);var pc=function(){};pc.prototype.filter=function(t){},pc.prototype.interfaces_=function(){return[]},pc.prototype.getClass=function(){return pc};var dc=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},gc={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};dc.prototype.isGeometryCollection=function(){return this.getSortIndex()===dc.SORTINDEX_GEOMETRYCOLLECTION},dc.prototype.getFactory=function(){return this._factory},dc.prototype.getGeometryN=function(t){return this},dc.prototype.getArea=function(){return 0},dc.prototype.isRectangle=function(){return!1},dc.prototype.equals=function(){if(arguments[0]instanceof dc){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof dc))return!1;var n=e;return this.equalsExact(n)}},dc.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},dc.prototype.geometryChanged=function(){this.apply(dc.geometryChangedFilter)},dc.prototype.geometryChangedAction=function(){this._envelope=null},dc.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},dc.prototype.getLength=function(){return 0},dc.prototype.getNumGeometries=function(){return 1},dc.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},dc.prototype.getUserData=function(){return this._userData},dc.prototype.getSRID=function(){return this._SRID},dc.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},dc.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===dc.SORTINDEX_GEOMETRYCOLLECTION)throw new wu("This method does not support GeometryCollection arguments")},dc.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},dc.prototype.norm=function(){var t=this.copy();return t.normalize(),t},dc.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},dc.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Ku(this._envelope)},dc.prototype.setSRID=function(t){this._SRID=t},dc.prototype.setUserData=function(t){this._userData=t},dc.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},dc.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},dc.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===dc.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===dc.SORTINDEX_MULTIPOINT||this.getSortIndex()===dc.SORTINDEX_MULTILINESTRING||this.getSortIndex()===dc.SORTINDEX_MULTIPOLYGON},dc.prototype.interfaces_=function(){return[ku,Ou,Su]},dc.prototype.getClass=function(){return dc},dc.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},dc.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},gc.serialVersionUID.get=function(){return 0x799ea46522854c00},gc.SORTINDEX_POINT.get=function(){return 0},gc.SORTINDEX_MULTIPOINT.get=function(){return 1},gc.SORTINDEX_LINESTRING.get=function(){return 2},gc.SORTINDEX_LINEARRING.get=function(){return 3},gc.SORTINDEX_MULTILINESTRING.get=function(){return 4},gc.SORTINDEX_POLYGON.get=function(){return 5},gc.SORTINDEX_MULTIPOLYGON.get=function(){return 6},gc.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},gc.geometryChangedFilter.get=function(){return vc},Object.defineProperties(dc,gc);var vc=function(){};vc.interfaces_=function(){return[pc]},vc.filter=function(t){t.geometryChangedAction()};var yc=function(){};yc.prototype.filter=function(t){},yc.prototype.interfaces_=function(){return[]},yc.prototype.getClass=function(){return yc};var mc=function(){},_c={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};mc.prototype.isInBoundary=function(t){},mc.prototype.interfaces_=function(){return[]},mc.prototype.getClass=function(){return mc},_c.Mod2BoundaryNodeRule.get=function(){return bc},_c.EndPointBoundaryNodeRule.get=function(){return wc},_c.MultiValentEndPointBoundaryNodeRule.get=function(){return xc},_c.MonoValentEndPointBoundaryNodeRule.get=function(){return Ec},_c.MOD2_BOUNDARY_RULE.get=function(){return new bc},_c.ENDPOINT_BOUNDARY_RULE.get=function(){return new wc},_c.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new xc},_c.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new Ec},_c.OGC_SFS_BOUNDARY_RULE.get=function(){return mc.MOD2_BOUNDARY_RULE},Object.defineProperties(mc,_c);var bc=function(){};bc.prototype.isInBoundary=function(t){return t%2==1},bc.prototype.interfaces_=function(){return[mc]},bc.prototype.getClass=function(){return bc};var wc=function(){};wc.prototype.isInBoundary=function(t){return t>0},wc.prototype.interfaces_=function(){return[mc]},wc.prototype.getClass=function(){return wc};var xc=function(){};xc.prototype.isInBoundary=function(t){return t>1},xc.prototype.interfaces_=function(){return[mc]},xc.prototype.getClass=function(){return xc};var Ec=function(){};Ec.prototype.isInBoundary=function(t){return 1===t},Ec.prototype.interfaces_=function(){return[mc]},Ec.prototype.getClass=function(){return Ec};var Oc=function(){};function kc(t){this.message=t||""}Oc.prototype.add=function(){},Oc.prototype.addAll=function(){},Oc.prototype.isEmpty=function(){},Oc.prototype.iterator=function(){},Oc.prototype.size=function(){},Oc.prototype.toArray=function(){},Oc.prototype.remove=function(){},kc.prototype=new Error,kc.prototype.name="IndexOutOfBoundsException";var Ic=function(){};Ic.prototype.hasNext=function(){},Ic.prototype.next=function(){},Ic.prototype.remove=function(){};var Sc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(Oc);function Cc(t){this.message=t||""}Cc.prototype=new Error,Cc.prototype.name="NoSuchElementException";var Tc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,Oc]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new Nc(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new kc;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},e}(Sc),Nc=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new Cc;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Ic),Pc=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],i=!1,o=n.iterator();o.hasNext();)e.add(o.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof Cu&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1];if(!a&&this.size()>=1){var s=this.get(this.size()-1);if(s.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],c=arguments[1];return this.add(u,c),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],h=arguments[1],f=arguments[2];if(f)for(var p=0;p<l.length;p++)e.add(l[p],h);else for(var d=l.length-1;d>=0;d--)e.add(l[d],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof Cu){var g=arguments[0],v=arguments[1],y=arguments[2];if(!y){var m=this.size();if(m>0){if(g>0){var _=this.get(g-1);if(_.equals2D(v))return null}if(g<m){var b=this.get(g);if(b.equals2D(v))return null}}}t.prototype.add.call(this,g,v)}}else if(4===arguments.length){var w=arguments[0],x=arguments[1],E=arguments[2],O=arguments[3],k=1;E>O&&(k=-1);for(var I=E;I!==O;I+=k)e.add(w[I],x);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new Cu(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(Tc),Lc=function(){},jc={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};jc.ForwardComparator.get=function(){return Mc},jc.BidirectionalComparator.get=function(){return Rc},jc.coordArrayType.get=function(){return new Array(0).fill(null)},Lc.prototype.interfaces_=function(){return[]},Lc.prototype.getClass=function(){return Lc},Lc.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},Lc.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Lc.indexOf(r,e)<0)return r}return null},Lc.scroll=function(t,e){var n=Lc.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Yu.arraycopy(t,n,r,0,t.length-n),Yu.arraycopy(t,0,r,t.length-n,n),Yu.arraycopy(r,0,t,0,t.length)},Lc.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Lc.intersection=function(t,e){for(var n=new Pc,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Lc.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Lc.removeRepeatedPoints=function(t){return Lc.hasRepeatedPoints(t)?new Pc(t,!1).toCoordinateArray():t},Lc.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Lc.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Lc.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new Cu(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],u=0;u<s;u++)o[a+u]=new Cu(r[i+u])},Lc.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Lc.envelope=function(t){for(var e=new Ku,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Lc.toCoordinateArray=function(t){return t.toArray(Lc.coordArrayType)},Lc.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Lc.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Lc.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Lc.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Lc.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},Lc.extract=function(t,e,n){e=Ru.clamp(e,0,t.length);var r=(n=Ru.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Lc,jc);var Mc=function(){};Mc.prototype.compare=function(t,e){return Lc.compare(t,e)},Mc.prototype.interfaces_=function(){return[Iu]},Mc.prototype.getClass=function(){return Mc};var Rc=function(){};Rc.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Lc.compare(n,r);return Lc.isEqualReversed(n,r)?0:i},Rc.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Lc.increasingDirection(n),o=Lc.increasingDirection(r),a=i>0?0:n.length-1,s=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[a].compareTo(r[s]);if(0!==c)return c;a+=i,s+=o}return 0},Rc.prototype.interfaces_=function(){return[Iu]},Rc.prototype.getClass=function(){return Rc};var Ac=function(){};Ac.prototype.get=function(){},Ac.prototype.put=function(){},Ac.prototype.size=function(){},Ac.prototype.values=function(){},Ac.prototype.entrySet=function(){};var Dc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ac);function Fc(t){this.message=t||""}function zc(){}Fc.prototype=new Error,Fc.prototype.name="OperationNotSupported",zc.prototype=new Oc,zc.prototype.contains=function(){};var Bc=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof Oc&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Uc(this)},e}(zc),Uc=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new Cc;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new Fc},e}(Ic);function Vc(t){return null===t?0:t.color}function qc(t){return null===t?null:t.parent}function Gc(t,e){null!==t&&(t.color=e)}function Hc(t){return null===t?null:t.left}function Wc(t){return null===t?null:t.right}function Xc(){this.root_=null,this.size_=0}Xc.prototype=new Dc,Xc.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Xc.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:0,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:0,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},Xc.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(qc(t)===Hc(qc(qc(t)))){var n=Wc(qc(qc(t)));1===Vc(n)?(Gc(qc(t),0),Gc(n,0),Gc(qc(qc(t)),1),t=qc(qc(t))):(t===Wc(qc(t))&&(t=qc(t),e.rotateLeft(t)),Gc(qc(t),0),Gc(qc(qc(t)),1),e.rotateRight(qc(qc(t))))}else{var r=Hc(qc(qc(t)));1===Vc(r)?(Gc(qc(t),0),Gc(r,0),Gc(qc(qc(t)),1),t=qc(qc(t))):(t===Hc(qc(t))&&(t=qc(t),e.rotateRight(t)),Gc(qc(t),0),Gc(qc(qc(t)),1),e.rotateLeft(qc(qc(t))))}this.root_.color=0},Xc.prototype.values=function(){var t=new Tc,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=Xc.successor(e));)t.add(e.value);return t},Xc.prototype.entrySet=function(){var t=new Bc,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=Xc.successor(e));)t.add(e);return t},Xc.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Xc.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Xc.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},Xc.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},Xc.prototype.size=function(){return this.size_};var Yc=function(){};function Zc(){}function Kc(){this.array_=[],arguments[0]instanceof Oc&&this.addAll(arguments[0])}Yc.prototype.interfaces_=function(){return[]},Yc.prototype.getClass=function(){return Yc},Zc.prototype=new zc,Kc.prototype=new Zc,Kc.prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},Kc.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},Kc.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Kc.prototype.remove=function(t){throw new Fc},Kc.prototype.size=function(){return this.array_.length},Kc.prototype.isEmpty=function(){return 0===this.array_.length},Kc.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Kc.prototype.iterator=function(){return new Qc(this)};var Qc=function(t){this.treeSet_=t,this.position_=0};Qc.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new Cc;return this.treeSet_.array_[this.position_++]},Qc.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Qc.prototype.remove=function(){throw new Fc};var Jc=function(){};Jc.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Jc.asList=function(t){for(var e=new Tc,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var $c=function(){},tl={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};tl.P.get=function(){return 0},tl.L.get=function(){return 1},tl.A.get=function(){return 2},tl.FALSE.get=function(){return-1},tl.TRUE.get=function(){return-2},tl.DONTCARE.get=function(){return-3},tl.SYM_FALSE.get=function(){return"F"},tl.SYM_TRUE.get=function(){return"T"},tl.SYM_DONTCARE.get=function(){return"*"},tl.SYM_P.get=function(){return"0"},tl.SYM_L.get=function(){return"1"},tl.SYM_A.get=function(){return"2"},$c.prototype.interfaces_=function(){return[]},$c.prototype.getClass=function(){return $c},$c.toDimensionSymbol=function(t){switch(t){case $c.FALSE:return $c.SYM_FALSE;case $c.TRUE:return $c.SYM_TRUE;case $c.DONTCARE:return $c.SYM_DONTCARE;case $c.P:return $c.SYM_P;case $c.L:return $c.SYM_L;case $c.A:return $c.SYM_A}throw new wu("Unknown dimension value: "+t)},$c.toDimensionValue=function(t){switch(zu.toUpperCase(t)){case $c.SYM_FALSE:return $c.FALSE;case $c.SYM_TRUE:return $c.TRUE;case $c.SYM_DONTCARE:return $c.DONTCARE;case $c.SYM_P:return $c.P;case $c.SYM_L:return $c.L;case $c.SYM_A:return $c.A}throw new wu("Unknown dimension symbol: "+t)},Object.defineProperties($c,tl);var el=function(){};el.prototype.filter=function(t){},el.prototype.interfaces_=function(){return[]},el.prototype.getClass=function(){return el};var nl=function(){};nl.prototype.filter=function(t,e){},nl.prototype.isDone=function(){},nl.prototype.isGeometryChanged=function(){},nl.prototype.interfaces_=function(){return[]},nl.prototype.getClass=function(){return nl};var rl=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new wu("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Ku,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();Jc.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=$c.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=$c.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Kc(Jc.asList(this._geometries)),r=new Kc(Jc.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],a=i,s=this.getNumGeometries(),u=a.getNumGeometries(),c=0;c<s&&c<u;){var l=t.getGeometryN(c),h=a.getGeometryN(c),f=l.compareToSameClass(h,o);if(0!==f)return f;c++}return c<s?1:c<u?-1:0}},e.prototype.apply=function(){var t=this;if(Mu(arguments[0],yc))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(Mu(arguments[0],nl)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(Mu(arguments[0],el)){var o=arguments[0];o.filter(this);for(var a=0;a<this._geometries.length;a++)t._geometries[a].apply(o)}else if(Mu(arguments[0],pc)){var s=arguments[0];s.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),oc.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var n=0;n<this._geometries.length;n++)e._geometries[n]=this._geometries[n].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}(dc),il=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dc.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?$c.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new ol(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Yc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(rl),ol=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=mc.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};ol.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},ol.prototype.getBoundary=function(){return this._geom instanceof vl?this.boundaryLineString(this._geom):this._geom instanceof il?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},ol.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},ol.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},ol.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new Tc;this._endpointMap=new Xc;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var a=o.next(),s=a.getValue().count;e._bnRule.isInBoundary(s)&&n.add(a.getKey())}return Lc.toCoordinateArray(n)},ol.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new al,this._endpointMap.put(t,e)),e.count++},ol.prototype.interfaces_=function(){return[]},ol.prototype.getClass=function(){return ol},ol.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new ol(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new ol(n,r);return i.getBoundary()}};var al=function(){this.count=null};function sl(){}function ul(){}al.prototype.interfaces_=function(){return[]},al.prototype.getClass=function(){return al};var cl=function(){};function ll(){}function hl(){}function fl(){}var pl=function(){},dl={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};pl.prototype.interfaces_=function(){return[]},pl.prototype.getClass=function(){return pl},pl.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},pl.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new ll,n=new sl(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",a=new ul(pl.getStackTrace(r)),s=new fl(a),u=0;u<i;u++)try{o+=s.readLine()+pl.NEWLINE}catch(t){if(!(t instanceof hl))throw t;oc.shouldNeverReachHere()}return o}},pl.split=function(t,e){for(var n=e.length,r=new Tc,i=""+t,o=i.indexOf(e);o>=0;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}i.length>0&&r.add(i);for(var s=new Array(r.size()).fill(null),u=0;u<s.length;u++)s[u]=r.get(u);return s},pl.toString=function(){if(1===arguments.length){var t=arguments[0];return pl.SIMPLE_ORDINATE_FORMAT.format(t)}},pl.spaces=function(t){return pl.chars(" ",t)},dl.NEWLINE.get=function(){return Yu.getProperty("line.separator")},dl.SIMPLE_ORDINATE_FORMAT.get=function(){return new cl("0.#")},Object.defineProperties(pl,dl);var gl=function(){};gl.prototype.interfaces_=function(){return[]},gl.prototype.getClass=function(){return gl},gl.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},gl.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,Gu.X)===t.getOrdinate(e-1,Gu.X)&&t.getOrdinate(0,Gu.Y)===t.getOrdinate(e-1,Gu.Y)},gl.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(t.getOrdinate(i,o)!==e.getOrdinate(i,o)&&(!xu.isNaN(a)||!xu.isNaN(s)))return!1}return!0},gl.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(gl.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)gl.copy(e,i-1,r,o,1);return r},gl.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)gl.swap(t,r,e-r)},gl.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},gl.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)gl.copyCoord(t,e+o,n,r+o)},gl.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new Du;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(pl.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},gl.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?gl.createClosedRing(t,e,4):e.getOrdinate(0,Gu.X)===e.getOrdinate(n-1,Gu.X)&&e.getOrdinate(0,Gu.Y)===e.getOrdinate(n-1,Gu.Y)?e:gl.createClosedRing(t,e,n+1)},gl.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();gl.copy(e,0,r,0,i);for(var o=i;o<n;o++)gl.copy(e,0,r,o,1);return r};var vl=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Ku:this._points.expandEnvelope(new Ku)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&gl.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?$c.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return hc.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return gl.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var a=arguments[0],s=arguments[1],u=a;return s.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(Mu(arguments[0],yc))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(Mu(arguments[0],nl)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(Mu(arguments[0],el)){var o=arguments[0];o.filter(this)}else if(Mu(arguments[0],pc)){var a=arguments[0];a.filter(this)}},e.prototype.getBoundary=function(){return new ol(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new wu("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Yc]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}(dc),yl=function(){};yl.prototype.interfaces_=function(){return[]},yl.prototype.getClass=function(){return yl};var ml=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Ku;var t=new Ku;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return $c.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(Mu(arguments[0],yc)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(Mu(arguments[0],nl)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(Mu(arguments[0],el)){var n=arguments[0];n.filter(this)}else if(Mu(arguments[0],pc)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),oc.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[yl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}(dc),_l=function(){};_l.prototype.interfaces_=function(){return[]},_l.prototype.getClass=function(){return _l};var bl=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new wu("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new wu("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(hc.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(hc.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var u=t.getX(s),c=t.getY(s);if(u!==o===(c!==a))return!1;o=u,a=c}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,a=i._shell;if(!o.equalsExact(a,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!e._holes[s].equalsExact(i._holes[s],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Jc.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Yu.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=Lc.minCoordinate(n.getCoordinates());Lc.scroll(i,o),Yu.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],hc.isCCW(n.getCoordinates())===r&&Lc.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i,s=this._shell,u=a._shell,c=s.compareToSameClass(u,o);if(0!==c)return c;for(var l=this.getNumInteriorRing(),h=a.getNumInteriorRing(),f=0;f<l&&f<h;){var p=t.getInteriorRingN(f),d=a.getInteriorRingN(f),g=p.compareToSameClass(d,o);if(0!==g)return g;f++}return f<l?1:f<h?-1:0}},e.prototype.apply=function(t){var e=this;if(Mu(t,yc)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(Mu(t,nl)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(Mu(t,el))t.filter(this);else if(Mu(t,pc)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=this._holes[n].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),n=new Array(this._holes.length).fill(null),r=0;r<n.length;r++)n[r]=this._holes[r].copy();return new e(t,n,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[_l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}(dc),wl=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dc.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return $c.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[yl]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(rl),xl=function(t){function e(e,n){e instanceof Cu&&n instanceof Fl&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dc.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return $c.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return gl.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new wu("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new wu("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(vl),El=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return dc.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Tc,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),n=0;n<t.length;n++)t[n]=this._geometries[n].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[_l]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(rl),Ol=function(t){this._factory=t||null,this._isUserDataCopied=!1},kl={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Ol.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Ol.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Ol.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof rl?this.editGeometryCollection(t,e):t instanceof bl?this.editPolygon(t,e):t instanceof ml||t instanceof vl?e.edit(t,this._factory):(oc.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Ol.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Tc,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===wl?this._factory.createMultiPoint(r.toArray([])):n.getClass()===il?this._factory.createMultiLineString(r.toArray([])):n.getClass()===El?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},Ol.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Tc,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},Ol.prototype.interfaces_=function(){return[]},Ol.prototype.getClass=function(){return Ol},Ol.GeometryEditorOperation=function(){},kl.NoOpGeometryOperation.get=function(){return Il},kl.CoordinateOperation.get=function(){return Sl},kl.CoordinateSequenceOperation.get=function(){return Cl},Object.defineProperties(Ol,kl);var Il=function(){};Il.prototype.edit=function(t,e){return t},Il.prototype.interfaces_=function(){return[Ol.GeometryEditorOperation]},Il.prototype.getClass=function(){return Il};var Sl=function(){};Sl.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof xl?e.createLinearRing(n):t instanceof vl?e.createLineString(n):t instanceof ml?n.length>0?e.createPoint(n[0]):e.createPoint():t},Sl.prototype.interfaces_=function(){return[Ol.GeometryEditorOperation]},Sl.prototype.getClass=function(){return Sl};var Cl=function(){};Cl.prototype.edit=function(t,e){return t instanceof xl?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof vl?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof ml?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Cl.prototype.interfaces_=function(){return[Ol.GeometryEditorOperation]},Cl.prototype.getClass=function(){return Cl};var Tl=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new Cu}else if(Mu(arguments[0],Gu)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],a=arguments[1];this._coordinates=o,this._dimension=a,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],u=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=u;for(var c=0;c<s;c++)t._coordinates[c]=new Cu}},Nl={serialVersionUID:{configurable:!0}};Tl.prototype.setOrdinate=function(t,e,n){switch(e){case Gu.X:this._coordinates[t].x=n;break;case Gu.Y:this._coordinates[t].y=n;break;case Gu.Z:this._coordinates[t].z=n;break;default:throw new wu("invalid ordinateIndex")}},Tl.prototype.size=function(){return this._coordinates.length},Tl.prototype.getOrdinate=function(t,e){switch(e){case Gu.X:return this._coordinates[t].x;case Gu.Y:return this._coordinates[t].y;case Gu.Z:return this._coordinates[t].z}return xu.NaN},Tl.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},Tl.prototype.getCoordinateCopy=function(t){return new Cu(this._coordinates[t])},Tl.prototype.getDimension=function(){return this._dimension},Tl.prototype.getX=function(t){return this._coordinates[t].x},Tl.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Tl(t,this._dimension)},Tl.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Tl.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Tl(t,this._dimension)},Tl.prototype.toString=function(){if(this._coordinates.length>0){var t=new Du(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Tl.prototype.getY=function(t){return this._coordinates[t].y},Tl.prototype.toCoordinateArray=function(){return this._coordinates},Tl.prototype.interfaces_=function(){return[Gu,Su]},Tl.prototype.getClass=function(){return Tl},Nl.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Tl,Nl);var Pl=function(){},Ll={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Pl.prototype.readResolve=function(){return Pl.instance()},Pl.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new Tl(t)}if(Mu(arguments[0],Gu)){var e=arguments[0];return new Tl(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new Tl(n):new Tl(n,r)}},Pl.prototype.interfaces_=function(){return[Pu,Su]},Pl.prototype.getClass=function(){return Pl},Pl.instance=function(){return Pl.instanceObject},Ll.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Ll.instanceObject.get=function(){return new Pl},Object.defineProperties(Pl,Ll);var jl=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new Tc,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new Bc;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Ac),Ml=function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Al){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var n=arguments[0];this._modelType=t.FIXED,this.setScale(n)}else if(arguments[0]instanceof t){var r=arguments[0];this._modelType=r._modelType,this._scale=r._scale}},Rl={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};Ml.prototype.equals=function(t){if(!(t instanceof Ml))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},Ml.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Fu(n).compareTo(new Fu(r))},Ml.prototype.getScale=function(){return this._scale},Ml.prototype.isFloating=function(){return this._modelType===Ml.FLOATING||this._modelType===Ml.FLOATING_SINGLE},Ml.prototype.getType=function(){return this._modelType},Ml.prototype.toString=function(){var t="UNKNOWN";return this._modelType===Ml.FLOATING?t="Floating":this._modelType===Ml.FLOATING_SINGLE?t="Floating-Single":this._modelType===Ml.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},Ml.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return xu.isNaN(t)||this._modelType===Ml.FLOATING_SINGLE?t:this._modelType===Ml.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof Cu){var e=arguments[0];if(this._modelType===Ml.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},Ml.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===Ml.FLOATING?t=16:this._modelType===Ml.FLOATING_SINGLE?t=6:this._modelType===Ml.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},Ml.prototype.setScale=function(t){this._scale=Math.abs(t)},Ml.prototype.interfaces_=function(){return[Su,Ou]},Ml.prototype.getClass=function(){return Ml},Ml.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},Rl.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},Rl.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(Ml,Rl);var Al=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Dl={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Al.prototype.readResolve=function(){return Al.nameToTypeMap.get(this._name)},Al.prototype.toString=function(){return this._name},Al.prototype.interfaces_=function(){return[Su]},Al.prototype.getClass=function(){return Al},Dl.serialVersionUID.get=function(){return-552860263173159e4},Dl.nameToTypeMap.get=function(){return new jl},Object.defineProperties(Al,Dl),Ml.Type=Al,Ml.FIXED=new Al("FIXED"),Ml.FLOATING=new Al("FLOATING"),Ml.FLOATING_SINGLE=new Al("FLOATING SINGLE");var Fl=function t(){this._precisionModel=new Ml,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?Mu(arguments[0],Pu)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof Ml&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},zl={serialVersionUID:{configurable:!0}};Fl.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new Cu(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new Cu(t.getMinX(),t.getMinY()),new Cu(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new Cu(t.getMinX(),t.getMinY()),new Cu(t.getMinX(),t.getMaxY()),new Cu(t.getMaxX(),t.getMaxY()),new Cu(t.getMaxX(),t.getMinY()),new Cu(t.getMinX(),t.getMinY())]),null)},Fl.prototype.createLineString=function(t){return t?t instanceof Array?new vl(this.getCoordinateSequenceFactory().create(t),this):Mu(t,Gu)?new vl(t,this):void 0:new vl(this.getCoordinateSequenceFactory().create([]),this)},Fl.prototype.createMultiLineString=function(){if(0===arguments.length)return new il(null,this);if(1===arguments.length){var t=arguments[0];return new il(t,this)}},Fl.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(Fl.toGeometryArray(t));var s=t.iterator().next();if(t.size()>1){if(s instanceof bl)return this.createMultiPolygon(Fl.toPolygonArray(t));if(s instanceof vl)return this.createMultiLineString(Fl.toLineStringArray(t));if(s instanceof ml)return this.createMultiPoint(Fl.toPointArray(t));oc.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},Fl.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},Fl.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Cu){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(Mu(arguments[0],Gu)){var e=arguments[0];return new ml(e,this)}}},Fl.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},Fl.prototype.createPolygon=function(){if(0===arguments.length)return new bl(null,null,this);if(1===arguments.length){if(Mu(arguments[0],Gu)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof xl){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new bl(r,i,this)}},Fl.prototype.getSRID=function(){return this._SRID},Fl.prototype.createGeometryCollection=function(){if(0===arguments.length)return new rl(null,this);if(1===arguments.length){var t=arguments[0];return new rl(t,this)}},Fl.prototype.createGeometry=function(t){return new Ol(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},Fl.prototype.getPrecisionModel=function(){return this._precisionModel},Fl.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(Mu(arguments[0],Gu)){var e=arguments[0];return new xl(e,this)}}},Fl.prototype.createMultiPolygon=function(){if(0===arguments.length)return new El(null,this);if(1===arguments.length){var t=arguments[0];return new El(t,this)}},Fl.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new wl(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new wl(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(Mu(arguments[0],Gu)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var a=t.getCoordinateSequenceFactory().create(1,r.getDimension());gl.copy(r,o,a,0,1),i[o]=t.createPoint(a)}return this.createMultiPoint(i)}}},Fl.prototype.interfaces_=function(){return[Su]},Fl.prototype.getClass=function(){return Fl},Fl.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.getDefaultCoordinateSequenceFactory=function(){return Pl.instance()},Fl.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},Fl.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},zl.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(Fl,zl);var Bl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],Ul=function(t){this.geometryFactory=t||new Fl};Ul.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!Vl[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Bl.indexOf(n)?Vl[n].apply(this,[e.coordinates]):"GeometryCollection"===n?Vl[n].apply(this,[e.geometries]):Vl[n].apply(this,[e])},Ul.prototype.write=function(t){var e=t.getGeometryType();if(!ql[e])throw new Error("Geometry is not supported");return ql[e].apply(this,[t])};var Vl={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Vl[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Vl.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new Cu(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new Cu(t[0],t[1]),new Cu(t[2],t[1]),new Cu(t[2],t[3]),new Cu(t[0],t[3]),new Cu(t[0],t[1])])},Point:function(t){var e=new Cu(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Vl.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Vl.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Vl.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Vl.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=Vl.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Vl.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},ql={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:ql.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ql.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(ql.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ql.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=ql.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=ql.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=ql.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(ql[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}},Gl=function(t){this.geometryFactory=t||new Fl,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ul(this.geometryFactory)};Gl.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Ml.FIXED&&this.reducePrecision(e),e},Gl.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};var Hl=function(){this.parser=new Ul(this.geometryFactory)};Hl.prototype.write=function(t){return this.parser.write(t)};var Wl=function(){},Xl={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};function Yl(t){this.message=t||""}function Zl(){this.array_=[]}Wl.prototype.interfaces_=function(){return[]},Wl.prototype.getClass=function(){return Wl},Wl.opposite=function(t){return t===Wl.LEFT?Wl.RIGHT:t===Wl.RIGHT?Wl.LEFT:t},Xl.ON.get=function(){return 0},Xl.LEFT.get=function(){return 1},Xl.RIGHT.get=function(){return 2},Object.defineProperties(Wl,Xl),Yl.prototype=new Error,Yl.prototype.name="EmptyStackException",Zl.prototype=new Sc,Zl.prototype.add=function(t){return this.array_.push(t),!0},Zl.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},Zl.prototype.push=function(t){return this.array_.push(t),t},Zl.prototype.pop=function(t){if(0===this.array_.length)throw new Yl;return this.array_.pop()},Zl.prototype.peek=function(){if(0===this.array_.length)throw new Yl;return this.array_[this.array_.length-1]},Zl.prototype.empty=function(){return 0===this.array_.length},Zl.prototype.isEmpty=function(){return this.empty()},Zl.prototype.search=function(t){return this.array_.indexOf(t)},Zl.prototype.size=function(){return this.array_.length},Zl.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};var Kl=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};Kl.prototype.getCoordinate=function(){return this._minCoord},Kl.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Kl.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();oc.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=hc.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===hc.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===hc.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Kl.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Wl.LEFT;return n[e].y<n[e+1].y&&(r=Wl.RIGHT),r},Kl.prototype.getEdge=function(){return this._orientedDe},Kl.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},Kl.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Kl.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}oc.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Wl.LEFT&&(this._orientedDe=this._minDe.getSym())},Kl.prototype.interfaces_=function(){return[]},Kl.prototype.getClass=function(){return Kl};var Ql=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new Cu(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(rc),Jl=function(){this.array_=[]};Jl.prototype.addLast=function(t){this.array_.push(t)},Jl.prototype.removeFirst=function(){return this.array_.shift()},Jl.prototype.isEmpty=function(){return 0===this.array_.length};var $l=function(){this._finder=null,this._dirEdgeList=new Tc,this._nodes=new Tc,this._rightMostCoord=null,this._env=null,this._finder=new Kl};$l.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},$l.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},$l.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new Ql("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},$l.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Wl.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},$l.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},$l.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Wl.RIGHT)>=1&&e.getDepth(Wl.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},$l.prototype.computeDepths=function(t){var e=new Bc,n=new Jl,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a=o.next().getSym();if(!a.isVisited()){var s=a.getNode();e.contains(s)||(n.addLast(s),e.add(s))}}}},$l.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},$l.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Ku,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},$l.prototype.addReachable=function(t){var e=new Zl;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},$l.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Wl.LEFT,t.getDepth(Wl.RIGHT)),e.setDepth(Wl.RIGHT,t.getDepth(Wl.LEFT))},$l.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},$l.prototype.getNodes=function(){return this._nodes},$l.prototype.getDirectedEdges=function(){return this._dirEdgeList},$l.prototype.interfaces_=function(){return[Ou]},$l.prototype.getClass=function(){return $l};var th=function t(){var e=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var n=arguments[0];this.init(n.length)}else if(Number.isInteger(arguments[0])){var r=arguments[0];this.init(1),this.location[Wl.ON]=r}else if(arguments[0]instanceof t){var i=arguments[0];if(this.init(i.location.length),null!==i)for(var o=0;o<this.location.length;o++)e.location[o]=i.location[o]}}else if(3===arguments.length){var a=arguments[0],s=arguments[1],u=arguments[2];this.init(3),this.location[Wl.ON]=a,this.location[Wl.LEFT]=s,this.location[Wl.RIGHT]=u}};th.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},th.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==Lu.NONE)return!1;return!0},th.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===Lu.NONE&&(this.location[e]=t)},th.prototype.isLine=function(){return 1===this.location.length},th.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Wl.ON]=this.location[Wl.ON],e[Wl.LEFT]=Lu.NONE,e[Wl.RIGHT]=Lu.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===Lu.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},th.prototype.getLocations=function(){return this.location},th.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Wl.LEFT];this.location[Wl.LEFT]=this.location[Wl.RIGHT],this.location[Wl.RIGHT]=t},th.prototype.toString=function(){var t=new Du;return this.location.length>1&&t.append(Lu.toLocationSymbol(this.location[Wl.LEFT])),t.append(Lu.toLocationSymbol(this.location[Wl.ON])),this.location.length>1&&t.append(Lu.toLocationSymbol(this.location[Wl.RIGHT])),t.toString()},th.prototype.setLocations=function(t,e,n){this.location[Wl.ON]=t,this.location[Wl.LEFT]=e,this.location[Wl.RIGHT]=n},th.prototype.get=function(t){return t<this.location.length?this.location[t]:Lu.NONE},th.prototype.isArea=function(){return this.location.length>1},th.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===Lu.NONE)return!0;return!1},th.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Wl.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},th.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(Lu.NONE)},th.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},th.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},th.prototype.interfaces_=function(){return[]},th.prototype.getClass=function(){return th};var eh=function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new th(e),this.elt[1]=new th(e)}else if(arguments[0]instanceof t){var n=arguments[0];this.elt[0]=new th(n.elt[0]),this.elt[1]=new th(n.elt[1])}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.elt[0]=new th(Lu.NONE),this.elt[1]=new th(Lu.NONE),this.elt[r].setLocation(i)}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];this.elt[0]=new th(o,a,s),this.elt[1]=new th(o,a,s)}else if(4===arguments.length){var u=arguments[0],c=arguments[1],l=arguments[2],h=arguments[3];this.elt[0]=new th(Lu.NONE,Lu.NONE,Lu.NONE),this.elt[1]=new th(Lu.NONE,Lu.NONE,Lu.NONE),this.elt[u].setLocations(c,l,h)}};eh.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},eh.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},eh.prototype.isNull=function(t){return this.elt[t].isNull()},eh.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},eh.prototype.isLine=function(t){return this.elt[t].isLine()},eh.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new th(t.elt[n]):e.elt[n].merge(t.elt[n])},eh.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},eh.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Wl.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},eh.prototype.toString=function(){var t=new Du;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},eh.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},eh.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},eh.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Wl.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},eh.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},eh.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},eh.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new th(this.elt[t].location[0]))},eh.prototype.interfaces_=function(){return[]},eh.prototype.getClass=function(){return eh},eh.toLineLabel=function(t){for(var e=new eh(Lu.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var nh=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Tc,this._pts=new Tc,this._label=new eh(Lu.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Tc,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};nh.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=hc.isCCW(this._ring.getCoordinates())},nh.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},nh.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new Ql("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new Ql("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();oc.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},nh.prototype.getLinearRing=function(){return this._ring},nh.prototype.getCoordinate=function(t){return this._pts.get(t)},nh.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode().getEdges().getOutgoingDegree(t);n>t._maxNodeDegree&&(t._maxNodeDegree=n),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},nh.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;s>=0;s--)this._pts.add(r[s])}},nh.prototype.isHole=function(){return this._isHole},nh.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},nh.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!hc.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},nh.prototype.addHole=function(t){this._holes.add(t)},nh.prototype.isShell=function(){return null===this._shell},nh.prototype.getLabel=function(){return this._label},nh.prototype.getEdges=function(){return this._edges},nh.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},nh.prototype.getShell=function(){return this._shell},nh.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,Wl.RIGHT);if(r===Lu.NONE)return null;if(this._label.getLocation(n)===Lu.NONE)return this._label.setLocation(n,r),null}},nh.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},nh.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},nh.prototype.interfaces_=function(){return[]},nh.prototype.getClass=function(){return nh};var rh=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nh),ih=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new Tc,e=this._startDe;do{if(null===e.getMinEdgeRing()){var n=new rh(e,this._geometryFactory);t.add(n)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(nh),oh=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};oh.prototype.setVisited=function(t){this._isVisited=t},oh.prototype.setInResult=function(t){this._isInResult=t},oh.prototype.isCovered=function(){return this._isCovered},oh.prototype.isCoveredSet=function(){return this._isCoveredSet},oh.prototype.setLabel=function(t){this._label=t},oh.prototype.getLabel=function(){return this._label},oh.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},oh.prototype.updateIM=function(t){oc.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},oh.prototype.isInResult=function(){return this._isInResult},oh.prototype.isVisited=function(){return this._isVisited},oh.prototype.interfaces_=function(){return[]},oh.prototype.getClass=function(){return oh};var ah=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new eh(0,Lu.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=Lu.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==Lu.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new eh(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof eh)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),a=t._label.getLocation(i);a===Lu.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=Lu.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case Lu.BOUNDARY:n=Lu.INTERIOR;break;case Lu.INTERIOR:default:n=Lu.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(oh),sh=function(){this.nodeMap=new Xc,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};sh.prototype.find=function(t){return this.nodeMap.get(t)},sh.prototype.addNode=function(){if(arguments[0]instanceof Cu){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ah){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},sh.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},sh.prototype.iterator=function(){return this.nodeMap.values().iterator()},sh.prototype.values=function(){return this.nodeMap.values()},sh.prototype.getBoundaryNodes=function(t){for(var e=new Tc,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===Lu.BOUNDARY&&e.add(r)}return e},sh.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},sh.prototype.interfaces_=function(){return[]},sh.prototype.getClass=function(){return sh};var uh=function(){},ch={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};uh.prototype.interfaces_=function(){return[]},uh.prototype.getClass=function(){return uh},uh.isNorthern=function(t){return t===uh.NE||t===uh.NW},uh.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},uh.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(t>e?t:e)?3:n},uh.isInHalfPlane=function(t,e){return e===uh.SE?t===uh.SE||t===uh.SW:t===e||t===e+1},uh.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new wu("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?uh.NE:uh.SE:e>=0?uh.NW:uh.SW}if(arguments[0]instanceof Cu&&arguments[1]instanceof Cu){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new wu("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?uh.NE:uh.SE:r.y>=n.y?uh.NW:uh.SW}},ch.NE.get=function(){return 0},ch.NW.get=function(){return 1},ch.SW.get=function(){return 2},ch.SE.get=function(){return 3},Object.defineProperties(uh,ch);var lh=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=arguments[3];this._edge=o,this.init(a,s),this._label=u}};lh.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:hc.computeOrientation(t._p0,t._p1,this._p1)},lh.prototype.getDy=function(){return this._dy},lh.prototype.getCoordinate=function(){return this._p0},lh.prototype.setNode=function(t){this._node=t},lh.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},lh.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},lh.prototype.getDirectedCoordinate=function(){return this._p1},lh.prototype.getDx=function(){return this._dx},lh.prototype.getLabel=function(){return this._label},lh.prototype.getEdge=function(){return this._edge},lh.prototype.getQuadrant=function(){return this._quadrant},lh.prototype.getNode=function(){return this._node},lh.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},lh.prototype.computeLabel=function(t){},lh.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=uh.quadrant(this._dx,this._dy),oc.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},lh.prototype.interfaces_=function(){return[Ou]},lh.prototype.getClass=function(){return lh};var hh=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new eh(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Ql("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=this,e=!0,n=0;n<2;n++)t._label.isArea(n)&&t._label.getLocation(n,Wl.LEFT)===Lu.INTERIOR&&t._label.getLocation(n,Wl.RIGHT)===Lu.INTERIOR||(e=!1);return e},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Wl.LEFT]+"/"+this._depth[Wl.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,Lu.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,Lu.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Wl.LEFT&&(r=-1);var i=Wl.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===Lu.EXTERIOR&&e===Lu.INTERIOR?1:t===Lu.INTERIOR&&e===Lu.EXTERIOR?-1:0},e}(lh),fh=function(){};fh.prototype.createNode=function(t){return new ah(t,null)},fh.prototype.interfaces_=function(){return[]},fh.prototype.getClass=function(){return fh};var ph=function(){if(this._edges=new Tc,this._nodes=null,this._edgeEndList=new Tc,0===arguments.length)this._nodes=new sh(new fh);else if(1===arguments.length){var t=arguments[0];this._nodes=new sh(t)}};ph.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},ph.prototype.find=function(t){return this._nodes.find(t)},ph.prototype.addNode=function(){if(arguments[0]instanceof ah){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof Cu){var e=arguments[0];return this._nodes.addNode(e)}},ph.prototype.getNodeIterator=function(){return this._nodes.iterator()},ph.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},ph.prototype.debugPrintln=function(t){Yu.out.println(t)},ph.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===Lu.BOUNDARY},ph.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},ph.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&hc.computeOrientation(t,e,r)===hc.COLLINEAR&&uh.quadrant(t,e)===uh.quadrant(n,r)},ph.prototype.getEdgeEnds=function(){return this._edgeEndList},ph.prototype.debugPrint=function(t){Yu.out.print(t)},ph.prototype.getEdgeIterator=function(){return this._edges.iterator()},ph.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},ph.prototype.insertEdge=function(t){this._edges.add(t)},ph.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},ph.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new hh(r,!0),o=new hh(r,!1);i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},ph.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},ph.prototype.getNodes=function(){return this._nodes.values()},ph.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},ph.prototype.interfaces_=function(){return[]},ph.prototype.getClass=function(){return ph},ph.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var dh=function(){this._geometryFactory=null,this._shellList=new Tc;var t=arguments[0];this._geometryFactory=t};dh.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},dh.prototype.computePolygons=function(t){for(var e=new Tc,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},dh.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new Ql("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},dh.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Tc,i=t.iterator();i.hasNext();){var o=i.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var a=o.buildMinimalRings(),s=this.findShell(a);null!==s?(this.placePolygonHoles(s,a),e.add(s)):n.addAll(a)}else r.add(o)}return r},dh.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},dh.prototype.buildMaximalEdgeRings=function(t){for(var e=new Tc,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&null===r.getEdgeRing()){var i=new ih(r,this._geometryFactory);e.add(i),i.setInResult()}}return e},dh.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},dh.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},dh.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var u=s.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(r)&&hc.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||a.contains(l))&&(o=u)}return o},dh.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return oc.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},dh.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];ph.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new Tc,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},dh.prototype.interfaces_=function(){return[]},dh.prototype.getClass=function(){return dh};var gh=function(){};gh.prototype.getBounds=function(){},gh.prototype.interfaces_=function(){return[]},gh.prototype.getClass=function(){return gh};var vh=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};vh.prototype.getItem=function(){return this._item},vh.prototype.getBounds=function(){return this._bounds},vh.prototype.interfaces_=function(){return[gh,Su]},vh.prototype.getClass=function(){return vh};var yh=function(){this._size=null,this._items=null,this._size=0,this._items=new Tc,this._items.add(null)};yh.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},yh.prototype.size=function(){return this._size},yh.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&((n=2*t)!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},yh.prototype.clear=function(){this._size=0,this._items.clear()},yh.prototype.isEmpty=function(){return 0===this._size},yh.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},yh.prototype.interfaces_=function(){return[]},yh.prototype.getClass=function(){return yh};var mh=function(){};mh.prototype.visitItem=function(t){},mh.prototype.interfaces_=function(){return[]},mh.prototype.getClass=function(){return mh};var _h=function(){};_h.prototype.insert=function(t,e){},_h.prototype.remove=function(t,e){},_h.prototype.query=function(){},_h.prototype.interfaces_=function(){return[]},_h.prototype.getClass=function(){return _h};var bh=function(){if(this._childBoundables=new Tc,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},wh={serialVersionUID:{configurable:!0}};bh.prototype.getLevel=function(){return this._level},bh.prototype.size=function(){return this._childBoundables.size()},bh.prototype.getChildBoundables=function(){return this._childBoundables},bh.prototype.addChildBoundable=function(t){oc.isTrue(null===this._bounds),this._childBoundables.add(t)},bh.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},bh.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},bh.prototype.interfaces_=function(){return[gh,Su]},bh.prototype.getClass=function(){return bh},wh.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(bh,wh);var xh=function(){};xh.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},xh.min=function(t){return xh.sort(t),t.get(0)},xh.sort=function(t,e){var n=t.toArray();e?Jc.sort(n,e):Jc.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},xh.singletonList=function(t){var e=new Tc;return e.add(t),e};var Eh=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Eh.prototype.expandToQueue=function(t,e){var n=Eh.isComposite(this._boundable1),r=Eh.isComposite(this._boundable2);if(n&&r)return Eh.area(this._boundable1)>Eh.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new wu("neither boundable is composite")},Eh.prototype.isLeaves=function(){return!(Eh.isComposite(this._boundable1)||Eh.isComposite(this._boundable2))},Eh.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Eh.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new Eh(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},Eh.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Eh.prototype.getDistance=function(){return this._distance},Eh.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Eh.prototype.interfaces_=function(){return[Ou]},Eh.prototype.getClass=function(){return Eh},Eh.area=function(t){return t.getBounds().getArea()},Eh.isComposite=function(t){return t instanceof bh};var Oh=function t(){if(this._root=null,this._built=!1,this._itemBoundables=new Tc,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var n=arguments[0];oc.isTrue(n>1,"Node capacity must be greater than 1"),this._nodeCapacity=n}},kh={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Oh.prototype.getNodeCapacity=function(){return this._nodeCapacity},Oh.prototype.lastNode=function(t){return t.get(t.size()-1)},Oh.prototype.size=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof bh?n+=t.size(i):i instanceof vh&&(n+=1)}return n}},Oh.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof vh&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Oh.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new Tc:e}if(1===arguments.length){for(var n=arguments[0],r=new Tc,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof bh){var a=t.itemsTree(o);null!==a&&r.add(a)}else o instanceof vh?r.add(o.getItem()):oc.shouldNeverReachHere()}return r.size()<=0?null:r}},Oh.prototype.insert=function(t,e){oc.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new vh(t,e))},Oh.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new Tc;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(oc.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var a=i.getChildBoundables().iterator();a.hasNext();){var s=a.next();s instanceof bh?t.boundablesAtLevel(r,s,o):(oc.isTrue(s instanceof vh),-1===r&&o.add(s))}return null}},Oh.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new Tc;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(Mu(arguments[2],mh)&&arguments[0]instanceof Object&&arguments[1]instanceof bh)for(var o=arguments[0],a=arguments[1],s=arguments[2],u=a.getChildBoundables(),c=0;c<u.size();c++){var l=u.get(c);t.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof bh?t.query(o,l,s):l instanceof vh?s.visitItem(l.getItem()):oc.shouldNeverReachHere())}else if(Mu(arguments[2],Sc)&&arguments[0]instanceof Object&&arguments[1]instanceof bh)for(var h=arguments[0],f=arguments[1],p=arguments[2],d=f.getChildBoundables(),g=0;g<d.size();g++){var v=d.get(g);t.getIntersectsOp().intersects(v.getBounds(),h)&&(v instanceof bh?t.query(h,v,p):v instanceof vh?p.add(v.getItem()):oc.shouldNeverReachHere())}},Oh.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},Oh.prototype.getRoot=function(){return this.build(),this._root},Oh.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=this.removeItem(i,o);if(a)return!0;for(var s=null,u=i.getChildBoundables().iterator();u.hasNext();){var c=u.next();if(t.getIntersectsOp().intersects(c.getBounds(),r)&&c instanceof bh&&(a=t.remove(r,c,o))){s=c;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),a}},Oh.prototype.createHigherLevels=function(t,e){oc.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Oh.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof bh){var o=t.depth(i);o>n&&(n=o)}}return n+1}},Oh.prototype.createParentBoundables=function(t,e){var n=this;oc.isTrue(!t.isEmpty());var r=new Tc;r.add(this.createNode(e));var i=new Tc(t);xh.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var a=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(a)}return r},Oh.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Oh.prototype.interfaces_=function(){return[Su]},Oh.prototype.getClass=function(){return Oh},Oh.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},kh.IntersectsOp.get=function(){return Ih},kh.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},kh.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Oh,kh);var Ih=function(){},Sh=function(){};Sh.prototype.distance=function(t,e){},Sh.prototype.interfaces_=function(){return[]},Sh.prototype.getClass=function(){return Sh};var Ch=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){oc.isTrue(t.length>0);for(var n=new Tc,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},e.prototype.createNode=function(t){return new Th(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Tc;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(Mu(arguments[2],mh)&&arguments[0]instanceof Object&&arguments[1]instanceof bh){var i=arguments[0],o=arguments[1],a=arguments[2];t.prototype.query.call(this,i,o,a)}else if(Mu(arguments[2],Sc)&&arguments[0]instanceof Object&&arguments[1]instanceof bh){var s=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,s,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){oc.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new Tc(t);xh.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(Mu(arguments[0],Sh)){var t=arguments[0],n=new Eh(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Eh){var r=arguments[0];return this.nearestNeighbour(r,xu.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&Mu(arguments[1],Sh)){var i=arguments[0],o=arguments[1],a=new Eh(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(a)}if(arguments[0]instanceof Eh&&"number"==typeof arguments[1]){var s=arguments[0],u=arguments[1],c=u,l=null,h=new yh;for(h.add(s);!h.isEmpty()&&c>0;){var f=h.poll(),p=f.getDistance();if(p>=c)break;f.isLeaves()?(c=p,l=f):f.expandToQueue(h,c)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],g=arguments[1],v=arguments[2],y=new vh(d,g),m=new Eh(this.getRoot(),y,v);return this.nearestNeighbour(m)[0]}},e.prototype.interfaces_=function(){return[_h,Su]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Th},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[Iu]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[Iu]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Oh),Th=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Ku(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(bh),Nh=function(){};Nh.prototype.interfaces_=function(){return[]},Nh.prototype.getClass=function(){return Nh},Nh.relativeSign=function(t,e){return t<e?-1:t>e?1:0},Nh.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Nh.relativeSign(e.x,n.x),i=Nh.relativeSign(e.y,n.y);switch(t){case 0:return Nh.compareValue(r,i);case 1:return Nh.compareValue(i,r);case 2:return Nh.compareValue(i,-r);case 3:return Nh.compareValue(-r,i);case 4:return Nh.compareValue(-r,-i);case 5:return Nh.compareValue(-i,-r);case 6:return Nh.compareValue(-i,r);case 7:return Nh.compareValue(r,-i)}return oc.shouldNeverReachHere("invalid octant value"),0},Nh.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var Ph=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new Cu(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};Ph.prototype.getCoordinate=function(){return this.coord},Ph.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},Ph.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Nh.compare(this._segmentOctant,this.coord,e.coord)},Ph.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},Ph.prototype.isInterior=function(){return this._isInterior},Ph.prototype.interfaces_=function(){return[Ou]},Ph.prototype.getClass=function(){return Ph};var Lh=function(){this._nodeMap=new Xc,this._edge=null;var t=arguments[0];this._edge=t};Lh.prototype.getSplitCoordinates=function(){var t=new Pc;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Lh.prototype.addCollapsedNodes=function(){var t=new Tc;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Lh.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Lh.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new Fu(e+1))}},Lh.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new Cu(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new Cu(e.coord))},Lh.prototype.iterator=function(){return this._nodeMap.values().iterator()},Lh.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Lh.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Lh.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new Fu(e[0])),r=i}},Lh.prototype.getEdge=function(){return this._edge},Lh.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Lh.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Cu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new Cu(e.coord)),new Ah(o,this._edge.getData())},Lh.prototype.add=function(t,e){var n=new Ph(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(oc.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Lh.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new rc("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new rc("bad split edge end point at "+i)},Lh.prototype.interfaces_=function(){return[]},Lh.prototype.getClass=function(){return Lh};var jh=function(){};jh.prototype.interfaces_=function(){return[]},jh.prototype.getClass=function(){return jh},jh.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new wu("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof Cu&&arguments[1]instanceof Cu){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0===a&&0===s)throw new wu("Cannot compute the octant for two identical points "+i);return jh.octant(a,s)}};var Mh=function(){};Mh.prototype.getCoordinates=function(){},Mh.prototype.size=function(){},Mh.prototype.getCoordinate=function(t){},Mh.prototype.isClosed=function(){},Mh.prototype.setData=function(t){},Mh.prototype.getData=function(){},Mh.prototype.interfaces_=function(){return[]},Mh.prototype.getClass=function(){return Mh};var Rh=function(){};Rh.prototype.addIntersection=function(t,e){},Rh.prototype.interfaces_=function(){return[Mh]},Rh.prototype.getClass=function(){return Rh};var Ah=function(){this._nodeList=new Lh(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Ah.prototype.getCoordinates=function(){return this._pts},Ah.prototype.size=function(){return this._pts.length},Ah.prototype.getCoordinate=function(t){return this._pts[t]},Ah.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Ah.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Ah.prototype.setData=function(t){this._data=t},Ah.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:jh.octant(t,e)},Ah.prototype.getData=function(){return this._data},Ah.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new Cu(n.getIntersection(i));this.addIntersection(o,r)}},Ah.prototype.toString=function(){return nc.toLineString(new Tl(this._pts))},Ah.prototype.getNodeList=function(){return this._nodeList},Ah.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}return this._nodeList.add(t,n)},Ah.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Ah.prototype.interfaces_=function(){return[Rh]},Ah.prototype.getClass=function(){return Ah},Ah.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Tc;return Ah.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var Dh=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new Cu,this.p1=new Cu;else if(1===arguments.length){var t=arguments[0];this.p0=new Cu(t.p0),this.p1=new Cu(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new Cu(e,n),this.p1=new Cu(r,i)}},Fh={serialVersionUID:{configurable:!0}};Dh.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Dh.prototype.orientationIndex=function(){if(arguments[0]instanceof Dh){var t=arguments[0],e=hc.orientationIndex(this.p0,this.p1,t.p0),n=hc.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof Cu){var r=arguments[0];return hc.orientationIndex(this.p0,this.p1,r)}},Dh.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Dh.prototype.isVertical=function(){return this.p0.x===this.p1.x},Dh.prototype.equals=function(t){if(!(t instanceof Dh))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Dh.prototype.intersection=function(t){var e=new uc;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Dh.prototype.project=function(){if(arguments[0]instanceof Cu){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new Cu(t);var e=this.projectionFactor(t),n=new Cu;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Dh){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),i>1&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),o>1&&(s=this.p1),new Dh(a,s)}},Dh.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Dh.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Dh.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Dh.prototype.distancePerpendicular=function(t){return hc.distancePointLinePerpendicular(t,this.p0,this.p1)},Dh.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Dh.prototype.midPoint=function(){return Dh.midPoint(this.p0,this.p1)},Dh.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?xu.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Dh.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=xu.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var u=t.closestPoint(this.p1);return(i=u.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=u),n},Dh.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Dh.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Dh.prototype.getLength=function(){return this.p0.distance(this.p1)},Dh.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Dh.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Dh.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Dh.prototype.lineIntersection=function(t){try{return Zu.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Xu))throw t}return null},Dh.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Dh.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,u=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,u=e*o/a}return new Cu(n-u,r+s)},Dh.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},Dh.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||xu.isNaN(e))&&(e=1),e},Dh.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Dh.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Dh.prototype.distance=function(){if(arguments[0]instanceof Dh){var t=arguments[0];return hc.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof Cu){var e=arguments[0];return hc.distancePointLine(e,this.p0,this.p1)}},Dh.prototype.pointAlong=function(t){var e=new Cu;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Dh.prototype.hashCode=function(){var t=xu.doubleToLongBits(this.p0.x);t^=31*xu.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=xu.doubleToLongBits(this.p1.x);return n^=31*xu.doubleToLongBits(this.p1.y),e^Math.trunc(n)^Math.trunc(n>>32)},Dh.prototype.interfaces_=function(){return[Ou,Su]},Dh.prototype.getClass=function(){return Dh},Dh.midPoint=function(t,e){return new Cu((t.x+e.x)/2,(t.y+e.y)/2)},Fh.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Dh,Fh);var zh=function(){this.tempEnv1=new Ku,this.tempEnv2=new Ku,this._overlapSeg1=new Dh,this._overlapSeg2=new Dh};zh.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},zh.prototype.interfaces_=function(){return[]},zh.prototype.getClass=function(){return zh};var Bh=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};Bh.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},Bh.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},Bh.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},Bh.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},Bh.prototype.setId=function(t){this._id=t},Bh.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},Bh.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Ku(t,e)}return this._env},Bh.prototype.getEndIndex=function(){return this._end},Bh.prototype.getStartIndex=function(){return this._start},Bh.prototype.getContext=function(){return this._context},Bh.prototype.getId=function(){return this._id},Bh.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<l&&(r<h&&this.computeOverlapsInternal(t,l,n,r,h,o),h<i&&this.computeOverlapsInternal(t,l,n,h,i,o)),l<e&&(r<h&&this.computeOverlapsInternal(l,e,n,r,h,o),h<i&&this.computeOverlapsInternal(l,e,n,h,i,o))},Bh.prototype.interfaces_=function(){return[]},Bh.prototype.getClass=function(){return Bh};var Uh=function(){};Uh.prototype.interfaces_=function(){return[]},Uh.prototype.getClass=function(){return Uh},Uh.getChainStartIndices=function(t){var e=0,n=new Tc;n.add(new Fu(e));do{var r=Uh.findChainEnd(t,e);n.add(new Fu(r)),e=r}while(e<t.length-1);return Uh.toIntArray(n)},Uh.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=uh.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||uh.quadrant(t[i-1],t[i])===r);)i++;return i-1},Uh.getChains=function(){if(1===arguments.length){var t=arguments[0];return Uh.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new Tc,i=Uh.getChainStartIndices(e),o=0;o<i.length-1;o++){var a=new Bh(e,i[o],i[o+1],n);r.add(a)}return r}},Uh.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Vh=function(){};Vh.prototype.computeNodes=function(t){},Vh.prototype.getNodedSubstrings=function(){},Vh.prototype.interfaces_=function(){return[]},Vh.prototype.getClass=function(){return Vh};var qh=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};qh.prototype.setSegmentIntersector=function(t){this._segInt=t},qh.prototype.interfaces_=function(){return[Vh]},qh.prototype.getClass=function(){return qh};var Gh=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new Tc,this._index=new Ch,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return Ah.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=Uh.getChains(t.getCoordinates(),t).iterator();n.hasNext();){var r=n.next();r.setId(e._idCounter++),e._index.insert(r.getEnvelope(),r),e._monoChains.add(r)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new Hh(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()).iterator();i.hasNext();){var o=i.next();if(o.getId()>r.getId()&&(r.computeOverlaps(o,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return Hh},Object.defineProperties(e,n),e}(qh),Hh=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),a=r.getContext();this._si.processIntersections(o,n,a,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(zh),Wh=function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.setQuadrantSegments(n),this.setEndCapStyle(r)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(o),this.setJoinStyle(a),this.setMitreLimit(s)}},Xh={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};Wh.prototype.getEndCapStyle=function(){return this._endCapStyle},Wh.prototype.isSingleSided=function(){return this._isSingleSided},Wh.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=Wh.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=Wh.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==Wh.JOIN_ROUND&&(this._quadrantSegments=Wh.DEFAULT_QUADRANT_SEGMENTS)},Wh.prototype.getJoinStyle=function(){return this._joinStyle},Wh.prototype.setJoinStyle=function(t){this._joinStyle=t},Wh.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},Wh.prototype.getSimplifyFactor=function(){return this._simplifyFactor},Wh.prototype.getQuadrantSegments=function(){return this._quadrantSegments},Wh.prototype.setEndCapStyle=function(t){this._endCapStyle=t},Wh.prototype.getMitreLimit=function(){return this._mitreLimit},Wh.prototype.setMitreLimit=function(t){this._mitreLimit=t},Wh.prototype.setSingleSided=function(t){this._isSingleSided=t},Wh.prototype.interfaces_=function(){return[]},Wh.prototype.getClass=function(){return Wh},Wh.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Xh.CAP_ROUND.get=function(){return 1},Xh.CAP_FLAT.get=function(){return 2},Xh.CAP_SQUARE.get=function(){return 3},Xh.JOIN_ROUND.get=function(){return 1},Xh.JOIN_MITRE.get=function(){return 2},Xh.JOIN_BEVEL.get=function(){return 3},Xh.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Xh.DEFAULT_MITRE_LIMIT.get=function(){return 5},Xh.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(Wh,Xh);var Yh=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=hc.COUNTERCLOCKWISE,this._inputLine=t||null},Zh={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Yh.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},Yh.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=Yh.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},Yh.prototype.isShallowConcavity=function(t,e,n,r){return hc.computeOrientation(t,e,n)===this._angleOrientation&&hc.distancePointLine(e,t,n)<r},Yh.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/Yh.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},Yh.prototype.isConcave=function(t,e,n){return hc.computeOrientation(t,e,n)===this._angleOrientation},Yh.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=hc.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Yh.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Yh.DELETE;)e++;return e},Yh.prototype.isShallow=function(t,e,n,r){return hc.distancePointLine(e,t,n)<r},Yh.prototype.collapseLine=function(){for(var t=new Pc,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Yh.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Yh.prototype.interfaces_=function(){return[]},Yh.prototype.getClass=function(){return Yh},Yh.simplify=function(t,e){return new Yh(t).simplify(e)},Zh.INIT.get=function(){return 0},Zh.DELETE.get=function(){return 1},Zh.KEEP.get=function(){return 1},Zh.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Yh,Zh);var Kh=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Tc},Qh={COORDINATE_ARRAY_TYPE:{configurable:!0}};Kh.prototype.getCoordinates=function(){return this._ptList.toArray(Kh.COORDINATE_ARRAY_TYPE)},Kh.prototype.setPrecisionModel=function(t){this._precisionModel=t},Kh.prototype.addPt=function(t){var e=new Cu(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Kh.prototype.revere=function(){},Kh.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;r>=0;r--)this.addPt(t[r])},Kh.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Kh.prototype.toString=function(){return(new Fl).createLineString(this.getCoordinates()).toString()},Kh.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new Cu(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Kh.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Kh.prototype.interfaces_=function(){return[]},Kh.prototype.getClass=function(){return Kh},Qh.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Kh,Qh);var Jh=function(){},$h={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Jh.prototype.interfaces_=function(){return[]},Jh.prototype.getClass=function(){return Jh},Jh.toDegrees=function(t){return 180*t/Math.PI},Jh.normalize=function(t){for(;t>Math.PI;)t-=Jh.PI_TIMES_2;for(;t<=-Math.PI;)t+=Jh.PI_TIMES_2;return t},Jh.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Jh.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)>0},Jh.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},Jh.interiorAngle=function(t,e,n){var r=Jh.angle(e,t),i=Jh.angle(e,n);return Math.abs(i-r)},Jh.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Jh.PI_TIMES_2;t>=Jh.PI_TIMES_2&&(t=0)}else{for(;t>=Jh.PI_TIMES_2;)t-=Jh.PI_TIMES_2;t<0&&(t=0)}return t},Jh.angleBetween=function(t,e,n){var r=Jh.angle(e,t),i=Jh.angle(e,n);return Jh.diff(r,i)},Jh.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},Jh.toRadians=function(t){return t*Math.PI/180},Jh.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Jh.COUNTERCLOCKWISE:n<0?Jh.CLOCKWISE:Jh.NONE},Jh.angleBetweenOriented=function(t,e,n){var r=Jh.angle(e,t),i=Jh.angle(e,n)-r;return i<=-Math.PI?i+Jh.PI_TIMES_2:i>Math.PI?i-Jh.PI_TIMES_2:i},$h.PI_TIMES_2.get=function(){return 2*Math.PI},$h.PI_OVER_2.get=function(){return Math.PI/2},$h.PI_OVER_4.get=function(){return Math.PI/4},$h.COUNTERCLOCKWISE.get=function(){return hc.COUNTERCLOCKWISE},$h.CLOCKWISE.get=function(){return hc.CLOCKWISE},$h.NONE.get=function(){return hc.COLLINEAR},Object.defineProperties(Jh,$h);var tf=function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Dh,this._seg1=new Dh,this._offset0=new Dh,this._offset1=new Dh,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._precisionModel=e,this._bufParams=n,this._li=new uc,this._filletAngleQuantum=Math.PI/2/n.getQuadrantSegments(),n.getQuadrantSegments()>=8&&n.getJoinStyle()===Wh.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(r)},ef={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};tf.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=hc.computeOrientation(this._s0,this._s1,this._s2),r=n===hc.CLOCKWISE&&this._side===Wl.LEFT||n===hc.COUNTERCLOCKWISE&&this._side===Wl.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},tf.prototype.addLineEndCap=function(t,e){var n=new Dh(t,e),r=new Dh;this.computeOffsetSegment(n,Wl.LEFT,this._distance,r);var i=new Dh;this.computeOffsetSegment(n,Wl.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case Wh.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,hc.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case Wh.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case Wh.CAP_SQUARE:var u=new Cu;u.x=Math.abs(this._distance)*Math.cos(s),u.y=Math.abs(this._distance)*Math.sin(s);var c=new Cu(r.p1.x+u.x,r.p1.y+u.y),l=new Cu(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},tf.prototype.getCoordinates=function(){return this._segList.getCoordinates()},tf.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Zu.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Xu))throw t;o=new Cu(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},tf.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===hc.CLOCKWISE?s<=l&&(s+=2*Math.PI):s>=l&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,l,r,i),this._segList.addPt(n)},tf.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*tf.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===Wh.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===Wh.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},tf.prototype.createSquare=function(t){this._segList.addPt(new Cu(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new Cu(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new Cu(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new Cu(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},tf.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},tf.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},tf.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},tf.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},tf.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Jh.angle(i,this._seg0.p0),a=Jh.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=Jh.normalize(o+a),u=Jh.normalize(s+Math.PI),c=r*n,l=n-c*Math.abs(Math.sin(a)),h=i.x+c*Math.cos(u),f=i.y+c*Math.sin(u),p=new Cu(h,f),d=new Dh(i,p),g=d.pointAlongOffset(1,l),v=d.pointAlongOffset(1,-l);this._side===Wl.LEFT?(this._segList.addPt(g),this._segList.addPt(v)):(this._segList.addPt(v),this._segList.addPt(g))},tf.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Wl.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),u=i*n*o/s,c=i*n*a/s;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},tf.prototype.addFilletArc=function(t,e,n,r,i){var o=r===hc.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var u=a/s,c=0,l=new Cu;c<a;){var h=e+o*c;l.x=t.x+i*Math.cos(h),l.y=t.y+i*Math.sin(h),this._segList.addPt(l),c+=u}},tf.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*tf.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new Cu((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new Cu((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},tf.prototype.createCircle=function(t){var e=new Cu(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},tf.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},tf.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Kh,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*tf.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},tf.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===Wh.JOIN_BEVEL||this._bufParams.getJoinStyle()===Wh.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,hc.CLOCKWISE,this._distance))},tf.prototype.closeRing=function(){this._segList.closeRing()},tf.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},tf.prototype.interfaces_=function(){return[]},tf.prototype.getClass=function(){return tf},ef.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},ef.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},ef.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},ef.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(tf,ef);var nf=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};nf.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Lc.reverse(o),o},nf.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=Yh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Wl.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=Yh.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Wl.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment(),n.closeRing()},nf.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Wl.RIGHT&&(r=-r);var i=Yh.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},nf.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=Yh.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Wl.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=Yh.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Wl.LEFT);for(var u=s-2;u>=0;u--)e.addNextSegment(a[u],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},nf.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case Wh.CAP_ROUND:e.createCircle(t);break;case Wh.CAP_SQUARE:e.createSquare(t)}},nf.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);return r.getCoordinates()},nf.prototype.getBufferParameters=function(){return this._bufParams},nf.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},nf.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return nf.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},nf.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=Yh.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Wl.LEFT),n.addFirstSegment();for(var a=o-2;a>=0;a--)n.addNextSegment(i[a],!0)}else{var s=Yh.simplify(t,r),u=s.length-1;n.initSideSegments(s[0],s[1],Wl.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(s[c],!0)}n.addLastSegment()},nf.prototype.getSegGen=function(t){return new tf(this._precisionModel,this._bufParams,t)},nf.prototype.interfaces_=function(){return[]},nf.prototype.getClass=function(){return nf},nf.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new Cu(t[n]);return e};var rf=function(){this._subgraphs=null,this._seg=new Dh,this._cga=new hc;var t=arguments[0];this._subgraphs=t},of={DepthSegment:{configurable:!0}};rf.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new Tc,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(Mu(arguments[2],Sc)&&arguments[0]instanceof Cu&&arguments[1]instanceof hh)for(var a=arguments[0],s=arguments[1],u=arguments[2],c=s.getEdge().getCoordinates(),l=0;l<c.length-1;l++){t._seg.p0=c[l],t._seg.p1=c[l+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<a.x)&&!(t._seg.isHorizontal()||a.y<t._seg.p0.y||a.y>t._seg.p1.y||hc.computeOrientation(t._seg.p0,t._seg.p1,a)===hc.RIGHT)){var f=s.getDepth(Wl.LEFT);t._seg.p0.equals(c[l])||(f=s.getDepth(Wl.RIGHT));var p=new af(t._seg,f);u.add(p)}}else if(Mu(arguments[2],Sc)&&arguments[0]instanceof Cu&&Mu(arguments[1],Sc))for(var d=arguments[0],g=arguments[1],v=arguments[2],y=g.iterator();y.hasNext();){var m=y.next();m.isForward()&&t.findStabbedSegments(d,m,v)}},rf.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:xh.min(e)._leftDepth},rf.prototype.interfaces_=function(){return[]},rf.prototype.getClass=function(){return rf},of.DepthSegment.get=function(){return af},Object.defineProperties(rf,of);var af=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new Dh(t),this._leftDepth=e};af.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!==(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},af.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},af.prototype.toString=function(){return this._upwardSeg.toString()},af.prototype.interfaces_=function(){return[Ou]},af.prototype.getClass=function(){return af};var sf=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};sf.prototype.area=function(){return sf.area(this.p0,this.p1,this.p2)},sf.prototype.signedArea=function(){return sf.signedArea(this.p0,this.p1,this.p2)},sf.prototype.interpolateZ=function(t){if(null===t)throw new wu("Supplied point is null.");return sf.interpolateZ(t,this.p0,this.p1,this.p2)},sf.prototype.longestSideLength=function(){return sf.longestSideLength(this.p0,this.p1,this.p2)},sf.prototype.isAcute=function(){return sf.isAcute(this.p0,this.p1,this.p2)},sf.prototype.circumcentre=function(){return sf.circumcentre(this.p0,this.p1,this.p2)},sf.prototype.area3D=function(){return sf.area3D(this.p0,this.p1,this.p2)},sf.prototype.centroid=function(){return sf.centroid(this.p0,this.p1,this.p2)},sf.prototype.inCentre=function(){return sf.inCentre(this.p0,this.p1,this.p2)},sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},sf.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},sf.det=function(t,e,n,r){return t*r-e*n},sf.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,u=n.y-o,c=r.y-o,l=a*c-s*u,h=t.x-i,f=t.y-o,p=(c*h-s*f)/l,d=(-u*h+a*f)/l;return e.z+p*(n.z-e.z)+d*(r.z-e.z)},sf.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return i>a&&(a=i),o>a&&(a=o),a},sf.isAcute=function(t,e,n){return!!Jh.isAcute(t,e,n)&&!!Jh.isAcute(e,n,t)&&!!Jh.isAcute(n,t,e)},sf.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,u=e.y-i,c=2*sf.det(o,a,s,u),l=sf.det(a,o*o+a*a,u,s*s+u*u),h=sf.det(o,o*o+a*a,s,s*s+u*u);return new Cu(r-l/c,i+h/c)},sf.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Zu(t.x+n/2,t.y+r/2,1),o=new Zu(t.x-r+n/2,t.y+n+r/2,1);return new Zu(i,o)},sf.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new Cu(t.x+i*o,t.y+i*a)},sf.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,u=n.z-t.z,c=i*u-o*s,l=o*a-r*u,h=r*s-i*a,f=c*c+l*l+h*h;return Math.sqrt(f)/2},sf.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new Cu(r,i)},sf.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,u=(r*t.y+i*e.y+o*n.y)/a;return new Cu(s,u)};var uf=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Tc;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};uf.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Lu.EXTERIOR,Lu.INTERIOR)},uf.prototype.addPolygon=function(t){var e=this,n=this._distance,r=Wl.LEFT;this._distance<0&&(n=-this._distance,r=Wl.RIGHT);var i=t.getExteriorRing(),o=Lc.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,Lu.EXTERIOR,Lu.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var s=t.getInteriorRingN(a),u=Lc.removeRepeatedPoints(s.getCoordinates());e._distance>0&&e.isErodedCompletely(s,-e._distance)||e.addPolygonRing(u,n,Wl.opposite(r),Lu.INTERIOR,Lu.EXTERIOR)}},uf.prototype.isTriangleErodedCompletely=function(t,e){var n=new sf(t[0],t[1],t[2]),r=n.inCentre();return hc.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},uf.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Lc.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,Lu.EXTERIOR,Lu.INTERIOR)},uf.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Ah(t,new eh(0,Lu.BOUNDARY,e,n));this._curveList.add(r)},uf.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},uf.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<xl.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=xl.MINIMUM_VALID_SIZE&&hc.isCCW(t)&&(o=i,a=r,n=Wl.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},uf.prototype.add=function(t){if(t.isEmpty())return null;t instanceof bl?this.addPolygon(t):t instanceof vl?this.addLineString(t):t instanceof ml?this.addPoint(t):(t instanceof wl||t instanceof il||t instanceof El||t instanceof rl)&&this.addCollection(t)},uf.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},uf.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},uf.prototype.interfaces_=function(){return[]},uf.prototype.getClass=function(){return uf};var cf=function(){};cf.prototype.locate=function(t){},cf.prototype.interfaces_=function(){return[]},cf.prototype.getClass=function(){return cf};var lf=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};lf.prototype.next=function(){if(this._atStart)return this._atStart=!1,lf.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new Cc;var t=this._parent.getGeometryN(this._index++);return t instanceof rl?(this._subcollectionIterator=new lf(t),this._subcollectionIterator.next()):t},lf.prototype.remove=function(){throw new Error(this.getClass().getName())},lf.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},lf.prototype.interfaces_=function(){return[Ic]},lf.prototype.getClass=function(){return lf},lf.isAtomic=function(t){return!(t instanceof rl)};var hf=function(){this._geom=null;var t=arguments[0];this._geom=t};hf.prototype.locate=function(t){return hf.locate(t,this._geom)},hf.prototype.interfaces_=function(){return[cf]},hf.prototype.getClass=function(){return hf},hf.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&hc.isPointInRing(t,e.getCoordinates())},hf.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!hf.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(hf.isPointInRing(t,i))return!1}return!0},hf.containsPoint=function(t,e){if(e instanceof bl)return hf.containsPointInPolygon(t,e);if(e instanceof rl)for(var n=new lf(e);n.hasNext();){var r=n.next();if(r!==e&&hf.containsPoint(t,r))return!0}return!1},hf.locate=function(t,e){return e.isEmpty()?Lu.EXTERIOR:hf.containsPoint(t,e)?Lu.INTERIOR:Lu.EXTERIOR};var ff=function(){this._edgeMap=new Xc,this._edgeList=null,this._ptInAreaLocation=[Lu.NONE,Lu.NONE]};ff.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},ff.prototype.propagateSideLabels=function(t){for(var e=Lu.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Wl.LEFT)!==Lu.NONE&&(e=r.getLocation(t,Wl.LEFT))}if(e===Lu.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Wl.ON)===Lu.NONE&&s.setLocation(t,Wl.ON,i),s.isArea(t)){var u=s.getLocation(t,Wl.LEFT),c=s.getLocation(t,Wl.RIGHT);if(c!==Lu.NONE){if(c!==i)throw new Ql("side location conflict",a.getCoordinate());u===Lu.NONE&&oc.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=u}else oc.isTrue(s.getLocation(t,Wl.LEFT)===Lu.NONE,"found single null side"),s.setLocation(t,Wl.RIGHT,i),s.setLocation(t,Wl.LEFT,i)}}},ff.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},ff.prototype.print=function(t){Yu.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},ff.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},ff.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Wl.LEFT);oc.isTrue(r!==Lu.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();oc.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Wl.LEFT),u=a.getLocation(t,Wl.RIGHT);if(s===u)return!1;if(u!==i)return!1;i=s}return!0},ff.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},ff.prototype.iterator=function(){return this.getEdges().iterator()},ff.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Tc(this._edgeMap.values())),this._edgeList},ff.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===Lu.NONE&&(this._ptInAreaLocation[t]=hf.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},ff.prototype.toString=function(){var t=new Du;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},ff.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},ff.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===Lu.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a=o.next(),s=a.getLabel(),u=0;u<2;u++)if(s.isAnyNull(u)){var c=Lu.NONE;if(e[u])c=Lu.EXTERIOR;else{var l=a.getCoordinate();c=this.getLocation(u,l,t)}s.setAllLocationsIfNull(u,c)}},ff.prototype.getDegree=function(){return this._edgeMap.size()},ff.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},ff.prototype.interfaces_=function(){return[]},ff.prototype.getClass=function(){return ff};var pf=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),a=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!a.isInResult())continue;n=a,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new Ql("no outgoing dirEdge found",this.getCoordinate());oc.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return uh.isNorthern(i)&&uh.isNorthern(o)?n:uh.isNorthern(i)||uh.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(oc.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Yu.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Tc;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;n>=0;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(Wl.LEFT),i=e.getDepth(Wl.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r),a=this.computeDepths(0,n,o);if(a!==i)throw new Ql("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var s=arguments[0],u=arguments[1],c=arguments[2],l=c,h=s;h<u;h++){var f=t._edgeList.get(h);f.setEdgeDepths(Wl.RIGHT,l),l=f.getDepth(Wl.LEFT)}return l}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var a=e._resultAreaEdgeList.get(o),s=a.getSym();switch(null===n&&a.getEdgeRing()===t&&(n=a),i){case e._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;r=s,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(a.getEdgeRing()!==t)continue;r.setNextMin(a),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(oc.isTrue(null!==n,"found null for first outgoing dirEdge"),oc.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var a=o.next();a.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=Lu.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=Lu.INTERIOR;break}if(r.isInResult()){t=Lu.EXTERIOR;break}}}if(t===Lu.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===Lu.INTERIOR):(a.isInResult()&&(i=Lu.EXTERIOR),s.isInResult()&&(i=Lu.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new eh(Lu.NONE);for(var n=this.iterator();n.hasNext();)for(var r=n.next().getEdge().getLabel(),i=0;i<2;i++){var o=r.getLocation(i);o!==Lu.INTERIOR&&o!==Lu.BOUNDARY||this._label.setLocation(i,Lu.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ff),df=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ah(t,new pf)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(fh),gf=function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)};gf.prototype.compareTo=function(t){var e=t;return gf.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},gf.prototype.interfaces_=function(){return[Ou]},gf.prototype.getClass=function(){return gf},gf.orientation=function(t){return 1===Lc.increasingDirection(t)},gf.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;var h=(u+=i)===a,f=(c+=o)===s;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}};var vf=function(){this._edges=new Tc,this._ocaMap=new Xc};vf.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)i>0&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},vf.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},vf.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},vf.prototype.iterator=function(){return this._edges.iterator()},vf.prototype.getEdges=function(){return this._edges},vf.prototype.get=function(t){return this._edges.get(t)},vf.prototype.findEqualEdge=function(t){var e=new gf(t.getCoordinates());return this._ocaMap.get(e)},vf.prototype.add=function(t){this._edges.add(t);var e=new gf(t.getCoordinates());this._ocaMap.put(e,t)},vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf};var yf=function(){};yf.prototype.processIntersections=function(t,e,n,r){},yf.prototype.isDone=function(){},yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf};var mf=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};mf.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(mf.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},mf.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},mf.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},mf.prototype.getLineIntersector=function(){return this._li},mf.prototype.hasProperIntersection=function(){return this._hasProper},mf.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},mf.prototype.hasIntersection=function(){return this._hasIntersection},mf.prototype.isDone=function(){return!1},mf.prototype.hasInteriorIntersection=function(){return this._hasInterior},mf.prototype.interfaces_=function(){return[yf]},mf.prototype.getClass=function(){return mf},mf.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var _f=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new Cu(t),this.segmentIndex=e,this.dist=n};_f.prototype.getSegmentIndex=function(){return this.segmentIndex},_f.prototype.getCoordinate=function(){return this.coord},_f.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},_f.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},_f.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},_f.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},_f.prototype.getDistance=function(){return this.dist},_f.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},_f.prototype.interfaces_=function(){return[Ou]},_f.prototype.getClass=function(){return _f};var bf=function(){this._nodeMap=new Xc,this.edge=null;var t=arguments[0];this.edge=t};bf.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},bf.prototype.iterator=function(){return this._nodeMap.values().iterator()},bf.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},bf.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},bf.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=e.dist>0||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new Cu(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new kf(o,new eh(this.edge._label))},bf.prototype.add=function(t,e,n){var r=new _f(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},bf.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},bf.prototype.interfaces_=function(){return[]},bf.prototype.getClass=function(){return bf};var wf=function(){};wf.prototype.getChainStartIndices=function(t){var e=0,n=new Tc;n.add(new Fu(e));do{var r=this.findChainEnd(t,e);n.add(new Fu(r)),e=r}while(e<t.length-1);return wf.toIntArray(n)},wf.prototype.findChainEnd=function(t,e){for(var n=uh.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&uh.quadrant(t[r-1],t[r])===n;)r++;return r-1},wf.prototype.interfaces_=function(){return[]},wf.prototype.getClass=function(){return wf},wf.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var xf=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Ku,this.env2=new Ku;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new wf;this.startIndex=e.getChainStartIndices(this.pts)};xf.prototype.getCoordinates=function(){return this.pts},xf.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},xf.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},xf.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],h=this.pts[o],f=a.pts[s],p=a.pts[u];if(o-i==1&&u-s==1)return c.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(l,h),this.env2.init(f,p),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),g=Math.trunc((s+u)/2);i<d&&(s<g&&this.computeIntersectsForChain(i,d,a,s,g,c),g<u&&this.computeIntersectsForChain(i,d,a,g,u,c)),d<o&&(s<g&&this.computeIntersectsForChain(d,o,a,s,g,c),g<u&&this.computeIntersectsForChain(d,o,a,g,u,c))}},xf.prototype.getStartIndexes=function(){return this.startIndex},xf.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf};var Ef=function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Of={NULL_VALUE:{configurable:!0}};Ef.prototype.getDepth=function(t,e){return this._depth[t][e]},Ef.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Ef.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==Ef.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===Ef.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===Ef.NULL_VALUE}},Ef.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},Ef.prototype.getDelta=function(t){return this._depth[t][Wl.RIGHT]-this._depth[t][Wl.LEFT]},Ef.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?Lu.EXTERIOR:Lu.INTERIOR},Ef.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Ef.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==Lu.EXTERIOR&&i!==Lu.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=Ef.depthAtLocation(i):t._depth[n][r]+=Ef.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];s===Lu.INTERIOR&&this._depth[o][a]++}},Ef.prototype.interfaces_=function(){return[]},Ef.prototype.getClass=function(){return Ef},Ef.depthAtLocation=function(t){return t===Lu.EXTERIOR?0:t===Lu.INTERIOR?1:Ef.NULL_VALUE},Of.NULL_VALUE.get=function(){return-1},Object.defineProperties(Ef,Of);var kf=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new bf(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ef,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,eh.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.pts.length!==n.pts.length)return!1;for(var r=!0,i=!0,o=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(n.pts[a])||(r=!1),this.pts[a].equals2D(n.pts[--o])||(i=!1),!r&&!i)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new xf(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Ku;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new Cu(t.getIntersection(r)),o=e,a=t.getEdgeDistance(n,r),s=o+1;if(s<this.pts.length){var u=this.pts[s];i.equals2D(u)&&(o=s,a=0)}this.eiList.add(i,o,a)},e.prototype.toString=function(){var t=new Du;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,Wl.ON),e.getLocation(1,Wl.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,Wl.LEFT),e.getLocation(1,Wl.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,Wl.RIGHT),e.getLocation(1,Wl.RIGHT),2))},e}(oh),If=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new vf,this._bufParams=t||null};If.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},If.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new eh(t.getLabel())).flip(),n.merge(r);var i=If.depthDelta(r),o=e.getDepthDelta()+i;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(If.depthDelta(t.getLabel()))},If.prototype.buildSubgraphs=function(t,e){for(var n=new Tc,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new rf(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},If.prototype.createSubgraphs=function(t){for(var e=new Tc,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new $l;i.create(r),e.add(i)}}return xh.sort(e,xh.reverseOrder()),e},If.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},If.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Gh,n=new uc;return n.setPrecisionModel(t),e.setSegmentIntersector(new mf(n)),e},If.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new nf(n,this._bufParams),i=new uf(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new ph(new df),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new dh(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},If.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var a=i.getData(),s=new kf(i.getCoordinates(),new eh(a));this.insertUniqueEdge(s)}}},If.prototype.setNoder=function(t){this._workingNoder=t},If.prototype.interfaces_=function(){return[]},If.prototype.getClass=function(){return If},If.depthDelta=function(t){var e=t.getLocation(0,Wl.LEFT),n=t.getLocation(0,Wl.RIGHT);return e===Lu.INTERIOR&&n===Lu.EXTERIOR?1:e===Lu.EXTERIOR&&n===Lu.INTERIOR?-1:0},If.convertSegStrings=function(t){for(var e=new Fl,n=new Tc;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var Sf=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Sf.prototype.rescale=function(){var t=this;if(Mu(arguments[0],Oc))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Yu.out.println(i)}},Sf.prototype.scale=function(){var t=this;if(Mu(arguments[0],Oc)){for(var e=arguments[0],n=new Tc,r=e.iterator();r.hasNext();){var i=r.next();n.add(new Ah(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],a=new Array(o.length).fill(null),s=0;s<o.length;s++)a[s]=new Cu(Math.round((o[s].x-t._offsetX)*t._scaleFactor),Math.round((o[s].y-t._offsetY)*t._scaleFactor),o[s].z);var u=Lc.removeRepeatedPoints(a);return u}},Sf.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Sf.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Sf.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Sf.prototype.interfaces_=function(){return[Vh]},Sf.prototype.getClass=function(){return Sf};var Cf=function(){this._li=new uc,this._segStrings=null;var t=arguments[0];this._segStrings=t},Tf={fact:{configurable:!0}};Cf.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=o.iterator();a.hasNext();)for(var s=a.next(),u=s.getCoordinates(),c=1;c<u.length-1;c++)if(u[c].equals(i))throw new rc("found endpt/interior pt intersection at index "+c+" :pt "+i)},Cf.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],a=arguments[1],s=o.getCoordinates(),u=a.getCoordinates(),c=0;c<s.length-1;c++)for(var l=0;l<u.length-1;l++)t.checkInteriorIntersections(o,c,a,l);else if(4===arguments.length){var h=arguments[0],f=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&f===d)return null;var g=h.getCoordinates()[f],v=h.getCoordinates()[f+1],y=p.getCoordinates()[d],m=p.getCoordinates()[d+1];if(this._li.computeIntersection(g,v,y,m),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,g,v)||this.hasInteriorIntersection(this._li,y,m)))throw new rc("found non-noded intersection at "+g+"-"+v+" and "+y+"-"+m)}},Cf.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Cf.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},Cf.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Cf.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new rc("found non-noded collapse at "+Cf.fact.createLineString([t,e,n]))},Cf.prototype.interfaces_=function(){return[]},Cf.prototype.getClass=function(){return Cf},Tf.fact.get=function(){return new Fl},Object.defineProperties(Cf,Tf);var Nf=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new wu("Scale factor must be non-zero");1!==e&&(this._pt=new Cu(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new Cu,this._p1Scaled=new Cu),this.initCorners(this._pt)},Pf={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Nf.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return oc.isTrue(!(a&&s),"Found bad envelope test"),s},Nf.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new Cu(this._maxx,this._maxy),this._corner[1]=new Cu(this._minx,this._maxy),this._corner[2]=new Cu(this._minx,this._miny),this._corner[3]=new Cu(this._maxx,this._miny)},Nf.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Nf.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Nf.prototype.getCoordinate=function(){return this._originalPt},Nf.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Nf.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Nf.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Ku(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Nf.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},Nf.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||!(!n||!r)||!!t.equals(this._pt)||!!e.equals(this._pt))))},Nf.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Nf.prototype.interfaces_=function(){return[]},Nf.prototype.getClass=function(){return Nf},Pf.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Nf,Pf);var Lf=function(){this.tempEnv1=new Ku,this.selectedSegment=new Dh};Lf.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},Lf.prototype.interfaces_=function(){return[]},Lf.prototype.getClass=function(){return Lf};var jf=function(){this._index=null;var t=arguments[0];this._index=t},Mf={HotPixelSnapAction:{configurable:!0}};jf.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new Rf(e,n,r);return this._index.query(i,{interfaces_:function(){return[mh]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},jf.prototype.interfaces_=function(){return[]},jf.prototype.getClass=function(){return jf},Mf.HotPixelSnapAction.get=function(){return Rf},Object.defineProperties(jf,Mf);var Rf=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();if(null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(r,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Lf),Af=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new Tc};Af.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var u=0;u<this._li.getIntersectionNum();u++)this._interiorIntersections.add(this._li.getIntersection(u));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},Af.prototype.isDone=function(){return!1},Af.prototype.getInteriorIntersections=function(){return this._interiorIntersections},Af.prototype.interfaces_=function(){return[yf]},Af.prototype.getClass=function(){return Af};var Df=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new uc,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};Df.prototype.checkCorrectness=function(t){var e=Ah.getNodedSubstrings(t),n=new Cf(e);try{n.checkValid()}catch(t){if(!(t instanceof Wu))throw t;t.printStackTrace()}},Df.prototype.getNodedSubstrings=function(){return Ah.getNodedSubstrings(this._nodedSegStrings)},Df.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},Df.prototype.findInteriorIntersections=function(t,e){var n=new Af(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},Df.prototype.computeVertexSnaps=function(){var t=this;if(Mu(arguments[0],Oc))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof Ah)for(var i=arguments[0],o=i.getCoordinates(),a=0;a<o.length;a++){var s=new Nf(o[a],t._scaleFactor,t._li),u=t._pointSnapper.snap(s,i,a);u&&i.addIntersection(o[a],a)}},Df.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Gh,this._pointSnapper=new jf(this._noder.getIndex()),this.snapRound(t,this._li)},Df.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new Nf(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},Df.prototype.interfaces_=function(){return[Vh]},Df.prototype.getClass=function(){return Df};var Ff=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new Wh,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},zf={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};Ff.prototype.bufferFixedPrecision=function(t){var e=new Sf(new Df(new Ml(1)),t.getScale()),n=new If(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},Ff.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=Ff.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Ql))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var n=arguments[0],r=Ff.precisionScaleFactor(this._argGeom,this._distance,n),i=new Ml(r);this.bufferFixedPrecision(i)}},Ff.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===Ml.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},Ff.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},Ff.prototype.bufferOriginalPrecision=function(){try{var t=new If(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof rc))throw t;this._saveException=t}},Ff.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},Ff.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},Ff.prototype.interfaces_=function(){return[]},Ff.prototype.getClass=function(){return Ff},Ff.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ff(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof dc&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],a=arguments[2],s=new Ff(i);s.setQuadrantSegments(a);var u=s.getResultGeometry(o);return u}if(arguments[2]instanceof Wh&&arguments[0]instanceof dc&&"number"==typeof arguments[1]){var c=arguments[0],l=arguments[1],h=arguments[2],f=new Ff(c,h),p=f.getResultGeometry(l);return p}}else if(4===arguments.length){var d=arguments[0],g=arguments[1],v=arguments[2],y=arguments[3],m=new Ff(d);m.setQuadrantSegments(v),m.setEndCapStyle(y);var _=m.getResultGeometry(g);return _}},Ff.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=Ru.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},zf.CAP_ROUND.get=function(){return Wh.CAP_ROUND},zf.CAP_BUTT.get=function(){return Wh.CAP_FLAT},zf.CAP_FLAT.get=function(){return Wh.CAP_FLAT},zf.CAP_SQUARE.get=function(){return Wh.CAP_SQUARE},zf.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(Ff,zf);var Bf=function(){this._pt=[new Cu,new Cu],this._distance=xu.NaN,this._isNull=!0};Bf.prototype.getCoordinates=function(){return this._pt},Bf.prototype.getCoordinate=function(t){return this._pt[t]},Bf.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Bf.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},Bf.prototype.getDistance=function(){return this._distance},Bf.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Bf.prototype.interfaces_=function(){return[]},Bf.prototype.getClass=function(){return Bf};var Uf=function(){};Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.computeDistance=function(){if(arguments[2]instanceof Bf&&arguments[0]instanceof vl&&arguments[1]instanceof Cu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new Dh,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var a=i.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Bf&&arguments[0]instanceof bl&&arguments[1]instanceof Cu){var s=arguments[0],u=arguments[1],c=arguments[2];Uf.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)Uf.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof Bf&&arguments[0]instanceof dc&&arguments[1]instanceof Cu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof vl)Uf.computeDistance(h,f,p);else if(h instanceof bl)Uf.computeDistance(h,f,p);else if(h instanceof rl)for(var d=h,g=0;g<d.getNumGeometries();g++){var v=d.getGeometryN(g);Uf.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof Bf&&arguments[0]instanceof Dh&&arguments[1]instanceof Cu){var y=arguments[0],m=arguments[1],_=arguments[2],b=y.closestPoint(m);_.setMinimum(b,m)}};var Vf=function(t){this._maxPtDist=new Bf,this._inputGeom=t||null},qf={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};Vf.prototype.computeMaxMidpointDistance=function(t){var e=new Hf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Vf.prototype.computeMaxVertexDistance=function(t){var e=new Gf(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},Vf.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},Vf.prototype.getDistancePoints=function(){return this._maxPtDist},Vf.prototype.interfaces_=function(){return[]},Vf.prototype.getClass=function(){return Vf},qf.MaxPointDistanceFilter.get=function(){return Gf},qf.MaxMidpointDistanceFilter.get=function(){return Hf},Object.defineProperties(Vf,qf);var Gf=function(t){this._maxPtDist=new Bf,this._minPtDist=new Bf,this._geom=t||null};Gf.prototype.filter=function(t){this._minPtDist.initialize(),Uf.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Gf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Gf.prototype.interfaces_=function(){return[yc]},Gf.prototype.getClass=function(){return Gf};var Hf=function(t){this._maxPtDist=new Bf,this._minPtDist=new Bf,this._geom=t||null};Hf.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new Cu((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),Uf.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Hf.prototype.isDone=function(){return!1},Hf.prototype.isGeometryChanged=function(){return!1},Hf.prototype.getMaxPointDistance=function(){return this._maxPtDist},Hf.prototype.interfaces_=function(){return[nl]},Hf.prototype.getClass=function(){return Hf};var Wf=function(t){this._comps=t||null};Wf.prototype.filter=function(t){t instanceof bl&&this._comps.add(t)},Wf.prototype.interfaces_=function(){return[el]},Wf.prototype.getClass=function(){return Wf},Wf.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return Wf.getPolygons(t,new Tc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof bl?n.add(e):e instanceof rl&&e.apply(new Wf(n)),n}};var Xf=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};Xf.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof xl){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof vl&&this._lines.add(t)},Xf.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},Xf.prototype.interfaces_=function(){return[pc]},Xf.prototype.getClass=function(){return Xf},Xf.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(Xf.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(Xf.getLines(e,n))}},Xf.getLines=function(){if(1===arguments.length){var t=arguments[0];return Xf.getLines(t,!1)}if(2===arguments.length){if(Mu(arguments[0],Oc)&&Mu(arguments[1],Oc)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();Xf.getLines(i,n)}return n}if(arguments[0]instanceof dc&&"boolean"==typeof arguments[1]){var o=arguments[0],a=arguments[1],s=new Tc;return o.apply(new Xf(s,a)),s}if(arguments[0]instanceof dc&&Mu(arguments[1],Oc)){var u=arguments[0],c=arguments[1];return u instanceof vl?c.add(u):u.apply(new Xf(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&Mu(arguments[0],Oc)&&Mu(arguments[1],Oc)){for(var l=arguments[0],h=arguments[1],f=arguments[2],p=l.iterator();p.hasNext();){var d=p.next();Xf.getLines(d,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof dc&&Mu(arguments[1],Oc)){var g=arguments[0],v=arguments[1],y=arguments[2];return g.apply(new Xf(v,y)),v}}};var Yf=function(){if(this._boundaryRule=mc.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new wu("Rule must be non-null");this._boundaryRule=t}};Yf.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof Cu&&arguments[1]instanceof bl){var e=arguments[0],n=arguments[1];if(n.isEmpty())return Lu.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===Lu.EXTERIOR)return Lu.EXTERIOR;if(i===Lu.BOUNDARY)return Lu.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var a=n.getInteriorRingN(o),s=t.locateInPolygonRing(e,a);if(s===Lu.INTERIOR)return Lu.EXTERIOR;if(s===Lu.BOUNDARY)return Lu.BOUNDARY}return Lu.INTERIOR}if(arguments[0]instanceof Cu&&arguments[1]instanceof vl){var u=arguments[0],c=arguments[1];if(!c.getEnvelopeInternal().intersects(u))return Lu.EXTERIOR;var l=c.getCoordinates();return c.isClosed()||!u.equals(l[0])&&!u.equals(l[l.length-1])?hc.isOnLine(u,l)?Lu.INTERIOR:Lu.EXTERIOR:Lu.BOUNDARY}if(arguments[0]instanceof Cu&&arguments[1]instanceof ml){var h=arguments[0],f=arguments[1],p=f.getCoordinate();return p.equals2D(h)?Lu.INTERIOR:Lu.EXTERIOR}},Yf.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?hc.locatePointInRing(t,e.getCoordinates()):Lu.EXTERIOR},Yf.prototype.intersects=function(t,e){return this.locate(t,e)!==Lu.EXTERIOR},Yf.prototype.updateLocationInfo=function(t){t===Lu.INTERIOR&&(this._isIn=!0),t===Lu.BOUNDARY&&this._numBoundaries++},Yf.prototype.computeLocation=function(t,e){var n=this;if(e instanceof ml&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof vl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof bl)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof il)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof El)for(var a=e,s=0;s<a.getNumGeometries();s++){var u=a.getGeometryN(s);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof rl)for(var c=new lf(e);c.hasNext();){var l=c.next();l!==e&&n.computeLocation(t,l)}},Yf.prototype.locate=function(t,e){return e.isEmpty()?Lu.EXTERIOR:e instanceof vl||e instanceof bl?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?Lu.BOUNDARY:this._numBoundaries>0||this._isIn?Lu.INTERIOR:Lu.EXTERIOR)},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf};var Zf=function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],n=arguments[1];t.call(this,e,t.INSIDE_AREA,n)}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._component=r,this._segIndex=i,this._pt=o}},Kf={INSIDE_AREA:{configurable:!0}};Zf.prototype.isInsideArea=function(){return this._segIndex===Zf.INSIDE_AREA},Zf.prototype.getCoordinate=function(){return this._pt},Zf.prototype.getGeometryComponent=function(){return this._component},Zf.prototype.getSegmentIndex=function(){return this._segIndex},Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Kf.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Zf,Kf);var Qf=function(t){this._pts=t||null};Qf.prototype.filter=function(t){t instanceof ml&&this._pts.add(t)},Qf.prototype.interfaces_=function(){return[el]},Qf.prototype.getClass=function(){return Qf},Qf.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof ml?xh.singletonList(t):Qf.getPoints(t,new Tc)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof ml?n.add(e):e instanceof rl&&e.apply(new Qf(n)),n}};var Jf=function(){this._locations=null;var t=arguments[0];this._locations=t};Jf.prototype.filter=function(t){(t instanceof ml||t instanceof vl||t instanceof bl)&&this._locations.add(new Zf(t,0,t.getCoordinate()))},Jf.prototype.interfaces_=function(){return[el]},Jf.prototype.getClass=function(){return Jf},Jf.getLocations=function(t){var e=new Tc;return t.apply(new Jf(e)),e};var $f=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Yf,this._minDistanceLocation=null,this._minDistance=xu.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};$f.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=Wf.getPolygons(this._geom[n]);if(o.size()>0){var a=Jf.getLocations(this._geom[i]);if(this.computeContainmentDistance(a,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&Mu(arguments[0],Sc)&&Mu(arguments[1],Sc)){for(var s=arguments[0],u=arguments[1],c=arguments[2],l=0;l<s.size();l++)for(var h=s.get(l),f=0;f<u.size();f++)if(t.computeContainmentDistance(h,u.get(f),c),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zf&&arguments[1]instanceof bl){var p=arguments[0],d=arguments[1],g=arguments[2],v=p.getCoordinate();if(Lu.EXTERIOR!==this._ptLocator.locate(v,d))return this._minDistance=0,g[0]=p,g[1]=new Zf(d,v),null}},$f.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},$f.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=Xf.getLines(this._geom[0]),n=Xf.getLines(this._geom[1]),r=Qf.getPoints(this._geom[0]),i=Qf.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},$f.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},$f.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},$f.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},$f.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof vl&&arguments[1]instanceof ml){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),a=0;a<i.length-1;a++){var s=hc.distancePointLine(o,i[a],i[a+1]);if(s<t._minDistance){t._minDistance=s;var u=new Dh(i[a],i[a+1]),c=u.closestPoint(o);r[0]=new Zf(e,a,c),r[1]=new Zf(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof vl&&arguments[1]instanceof vl){var l=arguments[0],h=arguments[1],f=arguments[2];if(l.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var p=l.getCoordinates(),d=h.getCoordinates(),g=0;g<p.length-1;g++)for(var v=0;v<d.length-1;v++){var y=hc.distanceLineLine(p[g],p[g+1],d[v],d[v+1]);if(y<t._minDistance){t._minDistance=y;var m=new Dh(p[g],p[g+1]),_=new Dh(d[v],d[v+1]),b=m.closestPoints(_);f[0]=new Zf(l,g,b[0]),f[1]=new Zf(h,v,b[1])}if(t._minDistance<=t._terminateDistance)return null}}},$f.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a),u=o.getCoordinate().distance(s.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new Zf(o,0,o.getCoordinate()),n[1]=new Zf(s,0,s.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},$f.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new wu("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},$f.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),a=0;a<e.size();a++){var s=e.get(a);if(r.computeMinDistance(o,s,n),r._minDistance<=r._terminateDistance)return null}},$f.prototype.interfaces_=function(){return[]},$f.prototype.getClass=function(){return $f},$f.distance=function(t,e){return new $f(t,e).distance()},$f.isWithinDistance=function(t,e,n){return new $f(t,e,n).distance()<=n},$f.nearestPoints=function(t,e){return new $f(t,e).nearestPoints()};var tp=function(){this._pt=[new Cu,new Cu],this._distance=xu.NaN,this._isNull=!0};tp.prototype.getCoordinates=function(){return this._pt},tp.prototype.getCoordinate=function(t){return this._pt[t]},tp.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},tp.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},tp.prototype.toString=function(){return nc.toLineString(this._pt[0],this._pt[1])},tp.prototype.getDistance=function(){return this._distance},tp.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},tp.prototype.interfaces_=function(){return[]},tp.prototype.getClass=function(){return tp};var ep=function(){};ep.prototype.interfaces_=function(){return[]},ep.prototype.getClass=function(){return ep},ep.computeDistance=function(){if(arguments[2]instanceof tp&&arguments[0]instanceof vl&&arguments[1]instanceof Cu)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Dh,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof tp&&arguments[0]instanceof bl&&arguments[1]instanceof Cu){var s=arguments[0],u=arguments[1],c=arguments[2];ep.computeDistance(s.getExteriorRing(),u,c);for(var l=0;l<s.getNumInteriorRing();l++)ep.computeDistance(s.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof tp&&arguments[0]instanceof dc&&arguments[1]instanceof Cu){var h=arguments[0],f=arguments[1],p=arguments[2];if(h instanceof vl)ep.computeDistance(h,f,p);else if(h instanceof bl)ep.computeDistance(h,f,p);else if(h instanceof rl)for(var d=h,g=0;g<d.getNumGeometries();g++){var v=d.getGeometryN(g);ep.computeDistance(v,f,p)}else p.setMinimum(h.getCoordinate(),f)}else if(arguments[2]instanceof tp&&arguments[0]instanceof Dh&&arguments[1]instanceof Cu){var y=arguments[0],m=arguments[1],_=arguments[2],b=y.closestPoint(m);_.setMinimum(b,m)}};var np=function(){this._g0=null,this._g1=null,this._ptDist=new tp,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},rp={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};np.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},np.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new wu("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},np.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},np.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},np.prototype.computeOrientedDistance=function(t,e,n){var r=new ip(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new op(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},np.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},np.prototype.interfaces_=function(){return[]},np.prototype.getClass=function(){return np},np.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new np(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new np(r,i);return a.setDensifyFraction(o),a.distance()}},rp.MaxPointDistanceFilter.get=function(){return ip},rp.MaxDensifiedByFractionDistanceFilter.get=function(){return op},Object.defineProperties(np,rp);var ip=function(){this._maxPtDist=new tp,this._minPtDist=new tp,this._euclideanDist=new ep,this._geom=null;var t=arguments[0];this._geom=t};ip.prototype.filter=function(t){this._minPtDist.initialize(),ep.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},ip.prototype.getMaxPointDistance=function(){return this._maxPtDist},ip.prototype.interfaces_=function(){return[yc]},ip.prototype.getClass=function(){return ip};var op=function(){this._maxPtDist=new tp,this._minPtDist=new tp,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};op.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,a=(i.y-r.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var u=r.x+s*o,c=r.y+s*a,l=new Cu(u,c);n._minPtDist.initialize(),ep.computeDistance(n._geom,l,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},op.prototype.isDone=function(){return!1},op.prototype.isGeometryChanged=function(){return!1},op.prototype.getMaxPointDistance=function(){return this._maxPtDist},op.prototype.interfaces_=function(){return[nl]},op.prototype.getClass=function(){return op};var ap=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},sp={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};ap.prototype.checkMaximumDistance=function(t,e,n){var r=new np(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+nc.toLineString(i[0],i[1])+")"}},ap.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=ap.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),ap.VERBOSE&&Yu.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},ap.prototype.checkNegativeValid=function(){if(!(this._input instanceof bl||this._input instanceof El||this._input instanceof rl))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},ap.prototype.getErrorIndicator=function(){return this._errorIndicator},ap.prototype.checkMinimumDistance=function(t,e,n){var r=new $f(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+nc.toLineString(i[0],i[1])+" )"}},ap.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},ap.prototype.getErrorLocation=function(){return this._errorLocation},ap.prototype.getPolygonLines=function(t){for(var e=new Tc,n=new Xf(e),r=Wf.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},ap.prototype.getErrorMessage=function(){return this._errMsg},ap.prototype.interfaces_=function(){return[]},ap.prototype.getClass=function(){return ap},sp.VERBOSE.get=function(){return!1},sp.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(ap,sp);var up=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},cp={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};up.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},up.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*up.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Ku(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Ku(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},up.prototype.checkDistance=function(){var t=new ap(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},up.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},up.prototype.checkPolygonal=function(){this._result instanceof bl||this._result instanceof El||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},up.prototype.getErrorIndicator=function(){return this._errorIndicator},up.prototype.getErrorLocation=function(){return this._errorLocation},up.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},up.prototype.report=function(t){if(!up.VERBOSE)return null;Yu.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},up.prototype.getErrorMessage=function(){return this._errorMsg},up.prototype.interfaces_=function(){return[]},up.prototype.getClass=function(){return up},up.isValidMsg=function(t,e,n){var r=new up(t,e,n);return r.isValid()?null:r.getErrorMessage()},up.isValid=function(t,e,n){return!!new up(t,e,n).isValid()},cp.VERBOSE.get=function(){return!1},cp.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(up,cp);var lp=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};lp.prototype.getCoordinates=function(){return this._pts},lp.prototype.size=function(){return this._pts.length},lp.prototype.getCoordinate=function(t){return this._pts[t]},lp.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},lp.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:jh.octant(this.getCoordinate(t),this.getCoordinate(t+1))},lp.prototype.setData=function(t){this._data=t},lp.prototype.getData=function(){return this._data},lp.prototype.toString=function(){return nc.toLineString(new Tl(this._pts))},lp.prototype.interfaces_=function(){return[Mh]},lp.prototype.getClass=function(){return lp};var hp=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Tc,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};hp.prototype.getInteriorIntersection=function(){return this._interiorIntersection},hp.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},hp.prototype.getIntersectionSegments=function(){return this._intSegments},hp.prototype.count=function(){return this._intersectionCount},hp.prototype.getIntersections=function(){return this._intersections},hp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},hp.prototype.setKeepIntersections=function(t){this._keepIntersections=t},hp.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},hp.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},hp.prototype.hasIntersection=function(){return null!==this._interiorIntersection},hp.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},hp.prototype.interfaces_=function(){return[yf]},hp.prototype.getClass=function(){return hp},hp.createAllIntersectionsFinder=function(t){var e=new hp(t);return e.setFindAllIntersections(!0),e},hp.createAnyIntersectionFinder=function(t){return new hp(t)},hp.createIntersectionCounter=function(t){var e=new hp(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var fp=function(){this._li=new uc,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};fp.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},fp.prototype.getIntersections=function(){return this._segInt.getIntersections()},fp.prototype.isValid=function(){return this.execute(),this._isValid},fp.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},fp.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new hp(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Gh;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},fp.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Ql(this.getErrorMessage(),this._segInt.getInteriorIntersection())},fp.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+nc.toLineString(t[0],t[1])+" and "+nc.toLineString(t[2],t[3])},fp.prototype.interfaces_=function(){return[]},fp.prototype.getClass=function(){return fp},fp.computeIntersections=function(t){var e=new fp(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var pp=function t(){this._nv=null;var e=arguments[0];this._nv=new fp(t.toSegmentStrings(e))};pp.prototype.checkValid=function(){this._nv.checkValid()},pp.prototype.interfaces_=function(){return[]},pp.prototype.getClass=function(){return pp},pp.toSegmentStrings=function(t){for(var e=new Tc,n=t.iterator();n.hasNext();){var r=n.next();e.add(new lp(r.getCoordinates(),r))}return e},pp.checkValid=function(t){new pp(t).checkValid()};var dp=function(t){this._mapOp=t};dp.prototype.map=function(t){for(var e=new Tc,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(Fl.toGeometryArray(e))},dp.prototype.interfaces_=function(){return[]},dp.prototype.getClass=function(){return dp},dp.map=function(t,e){return new dp(e).map(t)};var gp=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Tc,this._resultLineList=new Tc;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};gp.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},gp.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},gp.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},gp.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Zp.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},gp.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getEdge();if(n.isLineEdge()&&!r.isCoveredSet()){var i=this._op.isCoveredByA(n.getCoordinate());r.setCovered(i)}}},gp.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},gp.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},gp.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(oc.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Zp.isResultOfOp(r,e)&&e===Zp.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},gp.prototype.interfaces_=function(){return[]},gp.prototype.getClass=function(){return gp};var vp=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new Tc;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};vp.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},vp.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!n.isInResult()&&!n.isIncidentEdgeInResult()&&(0===n.getEdges().getDegree()||t===Zp.INTERSECTION)){var r=n.getLabel();Zp.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},vp.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},vp.prototype.interfaces_=function(){return[]},vp.prototype.getClass=function(){return vp};var yp=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};yp.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},yp.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof xl&&!r.isEmpty()||(n=!1);for(var i=new Tc,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof xl||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Tc;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},yp.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},yp.prototype.getInputGeometry=function(){return this._inputGeom},yp.prototype.transformMultiLineString=function(t,e){for(var n=new Tc,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},yp.prototype.transformCoordinates=function(t,e){return this.copy(t)},yp.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},yp.prototype.transformMultiPoint=function(t,e){for(var n=new Tc,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},yp.prototype.transformMultiPolygon=function(t,e){for(var n=new Tc,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},yp.prototype.copy=function(t){return t.copy()},yp.prototype.transformGeometryCollection=function(t,e){for(var n=new Tc,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(Fl.toGeometryArray(n)):this._factory.buildGeometry(n)},yp.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof ml)return this.transformPoint(t,null);if(t instanceof wl)return this.transformMultiPoint(t,null);if(t instanceof xl)return this.transformLinearRing(t,null);if(t instanceof vl)return this.transformLineString(t,null);if(t instanceof il)return this.transformMultiLineString(t,null);if(t instanceof bl)return this.transformPolygon(t,null);if(t instanceof El)return this.transformMultiPolygon(t,null);if(t instanceof rl)return this.transformGeometryCollection(t,null);throw new wu("Unknown Geometry subtype: "+t.getClass().getName())},yp.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},yp.prototype.interfaces_=function(){return[]},yp.prototype.getClass=function(){return yp};var mp=function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new Dh,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof vl&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];t.call(this,e.getCoordinates(),n)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var r=arguments[0],i=arguments[1];this._srcPts=r,this._isClosed=t.isClosed(r),this._snapTolerance=i}};mp.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new Cu(o)),0===r&&this._isClosed&&t.set(t.size()-1,new Cu(o)))}},mp.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},mp.prototype.snapTo=function(t){var e=new Pc(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},mp.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);o>=0&&t.add(o+1,new Cu(i),!1)}},mp.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=xu.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var a=n._seg.distance(t);a<n._snapTolerance&&a<r&&(r=a,i=o)}return i},mp.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},mp.prototype.interfaces_=function(){return[]},mp.prototype.getClass=function(){return mp},mp.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var _p=function(t){this._srcGeom=t||null},bp={SNAP_PRECISION_FACTOR:{configurable:!0}};_p.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new wp(e,n).transform(this._srcGeom)},_p.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new wp(t,n,!0).transform(this._srcGeom),i=r;return e&&Mu(i,_l)&&(i=r.buffer(0)),i},_p.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},_p.prototype.extractTargetCoordinates=function(t){for(var e=new Kc,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},_p.prototype.computeMinimumSegmentLength=function(t){for(var e=xu.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},_p.prototype.interfaces_=function(){return[]},_p.prototype.getClass=function(){return _p},_p.snap=function(t,e,n){var r=new Array(2).fill(null),i=new _p(t);r[0]=i.snapTo(e,n);var o=new _p(e);return r[1]=o.snapTo(r[0],n),r},_p.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=_p.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Ml.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(_p.computeOverlaySnapTolerance(i),_p.computeOverlaySnapTolerance(o))}},_p.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*_p.SNAP_PRECISION_FACTOR},_p.snapToSelf=function(t,e,n){return new _p(t).snapToSelf(e,n)},bp.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(_p,bp);var wp=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new mp(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(yp),xp=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};xp.prototype.getCommon=function(){return xu.longBitsToDouble(this._commonBits)},xp.prototype.add=function(t){var e=xu.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=xp.signExpBits(this._commonBits),this._isFirst=!1,null):xp.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=xp.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=xp.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},xp.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=xu.longBitsToDouble(t),n=xu.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},xp.prototype.interfaces_=function(){return[]},xp.prototype.getClass=function(){return xp},xp.getBit=function(t,e){return 0!=(t&1<<e)?1:0},xp.signExpBits=function(t){return t>>52},xp.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},xp.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(xp.getBit(t,r)!==xp.getBit(e,r))return n;n++}return 52};var Ep=function(){this._commonCoord=null,this._ccFilter=new kp},Op={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Ep.prototype.addCommonBits=function(t){var e=new Ip(this._commonCoord);t.apply(e),t.geometryChanged()},Ep.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new Cu(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Ip(e);return t.apply(n),t.geometryChanged(),t},Ep.prototype.getCommonCoordinate=function(){return this._commonCoord},Ep.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Ep.prototype.interfaces_=function(){return[]},Ep.prototype.getClass=function(){return Ep},Op.CommonCoordinateFilter.get=function(){return kp},Op.Translater.get=function(){return Ip},Object.defineProperties(Ep,Op);var kp=function(){this._commonBitsX=new xp,this._commonBitsY=new xp};kp.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},kp.prototype.getCommonCoordinate=function(){return new Cu(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},kp.prototype.interfaces_=function(){return[yc]},kp.prototype.getClass=function(){return kp};var Ip=function(){this.trans=null;var t=arguments[0];this.trans=t};Ip.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Ip.prototype.isDone=function(){return!1},Ip.prototype.isGeometryChanged=function(){return!0},Ip.prototype.interfaces_=function(){return[nl]},Ip.prototype.getClass=function(){return Ip};var Sp=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Sp.prototype.selfSnap=function(t){return new _p(t).snapTo(t,this._snapTolerance)},Sp.prototype.removeCommonBits=function(t){this._cbr=new Ep,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Sp.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Sp.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Zp.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Sp.prototype.checkValid=function(t){t.isValid()||Yu.out.println("Snapped geometry is invalid")},Sp.prototype.computeSnapTolerance=function(){this._snapTolerance=_p.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Sp.prototype.snap=function(t){var e=this.removeCommonBits(t);return _p.snap(e[0],e[1],this._snapTolerance)},Sp.prototype.interfaces_=function(){return[]},Sp.prototype.getClass=function(){return Sp},Sp.overlayOp=function(t,e,n){return new Sp(t,e).getResultGeometry(n)},Sp.union=function(t,e){return Sp.overlayOp(t,e,Zp.UNION)},Sp.intersection=function(t,e){return Sp.overlayOp(t,e,Zp.INTERSECTION)},Sp.symDifference=function(t,e){return Sp.overlayOp(t,e,Zp.SYMDIFFERENCE)},Sp.difference=function(t,e){return Sp.overlayOp(t,e,Zp.DIFFERENCE)};var Cp=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Cp.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Zp.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof rc))throw t;r=t}if(!n)try{e=Sp.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof rc?r:t}return e},Cp.prototype.interfaces_=function(){return[]},Cp.prototype.getClass=function(){return Cp},Cp.overlayOp=function(t,e,n){return new Cp(t,e).getResultGeometry(n)},Cp.union=function(t,e){return Cp.overlayOp(t,e,Zp.UNION)},Cp.intersection=function(t,e){return Cp.overlayOp(t,e,Zp.INTERSECTION)},Cp.symDifference=function(t,e){return Cp.overlayOp(t,e,Zp.SYMDIFFERENCE)},Cp.difference=function(t,e){return Cp.overlayOp(t,e,Zp.DIFFERENCE)};var Tp=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Tp.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Tp.prototype.interfaces_=function(){return[]},Tp.prototype.getClass=function(){return Tp};var Np=function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],n=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=n}else if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=r,this._xValue=i,this._obj=o}},Pp={INSERT:{configurable:!0},DELETE:{configurable:!0}};Np.prototype.isDelete=function(){return this._eventType===Np.DELETE},Np.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Np.prototype.getObject=function(){return this._obj},Np.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Np.prototype.getInsertEvent=function(){return this._insertEvent},Np.prototype.isInsert=function(){return this._eventType===Np.INSERT},Np.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Np.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Np.prototype.interfaces_=function(){return[Ou]},Np.prototype.getClass=function(){return Np},Pp.INSERT.get=function(){return 1},Pp.DELETE.get=function(){return 2},Object.defineProperties(Np,Pp);var Lp=function(){};Lp.prototype.interfaces_=function(){return[]},Lp.prototype.getClass=function(){return Lp};var jp=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};jp.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(jp.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},jp.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},jp.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},jp.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},jp.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},jp.prototype.hasProperIntersection=function(){return this._hasProper},jp.prototype.hasIntersection=function(){return this._hasIntersection},jp.prototype.isDone=function(){return this._isDone},jp.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},jp.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},jp.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},jp.prototype.interfaces_=function(){return[]},jp.prototype.getClass=function(){return jp},jp.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Mp=function(t){function e(){t.call(this),this.events=new Tc,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){xh.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof jp&&Mu(arguments[0],Sc)&&Mu(arguments[1],Sc)){var i=arguments[0],o=arguments[1],a=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(a)}else if("boolean"==typeof arguments[2]&&Mu(arguments[0],Sc)&&arguments[1]instanceof jp){var s=arguments[0],u=arguments[1],c=arguments[2];c?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new Tp(n,i),a=new Np(e,n.getMinX(i),o);this.events.add(a),this.events.add(new Np(n.getMaxX(i),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a=this.events.get(o);if(a.isInsert()){var s=a.getObject();n.isSameLabel(a)||(i.computeIntersections(s,r),this.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.iterator();a.hasNext();){var s=a.next();t.addEdge(s,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Lp),Rp=function(){this._min=xu.POSITIVE_INFINITY,this._max=xu.NEGATIVE_INFINITY},Ap={NodeComparator:{configurable:!0}};Rp.prototype.getMin=function(){return this._min},Rp.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},Rp.prototype.getMax=function(){return this._max},Rp.prototype.toString=function(){return nc.toLineString(new Cu(this._min,0),new Cu(this._max,0))},Rp.prototype.interfaces_=function(){return[]},Rp.prototype.getClass=function(){return Rp},Ap.NodeComparator.get=function(){return Dp},Object.defineProperties(Rp,Ap);var Dp=function(){};Dp.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},Dp.prototype.interfaces_=function(){return[Iu]},Dp.prototype.getClass=function(){return Dp};var Fp=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rp),zp=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Rp),Bp=function(){this._leaves=new Tc,this._root=null,this._level=0};Bp.prototype.buildTree=function(){xh.sort(this._leaves,new Rp.NodeComparator);for(var t=this._leaves,e=null,n=new Tc;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},Bp.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new Fp(t,e,n))},Bp.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},Bp.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},Bp.prototype.printNode=function(t){Yu.out.println(nc.toLineString(new Cu(t._min,this._level),new Cu(t._max,this._level)))},Bp.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},Bp.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(r);else{var i=new zp(t.get(n),t.get(n+1));e.add(i)}}},Bp.prototype.interfaces_=function(){return[]},Bp.prototype.getClass=function(){return Bp};var Up=function(){this._items=new Tc};Up.prototype.visitItem=function(t){this._items.add(t)},Up.prototype.getItems=function(){return this._items},Up.prototype.interfaces_=function(){return[mh]},Up.prototype.getClass=function(){return Up};var Vp=function(){this._index=null;var t=arguments[0];if(!Mu(t,_l))throw new wu("Argument must be Polygonal");this._index=new Hp(t)},qp={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};Vp.prototype.locate=function(t){var e=new lc(t),n=new Gp(e);return this._index.query(t.y,t.y,n),e.getLocation()},Vp.prototype.interfaces_=function(){return[cf]},Vp.prototype.getClass=function(){return Vp},qp.SegmentVisitor.get=function(){return Gp},qp.IntervalIndexedGeometry.get=function(){return Hp},Object.defineProperties(Vp,qp);var Gp=function(){this._counter=null;var t=arguments[0];this._counter=t};Gp.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Gp.prototype.interfaces_=function(){return[mh]},Gp.prototype.getClass=function(){return Gp};var Hp=function(){this._index=new Bp;var t=arguments[0];this.init(t)};Hp.prototype.init=function(t){for(var e=Xf.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Hp.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Dh(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Hp.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Up;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},Hp.prototype.interfaces_=function(){return[]},Hp.prototype.getClass=function(){return Hp};var Wp=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new jl,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Yf,2===arguments.length){var e=arguments[0],n=arguments[1],r=mc.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=a,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n).getLabel(),i=1;r.getLocation(t,Wl.ON)===Lu.BOUNDARY&&i++;var o=e.determineBoundary(this._boundaryNodeRule,i);r.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new jp(n,!0,!1);o.setIsDoneIfProperInt(i);var a=this.createEdgeSetIntersector(),s=this._parentGeom instanceof xl||this._parentGeom instanceof bl||this._parentGeom instanceof El,u=r||!s;return a.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new jp(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof ml){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,Lu.INTERIOR)}else if(arguments[0]instanceof Cu){var n=arguments[0];this.insertPoint(this._argIndex,n,Lu.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),Lu.EXTERIOR,Lu.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,Lu.INTERIOR,Lu.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],Lu.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],Lu.BOUNDARY)},e.prototype.addLineString=function(t){var e=Lc.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new kf(e,new eh(this._argIndex,Lu.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),oc.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===Lu.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Lc.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;hc.isCCW(r)&&(i=n,o=e);var a=new kf(r,new eh(this._argIndex,Lu.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],Lu.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new eh(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new Mp},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof El&&(this._useBoundaryDeterminationRule=!1),e instanceof bl)this.addPolygon(e);else if(e instanceof vl)this.addLineString(e);else if(e instanceof ml)this.addPoint(e);else if(e instanceof wl)this.addCollection(e);else if(e instanceof il)this.addCollection(e);else if(e instanceof El)this.addCollection(e);else{if(!(e instanceof rl))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},e.prototype.locate=function(t){return Mu(this._parentGeom,_l)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new Vp(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?Lu.BOUNDARY:Lu.INTERIOR},e}(ph),Xp=function(){if(this._li=new uc,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Wp(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=mc.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Wp(0,e,r),this._arg[1]=new Wp(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Wp(0,i,a),this._arg[1]=new Wp(1,o,a)}};Xp.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Xp.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Xp.prototype.interfaces_=function(){return[]},Xp.prototype.getClass=function(){return Xp};var Yp=function(){};Yp.prototype.interfaces_=function(){return[]},Yp.prototype.getClass=function(){return Yp},Yp.map=function(){if(arguments[0]instanceof dc&&Mu(arguments[1],Yp.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Tc,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(Mu(arguments[0],Oc)&&Mu(arguments[1],Yp.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Tc,u=o.iterator();u.hasNext();){var c=u.next(),l=a.map(c);null!==l&&s.add(l)}return s}},Yp.MapOp=function(){};var Zp=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new Yf,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new vf,this._resultPolyList=new Tc,this._resultLineList=new Tc,this._resultPointList=new Tc,this._graph=new ph(new df),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new eh(t.getLabel())).flip();var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new Tc;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==Lu.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new Tc,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Tc;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),pp.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new dh(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new gp(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new vp(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,Wl.RIGHT),i.getLocation(1,Wl.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(oc.isTrue(!r.isNull(i,Wl.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Wl.LEFT,r.getLocation(i,Wl.LEFT)),oc.isTrue(!r.isNull(i,Wl.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Wl.RIGHT,r.getLocation(i,Wl.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xp);Zp.overlayOp=function(t,e,n){return new Zp(t,e).getResultGeometry(n)},Zp.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Zp.createEmptyResult(Zp.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return dp.map(t,{interfaces_:function(){return[Yp.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Zp.INTERSECTION)},Zp.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zp.createEmptyResult(Zp.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Zp.SYMDIFFERENCE)},Zp.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Zp.INTERSECTION:o=Math.min(r,i);break;case Zp.UNION:o=Math.max(r,i);break;case Zp.DIFFERENCE:o=r;break;case Zp.SYMDIFFERENCE:o=Math.max(r,i)}return o},Zp.createEmptyResult=function(t,e,n,r){var i=null;switch(Zp.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Zp.difference=function(t,e){return t.isEmpty()?Zp.createEmptyResult(Zp.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Zp.DIFFERENCE))},Zp.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Zp.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2];switch(i===Lu.BOUNDARY&&(i=Lu.INTERIOR),o===Lu.BOUNDARY&&(o=Lu.INTERIOR),a){case Zp.INTERSECTION:return i===Lu.INTERIOR&&o===Lu.INTERIOR;case Zp.UNION:return i===Lu.INTERIOR||o===Lu.INTERIOR;case Zp.DIFFERENCE:return i===Lu.INTERIOR&&o!==Lu.INTERIOR;case Zp.SYMDIFFERENCE:return i===Lu.INTERIOR&&o!==Lu.INTERIOR||i!==Lu.INTERIOR&&o===Lu.INTERIOR}return!1}},Zp.INTERSECTION=1,Zp.UNION=2,Zp.DIFFERENCE=3,Zp.SYMDIFFERENCE=4;var Kp=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Yf,this._seg=new Dh;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};Kp.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n).getCoordinateSequence(),i=0;i<r.size()-1;i++)if(r.getCoordinate(i,e._seg.p0),r.getCoordinate(i+1,e._seg.p1),e._seg.distance(t)<=e._boundaryDistanceTolerance)return!0;return!1},Kp.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?Lu.BOUNDARY:this._ptLocator.locate(t,this._g)},Kp.prototype.extractLinework=function(t){var e=new Qp;t.apply(e);var n=e.getLinework(),r=Fl.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},Kp.prototype.interfaces_=function(){return[]},Kp.prototype.getClass=function(){return Kp};var Qp=function(){this._linework=null,this._linework=new Tc};Qp.prototype.getLinework=function(){return this._linework},Qp.prototype.filter=function(t){if(t instanceof bl){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Qp.prototype.interfaces_=function(){return[el]},Qp.prototype.getClass=function(){return Qp};var Jp=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};Jp.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Jp.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Jp.prototype.getPoints=function(t){for(var e=new Tc,n=Xf.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Jp.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,a=Math.sqrt(i*i+o*o),s=n*i/a,u=n*o/a,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var h=new Cu(c-u,l+s);r.add(h)}if(this._doRight){var f=new Cu(c+u,l-s);r.add(f)}},Jp.prototype.interfaces_=function(){return[]},Jp.prototype.getClass=function(){return Jp};var $p=function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new Tc;var e=arguments[0],n=arguments[1],r=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,n),this._geom=[e,n,r],this._locFinder=[new Kp(this._geom[0],this._boundaryDistanceTolerance),new Kp(this._geom[1],this._boundaryDistanceTolerance),new Kp(this._geom[2],this._boundaryDistanceTolerance)]},td={TOLERANCE:{configurable:!0}};$p.prototype.reportResult=function(t,e,n){Yu.out.println("Overlay result invalid - A:"+Lu.toLocationSymbol(e[0])+" B:"+Lu.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+Lu.toLocationSymbol(e[2]))},$p.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},$p.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!$p.hasLocation(this._location,Lu.BOUNDARY)||this.isValidResult(i,this._location)}},$p.prototype.addTestPts=function(t){var e=new Jp(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},$p.prototype.isValidResult=function(t,e){var n=Zp.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===Lu.INTERIOR);return r||this.reportResult(t,e,n),r},$p.prototype.getInvalidLocation=function(){return this._invalidLocation},$p.prototype.interfaces_=function(){return[]},$p.prototype.getClass=function(){return $p},$p.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},$p.computeBoundaryDistanceTolerance=function(t,e){return Math.min(_p.computeSizeBasedSnapTolerance(t),_p.computeSizeBasedSnapTolerance(e))},$p.isValid=function(t,e,n,r){return new $p(t,e,r).isValid(n)},td.TOLERANCE.get=function(){return 1e-6},Object.defineProperties($p,td);var ed=function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e};ed.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},ed.prototype.combine=function(){for(var t=new Tc,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},ed.prototype.interfaces_=function(){return[]},ed.prototype.getClass=function(){return ed},ed.combine=function(){if(1===arguments.length){var t=arguments[0],e=new ed(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new ed(ed.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2],u=new ed(ed.createList(o,a,s));return u.combine()}},ed.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},ed.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Tc;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Tc;return a.add(r),a.add(i),a.add(o),a}};var nd=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Tc)},rd={STRTREE_NODE_CAPACITY:{configurable:!0}};nd.prototype.reduceToGeometries=function(t){for(var e=new Tc,n=t.iterator();n.hasNext();){var r=n.next(),i=null;Mu(r,Sc)?i=this.unionTree(r):r instanceof dc&&(i=r),e.add(i)}return e},nd.prototype.extractByEnvelope=function(t,e,n){for(var r=new Tc,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},nd.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return ed.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},nd.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Ch(nd.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},nd.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=nd.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(nd.getGeometry(e,n),nd.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},nd.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},nd.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},nd.prototype.unionActual=function(t,e){return nd.restrictToPolygons(t.union(e))},nd.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},nd.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Tc,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),ed.combine(r)},nd.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],a=i.getFactory(),s=a.createGeometryCollection([i,o]),u=s.buffer(0);return u}},nd.prototype.interfaces_=function(){return[]},nd.prototype.getClass=function(){return nd},nd.restrictToPolygons=function(t){if(Mu(t,_l))return t;var e=Wf.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(Fl.toPolygonArray(e))},nd.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},nd.union=function(t){return new nd(t).union()},rd.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(nd,rd);var id=function(){};function od(){return new ad}function ad(){this.reset()}id.prototype.interfaces_=function(){return[]},id.prototype.getClass=function(){return id},id.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Zp.createEmptyResult(Zp.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Cp.overlayOp(t,e,Zp.UNION)},ad.prototype={constructor:ad,reset:function(){this.s=this.t=0},add:function(t){ud(sd,t,this.t),ud(this,sd.s,this.s),this.s?this.t+=sd.t:this.s=sd.t},valueOf:function(){return this.s}};var sd=new ad;function ud(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var cd=1e-6,ld=Math.PI,hd=ld/2,fd=ld/4,pd=2*ld,dd=180/ld,gd=ld/180,vd=Math.abs,yd=Math.atan,md=Math.atan2,_d=Math.cos,bd=Math.sin,wd=Math.sqrt;function xd(t){return t>1?0:t<-1?ld:Math.acos(t)}function Ed(t){return t>1?hd:t<-1?-hd:Math.asin(t)}function Od(){}function kd(t,e){t&&Td.hasOwnProperty(t.type)&&Td[t.type](t,e)}var Id,Sd,Cd={Feature:function(t,e){kd(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)kd(n[r].geometry,e)}},Td={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Nd(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Nd(n[r],e,0)},Polygon:function(t,e){Pd(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Pd(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)kd(n[r],e)}};function Nd(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Pd(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Nd(t[n],e,1);e.polygonEnd()}function Ld(t){return[md(t[1],t[0]),Ed(t[2])]}function jd(t){var e=t[0],n=t[1],r=_d(n);return[r*_d(e),r*bd(e),bd(n)]}function Md(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rd(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ad(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Dd(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Fd(t){var e=wd(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zd(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Bd(t,e){return[t>ld?t-pd:t<-ld?t+pd:t,e]}function Ud(t){return function(e,n){return[(e+=t)>ld?e-pd:e<-ld?e+pd:e,n]}}function Vd(t){var e=Ud(t);return e.invert=Ud(-t),e}function qd(t,e){var n=_d(t),r=bd(t),i=_d(e),o=bd(e);function a(t,e){var a=_d(e),s=_d(t)*a,u=bd(t)*a,c=bd(e),l=c*n+s*r;return[md(u*i-l*o,s*n-c*r),Ed(l*i+u*o)]}return a.invert=function(t,e){var a=_d(e),s=_d(t)*a,u=bd(t)*a,c=bd(e),l=c*i-u*o;return[md(u*i+c*o,s*n+l*r),Ed(l*n-s*r)]},a}function Gd(t,e){(e=jd(e))[0]-=t,Fd(e);var n=xd(-e[1]);return((-e[2]<0?-n:n)+pd-cd)%pd}function Hd(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Od,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Wd(t,e){return vd(t[0]-e[0])<cd&&vd(t[1]-e[1])<cd}function Xd(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yd(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(Wd(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else s.push(n=new Xd(r,t,null,!0)),u.push(n.o=new Xd(r,null,n,!1)),s.push(n=new Xd(a,t,null,!1)),u.push(n.o=new Xd(a,null,n,!0))}})),s.length){for(u.sort(e),Zd(s),Zd(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,h=s[0];;){for(var f=h,p=!0;f.v;)if((f=f.n)===h)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(c=f.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function Zd(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Kd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qd(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}od(),od(),od(),Bd.invert=Bd,1===(Id=Kd).length&&(Sd=Id,Id=function(t,e){return Kd(Sd(t),e)});var Jd=1e9,$d=-Jd;function tg(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,h=0;if(null==i||(l=a(i,s))!==(h=a(o,s))||u(i,o)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?r:e)}while((l=(l+s+4)%4)!==h);else c.point(o[0],o[1])}function a(r,i){return vd(r[0]-t)<cd?i>0?0:3:vd(r[0]-n)<cd?i>0?2:1:vd(r[1]-e)<cd?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,f,p,d,g,v,y,m,_=a,b=Hd(),w={point:x,lineStart:function(){w.point=E,c&&c.push(l=[]),y=!0,v=!1,d=g=NaN},lineEnd:function(){u&&(E(h,f),p&&v&&b.rejoin(),u.push(b.result())),w.point=x,v&&_.lineEnd()},polygonStart:function(){_=b,u=[],c=[],m=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var o,a,s=c[n],u=1,l=s.length,h=s[0],f=h[0],p=h[1];u<l;++u)o=f,a=p,f=(h=s[u])[0],p=h[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(t-o)&&++e:p<=r&&(f-o)*(r-a)<(p-a)*(t-o)&&--e;return e}(),n=m&&e,i=(u=Qd(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Yd(u,s,e,o,a),a.polygonEnd()),_=a,u=c=l=null}};function x(t,e){i(t,e)&&_.point(t,e)}function E(o,a){var s=i(o,a);if(c&&l.push([o,a]),y)h=o,f=a,p=s,y=!1,s&&(_.lineStart(),_.point(o,a));else if(s&&v)_.point(o,a);else{var u=[d=Math.max($d,Math.min(Jd,d)),g=Math.max($d,Math.min(Jd,g))],b=[o=Math.max($d,Math.min(Jd,o)),a=Math.max($d,Math.min(Jd,a))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,l=1,h=e[0]-s,f=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=i-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<l&&(l=a)}else if(f>0){if(a>l)return;a>c&&(c=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>l)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*h,t[1]=u+c*f),l<1&&(e[0]=s+l*h,e[1]=u+l*f),!0}}}}}(u,b,t,e,n,r)?s&&(_.lineStart(),_.point(o,a),m=!1):(v||(_.lineStart(),_.point(u[0],u[1])),_.point(b[0],b[1]),s||_.lineEnd(),m=!1)}d=o,g=a,v=s}return w}}var eg=od();function ng(t){return t}od(),od(),od();var rg=1/0,ig=rg,og=-rg,ag=og,sg={point:function(t,e){t<rg&&(rg=t),t>og&&(og=t),e<ig&&(ig=e),e>ag&&(ag=e)},lineStart:Od,lineEnd:Od,polygonStart:Od,polygonEnd:Od,result:function(){var t=[[rg,ig],[og,ag]];return og=ag=-(ig=rg=1/0),t}};function ug(t,e,n,r){return function(i,o){var a,s,u,c=e(o),l=i.invert(r[0],r[1]),h=Hd(),f=e(h),p=!1,d={point:g,lineStart:y,lineEnd:m,polygonStart:function(){d.point=_,d.lineStart=b,d.lineEnd=w,s=[],a=[]},polygonEnd:function(){d.point=g,d.lineStart=y,d.lineEnd=m,s=Qd(s);var t=function(t,e){var n=e[0],r=e[1],i=[bd(n),-_d(n),0],o=0,a=0;eg.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,h=c[l-1],f=h[0],p=h[1]/2+fd,d=bd(p),g=_d(p),v=0;v<l;++v,f=m,d=b,g=w,h=y){var y=c[v],m=y[0],_=y[1]/2+fd,b=bd(_),w=_d(_),x=m-f,E=x>=0?1:-1,O=E*x,k=O>ld,I=d*b;if(eg.add(md(I*E*bd(O),g*w+I*_d(O))),o+=k?x+E*pd:x,k^f>=n^m>=n){var S=Rd(jd(h),jd(y));Fd(S);var C=Rd(i,S);Fd(C);var T=(k^x>=0?-1:1)*Ed(C[2]);(r>T||r===T&&(S[0]||S[1]))&&(a+=k^x>=0?1:-1)}}return(o<-1e-6||o<cd&&eg<-1e-6)^1&a}(a,l);s.length?(p||(o.polygonStart(),p=!0),Yd(s,lg,t,n,o)):t&&(p||(o.polygonStart(),p=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),p&&(o.polygonEnd(),p=!1),s=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function v(t,e){var n=i(t,e);c.point(n[0],n[1])}function y(){d.point=v,c.lineStart()}function m(){d.point=g,c.lineEnd()}function _(t,e){u.push([t,e]);var n=i(t,e);f.point(n[0],n[1])}function b(){f.lineStart(),u=[]}function w(){_(u[0][0],u[0][1]),f.lineEnd();var t,e,n,r,i=f.clean(),c=h.result(),l=c.length;if(u.pop(),a.push(u),u=null,l)if(1&i){if((e=(n=c[0]).length-1)>0){for(p||(o.polygonStart(),p=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else l>1&&2&i&&c.push(c.pop().concat(c.shift())),s.push(c.filter(cg))}return d}}function cg(t){return t.length>1}function lg(t,e){return((t=t.x)[0]<0?t[1]-hd-cd:hd-t[1])-((e=e.x)[0]<0?e[1]-hd-cd:hd-e[1])}od();var hg=ug((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?ld:-ld,u=vd(o-n);vd(u-ld)<cd?(t.point(n,r=(r+a)/2>0?hd:-hd),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=ld&&(vd(n-i)<cd&&(n-=i*cd),vd(o-s)<cd&&(o-=s*cd),r=function(t,e,n,r){var i,o,a=bd(t-n);return vd(a)>cd?yd((bd(e)*(o=_d(r))*bd(n)-bd(r)*(i=_d(e))*bd(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*hd,r.point(-ld,i),r.point(0,i),r.point(ld,i),r.point(ld,0),r.point(ld,-i),r.point(0,-i),r.point(-ld,-i),r.point(-ld,0),r.point(-ld,i);else if(vd(t[0]-e[0])>cd){var o=t[0]<e[0]?ld:-ld;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-ld,-hd]);function fg(t,e){var n=_d(t),r=n>0,i=vd(n)>cd;function o(t,e){return _d(t)*_d(e)>n}function a(t,e,r){var i=[1,0,0],o=Rd(jd(t),jd(e)),a=Md(o,o),s=o[0],u=a-s*s;if(!u)return!r&&t;var c=n*a/u,l=-n*s/u,h=Rd(i,o),f=Dd(i,c);Ad(f,Dd(o,l));var p=h,d=Md(f,p),g=Md(p,p),v=d*d-g*(Md(f,f)-1);if(!(v<0)){var y=wd(v),m=Dd(p,(-d-y)/g);if(Ad(m,f),m=Ld(m),!r)return m;var _,b=t[0],w=e[0],x=t[1],E=e[1];w<b&&(_=b,b=w,w=_);var O=w-b,k=vd(O-ld)<cd;if(!k&&E<x&&(_=x,x=E,E=_),k||O<cd?k?x+E>0^m[1]<(vd(m[0]-b)<cd?x:E):x<=m[1]&&m[1]<=E:O>ld^(b<=m[0]&&m[0]<=w)){var I=Dd(p,(-d+y)/g);return Ad(I,f),[m,Ld(I)]}}}function s(e,n){var i=r?t:ld-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ug(o,(function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,f){var p,d=[h,f],g=o(h,f),v=r?g?0:s(h,f):g?s(h+(h<0?ld:-ld),f):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(p=a(e,d))||Wd(e,p)||Wd(d,p))&&(d[0]+=cd,d[1]+=cd,g=o(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(i&&e&&r^g){var y;v&n||!(y=a(d,e,!0))||(l=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&Wd(e,d)||t.point(d[0],d[1]),e=d,u=g,n=v},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}}),(function(n,r,i,o){!function(t,e,n,r,i,o){if(n){var a=_d(e),s=bd(e),u=r*n;null==i?(i=e+r*pd,o=e-u/2):(i=Gd(a,i),o=Gd(a,o),(r>0?i<o:i>o)&&(i+=r*pd));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Ld([a,-s*_d(l),-s*bd(l)]),t.point(c[0],c[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-ld,t-ld])}function pg(t){return function(e){var n=new dg;for(var r in t)n[r]=t[r];return n.stream=e,n}}function dg(){}function gg(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),function(t,e){t&&Cd.hasOwnProperty(t.type)?Cd[t.type](t,e):kd(t,e)}(n,t.stream(sg));var a=sg.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}dg.prototype={constructor:dg,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var vg=_d(30*gd);function yg(t,e){return+e?function(t,e){function n(r,i,o,a,s,u,c,l,h,f,p,d,g,v){var y=c-r,m=l-i,_=y*y+m*m;if(_>4*e&&g--){var b=a+f,w=s+p,x=u+d,E=wd(b*b+w*w+x*x),O=Ed(x/=E),k=vd(vd(x)-1)<cd||vd(o-h)<cd?(o+h)/2:md(w,b),I=t(k,O),S=I[0],C=I[1],T=S-r,N=C-i,P=m*T-y*N;(P*P/_>e||vd((y*T+m*N)/_-.5)>.3||a*f+s*p+u*d<vg)&&(n(r,i,o,a,s,u,S,C,k,b/=E,w/=E,x,g,v),v.point(S,C),n(S,C,k,b,w,x,c,l,h,f,p,d,g,v))}}return function(e){var r,i,o,a,s,u,c,l,h,f,p,d,g={point:v,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){l=NaN,g.point=m,e.lineStart()}function m(r,i){var o=jd([r,i]),a=t(r,i);n(l,h,c,f,p,d,l=a[0],h=a[1],c=r,f=o[0],p=o[1],d=o[2],16,e),e.point(l,h)}function _(){g.point=v,e.lineEnd()}function b(){y(),g.point=w,g.lineEnd=x}function w(t,e){m(r=t,e),i=l,o=h,a=f,s=p,u=d,g.point=m}function x(){n(l,h,c,f,p,d,i,o,r,a,s,u,16,e),g.lineEnd=_,_()}return g}}(t,e):function(t){return pg({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var mg=pg({point:function(t,e){this.stream.point(t*gd,e*gd)}}),_g=function(t,e){var n=_d(t),r=_d(e),i=function(t){return(t=xd(t))&&t/bd(t)}(n*r);return[i*r*bd(t),i*bd(e)]};function bg(){return function(t){return function(t){var e,n,r,i,o,a,s,u,c,l,h=150,f=480,p=250,d=0,g=0,v=0,y=0,m=0,_=null,b=hg,w=null,x=ng,E=.5,O=yg(S,E);function k(t){return[(t=o(t[0]*gd,t[1]*gd))[0]*h+n,r-t[1]*h]}function I(t){return(t=o.invert((t[0]-n)/h,(r-t[1])/h))&&[t[0]*dd,t[1]*dd]}function S(t,i){return[(t=e(t,i))[0]*h+n,r-t[1]*h]}function C(){o=zd(i=function(t,e,n){return(t%=pd)?e||n?zd(Vd(t),qd(e,n)):Vd(t):e||n?qd(e,n):Bd}(v,y,m),e);var t=e(d,g);return n=f-t[0]*h,r=p+t[1]*h,T()}function T(){return c=l=null,k}return k.stream=function(t){return c&&l===t?c:c=mg(b(i,O(x(l=t))))},k.clipAngle=function(t){return arguments.length?(b=+t?fg(_=t*gd,6*gd):(_=null,hg),T()):_*dd},k.clipExtent=function(t){return arguments.length?(x=null==t?(w=a=s=u=null,ng):tg(w=+t[0][0],a=+t[0][1],s=+t[1][0],u=+t[1][1]),T()):null==w?null:[[w,a],[s,u]]},k.scale=function(t){return arguments.length?(h=+t,C()):h},k.translate=function(t){return arguments.length?(f=+t[0],p=+t[1],C()):[f,p]},k.center=function(t){return arguments.length?(d=t[0]%360*gd,g=t[1]%360*gd,C()):[d*dd,g*dd]},k.rotate=function(t){return arguments.length?(v=t[0]%360*gd,y=t[1]%360*gd,m=t.length>2?t[2]%360*gd:0,C()):[v*dd,y*dd,m*dd]},k.precision=function(t){return arguments.length?(O=yg(S,E=t*t),T()):wd(E)},k.fitExtent=function(t,e){return gg(k,t,e)},k.fitSize=function(t,e){return function(t,e,n){return gg(t,[[0,0],e],n)}(k,t,e)},function(){return e=t.apply(this,arguments),k.invert=e.invert&&I,C()}}((function(){return t}))()}(_g).scale(79.4188).clipAngle(179.999)}function wg(t,e,r,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var u=[];return B(t,(function(t){var n=wg(t,e,r,i);n&&u.push(n)})),d(u)}var c=function(t){var e=ln(t).geometry.coordinates,r=[-e[0],-e[1]];return bg().rotate(r).scale(n)}(s),l={type:s.type,coordinates:xg(s.coordinates,c)},h=(new Gl).read(l),f=b(w(e,r),"meters"),p=Ff.bufferOp(h,f,i);if(!function t(e){return Array.isArray(e[0])?t(e[0]):isNaN(e[0])}((p=(new Hl).write(p)).coordinates))return a({type:p.type,coordinates:Eg(p.coordinates,c)},o)}function xg(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return xg(t,e)}))}function Eg(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return Eg(t,e)}))}function Og(t,e,n){void 0===n&&(n={});var r=it(t),i=it(e),o=_u.intersection(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?l(o[0],n.properties):y(o,n.properties)}function kg(t,e,n){void 0===n&&(n={});var r=JSON.stringify(n.properties||{}),i=t[0],o=t[1],a=t[2],s=t[3],u=(o+s)/2,c=(i+a)/2,l=2*e/ye([i,u],[a,u],n)*(a-i),h=2*e/ye([c,o],[c,s],n)*(s-o),f=l/2,p=2*f,g=Math.sqrt(3)/2*h,v=a-i,y=s-o,m=3/4*p,_=g,b=(v-p)/(p-f/2),w=Math.floor(b),x=(w*m-f/2-v)/2-f/2+m/2,E=Math.floor((y-g)/g),O=(y-E*g)/2,k=E*g-y>g/2;k&&(O-=g/4);for(var I=[],S=[],C=0;C<6;C++){var T=2*Math.PI/6*C;I.push(Math.cos(T)),S.push(Math.sin(T))}for(var N=[],P=0;P<=w;P++)for(var L=0;L<=E;L++){var j=P%2==1;if((0!==L||!j)&&(0!==L||!k)){var M=P*m+i-x,R=L*_+o+O;if(j&&(R-=g/2),!0===n.triangles)Sg([M,R],l/2,h/2,JSON.parse(r),I,S).forEach((function(t){n.mask?Og(n.mask,t)&&N.push(t):N.push(t)}));else{var A=Ig([M,R],l/2,h/2,JSON.parse(r),I,S);n.mask?Og(n.mask,A)&&N.push(A):N.push(A)}}}return d(N)}function Ig(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var u=t[0]+e*i[s],c=t[1]+n*o[s];a.push([u,c])}return a.push(a[0].slice()),l([a],r)}function Sg(t,e,n,r,i,o){for(var a=[],s=0;s<6;s++){var u=[];u.push(t),u.push([t[0]+e*i[s],t[1]+n*o[s]]),u.push([t[0]+e*i[(s+1)%6],t[1]+n*o[(s+1)%6]]),u.push(t),a.push(l([u],r))}return a}function Cg(t){return y(t)}function Tg(t,e,n){return void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});for(var i=[],o=t[0],a=t[1],s=t[2],u=t[3],c=e/ye([o,a],[s,a],r)*(s-o),h=n/ye([o,a],[o,u],r)*(u-a),f=s-o,p=u-a,g=Math.floor(f/c),v=Math.floor(p/h),y=(p-v*h)/2,m=o+(f-g*c)/2,_=0;_<g;_++){for(var b=a+y,w=0;w<v;w++){var x=l([[[m,b],[m,b+h],[m+c,b+h],[m+c,b],[m,b]]],r.properties);r.mask?na(r.mask,x)&&i.push(x):i.push(x),b+=h}m+=c}return d(i)}(t,e,e,n)}function Ng(t,e,n){void 0===n&&(n={});for(var r=[],i=e/ye([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),o=e/ye([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),a=0,s=t[0];s<=t[2];){for(var u=0,c=t[1];c<=t[3];){var h=null,f=null;a%2==0&&u%2==0?(h=l([[[s,c],[s,c+o],[s+i,c],[s,c]]],n.properties),f=l([[[s,c+o],[s+i,c+o],[s+i,c],[s,c+o]]],n.properties)):a%2==0&&u%2==1?(h=l([[[s,c],[s+i,c+o],[s+i,c],[s,c]]],n.properties),f=l([[[s,c],[s,c+o],[s+i,c+o],[s,c]]],n.properties)):u%2==0&&a%2==1?(h=l([[[s,c],[s,c+o],[s+i,c+o],[s,c]]],n.properties),f=l([[[s,c],[s+i,c+o],[s+i,c],[s,c]]],n.properties)):u%2==1&&a%2==1&&(h=l([[[s,c],[s,c+o],[s+i,c],[s,c]]],n.properties),f=l([[[s,c+o],[s+i,c+o],[s+i,c],[s,c+o]]],n.properties)),n.mask?(Og(n.mask,h)&&r.push(h),Og(n.mask,f)&&r.push(f)):(r.push(h),r.push(f)),c+=o,u++}a++,s+=i}return d(r)}_g.invert=function(t,e){var n=wd(t*t+e*e),r=n,i=bd(r),o=_d(r);return[md(t*i,n*o),Ed(n&&e*i/n)]},e.along=function(t,e,n){void 0===n&&(n={});for(var r=it(t).coordinates,i=0,o=0;o<r.length&&!(e>=i&&o===r.length-1);o++){if(i>=e){var a=e-i;if(a){var s=cn(r[o],r[o-1])-180;return sn(r[o],a,s,n)}return u(r[o])}i+=ye(r[o],r[o+1],n)}return u(r[r.length-1])},e.angle=function(t,e,n,r){if(void 0===r&&(r={}),!T(r))throw new Error("options is invalid");if(!t)throw new Error("startPoint is required");if(!e)throw new Error("midPoint is required");if(!n)throw new Error("endPoint is required");var i=t,o=e,a=n,s=E(!0!==r.mercator?cn(i,o):mi(i,o)),u=E(!0!==r.mercator?cn(a,o):mi(a,o)),c=Math.abs(s-u);return!0===r.explementary?360-c:c},e.applyFilter=Ls,e.area=wr,e.areaFactors=o,e.bbox=Q,e.bboxClip=function(t,e){var n=it(t),r=n.type,i="Feature"===t.type?t.properties:{},o=n.coordinates;switch(r){case"LineString":case"MultiLineString":var a=[];return"LineString"===r&&(o=[o]),o.forEach((function(t){!function(t,e,n){var r,i,o,a,s,u=t.length,c=li(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(a=t[r-1],i=o=li(s=t[r],e);;){if(!(c|i)){l.push(a),i!==o?(l.push(s),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(s);break}if(c&i)break;c?c=li(a=ci(a,s,c,e),e):i=li(s=ci(a,s,i,e),e)}c=o}l.length&&n.push(l)}(t,e,a)})),1===a.length?f(a[0],i):g(a,i);case"Polygon":return l(hi(o,e),i);case"MultiPolygon":return y(o.map((function(t){return hi(t,e)})),i);default:throw new Error("geometry "+r+" not supported")}},e.bboxPolygon=rn,e.bearing=cn,e.bearingToAngle=E,e.bearingToAzimuth=E,e.bezier=nn,e.bezierSpline=nn,e.booleanClockwise=Oi,e.booleanContains=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type,a=n.coordinates,s=r.coordinates;switch(i){case"Point":switch(o){case"Point":return Ho(a,s);default:throw new Error("feature2 "+o+" geometry not supported")}case"MultiPoint":switch(o){case"Point":return function(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Ho(t.coordinates[n],e.coordinates)){r=!0;break}return r}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++){for(var i=r[n],o=!1,a=0,s=t.coordinates;a<s.length;a++)if(Ho(i,s[a])){o=!0;break}if(!o)return!1}return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"Point":return Sr(r,n,{ignoreEndVertices:!0});case"LineString":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Sr({type:"Point",coordinates:o},t,{ignoreEndVertices:!0})&&(n=!0),!Sr({type:"Point",coordinates:o},t,{ignoreEndVertices:!1}))return!1}return n}(n,r);case"MultiPoint":return function(t,e){for(var n=!1,r=0,i=e.coordinates;r<i.length;r++){var o=i[r];if(Sr(o,t,{ignoreEndVertices:!0})&&(n=!0),!Sr(o,t))return!1}return!!n}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"Point":return de(r,n,{ignoreBoundary:!0});case"LineString":return function(t,e){var n=!1,r=0;if(!Go(Q(t),Q(e)))return!1;for(;r<e.coordinates.length-1;r++)if(de({type:"Point",coordinates:Wo(e.coordinates[r],e.coordinates[r+1])},t,{ignoreBoundary:!0})){n=!0;break}return n}(n,r);case"Polygon":return function(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!Go(Q(t),Q(e)))return!1;for(var n=0,r=it(e).coordinates;n<r.length;n++)for(var i=0,o=r[n];i<o.length;i++)if(!de(o[i],t))return!1;return!0}(n,r);case"MultiPoint":return function(t,e){for(var n=0,r=e.coordinates;n<r.length;n++)if(!de(r[n],t,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanCrosses=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;switch(i){case"MultiPoint":switch(o){case"LineString":return Xo(n,r);case"Polygon":return Zo(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"LineString":switch(o){case"MultiPoint":return Xo(r,n);case"LineString":return function(t,e){if(hr(t,e).features.length>0)for(var n=0;n<t.coordinates.length-1;n++)for(var r=0;r<e.coordinates.length-1;r++){var i=!0;if(0!==r&&r!==e.coordinates.length-2||(i=!1),Ko(t.coordinates[n],t.coordinates[n+1],e.coordinates[r],i))return!0}return!1}(n,r);case"Polygon":return Yo(n,r);default:throw new Error("feature2 "+o+" geometry not supported")}case"Polygon":switch(o){case"MultiPoint":return Zo(r,n);case"LineString":return Yo(r,n);default:throw new Error("feature2 "+o+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}},e.booleanDisjoint=Bo,e.booleanEqual=function(t,e){return it(t).type===it(e).type&&new ea({precision:6}).compare(He(t),He(e))},e.booleanIntersects=na,e.booleanOverlap=function(t,e){var n=it(t),r=it(e),i=n.type,o=r.type;if("MultiPoint"===i&&"MultiPoint"!==o||("LineString"===i||"MultiLineString"===i)&&"LineString"!==o&&"MultiLineString"!==o||("Polygon"===i||"MultiPolygon"===i)&&"Polygon"!==o&&"MultiPolygon"!==o)throw new Error("features must be of the same type");if("Point"===i)throw new Error("Point geometry not supported");if(new ea({precision:6}).compare(t,e))return!1;var a=0;switch(i){case"MultiPoint":for(var s=0;s<n.coordinates.length;s++)for(var u=0;u<r.coordinates.length;u++){var c=n.coordinates[s],l=r.coordinates[u];if(c[0]===l[0]&&c[1]===l[1])return!0}return!1;case"LineString":case"MultiLineString":G(t,(function(t){G(e,(function(e){gi(t,e).features.length&&a++}))}));break;case"Polygon":case"MultiPolygon":G(t,(function(t){G(e,(function(e){hr(t,e).features.length&&a++}))}))}return a>0},e.booleanParallel=function(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");if("LineString"!==ga(t,"line1"))throw new Error("line1 must be a LineString");if("LineString"!==ga(e,"line2"))throw new Error("line2 must be a LineString");for(var n=Bn(He(t)).features,r=Bn(He(e)).features,i=0;i<n.length;i++){var o=n[i].geometry.coordinates;if(!r[i])break;if(!da(o,r[i].geometry.coordinates))return!1}return!0},e.booleanPointInPolygon=de,e.booleanPointOnLine=Sr,e.booleanWithin=Tr,e.buffer=function(t,e,n){var r=(n=n||{}).units||"kilometers",i=n.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return B(t,(function(t){var n=wg(t,e,r,i);n&&o.push(n)})),d(o);case"FeatureCollection":return D(t,(function(t){var n=wg(t,e,r,i);n&&D(n,(function(t){t&&o.push(t)}))})),d(o)}return wg(t,e,r,i)},e.center=ln,e.centerMean=us,e.centerMedian=function(t,e){if(void 0===e&&(e={}),!T(e=e||{}))throw new Error("options is invalid");var n=e.counter||10;if(!C(n))throw new Error("counter must be a number");var r=e.weight,i=us(t,{weight:e.weight}),o=d([]);D(t,(function(t){var e;o.features.push(hn(t,{properties:{weight:null===(e=t.properties)||void 0===e?void 0:e[r]}}))}));var a={tolerance:e.tolerance,medianCandidates:[]};return function t(e,n,r,i,o){var a=i.tolerance||.001,s=0,c=0,l=0,h=0;if(D(r,(function(t){var n,r=null===(n=t.properties)||void 0===n?void 0:n.weight,i=null==r?1:r;if(!C(i=Number(i)))throw new Error("weight value must be a number");if(i>0){h+=1;var o=i*ye(t,e);0===o&&(o=1);var a=i/o;s+=t.geometry.coordinates[0]*a,c+=t.geometry.coordinates[1]*a,l+=a}})),h<1)throw new Error("no features to measure");var f=s/l,p=c/l;return 1===h||0===o||Math.abs(f-n[0])<a&&Math.abs(p-n[1])<a?u([f,p],{medianCandidates:i.medianCandidates}):(i.medianCandidates.push([f,p]),t([f,p],e,r,i,o-1))}(i.geometry.coordinates,[0,0],o,a,n)},e.centerOfMass=function t(e,n){switch(void 0===n&&(n={}),ot(e)){case"Point":return u(J(e),n.properties);case"Polygon":var r=[];j(e,(function(t){r.push(t)}));var i,o,a,s,c,l,h,f,p=hn(e,{properties:n.properties}),d=p.geometry.coordinates,g=0,v=0,y=0,m=r.map((function(t){return[t[0]-d[0],t[1]-d[1]]}));for(i=0;i<r.length-1;i++)s=(o=m[i])[0],l=o[1],c=(a=m[i+1])[0],y+=f=s*(h=a[1])-c*l,g+=(s+c)*f,v+=(l+h)*f;if(0===y)return p;var _=1/(.5*y*6);return u([d[0]+_*g,d[1]+_*v],n.properties);default:var b=pe(e);return b?t(b,{properties:n.properties}):hn(e,{properties:n.properties})}},e.centroid=hn,e.circle=un,e.cleanCoords=He,e.clone=xe,e.clusterEach=Ts,e.clusterReduce=Ns,e.clusters=Rs,e.clustersDbscan=function(t,e,n){void 0===n&&(n={}),!0!==n.mutate&&(t=xe(t)),n.minPoints=n.minPoints||3;var r=new sa.DBSCAN,i=r.run(z(t),I(e,n.units),n.minPoints,ye),o=-1;return i.forEach((function(e){o++,e.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=o,n.properties.dbscan="core"}))})),r.noise.forEach((function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"})),t},e.clustersKmeans=function(t,e){void 0===e&&(e={});var n=t.features.length;e.numberOfClusters=e.numberOfClusters||Math.round(Math.sqrt(n/2)),e.numberOfClusters>n&&(e.numberOfClusters=n),!0!==e.mutate&&(t=xe(t));var r=z(t),i=r.slice(0,e.numberOfClusters),o=pa(r,e.numberOfClusters,i),a={};return o.centroids.forEach((function(t,e){a[e]=t})),D(t,(function(t,e){var n=o.idxs[e];t.properties.cluster=n,t.properties.centroid=a[n]})),t},e.collect=function(t,e,n,r){var i=Ot(6),o=e.features.map((function(t){var e;return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:null===(e=t.properties)||void 0===e?void 0:e[n]}}));return i.load(o),t.features.forEach((function(t){t.properties||(t.properties={});var e=Q(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach((function(e){de([e.minX,e.minY],t)&&o.push(e.property)})),t.properties[r]=o})),t},e.collectionOf=rt,e.combine=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}};return D(t,(function(t){var n,r,i,o;switch(null===(o=t.geometry)||void 0===o?void 0:o.type){case"Point":e.MultiPoint.coordinates.push(t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"MultiPoint":(n=e.MultiPoint.coordinates).push.apply(n,t.geometry.coordinates),e.MultiPoint.properties.push(t.properties);break;case"LineString":e.MultiLineString.coordinates.push(t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"MultiLineString":(r=e.MultiLineString.coordinates).push.apply(r,t.geometry.coordinates),e.MultiLineString.properties.push(t.properties);break;case"Polygon":e.MultiPolygon.coordinates.push(t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties);break;case"MultiPolygon":(i=e.MultiPolygon.coordinates).push.apply(i,t.geometry.coordinates),e.MultiPolygon.properties.push(t.properties)}})),d(Object.keys(e).filter((function(t){return e[t].coordinates.length})).sort().map((function(t){return a({type:t,coordinates:e[t].coordinates},{collectedProperties:e[t].properties})})))},e.concave=function(t,e){void 0===e&&(e={});var n=e.maxEdge||1/0,r=me(function(t){var e=[],n={};return D(t,(function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");Object.prototype.hasOwnProperty.call(n,r)||(e.push(t),n[r]=!0)}})),d(e)}(t));if(r.features=r.features.filter((function(t){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],a=ye(r,i,e),s=ye(i,o,e),u=ye(r,o,e);return a<=n&&s<=n&&u<=n})),r.features.length<1)return null;var i=Ge(r);return 1===i.coordinates.length&&(i.coordinates=i.coordinates[0],i.type="Polygon"),a(i)},e.containsNumber=tt,e.convertArea=S,e.convertDistance=I,e.convertLength=I,e.convex=pe,e.coordAll=z,e.coordEach=j,e.coordReduce=M,e.createBins=Ps,e.degrees2radians=k,e.degreesToRadians=k,e.destination=sn,e.difference=function(t,e){var n=it(t),r=it(e),i=t.properties||{},o=_u.difference(n.coordinates,r.coordinates);return 0===o.length?null:1===o.length?l(o[0],i):y(o,i)},e.dissolve=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.propertyName;rt(t,"Polygon","dissolve");var r=[];if(!e.propertyName)return Rr(y(_u.union.apply(null,t.features.map((function(t){return t.geometry.coordinates})))));var i={};D(t,(function(t){Object.prototype.hasOwnProperty.call(i,t.properties[n])||(i[t.properties[n]]=[]),i[t.properties[n]].push(t)}));for(var o=Object.keys(i),a=0;a<o.length;a++){var s=y(_u.union.apply(null,i[o[a]].map((function(t){return t.geometry.coordinates}))));s.properties[n]=o[a],r.push(s)}return Rr(d(r))},e.distance=ye,e.distanceToDegrees=x,e.distanceToRadians=w,e.distanceWeight=ps,e.earthRadius=n,e.ellipse=as,e.envelope=on,e.explode=fn,e.factors=r,e.feature=a,e.featureCollection=d,e.featureEach=D,e.featureOf=nt,e.featureReduce=F,e.filterProperties=Ms,e.findPoint=Z,e.findSegment=Y,e.flatten=Rr,e.flattenEach=V,e.flattenReduce=q,e.flip=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return!1!==n&&void 0!==n||(t=xe(t)),j(t,(function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e})),t},e.geojsonType=et,e.geomEach=B,e.geomReduce=U,e.geometry=s,e.geometryCollection=m,e.getCluster=Cs,e.getCoord=J,e.getCoords=$,e.getGeom=it,e.getType=ot,e.greatCircle=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;return t=J(t),e=J(e),r=r||{},i=i||100,o=o||10,new Zr({x:t[0],y:t[1]},{x:e[0],y:e[1]},r).Arc(i,{offset:o}).json()},e.helpers=L,e.hexGrid=kg,e.inside=de,e.interpolate=function(t,e,n){if("object"!=typeof(n=n||{}))throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(rt(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var a,s=Q(t);switch(r){case"point":case"points":a=jr(s,e,n);break;case"square":case"squares":a=Tg(s,e,n);break;case"hex":case"hexes":a=kg(s,e,n);break;case"triangle":case"triangles":a=Ng(s,e,n);break;default:throw new Error("invalid gridType")}var u=[];return D(a,(function(e){var a=0,s=0;D(t,(function(t){var u,c=ye("point"===r?e:hn(e),t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===c&&(a=u);var l=1/Math.pow(c,o);s+=l,a+=l*u}));var c=xe(e);c.properties[i]=a/s,u.push(c)})),d(u)},e.intersect=Og,e.invariant=at,e.isNumber=C,e.isObject=T,e.isobands=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(rt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!T(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var a=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;rt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return $(t)[0]-$(e)[0]}))})).sort((function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[s,l])}a.push(c)}return a}(t,{zProperty:r,flip:!0}),s=function(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],a=+e[i],s=ko(Oo(Ni(t,o,a-o))),u={};u.groupedRings=s,u[n]=o+"-"+a,r.push(u)}return r}(a,e,r);return d((s=function(t,e,n){var r=Q(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,f=function(t){t[0]=t[0]*l+a,t[1]=t[1]*h+s};return t.forEach((function(t){t.groupedRings.forEach((function(t){t.forEach((function(t){t.forEach(f)}))}))})),t}(s,a,t)).map((function(t,e){if(o[e]&&!T(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=ht({},i,o[e]);return n[r]=t[r],y(t.groupedRings,n)})))},e.isolines=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(rt(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!T(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var a=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;rt(t,"Point","input must contain Points");for(var o=function(t,e){var n={};return D(t,(function(t){var e=$(t)[1];n[e]||(n[e]=[]),n[e].push(t)})),Object.keys(n).map((function(t){return n[t].sort((function(t,e){return $(t)[0]-$(e)[0]}))})).sort((function(t,n){return e?$(t[0])[1]-$(n[0])[1]:$(n[0])[1]-$(t[0])[1]}))}(t,r),a=[],s=0;s<o.length;s++){for(var u=o[s],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),!0===i&&(h.properties.matrixPosition=[s,l])}a.push(c)}return a}(t,{zProperty:r,flip:!0});return d(function(t,e,n){var r=Q(n),i=r[2]-r[0],o=r[3]-r[1],a=r[0],s=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,f=function(t){t[0]=t[0]*l+a,t[1]=t[1]*h+s};return t.forEach((function(t){j(t,f)})),t}(function(t,e,n,r,i){for(var o=[],a=1;a<e.length;a++){var s=+e[a],u=ht({},r,i[a]);u[n]=s;var c=g(dt(t,s),u);o.push(c)}return o}(a,e,r,i,o),a,t))},e.kinks=function(t){var e,n,r={type:"FeatureCollection",features:[]};if("LineString"===(n="Feature"===t.type?t.geometry:t).type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var n=0;n<t.length-1;n++)for(var i=n;i<e.length-1;i++){if(t===e){if(1===Math.abs(n-i))continue;if(0===n&&i===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var o=mr(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[i][0],e[i][1],e[i+1][0],e[i+1][1]);o&&r.features.push(u([o[0],o[1]]))}}))})),r},e.length=kr,e.lengthToDegrees=x,e.lengthToRadians=w,e.lineArc=ti,e.lineChunk=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return V(t,(function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),function(t,e,n,r){var i=kr(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var a=0;a<o;a++)r(Ir(t,e*a,e*(a+1),{units:n}))}(t,e,r,(function(t){o.push(t)}))})),d(o)},e.lineDistance=kr,e.lineEach=W,e.lineIntersect=hr,e.lineOffset=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");var i=ot(t),o=t.properties;switch(i){case"LineString":return jo(t,e,r);case"MultiLineString":var a=[];return V(t,(function(t){a.push(jo(t,e,r).geometry.coordinates)})),g(a,o);default:throw new Error("geometry "+i+" is not supported")}},e.lineOverlap=gi,e.lineReduce=X,e.lineSegment=Bn,e.lineSlice=function(t,e,n){var r=$(n);if("LineString"!==ot(n))throw new Error("line must be a LineString");for(var i,o=pr(n,t),a=pr(n,e),s=[(i=o.properties.index<=a.properties.index?[o,a]:[a,o])[0].geometry.coordinates],u=i[0].properties.index+1;u<i[1].properties.index+1;u++)s.push(r[u]);return s.push(i[1].geometry.coordinates),f(s,n.properties)},e.lineSliceAlong=Ir,e.lineSplit=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=ot(t),r=ot(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Mr(e,{precision:7});switch(r){case"Point":return Qr(t,i);case"MultiPoint":return Kr(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Kr(t,hr(t,i))}},e.lineString=f,e.lineStringToPolygon=oi,e.lineStrings=p,e.lineToPolygon=oi,e.mask=function(t,e){var n,r=function(t){return l(t&&t.geometry.coordinates||[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]])}(e);return("FeatureCollection"===t.type?Cg(2===(n=t).features.length?_u.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):_u.union.apply(_u,n.features.map((function(t){return t.geometry.coordinates})))):Cg(_u.union(t.geometry.coordinates))).geometry.coordinates.forEach((function(t){r.geometry.coordinates.push(t[0])})),r},e.meta=K,e.midpoint=function(t,e){return sn(t,ye(t,e)/2,cn(t,e))},e.moranIndex=function(t,e){var n=e.inputField,r=e.threshold||1e5,i=e.p||2,o=e.binary||!1,a=ps(t,{alpha:e.alpha||-1,binary:o,p:i,standardization:e.standardization||!0,threshold:r}),s=[];D(t,(function(t){var e=t.properties||{};s.push(e[n])}));for(var u=ds(s),c=function(t){for(var e=ds(t),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=Math.pow(o-e,2)}return n/t.length}(s),l=0,h=0,f=0,p=0,d=a.length,g=0;g<d;g++){for(var v=0,y=0;y<d;y++)l+=a[g][y]*(s[g]-u)*(s[y]-u),h+=a[g][y],f+=Math.pow(a[g][y]+a[y][g],2),v+=a[g][y]+a[y][g];p+=Math.pow(v,2)}var m=l/h/c,_=-1/(d-1),b=(d*d*(f*=.5)-d*p+h*h*3)/((d-1)*(d+1)*(h*h))-_*_,w=Math.sqrt(b);return{expectedMoranIndex:_,moranIndex:m,stdNorm:w,zNorm:(m-_)/w}},e.multiLineString=g,e.multiPoint=v,e.multiPolygon=y,e.nearest=zn,e.nearestPoint=zn,e.nearestPointOnLine=pr,e.nearestPointToLine=function(t,e,n){void 0===n&&(n={});var r=n.units,i=n.properties||{},o=function(t){var e=[];switch(t.geometry?t.geometry.type:t.type){case"GeometryCollection":return B(t,(function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})})),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter((function(t){return"Point"===t.geometry.type})),t;default:throw new Error("points must be a Point Collection")}}(t);if(!o.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==ot(e))throw new Error("line must be a LineString");var a=1/0,s=null;return D(o,(function(t){var n=gr(t,e,{units:r});n<a&&(a=n,s=t)})),s&&(s.properties=ht({dist:a},s.properties,i)),s},e.planepoint=function(t,e){var n=J(t),r=it(e).coordinates[0];if(r.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var i=e.properties||{},o=i.a,a=i.b,s=i.c,u=n[0],c=n[1],l=r[0][0],h=r[0][1],f=void 0!==o?o:r[0][2],p=r[1][0],d=r[1][1],g=void 0!==a?a:r[1][2],v=r[2][0],y=r[2][1],m=void 0!==s?s:r[2][2];return(m*(u-l)*(c-d)+f*(u-p)*(c-y)+g*(u-v)*(c-h)-g*(u-l)*(c-y)-m*(u-p)*(c-h)-f*(u-v)*(c-d))/((u-l)*(c-d)+(u-p)*(c-y)+(u-v)*(c-h)-(u-l)*(c-y)-(u-p)*(c-h)-(u-v)*(c-d))},e.point=u,e.pointGrid=jr,e.pointOnFeature=_r,e.pointOnLine=pr,e.pointOnSurface=_r,e.pointToLineDistance=gr,e.points=c,e.pointsWithinPolygon=ve,e.polygon=l,e.polygonSmooth=function(t,e){var n=[],r=e.iterations||1;if(!t)throw new Error("inputPolys is required");return B(t,(function(t,e,i){var o,a,s;switch(t.type){case"Polygon":o=[[]];for(var u=0;u<r;u++)s=[[]],a=t,u>0&&(a=l(o).geometry),ls(a,s),o=s.slice(0);n.push(l(o,i));break;case"MultiPolygon":o=[[[]]];for(var c=0;c<r;c++)s=[[[]]],a=t,c>0&&(a=y(o).geometry),hs(a,s),o=s.slice(0);n.push(y(o,i));break;default:throw new Error("geometry is invalid, must be Polygon or MultiPolygon")}})),d(n)},e.polygonTangents=function(t,e){var n,r,i,o,a=$(t),s=$(e),c=Q(e),l=0,h=null;switch(a[0]>c[0]&&a[0]<c[2]&&a[1]>c[1]&&a[1]<c[3]&&(l=(h=zn(t,fn(e))).properties.featureIndex),ot(e)){case"Polygon":n=s[0][l],r=s[0][0],null!==h&&h.geometry.coordinates[1]<a[1]&&(r=s[0][l]),o=Ei(s[0][0],s[0][s[0].length-1],a);var f=wi(s[0],a,o,i,n,r);n=f[0],r=f[1];break;case"MultiPolygon":for(var p=0,g=0,v=0,y=0;y<s[0].length;y++){p=y;for(var m=!1,_=0;_<s[0][y].length;_++){if(g=_,v===l){m=!0;break}v++}if(m)break}n=s[0][p][g],r=s[0][p][g],o=Ei(s[0][0][0],s[0][0][s[0][0].length-1],a),s.forEach((function(t){var e=wi(t[0],a,o,i,n,r);n=e[0],r=e[1]}))}return d([u(n),u(r)])},e.polygonToLine=ni,e.polygonToLineString=ni,e.polygonize=function(t){var e=zo.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter((function(t){return t.isValid()})).forEach((function(t){t.isHole()?n.push(t):r.push(t)})),n.forEach((function(t){Fo.findEdgeRingContaining(t,r)&&r.push(t)})),d(r.map((function(t){return t.toPolygon()})))},e.polygons=h,e.projection=bs,e.propEach=R,e.propReduce=A,e.propertiesContainsFilter=js,e.radians2degrees=O,e.radiansToDegrees=O,e.radiansToDistance=b,e.radiansToLength=b,e.random=Ss,e.randomLineString=Os,e.randomPoint=xs,e.randomPolygon=Es,e.randomPosition=ws,e.rewind=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");!1===r&&(t=xe(t));var i=[];switch(t.type){case"GeometryCollection":return B(t,(function(t){ki(t,n)})),t;case"FeatureCollection":return D(t,(function(t){D(ki(t,n),(function(t){i.push(t)}))})),d(i)}return ki(t,n)},e.rhumbBearing=mi,e.rhumbDestination=bi,e.rhumbDistance=dr,e.round=_,e.sample=function(t,e){if(!t)throw new Error("featurecollection is required");if(null==e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");return d(function(t,e){for(var n,r,i=t.slice(0),o=t.length,a=o-e;o-- >a;)n=i[r=Math.floor((o+1)*Math.random())],i[r]=i[o],i[o]=n;return i.slice(a)}(t.features,e))},e.sector=function(t,e,n,r,i){if(!T(i=i||{}))throw new Error("options is invalid");var o=i.properties;if(!t)throw new Error("center is required");if(null==n)throw new Error("bearing1 is required");if(null==r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(yi(n)===yi(r))return un(t,e,i);var a=$(t),s=ti(t,e,n,r,i),u=[[a]];return j(s,(function(t){u[0].push(t)})),u[0].push(a),l(u,o)},e.segmentEach=G,e.segmentReduce=H,e.shortestPath=function(t,e,n){if(!T(n=n||{}))throw new Error("options is invalid");var r=n.resolution,i=n.minDistance,o=n.obstacles||d([]);if(!t)throw new Error("start is required");if(!e)throw new Error("end is required");if(r&&!C(r)||r<=0)throw new Error("options.resolution must be a number, greater than 0");if(i)throw new Error("options.minDistance is not yet implemented");var s=J(t),c=J(e);switch(t=u(s),e=u(c),ot(o)){case"FeatureCollection":if(0===o.features.length)return f([s,c]);break;case"Polygon":o=d([a(it(o))]);break;default:throw new Error("invalid obstacles")}var l=o;l.features.push(t),l.features.push(e);var h=Q(To(rn(Q(l)),1.15));r||(r=ye([h[0],h[1]],[h[2],h[1]],n)/100),l.features.pop(),l.features.pop();for(var p=h[0],g=h[1],v=h[2],y=h[3],m=r/ye([p,g],[v,g],n)*(v-p),_=r/ye([p,g],[p,y],n)*(y-g),b=v-p,w=y-g,x=Math.floor(b/m),E=Math.floor(w/_),O=(b-x*m)/2,k=[],I=[],S=[],N=[],P=1/0,L=1/0,j=y-(w-E*_)/2,M=0;j>=g;){for(var R=[],A=[],D=p+O,F=0;D<=v;){var z=u([D,j]),B=wa(z,o);R.push(B?0:1),A.push(D+"|"+j);var U=ye(z,t);!B&&U<P&&(P=U,S={x:F,y:M});var V=ye(z,e);!B&&V<L&&(L=V,N={x:F,y:M}),D+=m,F++}I.push(R),k.push(A),j-=_,M++}var q=new ma(I,{diagonal:!0}),G=q.grid[S.y][S.x],H=q.grid[N.y][N.x],W=ya.search(q,G,H),X=[s];return W.forEach((function(t){var e=k[t.x][t.y].split("|");X.push([+e[0],+e[1]])})),X.push(c),He(f(X))},e.simplify=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return!0!==i&&(t=xe(t)),B(t,(function(t){!function(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;He(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=Je(i,e,n);break;case"MultiLineString":t.coordinates=i.map((function(t){return Je(t,e,n)}));break;case"Polygon":t.coordinates=$e(i,e,n);break;case"MultiPolygon":t.coordinates=i.map((function(t){return $e(t,e,n)}))}}(t,n,r)})),t},e.square=an,e.squareGrid=Tg,e.standardDeviationalEllipse=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!C(n))throw new Error("steps must be a number");if(!T(i))throw new Error("properties must be a number");var o=z(t).length,a=us(t,{weight:r}),s=0,u=0,c=0;D(t,(function(t){var e=t.properties[r]||1,n=cs($(t),$(a));s+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,c+=n.x*n.y*e}));var l=s-u,h=Math.sqrt(Math.pow(l,2)+4*Math.pow(c,2)),f=2*c,p=Math.atan((l+h)/f),g=180*p/Math.PI,v=0,y=0,m=0;D(t,(function(t){var e=t.properties[r]||1,n=cs($(t),$(a));v+=Math.pow(n.x*Math.cos(p)-n.y*Math.sin(p),2)*e,y+=Math.pow(n.x*Math.sin(p)+n.y*Math.cos(p),2)*e,m+=e}));var _=Math.sqrt(2*v/m),b=Math.sqrt(2*y/m),w=as(a,_,b,{units:"degrees",angle:g,steps:n,properties:i}),x=ve(t,d([w])),E={meanCenterCoordinates:$(a),semiMajorAxis:_,semiMinorAxis:b,numberOfFeatures:o,angle:g,percentageWithinEllipse:100*z(x).length/o};return w.properties.standardDeviationalEllipse=E,w},e.tag=function(t,e,n,r){return t=xe(t),e=xe(e),D(t,(function(t){t.properties||(t.properties={}),D(e,(function(e){void 0===t.properties[r]&&de(t,e)&&(t.properties[r]=e.properties[n])}))})),t},e.tesselate=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=Fn(t.geometry.coordinates):t.geometry.coordinates.forEach((function(t){e.features=e.features.concat(Fn(t))})),e},e.tin=me,e.toMercator=gs,e.toWgs84=vs,e.transformRotate=Co,e.transformScale=To,e.transformTranslate=function(t,e,n,r){if(!T(r=r||{}))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,a=r.mutate;if(!t)throw new Error("geojson is required");if(null==e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(null==n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n+=180),!1!==a&&void 0!==a||(t=xe(t)),j(t,(function(t){var r=$(bi(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)})),t},e.triangleGrid=Ng,e.truncate=Mr,e.union=function(t,e,n){void 0===n&&(n={});var r=it(t),i=it(e),o=_u.union(r.coordinates,i.coordinates);return 0===o.length?null:1===o.length?l(o[0],n.properties):y(o,n.properties)},e.unitsFactors=i,e.unkinkPolygon=function(t){var e=[];return V(t,(function(t){"Polygon"===t.geometry.type&&D(Dr(t),(function(n){e.push(l(n.geometry.coordinates,t.properties))}))})),d(e)},e.validateBBox=N,e.validateId=P,e.voronoi=function(t,e){if(!T(e=e||{}))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return rt(t,"Point","points"),d(function(){var t=Ea,e=Oa,n=null;function r(r){return new is(r.map((function(n,i){var o=[Math.round(t(n,i,r)/es)*es,Math.round(e(n,i,r)/es)*es];return o.index=i,o.data=n,o})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:xa(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:xa(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}().x((function(t){return t.geometry.coordinates[0]})).y((function(t){return t.geometry.coordinates[1]})).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(os))},e.within=ve,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,n(70))},,function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(6),i=n(1),o=n(14),a=n.n(o),s=n(7);e.a=function(t){return i.forwardRef((function(e,n){return Object(s.jsx)("div",Object(r.a)(Object(r.a)({},e),{},{ref:n,className:a()(e.className,t)}))}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(){var t=Object(r.useRef)(!0),e=Object(r.useRef)((function(){return t.current}));return Object(r.useEffect)((function(){return function(){t.current=!1}}),[]),e.current}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(1);function i(t){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current=t})),e.current}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n(9);var r=n(13),i=n(1),o=n(27),a=n(16);function s(t){var e=t.basename,n=t.children,s=t.window,u=Object(i.useRef)();null==u.current&&(u.current=Object(o.b)({window:s}));var c=u.current,l=Object(i.useState)({action:c.action,location:c.location}),h=Object(r.a)(l,2),f=h[0],p=h[1];return Object(i.useLayoutEffect)((function(){return c.listen(p)}),[c]),Object(i.createElement)(a.b,{basename:e,children:n,location:f.location,navigationType:f.action,navigator:c})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(43),i=n(56);function o(t,e,n){return(o=Object(i.a)()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&Object(r.a)(o,n.prototype),o}).apply(null,arguments)}},function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(1),i=r.createContext(null);i.displayName="CardHeaderContext",e.a=i},function(t,e,n){"use strict";e.a=!("undefined"===typeof window||!window.document||!window.document.createElement)},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(1),u=n(19),c=n.n(u),l=n(7),h=["as","className","type","tooltip"],f={type:c.a.string,tooltip:c.a.bool,as:c.a.elementType},p=s.forwardRef((function(t,e){var n=t.as,o=void 0===n?"div":n,s=t.className,u=t.type,c=void 0===u?"valid":u,f=t.tooltip,p=void 0!==f&&f,d=Object(i.a)(t,h);return Object(l.jsx)(o,Object(r.a)(Object(r.a)({},d),{},{ref:e,className:a()(s,"".concat(c,"-").concat(p?"tooltip":"feedback"))}))}));p.displayName="Feedback",p.propTypes=f,e.a=p},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(25),i=n(45),o=n(1);n(66);function a(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function s(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}function u(t,e){return Object.keys(e).reduce((function(n,u){var c,l=n,h=l[a(u)],f=l[u],p=Object(i.a)(l,[a(u),u].map(s)),d=e[u],g=function(t,e,n){var r=Object(o.useRef)(void 0!==t),i=Object(o.useState)(e),a=i[0],s=i[1],u=void 0!==t,c=r.current;return r.current=u,!u&&c&&a!==e&&s(e),[u?t:a,Object(o.useCallback)((function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[t].concat(r)),s(t)}),[n])]}(f,h,t[d]),v=g[0],y=g[1];return Object(r.a)({},p,((c={})[u]=v,c[d]=y,c))}),t)}n(62);function c(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function l(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function h(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}c.__suppressDeprecationWarning=!0,l.__suppressDeprecationWarning=!0,h.__suppressDeprecationWarning=!0},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(17),i=n(43);var o=n(55);function a(t){var e="function"===typeof Map?new Map:void 0;return(a=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return Object(o.a)(t,arguments,Object(r.a)(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object(i.a)(a,t)})(t)}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return b}));var r=n(13),i=n(1),o=n.n(i),a=n(30),s=n(32);function u(t){function e(e,n){var r=t(e).current,a=r.instance,u=r.context;return Object(i.useImperativeHandle)(n,(function(){return a})),null==e.children?null:o.a.createElement(s.b,{value:u},e.children)}return Object(i.forwardRef)(e)}function c(t){function e(e,n){var r=t(e).current.instance;return Object(i.useImperativeHandle)(n,(function(){return r})),null}return Object(i.forwardRef)(e)}function l(t,e){return null==e?function(e,n){return Object(i.useRef)(t(e,n))}:function(n,r){var o=Object(i.useRef)(t(n,r)),a=Object(i.useRef)(n),s=o.current.instance;return Object(i.useEffect)((function(){a.current!==n&&(e(s,n,a.current),a.current=n)}),[s,n,r]),o}}function h(t,e){var n=Object(i.useRef)(e);Object(i.useEffect)((function(){e!==n.current&&null!=t.attributionControl&&(null!=n.current&&t.attributionControl.removeAttribution(n.current),null!=e&&t.attributionControl.addAttribution(e)),n.current=e}),[t,e])}function f(t,e){var n=Object(i.useRef)();Object(i.useEffect)((function(){return null!=e&&t.instance.on(e),n.current=e,function(){null!=n.current&&t.instance.off(n.current),n.current=null}}),[t,e])}var p=n(46);function d(t,e){Object(i.useEffect)((function(){var n;return(null!==(n=e.layerContainer)&&void 0!==n?n:e.map).addLayer(t.instance),function(){var n;null==(n=e.layerContainer)||n.removeLayer(t.instance),e.map.removeLayer(t.instance)}}),[e,t])}function g(t){return function(e){var n=Object(s.c)(),r=t(Object(p.a)(e,n),n);return h(n.map,e.attribution),f(r.current,e.eventHandlers),d(r.current,n),r}}function v(t){return function(e){var n=Object(s.c)(),r=t(Object(p.a)(e,n),n);return f(r.current,e.eventHandlers),d(r.current,n),function(t,e){var n=Object(i.useRef)();Object(i.useEffect)((function(){if(e.pathOptions!==n.current){var r,i=null!==(r=e.pathOptions)&&void 0!==r?r:{};t.instance.setStyle(i),n.current=i}}),[t,e])}(r.current,e),r}}function y(t,e){return u(g(l(t,e)))}function m(t,e){return function(t){function e(e,n){var o=Object(i.useState)(!1),s=Object(r.a)(o,2),u=s[0],c=s[1],l=t(e,c).current.instance;Object(i.useImperativeHandle)(n,(function(){return l})),Object(i.useEffect)((function(){u&&l.update()}),[l,u,e.children]);var h=l._contentNode;return h?Object(a.createPortal)(e.children,h):null}return Object(i.forwardRef)(e)}(function(t,e){return function(n,r){var i=Object(s.c)(),o=t(Object(p.a)(n,i),i);return h(i.map,n.attribution),f(o.current,n.eventHandlers),e(o.current,i,n,r),o}}(l(t),e))}function _(t,e){return u(v(l(t,e)))}function b(t,e){return c(g(l(t,e)))}},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;(u=new Error(e.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return yt})),n.d(e,"b",(function(){return j}));var r=n(1),i=n(5),o={data:""},a=function(t){return"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||o},s=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,u=/\/\*[^]*?\*\/|\s\s+|\n/g,c=function t(e,n){var r,i="",o="",a="",s=function(s){var c=e[s];"object"==typeof c?(r=n?n.replace(/([^,])+/g,(function(t){return s.replace(/(^:.*)|([^,])+/g,(function(e){return/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e}))})):s,o+="@"==s[0]?"f"==s[1]?t(c,s):s+"{"+t(c,"k"==s[1]?"":n)+"}":t(c,r)):"@"==s[0]&&"i"==s[1]?i=s+" "+c+";":(s=s.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=t.p?t.p(s,c):s+":"+c+";"),u=s};for(var u in e)s(u);return i+(n&&a?n+"{"+a+"}":a)+o},l={},h=function(t,e,n,r,o){var a=function t(e){if("object"==typeof e){var n="";for(var r in e)n+=r+t(e[r]);return n}return e}(t),h=l[a]||(l[a]=function(t){for(var e=0,n=11;e<t.length;)n=101*n+t.charCodeAt(e++)>>>0;return"go"+n}(a));if(!l[h]){var f=a!==t?t:function(t){for(var e,n=[{}];e=s.exec(t.replace(u,""));)e[4]?n.shift():e[3]?n.unshift(n[0][e[3]]=n[0][e[3]]||{}):n[0][e[1]]=e[2];return n[0]}(t);l[h]=c(o?Object(i.a)({},"@keyframes "+h,f):f,n?"":"."+h)}return function(t,e,n){-1==e.data.indexOf(t)&&(e.data=n?t+e.data:e.data+t)}(l[h],e,r),h},f=function(t,e,n){return t.reduce((function(t,r,i){var o=e[i];if(o&&o.call){var a=o(n),s=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=s?"."+s:a&&"object"==typeof a?a.props?"":c(a,""):!1===a?"":a}return t+r+(null==o?"":o)}),"")};function p(t){var e=this||{},n=t.call?t(e.p):t;return h(n.unshift?n.raw?f(n,[].slice.call(arguments,1),e.p):n.reduce((function(t,n){return Object.assign(t,n&&n.call?n(e.p):n)}),{}):n,a(e.target),e.g,e.o,e.k)}p.bind({g:1});var d,g,v,y=p.bind({k:1});function m(t,e){var n=this||{};return function(){var r=arguments;function i(o,a){var s=Object.assign({},o),u=s.className||i.className;n.p=Object.assign({theme:g&&g()},s),n.o=/ *go\d+/.test(u),s.className=p.apply(n,r)+(u?" "+u:""),e&&(s.ref=a);var c=t;return t[0]&&(c=s.as||t,delete s.as),v&&c[0]&&v(s),d(c,s)}return e?e(i):i}}function _(){return(_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function b(t,e){return e||(e=t.slice(0)),t.raw=e,t}var w,x=function(t,e){return function(t){return"function"===typeof t}(t)?t(e):t},E=function(){var t=0;return function(){return(++t).toString()}}(),O=function(){var t=void 0;return function(){if(void 0===t&&"undefined"!==typeof window){var e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}}();!function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"}(w||(w={}));var k=new Map,I=function(t){if(!k.has(t)){var e=setTimeout((function(){k.delete(t),N({type:w.REMOVE_TOAST,toastId:t})}),1e3);k.set(t,e)}},S=function t(e,n){switch(n.type){case w.ADD_TOAST:return _({},e,{toasts:[n.toast].concat(e.toasts).slice(0,20)});case w.UPDATE_TOAST:return n.toast.id&&function(t){var e=k.get(t);e&&clearTimeout(e)}(n.toast.id),_({},e,{toasts:e.toasts.map((function(t){return t.id===n.toast.id?_({},t,n.toast):t}))});case w.UPSERT_TOAST:var r=n.toast;return e.toasts.find((function(t){return t.id===r.id}))?t(e,{type:w.UPDATE_TOAST,toast:r}):t(e,{type:w.ADD_TOAST,toast:r});case w.DISMISS_TOAST:var i=n.toastId;return i?I(i):e.toasts.forEach((function(t){I(t.id)})),_({},e,{toasts:e.toasts.map((function(t){return t.id===i||void 0===i?_({},t,{visible:!1}):t}))});case w.REMOVE_TOAST:return void 0===n.toastId?_({},e,{toasts:[]}):_({},e,{toasts:e.toasts.filter((function(t){return t.id!==n.toastId}))});case w.START_PAUSE:return _({},e,{pausedAt:n.time});case w.END_PAUSE:var o=n.time-(e.pausedAt||0);return _({},e,{pausedAt:void 0,toasts:e.toasts.map((function(t){return _({},t,{pauseDuration:t.pauseDuration+o})}))})}},C=[],T={toasts:[],pausedAt:void 0},N=function(t){T=S(T,t),C.forEach((function(t){t(T)}))},P={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},L=function(t){return function(e,n){var r=function(t,e,n){return void 0===e&&(e="blank"),_({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0},n,{id:(null==n?void 0:n.id)||E()})}(e,t,n);return N({type:w.UPSERT_TOAST,toast:r}),r.id}},j=function(t,e){return L("blank")(t,e)};j.error=L("error"),j.success=L("success"),j.loading=L("loading"),j.custom=L("custom"),j.dismiss=function(t){N({type:w.DISMISS_TOAST,toastId:t})},j.remove=function(t){return N({type:w.REMOVE_TOAST,toastId:t})},j.promise=function(t,e,n){var r=j.loading(e.loading,_({},n,null==n?void 0:n.loading));return t.then((function(t){return j.success(x(e.success,t),_({id:r},n,null==n?void 0:n.success)),t})).catch((function(t){j.error(x(e.error,t),_({id:r},n,null==n?void 0:n.error))})),t};var M=function(t){var e=function(t){void 0===t&&(t={});var e=Object(r.useState)(T),n=e[0],i=e[1];Object(r.useEffect)((function(){return C.push(i),function(){var t=C.indexOf(i);t>-1&&C.splice(t,1)}}),[n]);var o=n.toasts.map((function(e){var n,r,i;return _({},t,t[e.type],e,{duration:e.duration||(null==(n=t[e.type])?void 0:n.duration)||(null==(r=t)?void 0:r.duration)||P[e.type],style:_({},t.style,null==(i=t[e.type])?void 0:i.style,e.style)})}));return _({},n,{toasts:o})}(t),n=e.toasts,i=e.pausedAt;Object(r.useEffect)((function(){if(!i){var t=Date.now(),e=n.map((function(e){if(e.duration!==1/0){var n=(e.duration||0)+e.pauseDuration-(t-e.createdAt);if(!(n<0))return setTimeout((function(){return j.dismiss(e.id)}),n);e.visible&&j.dismiss(e.id)}}));return function(){e.forEach((function(t){return t&&clearTimeout(t)}))}}}),[n,i]);var o=Object(r.useMemo)((function(){return{startPause:function(){N({type:w.START_PAUSE,time:Date.now()})},endPause:function(){i&&N({type:w.END_PAUSE,time:Date.now()})},updateHeight:function(t,e){return N({type:w.UPDATE_TOAST,toast:{id:t,height:e}})},calculateOffset:function(t,e){var r,i=e||{},o=i.reverseOrder,a=void 0!==o&&o,s=i.gutter,u=void 0===s?8:s,c=i.defaultPosition,l=n.filter((function(e){return(e.position||c)===(t.position||c)&&e.height})),h=l.findIndex((function(e){return e.id===t.id})),f=l.filter((function(t,e){return e<h&&t.visible})).length;return(r=l.filter((function(t){return t.visible}))).slice.apply(r,a?[f+1]:[0,f]).reduce((function(t,e){return t+(e.height||0)+u}),0)}}}),[n,i]);return{toasts:n,handlers:o}};function R(){var t=b(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"]);return R=function(){return t},t}function A(){var t=b(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]);return A=function(){return t},t}function D(){var t=b(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return D=function(){return t},t}function F(){var t=b(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]);return F=function(){return t},t}var z=y(F()),B=y(D()),U=y(A()),V=m("div")(R(),(function(t){return t.primary||"#ff4b4b"}),z,B,(function(t){return t.secondary||"#fff"}),U);function q(){var t=b(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"]);return q=function(){return t},t}function G(){var t=b(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return G=function(){return t},t}var H=y(G()),W=m("div")(q(),(function(t){return t.secondary||"#e0e0e0"}),(function(t){return t.primary||"#616161"}),H);function X(){var t=b(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"]);return X=function(){return t},t}function Y(){var t=b(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]);return Y=function(){return t},t}function Z(){var t=b(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]);return Z=function(){return t},t}var K=y(Z()),Q=y(Y()),J=m("div")(X(),(function(t){return t.primary||"#61d345"}),K,Q,(function(t){return t.secondary||"#fff"}));function $(){var t=b(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"]);return $=function(){return t},t}function tt(){var t=b(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]);return tt=function(){return t},t}function et(){var t=b(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]);return et=function(){return t},t}function nt(){var t=b(["\n  position: absolute;\n"]);return nt=function(){return t},t}var rt=m("div")(nt()),it=m("div")(et()),ot=y(tt()),at=m("div")($(),ot),st=function(t){var e=t.toast,n=e.icon,i=e.type,o=e.iconTheme;return void 0!==n?"string"===typeof n?Object(r.createElement)(at,null,n):n:"blank"===i?null:Object(r.createElement)(it,null,Object(r.createElement)(W,Object.assign({},o)),"loading"!==i&&Object(r.createElement)(rt,null,"error"===i?Object(r.createElement)(V,Object.assign({},o)):Object(r.createElement)(J,Object.assign({},o))))};function ut(){var t=b(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n"]);return ut=function(){return t},t}function ct(){var t=b(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]);return ct=function(){return t},t}var lt=function(t){return"\n0% {transform: translate3d(0,"+-200*t+"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"},ht=function(t){return"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,"+-150*t+"%,-1px) scale(.6); opacity:0;}\n"},ft=m("div",r.forwardRef)(ct()),pt=m("div")(ut()),dt=Object(r.memo)((function(t){var e=t.toast,n=t.position,i=t.style,o=t.children,a=null!=e&&e.height?function(t,e){var n=t.includes("top")?1:-1,r=O()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[lt(n),ht(n)],i=r[1];return{animation:e?y(r[0])+" 0.35s cubic-bezier(.21,1.02,.73,1) forwards":y(i)+" 0.4s forwards cubic-bezier(.06,.71,.55,1)"}}(e.position||n||"top-center",e.visible):{opacity:0},s=Object(r.createElement)(st,{toast:e}),u=Object(r.createElement)(pt,Object.assign({},e.ariaProps),x(e.message,e));return Object(r.createElement)(ft,{className:e.className,style:_({},a,i,e.style)},"function"===typeof o?o({icon:s,message:u}):Object(r.createElement)(r.Fragment,null,s,u))}));function gt(){var t=b(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]);return gt=function(){return t},t}!function(t,e,n,r){c.p=e,d=t,g=n,v=r}(r.createElement);var vt=p(gt()),yt=function(t){var e=t.reverseOrder,n=t.position,i=void 0===n?"top-center":n,o=t.toastOptions,a=t.gutter,s=t.children,u=t.containerStyle,c=t.containerClassName,l=M(o),h=l.toasts,f=l.handlers;return Object(r.createElement)("div",{style:_({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},u),className:c,onMouseEnter:f.startPause,onMouseLeave:f.endPause},h.map((function(t){var n,o=t.position||i,u=function(t,e){var n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return _({left:0,right:0,display:"flex",position:"absolute",transition:O()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY("+e*(n?1:-1)+"px)"},r,i)}(o,f.calculateOffset(t,{reverseOrder:e,gutter:a,defaultPosition:i})),c=t.height?void 0:(n=function(e){f.updateHeight(t.id,e.height)},function(t){t&&setTimeout((function(){var e=t.getBoundingClientRect();n(e)}))});return Object(r.createElement)("div",{ref:c,className:t.visible?vt:"",key:t.id,style:u},"custom"===t.type?x(t.message,t):s?s(t):Object(r.createElement)(dt,{toast:t,position:o}))})))}},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return _s})),n.d(e,"b",(function(){return La})),n.d(e,"c",(function(){return ja})),n.d(e,"d",(function(){return vs})),n.d(e,"e",(function(){return ms})),n.d(e,"f",(function(){return Aa}));var r=n(55),i=n(22),o=n(17),a=n(13),s=n(9),u=n(0),c=n.n(u),l=n(3),h=n(11),f=n(12),p=n(61),d=n(21),g=n(2),v=n(4),y=n(18),m=n(34),_=n(24),b=n(8),w=n(26),x="@firebase/firestore",E=function(){function t(e){Object(g.a)(this,t),this.uid=e}return Object(v.a)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(t){return t.uid===this.uid}}]),t}();E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");var O="9.6.0",k=new _.b("@firebase/firestore");function I(){return k.logLevel}function S(t){if(k.logLevel<=_.a.DEBUG){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.map(N);k.debug.apply(k,["Firestore (".concat(O,"): ").concat(t)].concat(Object(d.a)(i)))}}function C(t){if(k.logLevel<=_.a.ERROR){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.map(N);k.error.apply(k,["Firestore (".concat(O,"): ").concat(t)].concat(Object(d.a)(i)))}}function T(t){if(k.logLevel<=_.a.WARN){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.map(N);k.warn.apply(k,["Firestore (".concat(O,"): ").concat(t)].concat(Object(d.a)(i)))}}function N(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",e="FIRESTORE (".concat(O,") INTERNAL ASSERTION FAILED: ")+t;throw C(e),new Error(e)}function L(t,e){t||P()}function j(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){var i;return Object(g.a)(this,n),(i=e.call(this,r)).code=t,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(Object(p.a)(Error)),A=function t(){var e=this;Object(g.a)(this,t),this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},D=function t(e,n){Object(g.a)(this,t),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))},F=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(E.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),z=function(){function t(e){Object(g.a)(this,t),this.t=e,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Object(v.a)(t,[{key:"start",value:function(t,e){var n=this,r=this.i,i=function(t){return n.i!==r?(r=n.i,e(t)):Promise.resolve()},o=new A;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new A,t.enqueueRetryable((function(){return i(n.currentUser)}))};var a=function(){var e=o;t.enqueueRetryable(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.promise;case 2:return t.next=4,i(n.currentUser);case 4:case"end":return t.stop()}}),t)}))))},s=function(t){S("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=t,n.auth.addAuthTokenListener(n.o),a()};this.t.onInit((function(t){return s(t)})),setTimeout((function(){if(!n.auth){var t=n.t.getImmediate({optional:!0});t?s(t):(S("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new A)}}),0),a()}},{key:"getToken",value:function(){var t=this,e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.i!==e?(S("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(L("string"==typeof n.accessToken),new D(n.accessToken,t.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var t=this.auth&&this.auth.getUid();return L(null===t||"string"==typeof t),new E(t)}}]),t}(),B=function t(e,n,r){Object(g.a)(this,t),this.type="FirstParty",this.user=E.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)},U=function(){function t(e,n,r){Object(g.a)(this,t),this.h=e,this.l=n,this.m=r}return Object(v.a)(t,[{key:"getToken",value:function(){return Promise.resolve(new B(this.h,this.l,this.m))}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(E.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),V=function t(e){Object(g.a)(this,t),this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)},q=function(){function t(e){Object(g.a)(this,t),this.g=e,this.forceRefresh=!1,this.appCheck=null}return Object(v.a)(t,[{key:"start",value:function(t,e){var n=this;this.o=function(n){t.enqueueRetryable((function(){return function(t){return null!=t.error&&S("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message)),e(t.token)}(n)}))};var r=function(t){S("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=t,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(t){return r(t)})),setTimeout((function(){if(!n.appCheck){var t=n.g.getImmediate({optional:!0});t?r(t):S("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(L("string"==typeof t.token),new V(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}(),G=function(){function t(e,n){var r=this;Object(g.a)(this,t),this.previousValue=e,n&&(n.sequenceNumberHandler=function(t){return r.p(t)},this.T=function(t){return n.writeSequenceNumber(t)})}return Object(v.a)(t,[{key:"p",value:function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}},{key:"next",value:function(){var t=++this.previousValue;return this.T&&this.T(t),t}}]),t}();function H(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}G.I=-1;var W=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,null,[{key:"A",value:function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=H(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n}}]),t}();function X(t,e){return t<e?-1:t>e?1:0}function Y(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}var Z=function(){function t(e,n){if(Object(g.a)(this,t),this.seconds=e,this.nanoseconds=n,n<0)throw new R(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new R(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new R(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return Object(v.a)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(t){return this.seconds===t.seconds?X(this.nanoseconds,t.nanoseconds):X(this.seconds,t.seconds)}},{key:"isEqual",value:function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),K=function(){function t(e){Object(g.a)(this,t),this.timestamp=e}return Object(v.a)(t,[{key:"compareTo",value:function(t){return this.timestamp._compareTo(t.timestamp)}},{key:"isEqual",value:function(t){return this.timestamp.isEqual(t.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new Z(0,0))}}]),t}();function Q(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function J(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var tt=function(){function t(e,n,r){Object(g.a)(this,t),void 0===n?n=0:n>e.length&&P(),void 0===r?r=e.length-n:r>e.length-n&&P(),this.segments=e,this.offset=n,this.len=r}return Object(v.a)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(t){return this.segments[this.offset+t]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"isImmediateParentOf",value:function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"forEach",value:function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}]),t}(),et=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){return Object(g.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"construct",value:function(t,e,r){return new n(t,e,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=[],e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];if(s.indexOf("//")>=0)throw new R(M.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));t.push.apply(t,Object(d.a)(s.split("/").filter((function(t){return t.length>0}))))}return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(tt),nt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,rt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){return Object(g.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"construct",value:function(t,e,r){return new n(t,e,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(t){return nt.test(t)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(t){for(var e=[],r="",i=0,o=function(){if(0===r.length)throw new R(M.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new R(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new R(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new R(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(tt),it=function(){function t(e){Object(g.a)(this,t),this.fields=e,e.sort(rt.comparator)}return Object(v.a)(t,[{key:"covers",value:function(t){var e,n=Object(s.a)(this.fields);try{for(n.s();!(e=n.n()).done;){if(e.value.isPrefixOf(t))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(t){return Y(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))}}]),t}();var ot=function(){function t(e){Object(g.a)(this,t),this.binaryString=e}return Object(v.a)(t,[{key:"toBase64",value:function(){return t=this.binaryString,btoa(t);var t}},{key:"toUint8Array",value:function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(t){return X(this.binaryString,t.binaryString)}},{key:"isEqual",value:function(t){return this.binaryString===t.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))}}]),t}();ot.EMPTY_BYTE_STRING=new ot("");var at=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function st(t){if(L(!!t),"string"==typeof t){var e=0,n=at.exec(t);if(L(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ct(t){return"string"==typeof t?ot.fromBase64String(t):ot.fromUint8Array(t)}function lt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ht(t){var e=st(t.mapValue.fields.__local_write_time__.timestampValue);return new Z(e.seconds,e.nanos)}function ft(t){return null==t}function pt(t){return 0===t&&1/t==-1/0}function dt(t){return"number"==typeof t&&Number.isInteger(t)&&!pt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var gt=function(){function t(e){Object(g.a)(this,t),this.path=e}return Object(v.a)(t,[{key:"hasCollectionId",value:function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}},{key:"isEqual",value:function(t){return null!==t&&0===et.comparator(this.path,t.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(et.fromString(e))}},{key:"fromName",value:function(e){return new t(et.fromString(e).popFirst(5))}},{key:"comparator",value:function(t,e){return et.comparator(t.path,e.path)}},{key:"isDocumentKey",value:function(t){return t.length%2==0}},{key:"fromSegments",value:function(e){return new t(new et(e.slice()))}}]),t}();function vt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lt(t)?4:10:P()}function yt(t,e){var n=vt(t);if(n!==vt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ht(t).isEqual(ht(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=st(t.timestampValue),r=st(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ct(t.bytesValue).isEqual(ct(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ut(t.geoPointValue.latitude)===ut(e.geoPointValue.latitude)&&ut(t.geoPointValue.longitude)===ut(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ut(t.integerValue)===ut(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ut(t.doubleValue),r=ut(e.doubleValue);return n===r?pt(n)===pt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Y(t.arrayValue.values||[],e.arrayValue.values||[],yt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Q(n)!==Q(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!yt(n[i],r[i])))return!1;return!0}(t,e);default:return P()}}function mt(t,e){return void 0!==(t.values||[]).find((function(t){return yt(t,e)}))}function _t(t,e){var n=vt(t),r=vt(e);if(n!==r)return X(n,r);switch(n){case 0:return 0;case 1:return X(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ut(t.integerValue||t.doubleValue),r=ut(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return bt(t.timestampValue,e.timestampValue);case 4:return bt(ht(t),ht(e));case 5:return X(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ct(t),r=ct(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=X(n[i],r[i]);if(0!==o)return o}return X(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=X(ut(t.latitude),ut(e.latitude));return 0!==n?n:X(ut(t.longitude),ut(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=_t(n[i],r[i]);if(o)return o}return X(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=X(r[a],o[a]);if(0!==s)return s;var u=_t(n[r[a]],i[o[a]]);if(0!==u)return u}return X(r.length,o.length)}(t.mapValue,e.mapValue);default:throw P()}}function bt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return X(t,e);var n=st(t),r=st(e),i=X(n.seconds,r.seconds);return 0!==i?i:X(n.nanos,r.nanos)}function wt(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=st(t);return"time(".concat(e.seconds,",").concat(e.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ct(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,gt.fromName(r).toString()):"geoPointValue"in e?"geo(".concat((n=e.geoPointValue).latitude,",").concat(n.longitude,")"):"arrayValue"in e?function(e){var n,r="[",i=!0,o=Object(s.a)(e.values||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value;i?i=!1:r+=",",r+=t(a)}}catch(u){o.e(u)}finally{o.f()}return r+"]"}(e.arrayValue):"mapValue"in e?function(e){var n,r=Object.keys(e.fields||{}).sort(),i="{",o=!0,a=Object(s.a)(r);try{for(a.s();!(n=a.n()).done;){var u=n.value;o?o=!1:i+=",",i+="".concat(u,":").concat(t(e.fields[u]))}}catch(c){a.e(c)}finally{a.f()}return i+"}"}(e.mapValue):P();var n,r}(t)}function xt(t){return!!t&&"integerValue"in t}function Et(t){return!!t&&"arrayValue"in t}function Ot(t){return!!t&&"nullValue"in t}function kt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function It(t){return!!t&&"mapValue"in t}function St(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return J(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=St(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=St(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ct=function(){function t(e){Object(g.a)(this,t),this.value=e}return Object(v.a)(t,[{key:"field",value:function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!It(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null}},{key:"set",value:function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=St(e)}},{key:"setAll",value:function(t){var e=this,n=rt.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=St(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(t){var e=this.field(t.popLast());It(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}},{key:"isEqual",value:function(t){return yt(this.value,t.value)}},{key:"getFieldsMap",value:function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];It(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}},{key:"applyChanges",value:function(t,e,n){J(e,(function(e,n){return t[e]=n}));var r,i=Object(s.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete t[o]}}catch(a){i.e(a)}finally{i.f()}}},{key:"clone",value:function(){return new t(St(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function Tt(t){var e=[];return J(t.fields,(function(t,n){var r=new rt([t]);if(It(n)){var i=Tt(n.mapValue).fields;if(0===i.length)e.push(r);else{var o,a=Object(s.a)(i);try{for(a.s();!(o=a.n()).done;){var u=o.value;e.push(r.child(u))}}catch(c){a.e(c)}finally{a.f()}}}else e.push(r)})),new it(e)}var Nt=function(){function t(e,n,r,i,o){Object(g.a)(this,t),this.key=e,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return Object(v.a)(t,[{key:"convertToFoundDocument",value:function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}},{key:"convertToNoDocument",value:function(t){return this.version=t,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(t){return this.version=t,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"clone",value:function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,K.min(),Ct.empty(),0)}},{key:"newFoundDocument",value:function(e,n,r){return new t(e,1,n,r,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,Ct.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,Ct.empty(),2)}}]),t}(),Pt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Object(g.a)(this,t),this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=s,this.R=null};function Lt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Pt(t,e,n,r,i,o,a)}function jt(t){var e=j(t);if(null===e.R){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+wt(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ft(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Wt(e.startAt)),e.endAt&&(n+="|ub:",n+=Wt(e.endAt)),e.R=n}return e.R}function Mt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Yt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!yt(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kt(t.startAt,e.startAt)&&Kt(t.endAt,e.endAt)}function Rt(t){return gt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var At=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i){var o;return Object(g.a)(this,n),(o=e.call(this)).field=t,o.op=r,o.value=i,o}return Object(v.a)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(_t(e,this.value)):null!==e&&vt(this.value)===vt(e)&&this.v(_t(e,this.value))}},{key:"v",value:function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return P()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(t,e,r){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,r):new Dt(t,e,r):"array-contains"===e?new Ut(t,r):"in"===e?new Vt(t,r):"not-in"===e?new qt(t,r):"array-contains-any"===e?new Gt(t,r):new n(t,e,r)}},{key:"P",value:function(t,e,n){return"in"===e?new Ft(t,n):new zt(t,n)}}]),n}(function(){return function t(){Object(g.a)(this,t)}}());var Dt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i){var o;return Object(g.a)(this,n),(o=e.call(this,t,r,i)).key=gt.fromName(i.referenceValue),o}return Object(v.a)(n,[{key:"matches",value:function(t){var e=gt.comparator(t.key,this.key);return this.v(e)}}]),n}(At),Ft=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){var i;return Object(g.a)(this,n),(i=e.call(this,t,"in",r)).keys=Bt("in",r),i}return Object(v.a)(n,[{key:"matches",value:function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(At),zt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){var i;return Object(g.a)(this,n),(i=e.call(this,t,"not-in",r)).keys=Bt("not-in",r),i}return Object(v.a)(n,[{key:"matches",value:function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))}}]),n}(At);function Bt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return gt.fromName(t.referenceValue)}))}var Ut=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){return Object(g.a)(this,n),e.call(this,t,"array-contains",r)}return Object(v.a)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return Et(e)&&mt(e.arrayValue,this.value)}}]),n}(At),Vt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){return Object(g.a)(this,n),e.call(this,t,"in",r)}return Object(v.a)(n,[{key:"matches",value:function(t){var e=t.data.field(this.field);return null!==e&&mt(this.value.arrayValue,e)}}]),n}(At),qt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){return Object(g.a)(this,n),e.call(this,t,"not-in",r)}return Object(v.a)(n,[{key:"matches",value:function(t){if(mt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!mt(this.value.arrayValue,e)}}]),n}(At),Gt=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){return Object(g.a)(this,n),e.call(this,t,"array-contains-any",r)}return Object(v.a)(n,[{key:"matches",value:function(t){var e=this,n=t.data.field(this.field);return!(!Et(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return mt(e.value.arrayValue,t)}))}}]),n}(At),Ht=function t(e,n){Object(g.a)(this,t),this.position=e,this.before=n};function Wt(t){return"".concat(t.before?"b":"a",":").concat(t.position.map((function(t){return wt(t)})).join(","))}var Xt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Object(g.a)(this,t),this.field=e,this.dir=n};function Yt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Zt(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?gt.comparator(gt.fromName(a.referenceValue),n.key):_t(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Kt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!yt(t.position[n],e.position[n]))return!1;return!0}var Qt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(g.a)(this,t),this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=s,this.endAt=u,this.S=null,this.D=null,this.startAt,this.endAt};function Jt(t,e,n,r,i,o,a,s){return new Qt(t,e,n,r,i,o,a,s)}function $t(t){return new Qt(t)}function te(t){return!ft(t.limit)&&"F"===t.limitType}function ee(t){return!ft(t.limit)&&"L"===t.limitType}function ne(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function re(t){var e,n=Object(s.a)(t.filters);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ie(t){return null!==t.collectionGroup}function oe(t){var e=j(t);if(null===e.S){e.S=[];var n=re(e),r=ne(e);if(null!==n&&null===r)n.isKeyField()||e.S.push(new Xt(n)),e.S.push(new Xt(rt.keyField(),"asc"));else{var i,o=!1,a=Object(s.a)(e.explicitOrderBy);try{for(a.s();!(i=a.n()).done;){var u=i.value;e.S.push(u),u.field.isKeyField()&&(o=!0)}}catch(l){a.e(l)}finally{a.f()}if(!o){var c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Xt(rt.keyField(),c))}}}return e.S}function ae(t){var e=j(t);if(!e.D)if("F"===e.limitType)e.D=Lt(e.path,e.collectionGroup,oe(e),e.filters,e.limit,e.startAt,e.endAt);else{var n,r=[],i=Object(s.a)(oe(e));try{for(i.s();!(n=i.n()).done;){var o=n.value,a="desc"===o.dir?"asc":"desc";r.push(new Xt(o.field,a))}}catch(l){i.e(l)}finally{i.f()}var u=e.endAt?new Ht(e.endAt.position,!e.endAt.before):null,c=e.startAt?new Ht(e.startAt.position,!e.startAt.before):null;e.D=Lt(e.path,e.collectionGroup,r,e.filters,e.limit,u,c)}return e.D}function se(t,e,n){return new Qt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ue(t,e){return Mt(ae(t),ae(e))&&t.limitType===e.limitType}function ce(t){return"".concat(jt(ae(t)),"|lt:").concat(t.limitType)}function le(t){return"Query(target=".concat(function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: [".concat(t.filters.map((function(t){return"".concat((e=t).field.canonicalString()," ").concat(e.op," ").concat(wt(e.value));var e})).join(", "),"]")),ft(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: [".concat(t.orderBy.map((function(t){return function(t){return"".concat(t.field.canonicalString()," (").concat(t.dir,")")}(t)})).join(", "),"]")),t.startAt&&(e+=", startAt: "+Wt(t.startAt)),t.endAt&&(e+=", endAt: "+Wt(t.endAt)),"Target(".concat(e,")")}(ae(t)),"; limitType=").concat(t.limitType,")")}function he(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):gt.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){var n,r=Object(s.a)(t.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(t,e)&&function(t,e){var n,r=Object(s.a)(t.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(e))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(t,e)&&function(t,e){return!(t.startAt&&!Zt(t.startAt,oe(t),e))&&(!t.endAt||!Zt(t.endAt,oe(t),e))}(t,e)}function fe(t){return function(e,n){var r,i=!1,o=Object(s.a)(oe(t));try{for(o.s();!(r=o.n()).done;){var a=r.value,u=pe(a,e,n);if(0!==u)return u;i=i||a.field.isKeyField()}}catch(c){o.e(c)}finally{o.f()}return 0}}function pe(t,e,n){var r=t.field.isKeyField()?gt.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?_t(r,i):P()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return P()}}function de(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pt(e)?"-0":e}}function ge(t){return{integerValue:""+t}}function ve(t,e){return dt(e)?ge(e):de(t,e)}var ye=function t(){Object(g.a)(this,t),this._=void 0};function me(t,e,n){return t instanceof we?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xe?Ee(t,e):t instanceof Oe?ke(t,e):function(t,e){var n=be(t,e),r=Se(n)+Se(t.N);return xt(n)&&xt(t.N)?ge(r):de(t.k,r)}(t,e)}function _e(t,e,n){return t instanceof xe?Ee(t,e):t instanceof Oe?ke(t,e):n}function be(t,e){return t instanceof Ie?xt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var we=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){return Object(g.a)(this,n),e.apply(this,arguments)}return n}(ye),xe=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(g.a)(this,n),(r=e.call(this)).elements=t,r}return n}(ye);function Ee(t,e){var n,r=Ce(e),i=Object(s.a)(t.elements);try{var o=function(){var t=n.value;r.some((function(e){return yt(e,t)}))||r.push(t)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var Oe=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(g.a)(this,n),(r=e.call(this)).elements=t,r}return n}(ye);function ke(t,e){var n,r=Ce(e),i=Object(s.a)(t.elements);try{var o=function(){var t=n.value;r=r.filter((function(e){return!yt(e,t)}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var Ie=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){var i;return Object(g.a)(this,n),(i=e.call(this)).k=t,i.N=r,i}return n}(ye);function Se(t){return ut(t.integerValue||t.doubleValue)}function Ce(t){return Et(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Te=function t(e,n){Object(g.a)(this,t),this.version=e,this.transformResults=n},Ne=function(){function t(e,n){Object(g.a)(this,t),this.updateTime=e,this.exists=n}return Object(v.a)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function Pe(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Le=function t(){Object(g.a)(this,t)};function je(t,e,n){t instanceof Fe?function(t,e,n){var r=t.value.clone(),i=Ue(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ze?function(t,e,n){if(Pe(t.precondition,e)){var r=Ue(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Be(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Me(t,e,n){t instanceof Fe?function(t,e,n){if(Pe(t.precondition,e)){var r=t.value.clone(),i=Ve(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(De(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ze?function(t,e,n){if(Pe(t.precondition,e)){var r=Ve(t.fieldTransforms,n,e),i=e.data;i.setAll(Be(t)),i.setAll(r),e.convertToFoundDocument(De(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Pe(t.precondition,e)&&e.convertToNoDocument(K.min())}(t,e)}function Re(t,e){var n,r=null,i=Object(s.a)(t.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=e.data.field(o.field),u=be(o.transform,a||null);null!=u&&(null==r&&(r=Ct.empty()),r.set(o.field,u))}}catch(c){i.e(c)}finally{i.f()}return r||null}function Ae(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Y(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xe&&e instanceof xe||t instanceof Oe&&e instanceof Oe?Y(t.elements,e.elements,yt):t instanceof Ie&&e instanceof Ie?yt(t.N,e.N):t instanceof we&&e instanceof we}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function De(t){return t.isFoundDocument()?t.version:K.min()}var Fe=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(g.a)(this,n),(o=e.call(this)).key=t,o.value=r,o.precondition=i,o.fieldTransforms=a,o.type=0,o}return n}(Le),ze=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(g.a)(this,n),(a=e.call(this)).key=t,a.data=r,a.fieldMask=i,a.precondition=o,a.fieldTransforms=s,a.type=1,a}return n}(Le);function Be(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Ue(t,e,n){var r=new Map;L(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,_e(a,s,n[i]))}return r}function Ve(t,e,n){var r,i=new Map,o=Object(s.a)(t);try{for(o.s();!(r=o.n()).done;){var a=r.value,u=a.transform,c=n.data.field(a.field);i.set(a.field,me(u,c,e))}}catch(l){o.e(l)}finally{o.f()}return i}var qe,Ge,He=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){var i;return Object(g.a)(this,n),(i=e.call(this)).key=t,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return n}(Le),We=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r){var i;return Object(g.a)(this,n),(i=e.call(this)).key=t,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return n}(Le),Xe=function t(e){Object(g.a)(this,t),this.count=e};function Ye(t){switch(t){default:return P();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Ze(t){if(void 0===t)return C("GRPC error has no .code"),M.UNKNOWN;switch(t){case qe.OK:return M.OK;case qe.CANCELLED:return M.CANCELLED;case qe.UNKNOWN:return M.UNKNOWN;case qe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case qe.INTERNAL:return M.INTERNAL;case qe.UNAVAILABLE:return M.UNAVAILABLE;case qe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case qe.NOT_FOUND:return M.NOT_FOUND;case qe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case qe.ABORTED:return M.ABORTED;case qe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case qe.DATA_LOSS:return M.DATA_LOSS;default:return P()}}(Ge=qe||(qe={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";var Ke=function(){function t(e,n){Object(g.a)(this,t),this.comparator=e,this.root=n||Je.EMPTY}return Object(v.a)(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}},{key:"get",value:function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}},{key:"indexOf",value:function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(t){return this.root.inorderTraversal(t)}},{key:"forEach",value:function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))}},{key:"toString",value:function(){var t=[];return this.inorderTraversal((function(e,n){return t.push("".concat(e,":").concat(n)),!1})),"{".concat(t.join(", "),"}")}},{key:"reverseTraversal",value:function(t){return this.root.reverseTraversal(t)}},{key:"getIterator",value:function(){return new Qe(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(t){return new Qe(this.root,t,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Qe(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(t){return new Qe(this.root,t,this.comparator,!0)}}]),t}(),Qe=function(){function t(e,n,r,i){Object(g.a)(this,t),this.isReverse=i,this.nodeStack=[];for(var o=1;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return Object(v.a)(t,[{key:"getNext",value:function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}]),t}(),Je=function(){function t(e,n,r,i,o){Object(g.a)(this,t),this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return Object(v.a)(t,[{key:"copy",value:function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}},{key:"reverseTraversal",value:function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}},{key:"moveRedLeft",value:function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}},{key:"moveRedRight",value:function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}},{key:"checkMaxDepth",value:function(){var t=this.check();return Math.pow(2,t)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw P();if(this.right.isRed())throw P();var t=this.left.check();if(t!==this.right.check())throw P();return t+(this.isRed()?0:1)}}]),t}();Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1,Je.EMPTY=new(function(){function t(){Object(g.a)(this,t),this.size=0}return Object(v.a)(t,[{key:"key",get:function(){throw P()}},{key:"value",get:function(){throw P()}},{key:"color",get:function(){throw P()}},{key:"left",get:function(){throw P()}},{key:"right",get:function(){throw P()}},{key:"copy",value:function(t,e,n,r,i){return this}},{key:"insert",value:function(t,e,n){return new Je(t,e)}},{key:"remove",value:function(t,e){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(t){return!1}},{key:"reverseTraversal",value:function(t){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());var $e=function(){function t(e){Object(g.a)(this,t),this.comparator=e,this.data=new Ke(this.comparator)}return Object(v.a)(t,[{key:"has",value:function(t){return null!==this.data.get(t)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(t){return this.data.indexOf(t)}},{key:"forEach",value:function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"forEachInRange",value:function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}},{key:"forEachWhile",value:function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}},{key:"getIterator",value:function(){return new tn(this.data.getIterator())}},{key:"getIteratorFrom",value:function(t){return new tn(this.data.getIteratorFrom(t))}},{key:"add",value:function(t){return this.copy(this.data.remove(t).insert(t,!0))}},{key:"delete",value:function(t){return this.has(t)?this.copy(this.data.remove(t)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),tn=function(){function t(e){Object(g.a)(this,t),this.iter=e}return Object(v.a)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}(),en=new Ke(gt.comparator);function nn(){return en}var rn=new Ke(gt.comparator);function on(){return rn}var an=new Ke(gt.comparator);function sn(){return an}var un=new $e(gt.comparator);function cn(){for(var t=un,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];t=t.add(a)}return t}var ln=new $e(X);function hn(){return ln}var fn=function(){function t(e,n,r,i,o){Object(g.a)(this,t),this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return Object(v.a)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n){var r=new Map;return r.set(e,pn.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(K.min(),r,hn(),nn(),cn())}}]),t}(),pn=function(){function t(e,n,r,i,o){Object(g.a)(this,t),this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return Object(v.a)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n){return new t(ot.EMPTY_BYTE_STRING,n,cn(),cn(),cn())}}]),t}(),dn=function t(e,n,r,i){Object(g.a)(this,t),this.$=e,this.removedTargetIds=n,this.key=r,this.F=i},gn=function t(e,n){Object(g.a)(this,t),this.targetId=e,this.O=n},vn=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(g.a)(this,t),this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i},yn=function(){function t(){Object(g.a)(this,t),this.M=0,this.L=bn(),this.B=ot.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return Object(v.a)(t,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}},{key:"G",value:function(){var t=cn(),e=cn(),n=cn();return this.L.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:P()}})),new pn(this.B,this.U,t,e,n)}},{key:"H",value:function(){this.q=!1,this.L=bn()}},{key:"J",value:function(t,e){this.q=!0,this.L=this.L.insert(t,e)}},{key:"Y",value:function(t){this.q=!0,this.L=this.L.remove(t)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),t}(),mn=function(){function t(e){Object(g.a)(this,t),this.et=e,this.nt=new Map,this.st=nn(),this.it=_n(),this.rt=new $e(X)}return Object(v.a)(t,[{key:"ot",value:function(t){var e,n=Object(s.a)(t.$);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.F&&t.F.isFoundDocument()?this.at(r,t.F):this.ct(r,t.key,t.F)}}catch(u){n.e(u)}finally{n.f()}var i,o=Object(s.a)(t.removedTargetIds);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.ct(a,t.key,t.F)}}catch(u){o.e(u)}finally{o.f()}}},{key:"ut",value:function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ht(n);switch(t.state){case 0:e.lt(n)&&r.W(t.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(t.resumeToken);break;case 2:r.Z(),r.K||e.removeTarget(n);break;case 3:e.lt(n)&&(r.tt(),r.W(t.resumeToken));break;case 4:e.lt(n)&&(e.ft(n),r.W(t.resumeToken));break;default:P()}}))}},{key:"forEachTarget",value:function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach((function(t,r){n.lt(r)&&e(r)}))}},{key:"dt",value:function(t){var e=t.targetId,n=t.O.count,r=this.wt(e);if(r){var i=r.target;if(Rt(i))if(0===n){var o=new gt(i.path);this.ct(e,o,Nt.newNoDocument(o,K.min()))}else L(1===n);else this._t(e)!==n&&(this.ft(e),this.rt=this.rt.add(e))}}},{key:"gt",value:function(t){var e=this,n=new Map;this.nt.forEach((function(r,i){var o=e.wt(i);if(o){if(r.current&&Rt(o.target)){var a=new gt(o.target.path);null!==e.st.get(a)||e.yt(i,a)||e.ct(i,a,Nt.newNoDocument(a,t))}r.j&&(n.set(i,r.G()),r.H())}}));var r=cn();this.it.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.wt(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new fn(t,n,this.rt,this.st,r);return this.st=nn(),this.it=_n(),this.rt=new $e(X),i}},{key:"at",value:function(t,e){if(this.lt(t)){var n=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,n),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}}},{key:"ct",value:function(t,e,n){if(this.lt(t)){var r=this.ht(t);this.yt(t,e)?r.J(e,1):r.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),n&&(this.st=this.st.insert(e,n))}}},{key:"removeTarget",value:function(t){this.nt.delete(t)}},{key:"_t",value:function(t){var e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}},{key:"X",value:function(t){this.ht(t).X()}},{key:"ht",value:function(t){var e=this.nt.get(t);return e||(e=new yn,this.nt.set(t,e)),e}},{key:"Tt",value:function(t){var e=this.it.get(t);return e||(e=new $e(X),this.it=this.it.insert(t,e)),e}},{key:"lt",value:function(t){var e=null!==this.wt(t);return e||S("WatchChangeAggregator","Detected inactive target",t),e}},{key:"wt",value:function(t){var e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}},{key:"ft",value:function(t){var e=this;this.nt.set(t,new yn),this.et.getRemoteKeysForTarget(t).forEach((function(n){e.ct(t,n,null)}))}},{key:"yt",value:function(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}]),t}();function _n(){return new Ke(gt.comparator)}function bn(){return new Ke(gt.comparator)}var wn={asc:"ASCENDING",desc:"DESCENDING"},xn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},En=function t(e,n){Object(g.a)(this,t),this.databaseId=e,this.C=n};function On(t,e){return t.C?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function kn(t,e){return t.C?e.toBase64():e.toUint8Array()}function In(t,e){return On(t,e.toTimestamp())}function Sn(t){return L(!!t),K.fromTimestamp(function(t){var e=st(t);return new Z(e.seconds,e.nanos)}(t))}function Cn(t,e){return function(t){return new et(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Tn(t){var e=et.fromString(t);return L(Kn(e)),e}function Nn(t,e){return Cn(t.databaseId,e.path)}function Pn(t,e){var n=Tn(e);if(n.get(1)!==t.databaseId.projectId)throw new R(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new R(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new gt(Rn(n))}function Ln(t,e){return Cn(t.databaseId,e)}function jn(t){var e=Tn(t);return 4===e.length?et.emptyPath():Rn(e)}function Mn(t){return new et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Rn(t){return L(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function An(t,e,n){return{name:Nn(t,e),fields:n.value.mapValue.fields}}function Dn(t,e){var n;if(e instanceof Fe)n={update:An(t,e.key,e.value)};else if(e instanceof He)n={delete:Nn(t,e.key)};else if(e instanceof ze)n={update:An(t,e.key,e.data),updateMask:Zn(e.fieldMask)};else{if(!(e instanceof We))return P();n={verify:Nn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof we)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xe)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Oe)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ie)return{fieldPath:e.field.canonicalString(),increment:n.N};throw P()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:In(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:P()}(t,e.precondition)),n}function Fn(t,e){return{documents:[Ln(t,e.path)]}}function zn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ln(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ln(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(kt(t.value))return{unaryFilter:{field:Hn(t.field),op:"IS_NAN"}};if(Ot(t.value))return{unaryFilter:{field:Hn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(kt(t.value))return{unaryFilter:{field:Hn(t.field),op:"IS_NOT_NAN"}};if(Ot(t.value))return{unaryFilter:{field:Hn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hn(t.field),op:Gn(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Hn(t.field),direction:qn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.C||ft(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Un(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Un(e.endAt)),n}function Bn(t){var e=jn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){L(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[Yn(e)]:void 0!==e.fieldFilter?[Xn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):P():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Xt(Wn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ft(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Vn(n.startAt));var l=null;return n.endAt&&(l=Vn(n.endAt)),Jt(e,i,s,a,u,"F",c,l)}function Un(t){return{before:t.before,values:t.position}}function Vn(t){var e=!!t.before,n=t.values||[];return new Ht(n,e)}function qn(t){return wn[t]}function Gn(t){return xn[t]}function Hn(t){return{fieldPath:t.canonicalString()}}function Wn(t){return rt.fromServerFormat(t.fieldPath)}function Xn(t){return At.create(Wn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(t.fieldFilter.op),t.fieldFilter.value)}function Yn(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Wn(t.unaryFilter.field);return At.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Wn(t.unaryFilter.field);return At.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Wn(t.unaryFilter.field);return At.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Wn(t.unaryFilter.field);return At.create(i,"!=",{nullValue:"NULL_VALUE"});default:return P()}}function Zn(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Kn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Qn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=$n(e)),e=Jn(t.get(n),e);return $n(e)}function Jn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function $n(t){return t+"\x01\x01"}var tr=function t(e,n,r){Object(g.a)(this,t),this.ownerId=e,this.allowTabSynchronization=n,this.leaseTimestampMs=r};tr.store="owner",tr.key="owner";var er=function t(e,n,r){Object(g.a)(this,t),this.userId=e,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r};er.store="mutationQueues",er.keyPath="userId";var nr=function t(e,n,r,i,o){Object(g.a)(this,t),this.userId=e,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=o};nr.store="mutations",nr.keyPath="batchId",nr.userMutationsIndex="userMutationsIndex",nr.userMutationsKeyPath=["userId","batchId"];var rr=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,null,[{key:"prefixForUser",value:function(t){return[t]}},{key:"prefixForPath",value:function(t,e){return[t,Qn(e)]}},{key:"key",value:function(t,e,n){return[t,Qn(e),n]}}]),t}();rr.store="documentMutations",rr.PLACEHOLDER=new rr;var ir=function t(e,n,r,i,o,a){Object(g.a)(this,t),this.unknownDocument=e,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=o,this.parentPath=a};ir.store="remoteDocuments",ir.readTimeIndex="readTimeIndex",ir.readTimeIndexPath="readTime",ir.collectionReadTimeIndex="collectionReadTimeIndex",ir.collectionReadTimeIndexPath=["parentPath","readTime"];var or=function t(e){Object(g.a)(this,t),this.byteSize=e};or.store="remoteDocumentGlobal",or.key="remoteDocumentGlobalKey";var ar=function t(e,n,r,i,o,a,s){Object(g.a)(this,t),this.targetId=e,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=a,this.query=s};ar.store="targets",ar.keyPath="targetId",ar.queryTargetsIndexName="queryTargetsIndex",ar.queryTargetsKeyPath=["canonicalId","targetId"];var sr=function t(e,n,r){Object(g.a)(this,t),this.targetId=e,this.path=n,this.sequenceNumber=r};sr.store="targetDocuments",sr.keyPath=["targetId","path"],sr.documentTargetsIndex="documentTargetsIndex",sr.documentTargetsKeyPath=["path","targetId"];var ur=function t(e,n,r,i){Object(g.a)(this,t),this.highestTargetId=e,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i};ur.key="targetGlobalKey",ur.store="targetGlobal";var cr=function t(e,n){Object(g.a)(this,t),this.collectionId=e,this.parent=n};cr.store="collectionParents",cr.keyPath=["collectionId","parent"];var lr=function t(e,n,r,i){Object(g.a)(this,t),this.clientId=e,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i};lr.store="clientMetadata",lr.keyPath="clientId";var hr=function t(e,n,r){Object(g.a)(this,t),this.bundleId=e,this.createTime=n,this.version=r};hr.store="bundles",hr.keyPath="bundleId";var fr=function t(e,n,r){Object(g.a)(this,t),this.name=e,this.readTime=n,this.bundledQuery=r};fr.store="namedQueries",fr.keyPath="name";[er.store,nr.store,rr.store,ir.store,ar.store,tr.store,ur.store,sr.store].concat([lr.store]).concat([or.store]).concat([cr.store]).concat([hr.store,fr.store]);var pr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",dr=function(){function t(){Object(g.a)(this,t),this.onCommittedListeners=[]}return Object(v.a)(t,[{key:"addOnCommittedListener",value:function(t){this.onCommittedListeners.push(t)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(t){return t()}))}}]),t}(),gr=function(){function t(e){var n=this;Object(g.a)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(t){n.isDone=!0,n.result=t,n.nextCallback&&n.nextCallback(t)}),(function(t){n.isDone=!0,n.error=t,n.catchCallback&&n.catchCallback(t)}))}return Object(v.a)(t,[{key:"catch",value:function(t){return this.next(void 0,t)}},{key:"next",value:function(e,n){var r=this;return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))}},{key:"toPromise",value:function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))}},{key:"or",value:function(e){var n,r=t.resolve(!1),i=Object(s.a)(e);try{var o=function(){var e=n.value;r=r.next((function(n){return n?t.resolve(n):e()}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"forEach",value:function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)}}]),t}();function vr(t){return"IndexedDbTransactionError"===t.name}var yr=function(){function t(e,n,r,i){Object(g.a)(this,t),this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Object(v.a)(t,[{key:"applyToRemoteDocument",value:function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&je(i,t,n[r])}}},{key:"applyToLocalView",value:function(t){var e,n=Object(s.a)(this.baseMutations);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.key.isEqual(t.key)&&Me(r,t,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,o=Object(s.a)(this.mutations);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.key.isEqual(t.key)&&Me(a,t,this.localWriteTime)}}catch(u){o.e(u)}finally{o.f()}}},{key:"applyToLocalDocumentSet",value:function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(K.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),cn())}},{key:"isEqual",value:function(t){return this.batchId===t.batchId&&Y(this.mutations,t.mutations,(function(t,e){return Ae(t,e)}))&&Y(this.baseMutations,t.baseMutations,(function(t,e){return Ae(t,e)}))}}]),t}(),mr=function(){function t(e,n,r,i){Object(g.a)(this,t),this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Object(v.a)(t,null,[{key:"from",value:function(e,n,r){L(e.mutations.length===r.length);for(var i=sn(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)}}]),t}(),_r=function(){function t(e,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:K.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:K.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ot.EMPTY_BYTE_STRING;Object(g.a)(this,t),this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=s}return Object(v.a)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),br=function t(e){Object(g.a)(this,t),this.Gt=e};function wr(t){var e=Bn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?se(e,e.limit,"L"):e}var xr=function(){function t(){Object(g.a)(this,t),this.zt=new Er}return Object(v.a)(t,[{key:"addToCollectionParentIndex",value:function(t,e){return this.zt.add(e),gr.resolve()}},{key:"getCollectionParents",value:function(t,e){return gr.resolve(this.zt.getEntries(e))}}]),t}(),Er=function(){function t(){Object(g.a)(this,t),this.index={}}return Object(v.a)(t,[{key:"add",value:function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new $e(et.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}},{key:"has",value:function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}},{key:"getEntries",value:function(t){return(this.index[t]||new $e(et.comparator)).toArray()}}]),t}();var Or=function(){function t(e,n,r){Object(g.a)(this,t),this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Object(v.a)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(41943040,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);var kr=function(){function t(e){Object(g.a)(this,t),this.se=e}return Object(v.a)(t,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new t(0)}},{key:"re",value:function(){return new t(-1)}}]),t}();function Ir(t){return Sr.apply(this,arguments)}function Sr(){return(Sr=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.code===M.FAILED_PRECONDITION&&e.message===pr){t.next=2;break}throw e;case 2:S("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Cr=function(){function t(e,n){Object(g.a)(this,t),this.mapKeyFn=e,this.equalsFn=n,this.inner={}}return Object(v.a)(t,[{key:"get",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n){var r,i=Object(s.a)(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],c=o[1];if(this.equalsFn(u,t))return c}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(t){return void 0!==this.get(t)}},{key:"set",value:function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}},{key:"delete",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(t){J(this.inner,(function(e,n){var r,i=Object(s.a)(n);try{for(i.s();!(r=i.n()).done;){var o=Object(a.a)(r.value,2),u=o[0],c=o[1];t(u,c)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return $(this.inner)}}]),t}(),Tr=function(){function t(){Object(g.a)(this,t),this.changes=new Cr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return Object(v.a)(t,[{key:"getReadTime",value:function(t){var e=this.changes.get(t);return e?e.readTime:K.min()}},{key:"addEntry",value:function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}},{key:"removeEntry",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(t,{document:Nt.newInvalidDocument(t),readTime:e})}},{key:"getEntry",value:function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?gr.resolve(n.document):this.getFromCache(t,e)}},{key:"getEntries",value:function(t,e){return this.getAllFromCache(t,e)}},{key:"apply",value:function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}},{key:"assertNotApplied",value:function(){}}]),t}();var Nr=function(){function t(e,n,r){Object(g.a)(this,t),this.Je=e,this.An=n,this.Jt=r}return Object(v.a)(t,[{key:"Rn",value:function(t,e){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.Pn(t,e,r)}))}},{key:"Pn",value:function(t,e,n){return this.Je.getEntry(t,e).next((function(t){var e,r=Object(s.a)(n);try{for(r.s();!(e=r.n()).done;){e.value.applyToLocalView(t)}}catch(i){r.e(i)}finally{r.f()}return t}))}},{key:"bn",value:function(t,e){t.forEach((function(t,n){var r,i=Object(s.a)(e);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(o){i.e(o)}finally{i.f()}}))}},{key:"vn",value:function(t,e){var n=this;return this.Je.getEntries(t,e).next((function(e){return n.Vn(t,e).next((function(){return e}))}))}},{key:"Vn",value:function(t,e){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.bn(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(t,e,n){return function(t){return gt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Sn(t,e.path):ie(e)?this.Dn(t,e,n):this.Cn(t,e,n)}},{key:"Sn",value:function(t,e){return this.Rn(t,new gt(e)).next((function(t){var e=on();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}},{key:"Dn",value:function(t,e,n){var r=this,i=e.collectionGroup,o=on();return this.Jt.getCollectionParents(t,i).next((function(a){return gr.forEach(a,(function(a){var s=function(t,e){return new Qt(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.Cn(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))}},{key:"Cn",value:function(t,e,n){var r,i,o=this;return this.Je.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.An.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Nn(t,i,r).next((function(t){r=t;var e,n=Object(s.a)(i);try{for(n.s();!(e=n.n()).done;){var o,a=e.value,u=Object(s.a)(a.mutations);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=c.key,h=r.get(l);null==h&&(h=Nt.newInvalidDocument(l),r=r.insert(l,h)),Me(c,h,a.localWriteTime),h.isFoundDocument()||(r=r.remove(l))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(t,n){he(e,n)||(r=r.remove(t))})),r}))}},{key:"Nn",value:function(t,e,n){var r,i=cn(),o=Object(s.a)(e);try{for(o.s();!(r=o.n()).done;){var a,u=r.value,c=Object(s.a)(u.mutations);try{for(c.s();!(a=c.n()).done;){var l=a.value;l instanceof ze&&null===n.get(l.key)&&(i=i.add(l.key))}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}var h=n;return this.Je.getEntries(t,i).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(h=h.insert(t,e))})),h}))}}]),t}(),Pr=function(){function t(e,n,r,i){Object(g.a)(this,t),this.targetId=e,this.fromCache=n,this.kn=r,this.xn=i}return Object(v.a)(t,null,[{key:"$n",value:function(e,n){var r,i=cn(),o=cn(),a=Object(s.a)(n.docChanges);try{for(a.s();!(r=a.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}}}catch(c){a.e(c)}finally{a.f()}return new t(e,n.fromCache,i,o)}}]),t}(),Lr=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"Fn",value:function(t){this.On=t}},{key:"getDocumentsMatchingQuery",value:function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(K.min())?this.Mn(t,e):this.On.vn(t,r).next((function(o){var a=i.Ln(e,o);return(te(e)||ee(e))&&i.Bn(e.limitType,a,r,n)?i.Mn(t,e):(I()<=_.a.DEBUG&&S("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),le(e)),i.On.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))}},{key:"Ln",value:function(t,e){var n=new $e(fe(t));return e.forEach((function(e,r){he(t,r)&&(n=n.add(r))})),n}},{key:"Bn",value:function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(t,e){return I()<=_.a.DEBUG&&S("QueryEngine","Using full collection scan to execute query:",le(e)),this.On.getDocumentsMatchingQuery(t,e,K.min())}}]),t}(),jr=function(){function t(e,n,r,i){Object(g.a)(this,t),this.persistence=e,this.Un=n,this.k=i,this.qn=new Ke(X),this.Kn=new Cr((function(t){return jt(t)}),Mt),this.jn=K.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Nr(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}return Object(v.a)(t,[{key:"collectGarbage",value:function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.qn)}))}}]),t}();function Mr(t,e,n,r){return new jr(t,e,n,r)}function Rr(t,e){return Ar.apply(this,arguments)}function Ar(){return(Ar=Object(l.a)(c.a.mark((function t(e,n){var r,i,o,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j(e),i=r.An,o=r.Wn,t.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return r.An.getAllMutationBatches(t).next((function(a){return e=a,i=r.persistence.getMutationQueue(n),o=new Nr(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(t)})).next((function(n){var r,i=[],a=[],u=cn(),c=Object(s.a)(e);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.batchId);var h,f=Object(s.a)(l.mutations);try{for(f.s();!(h=f.n()).done;){var p=h.value;u=u.add(p.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){c.e(b)}finally{c.f()}var d,g=Object(s.a)(n);try{for(g.s();!(d=g.n()).done;){var v=d.value;a.push(v.batchId);var y,m=Object(s.a)(v.mutations);try{for(m.s();!(y=m.n()).done;){var _=y.value;u=u.add(_.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){g.e(b)}finally{g.f()}return o.vn(t,u).next((function(t){return{Gn:t,removedBatchIds:i,addedBatchIds:a}}))}))}));case 4:return a=t.sent,t.abrupt("return",(r.An=i,r.Wn=o,r.Un.Fn(r.Wn),a));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Dr(t,e){var n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=gr.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);L(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t.An.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.An.performConsistencyCheck(t)})).next((function(){return n.Wn.vn(t,r)}))}))}function Fr(t){var e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.He.getLastRemoteSnapshotVersion(t)}))}function zr(t,e){var n=j(t),r=e.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.He.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.He.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return L(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,e)&&a.push(n.He.updateTargetData(t,c))}}}));var s=nn();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Br(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(K.min())){var u=n.He.getLastRemoteSnapshotVersion(t).next((function(e){return n.He.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return gr.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Wn.Vn(t,s)})).next((function(){return s}))})).then((function(t){return n.qn=i,t}))}function Br(t,e,n,r,i){var o=cn();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=nn();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(K.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):S("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Ur(t,e){var n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.An.getNextMutationBatchAfterBatchId(t,e)}))}function Vr(t,e){var n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.He.getTargetData(t,e).next((function(i){return i?(r=i,gr.resolve(r)):n.He.allocateTargetId(t).next((function(i){return r=new _r(e,i,0,t.currentSequenceNumber),n.He.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.qn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(t.targetId,t),n.Kn.set(e,t.targetId)),t}))}function qr(t,e,n){return Gr.apply(this,arguments)}function Gr(){return(Gr=Object(l.a)(c.a.mark((function t(e,n,r){var i,o,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=j(e),o=i.qn.get(n),a=r?"readwrite":"readwrite-primary",t.prev=1,t.t0=r,t.t0){t.next=6;break}return t.next=6,i.persistence.runTransaction("Release target",a,(function(t){return i.persistence.referenceDelegate.removeTarget(t,o)}));case 6:t.next=13;break;case 8:if(t.prev=8,t.t1=t.catch(1),vr(t.t1)){t.next=12;break}throw t.t1;case 12:S("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(t.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(o.target);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function Hr(t,e,n){var r=j(t),i=K.min(),o=cn();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=j(t),i=r.Kn.get(n);return void 0!==i?gr.resolve(r.qn.get(i)):r.He.getTargetData(e,n)}(r,t,ae(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Un.getDocumentsMatchingQuery(t,e,n?i:K.min(),n?o:cn())})).next((function(t){return{documents:t,zn:o}}))}))}var Wr=function(){function t(e){Object(g.a)(this,t),this.k=e,this.Xn=new Map,this.Zn=new Map}return Object(v.a)(t,[{key:"getBundleMetadata",value:function(t,e){return gr.resolve(this.Xn.get(e))}},{key:"saveBundleMetadata",value:function(t,e){var n;return this.Xn.set(e.id,{id:(n=e).id,version:n.version,createTime:Sn(n.createTime)}),gr.resolve()}},{key:"getNamedQuery",value:function(t,e){return gr.resolve(this.Zn.get(e))}},{key:"saveNamedQuery",value:function(t,e){return this.Zn.set(e.name,function(t){return{name:t.name,query:wr(t.bundledQuery),readTime:Sn(t.readTime)}}(e)),gr.resolve()}}]),t}(),Xr=function(){function t(){Object(g.a)(this,t),this.ts=new $e(Yr.es),this.ns=new $e(Yr.ss)}return Object(v.a)(t,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(t,e){var n=new Yr(t,e);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))}},{key:"removeReference",value:function(t,e){this.os(new Yr(t,e))}},{key:"cs",value:function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))}},{key:"us",value:function(t){var e=this,n=new gt(new et([])),r=new Yr(n,t),i=new Yr(n,t+1),o=[];return this.ns.forEachInRange([r,i],(function(t){e.os(t),o.push(t.key)})),o}},{key:"hs",value:function(){var t=this;this.ts.forEach((function(e){return t.os(e)}))}},{key:"os",value:function(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}},{key:"ls",value:function(t){var e=new gt(new et([])),n=new Yr(e,t),r=new Yr(e,t+1),i=cn();return this.ns.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i}},{key:"containsKey",value:function(t){var e=new Yr(t,0),n=this.ts.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}]),t}(),Yr=function(){function t(e,n){Object(g.a)(this,t),this.key=e,this.fs=n}return Object(v.a)(t,null,[{key:"es",value:function(t,e){return gt.comparator(t.key,e.key)||X(t.fs,e.fs)}},{key:"ss",value:function(t,e){return X(t.fs,e.fs)||gt.comparator(t.key,e.key)}}]),t}(),Zr=function(){function t(e,n){Object(g.a)(this,t),this.Jt=e,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new $e(Yr.es)}return Object(v.a)(t,[{key:"checkEmpty",value:function(t){return gr.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(t,e,n,r){var i=this.ds;this.ds++,this.An.length>0&&this.An[this.An.length-1];var o=new yr(i,e,n,r);this.An.push(o);var a,u=Object(s.a)(r);try{for(u.s();!(a=u.n()).done;){var c=a.value;this.ws=this.ws.add(new Yr(c.key,i)),this.Jt.addToCollectionParentIndex(t,c.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return gr.resolve(o)}},{key:"lookupMutationBatch",value:function(t,e){return gr.resolve(this._s(e))}},{key:"getNextMutationBatchAfterBatchId",value:function(t,e){var n=e+1,r=this.gs(n),i=r<0?0:r;return gr.resolve(this.An.length>i?this.An[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return gr.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(t){return gr.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(t,e){var n=this,r=new Yr(e,0),i=new Yr(e,Number.POSITIVE_INFINITY),o=[];return this.ws.forEachInRange([r,i],(function(t){var e=n._s(t.fs);o.push(e)})),gr.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(t,e){var n=this,r=new $e(X);return e.forEach((function(t){var e=new Yr(t,0),i=new Yr(t,Number.POSITIVE_INFINITY);n.ws.forEachInRange([e,i],(function(t){r=r.add(t.fs)}))})),gr.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(t,e){var n=e.path,r=n.length+1,i=n;gt.isDocumentKey(i)||(i=i.child(""));var o=new Yr(new gt(i),0),a=new $e(X);return this.ws.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.fs)),!0)}),o),gr.resolve(this.ys(a))}},{key:"ys",value:function(t){var e=this,n=[];return t.forEach((function(t){var r=e._s(t);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(t,e){var n=this;L(0===this.ps(e.batchId,"removed")),this.An.shift();var r=this.ws;return gr.forEach(e.mutations,(function(i){var o=new Yr(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.ws=r}))}},{key:"ee",value:function(t){}},{key:"containsKey",value:function(t,e){var n=new Yr(e,0),r=this.ws.firstAfterOrEqual(n);return gr.resolve(e.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(t){return this.An.length,gr.resolve()}},{key:"ps",value:function(t,e){return this.gs(t)}},{key:"gs",value:function(t){return 0===this.An.length?0:t-this.An[0].batchId}},{key:"_s",value:function(t){var e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}]),t}(),Kr=function(){function t(e,n){Object(g.a)(this,t),this.Jt=e,this.Ts=n,this.docs=new Ke(gt.comparator),this.size=0}return Object(v.a)(t,[{key:"addEntry",value:function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.Ts(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Jt.addToCollectionParentIndex(t,r.path.popLast())}},{key:"removeEntry",value:function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}},{key:"getEntry",value:function(t,e){var n=this.docs.get(e);return gr.resolve(n?n.document.clone():Nt.newInvalidDocument(e))}},{key:"getEntries",value:function(t,e){var n=this,r=nn();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Nt.newInvalidDocument(t))})),gr.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(t,e,n){for(var r=nn(),i=new gt(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||he(e,c)&&(r=r.insert(c.key,c.clone()))}return gr.resolve(r)}},{key:"Es",value:function(t,e){return gr.forEach(this.docs,(function(t){return e(t)}))}},{key:"newChangeBuffer",value:function(t){return new Qr(this)}},{key:"getSize",value:function(t){return gr.resolve(this.size)}}]),t}(),Qr=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(g.a)(this,n),(r=e.call(this)).De=t,r}return Object(v.a)(n,[{key:"applyChanges",value:function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.De.addEntry(t,i.document,e.getReadTime(r))):e.De.removeEntry(r)})),gr.waitFor(n)}},{key:"getFromCache",value:function(t,e){return this.De.getEntry(t,e)}},{key:"getAllFromCache",value:function(t,e){return this.De.getEntries(t,e)}}]),n}(Tr),Jr=function(){function t(e){Object(g.a)(this,t),this.persistence=e,this.Is=new Cr((function(t){return jt(t)}),Mt),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.As=0,this.Rs=new Xr,this.targetCount=0,this.Ps=kr.ie()}return Object(v.a)(t,[{key:"forEachTarget",value:function(t,e){return this.Is.forEach((function(t,n){return e(n)})),gr.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(t){return gr.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(t){return gr.resolve(this.As)}},{key:"allocateTargetId",value:function(t){return this.highestTargetId=this.Ps.next(),gr.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.As&&(this.As=e),gr.resolve()}},{key:"ce",value:function(t){this.Is.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Ps=new kr(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}},{key:"addTargetData",value:function(t,e){return this.ce(e),this.targetCount+=1,gr.resolve()}},{key:"updateTargetData",value:function(t,e){return this.ce(e),gr.resolve()}},{key:"removeTargetData",value:function(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,gr.resolve()}},{key:"removeTargets",value:function(t,e,n){var r=this,i=0,o=[];return this.Is.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.Is.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),gr.waitFor(o).next((function(){return i}))}},{key:"getTargetCount",value:function(t){return gr.resolve(this.targetCount)}},{key:"getTargetData",value:function(t,e){var n=this.Is.get(e)||null;return gr.resolve(n)}},{key:"addMatchingKeys",value:function(t,e,n){return this.Rs.rs(e,n),gr.resolve()}},{key:"removeMatchingKeys",value:function(t,e,n){this.Rs.cs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),gr.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(t,e){return this.Rs.us(e),gr.resolve()}},{key:"getMatchingKeysForTargetId",value:function(t,e){var n=this.Rs.ls(e);return gr.resolve(n)}},{key:"containsKey",value:function(t,e){return gr.resolve(this.Rs.containsKey(e))}}]),t}(),$r=function(){function t(e,n){var r=this;Object(g.a)(this,t),this.bs={},this.Be=new G(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new Jr(this),this.Jt=new xr,this.Je=function(t,e){return new Kr(t,(function(t){return r.referenceDelegate.vs(t)}))}(this.Jt),this.k=new br(n),this.Ye=new Wr(this.k)}return Object(v.a)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(t){var e=this.bs[t.toKey()];return e||(e=new Zr(this.Jt,this.referenceDelegate),this.bs[t.toKey()]=e),e}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(t,e,n){var r=this;S("MemoryPersistence","Starting transaction:",t);var i=new ti(this.Be.next());return this.referenceDelegate.Vs(),n(i).next((function(t){return r.referenceDelegate.Ss(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))}},{key:"Ds",value:function(t,e){return gr.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(t,e)}})))}}]),t}(),ti=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(g.a)(this,n),(r=e.call(this)).currentSequenceNumber=t,r}return n}(dr),ei=function(){function t(e){Object(g.a)(this,t),this.persistence=e,this.Cs=new Xr,this.Ns=null}return Object(v.a)(t,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw P()}},{key:"addReference",value:function(t,e,n){return this.Cs.addReference(n,e),this.xs.delete(n.toString()),gr.resolve()}},{key:"removeReference",value:function(t,e,n){return this.Cs.removeReference(n,e),this.xs.add(n.toString()),gr.resolve()}},{key:"markPotentiallyOrphaned",value:function(t,e){return this.xs.add(e.toString()),gr.resolve()}},{key:"removeTarget",value:function(t,e){var n=this;this.Cs.us(e.targetId).forEach((function(t){return n.xs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.xs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return gr.forEach(this.xs,(function(r){var i=gt.fromPath(r);return e.$s(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Ns=null,n.apply(t)}))}},{key:"updateLimboDocument",value:function(t,e){var n=this;return this.$s(t,e).next((function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())}))}},{key:"vs",value:function(t){return 0}},{key:"$s",value:function(t,e){var n=this;return gr.or([function(){return gr.resolve(n.Cs.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Ds(t,e)}])}}],[{key:"ks",value:function(e){return new t(e)}}]),t}();var ni=function(){function t(){Object(g.a)(this,t),this.activeTargetIds=hn()}return Object(v.a)(t,[{key:"Ms",value:function(t){this.activeTargetIds=this.activeTargetIds.add(t)}},{key:"Ls",value:function(t){this.activeTargetIds=this.activeTargetIds.delete(t)}},{key:"Os",value:function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}]),t}(),ri=function(){function t(){Object(g.a)(this,t),this.pi=new ni,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Object(v.a)(t,[{key:"addPendingMutation",value:function(t){}},{key:"updateMutationState",value:function(t,e,n){}},{key:"addLocalQueryTarget",value:function(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}},{key:"updateQueryState",value:function(t,e,n){this.Ti[t]=e}},{key:"removeLocalQueryTarget",value:function(t){this.pi.Ls(t)}},{key:"isLocalQueryTarget",value:function(t){return this.pi.activeTargetIds.has(t)}},{key:"clearQueryState",value:function(t){delete this.Ti[t]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(t){return this.pi.activeTargetIds.has(t)}},{key:"start",value:function(){return this.pi=new ni,Promise.resolve()}},{key:"handleUserChange",value:function(t,e,n){}},{key:"setOnlineState",value:function(t){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(t){}},{key:"notifyBundleLoaded",value:function(){}}]),t}(),ii=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"Ei",value:function(t){}},{key:"shutdown",value:function(){}}]),t}(),oi=function(){function t(){var e=this;Object(g.a)(this,t),this.Ii=function(){return e.Ai()},this.Ri=function(){return e.Pi()},this.bi=[],this.vi()}return Object(v.a)(t,[{key:"Ei",value:function(t){this.bi.push(t)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){S("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var t,e=Object(s.a)(this.bi);try{for(e.s();!(t=e.n()).done;){(0,t.value)(0)}}catch(n){e.e(n)}finally{e.f()}}},{key:"Pi",value:function(){S("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var t,e=Object(s.a)(this.bi);try{for(e.s();!(t=e.n()).done;){(0,t.value)(1)}}catch(n){e.e(n)}finally{e.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),ai={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},si=function(){function t(e){Object(g.a)(this,t),this.Vi=e.Vi,this.Si=e.Si}return Object(v.a)(t,[{key:"Di",value:function(t){this.Ci=t}},{key:"Ni",value:function(t){this.ki=t}},{key:"onMessage",value:function(t){this.xi=t}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(t){this.Vi(t)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(t){this.ki(t)}},{key:"Oi",value:function(t){this.xi(t)}}]),t}(),ui=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(g.a)(this,n),(r=e.call(this,t)).forceLongPolling=t.forceLongPolling,r.autoDetectLongPolling=t.autoDetectLongPolling,r.useFetchStreams=t.useFetchStreams,r}return Object(v.a)(n,[{key:"Ki",value:function(t,e,n,r){return new Promise((function(i,o){var a=new w.g;a.listenOnce(w.c.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case w.a.NO_ERROR:var e=a.getResponseJson();S("Connection","XHR received:",JSON.stringify(e)),i(e);break;case w.a.TIMEOUT:S("Connection",'RPC "'+t+'" timed out'),o(new R(M.DEADLINE_EXCEEDED,"Request time out"));break;case w.a.HTTP_ERROR:var n=a.getStatus();if(S("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(e)>=0?e:M.UNKNOWN}(r.status);o(new R(s,r.message))}else o(new R(M.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new R(M.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{S("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))}},{key:"Qi",value:function(t,e,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Object(w.h)(),o=Object(w.i)(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new w.d({})),this.qi(a.initMessageHeaders,e,n),Object(b.p)()||Object(b.q)()||Object(b.l)()||Object(b.n)()||Object(b.s)()||Object(b.k)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");S("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,l=!1,h=new si({Vi:function(t){l?S("Connection","Not sending because WebChannel is closed:",t):(c||(S("Connection","Opening WebChannel transport."),u.open(),c=!0),S("Connection","WebChannel sending:",t),u.send(t))},Si:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,w.f.EventType.OPEN,(function(){l||S("Connection","WebChannel transport opened.")})),f(u,w.f.EventType.CLOSE,(function(){l||(l=!0,S("Connection","WebChannel transport closed"),h.Fi())})),f(u,w.f.EventType.ERROR,(function(t){l||(l=!0,T("Connection","WebChannel transport errored:",t),h.Fi(new R(M.UNAVAILABLE,"The operation could not be completed")))})),f(u,w.f.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];L(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){S("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=qe[t];if(void 0!==e)return Ze(e)}(o),s=i.message;void 0===a&&(a=M.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Fi(new R(a,s)),u.close()}else S("Connection","WebChannel received:",n),h.Oi(n)}})),f(o,w.b.STAT_EVENT,(function(t){t.stat===w.e.PROXY?S("Connection","Detected buffering proxy"):t.stat===w.e.NOPROXY&&S("Connection","Detected no buffering proxy")})),setTimeout((function(){h.$i()}),0),h}}]),n}(function(){function t(e){Object(g.a)(this,t),this.databaseInfo=e,this.databaseId=e.databaseId;var n=e.ssl?"https":"http";this.Mi=n+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Object(v.a)(t,[{key:"Bi",value:function(t,e,n,r,i){var o=this.Ui(t,e);S("RestConnection","Sending: ",o,n);var a={};return this.qi(a,r,i),this.Ki(t,o,a,n).then((function(t){return S("RestConnection","Received: ",t),t}),(function(e){throw T("RestConnection","".concat(t," failed with error: "),e,"url: ",o,"request:",n),e}))}},{key:"ji",value:function(t,e,n,r,i){return this.Bi(t,e,n,r,i)}},{key:"qi",value:function(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+O,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((function(e,n){return t[n]=e})),n&&n.headers.forEach((function(e,n){return t[n]=e}))}},{key:"Ui",value:function(t,e){var n=ai[t];return"".concat(this.Mi,"/v1/").concat(e,":").concat(n)}}]),t}());function ci(){return"undefined"!=typeof document?document:null}function li(t){return new En(t,!0)}var hi=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Object(g.a)(this,t),this.Oe=e,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=o,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return Object(v.a)(t,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(t){var e=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&S("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return e.Yi=Date.now(),t()})),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),t}(),fi=function(){function t(e,n,r,i,o,a,s,u){Object(g.a)(this,t),this.Oe=e,this.nr=r,this.sr=i,this.ir=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new hi(e,n)}return Object(v.a)(t,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.hr(),!t.t0){t.next=4;break}return t.next=4,this.close(0);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var t=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,(function(){return t.mr()})))}},{key:"gr",value:function(t){this.yr(),this.stream.send(t)}},{key:"mr",value:function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.lr()){t.next=2;break}return t.abrupt("return",this.close(0));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(){var t=Object(l.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.yr(),this.pr(),this.ur.cancel(),this.rr++,4!==e?this.ur.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(C(n.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.ur.Xi()):n&&n.code===M.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Tr(),this.stream.close(),this.stream=null),this.state=e,t.next=9,this.listener.Ni(n);case 9:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"Tr",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var e=this.Er(this.rr),n=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(e){var r=Object(a.a)(e,2),i=r[0],o=r[1];t.rr===n&&t.Ir(i,o)}),(function(n){e((function(){var e=new R(M.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Ar(e)}))}))}},{key:"Ir",value:function(t,e){var n=this,r=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di((function(){r((function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,(function(){return n.lr()&&(n.state=3),Promise.resolve()})),n.listener.Di()}))})),this.stream.Ni((function(t){r((function(){return n.Ar(t)}))})),this.stream.onMessage((function(t){r((function(){return n.onMessage(t)}))}))}},{key:"dr",value:function(){var t=this;this.state=5,this.ur.Zi(Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}}),e)}))))}},{key:"Ar",value:function(t){return S("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}},{key:"Er",value:function(t){var e=this;return function(n){e.Oe.enqueueAndForget((function(){return e.rr===t?n():(S("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),pi=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i,o,a,s){var u;return Object(g.a)(this,n),(u=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,s)).k=a,u}return Object(v.a)(n,[{key:"Rr",value:function(t,e){return this.ir.Qi("Listen",t,e)}},{key:"onMessage",value:function(t){this.ur.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:P()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.C?(L(void 0===e||"string"==typeof e),ot.fromBase64String(e||"")):(L(void 0===e||e instanceof Uint8Array),ot.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?M.UNKNOWN:Ze(t.code);return new R(e,t.message||"")}(a);n=new vn(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var c=Pn(t,u.document.name),l=Sn(u.document.updateTime),h=new Ct({mapValue:{fields:u.document.fields}}),f=Nt.newFoundDocument(c,l,h),p=u.targetIds||[],d=u.removedTargetIds||[];n=new dn(p,d,f.key,f)}else if("documentDelete"in e){e.documentDelete;var g=e.documentDelete;g.document;var v=Pn(t,g.document),y=g.readTime?Sn(g.readTime):K.min(),m=Nt.newNoDocument(v,y),_=g.removedTargetIds||[];n=new dn([],_,m.key,m)}else if("documentRemove"in e){e.documentRemove;var b=e.documentRemove;b.document;var w=Pn(t,b.document),x=b.removedTargetIds||[];n=new dn([],x,w,null)}else{if(!("filter"in e))return P();e.filter;var E=e.filter;E.targetId;var O=E.count||0,k=new Xe(O),I=E.targetId;n=new gn(I,k)}return n}(this.k,t),n=function(t){if(!("targetChange"in t))return K.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?K.min():e.readTime?Sn(e.readTime):K.min()}(t);return this.listener.Pr(e,n)}},{key:"br",value:function(t){var e={};e.database=Mn(this.k),e.addTarget=function(t,e){var n,r=e.target;return(n=Rt(r)?{documents:Fn(t,r)}:{query:zn(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=kn(t,e.resumeToken):e.snapshotVersion.compareTo(K.min())>0&&(n.readTime=On(t,e.snapshotVersion.toTimestamp())),n}(this.k,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return P()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.k,t);n&&(e.labels=n),this.gr(e)}},{key:"vr",value:function(t){var e={};e.database=Mn(this.k),e.removeTarget=t,this.gr(e)}}]),n}(fi),di=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i,o,a,s){var u;return Object(g.a)(this,n),(u=e.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,s)).k=a,u.Vr=!1,u}return Object(v.a)(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,Object(i.a)(Object(o.a)(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(t,e){return this.ir.Qi("Write",t,e)}},{key:"onMessage",value:function(t){if(L(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();var e=function(t,e){return t&&t.length>0?(L(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Sn(t.updateTime):Sn(e);return n.isEqual(K.min())&&(n=Sn(e)),new Te(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Sn(t.commitTime);return this.listener.Cr(n,e)}return L(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var t={};t.database=Mn(this.k),this.gr(t)}},{key:"Dr",value:function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Dn(e.k,t)}))};this.gr(n)}}]),n}(fi),gi=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i,o){var a;return Object(g.a)(this,n),(a=e.call(this)).authCredentials=t,a.appCheckCredentials=r,a.ir=i,a.k=o,a.$r=!1,a}return Object(v.a)(n,[{key:"Fr",value:function(){if(this.$r)throw new R(M.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(t,e,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=Object(a.a)(i,2),s=o[0],u=o[1];return r.ir.Bi(t,e,n,s,u)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===M.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),t):new R(M.UNKNOWN,t.toString())}))}},{key:"ji",value:function(t,e,n){var r=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=Object(a.a)(i,2),s=o[0],u=o[1];return r.ir.ji(t,e,n,s,u)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===M.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),t):new R(M.UNKNOWN,t.toString())}))}},{key:"terminate",value:function(){this.$r=!0}}]),n}(function(){return function t(){Object(g.a)(this,t)}}()),vi=function(){function t(e,n){Object(g.a)(this,t),this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return Object(v.a)(t,[{key:"Br",value:function(){var t=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Mr=null,t.qr("Backend didn't respond within 10 seconds."),t.Ur("Offline"),Promise.resolve()})))}},{key:"Kr",value:function(t){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.Ur("Offline")))}},{key:"set",value:function(t){this.jr(),this.Or=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}},{key:"Ur",value:function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}},{key:"qr",value:function(t){var e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(C(e),this.Lr=!1):S("OnlineStateTracker",e)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),t}(),yi=function t(e,n,r,i,o){var a=this;Object(g.a)(this,t),this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=o,this.Hr.Ei((function(t){r.enqueueAndForget(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Ci(a),!t.t0){t.next=5;break}return S("RemoteStore","Restarting streams for network reachability change."),t.next=5,function(){var t=Object(l.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=j(e)).Gr.add(4),t.next=4,bi(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),t.next=8,mi(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(a);case 5:case"end":return t.stop()}}),t)}))))})),this.Jr=new vi(r,i)};function mi(t){return _i.apply(this,arguments)}function _i(){return(_i=Object(l.a)(c.a.mark((function t(e){var n,r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ci(e)){t.next=18;break}n=Object(s.a)(e.zr),t.prev=2,n.s();case 4:if((r=n.n()).done){t.next=10;break}return i=r.value,t.next=8,i(!0);case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})))).apply(this,arguments)}function bi(t){return wi.apply(this,arguments)}function wi(){return(wi=Object(l.a)(c.a.mark((function t(e){var n,r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(s.a)(e.zr),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return i=r.value,t.next=7,i(!1);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])})))).apply(this,arguments)}function xi(t,e){var n=j(t);n.Wr.has(e.targetId)||(n.Wr.set(e.targetId,e),Si(n)?Ii(n):eo(n).lr()&&Oi(n,e))}function Ei(t,e){var n=j(t),r=eo(n);n.Wr.delete(e),r.lr()&&ki(n,e),0===n.Wr.size&&(r.lr()?r._r():Ci(n)&&n.Jr.set("Unknown"))}function Oi(t,e){t.Yr.X(e.targetId),eo(t).br(e)}function ki(t,e){t.Yr.X(e),eo(t).vr(e)}function Ii(t){t.Yr=new mn({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},Et:function(e){return t.Wr.get(e)||null}}),eo(t).start(),t.Jr.Br()}function Si(t){return Ci(t)&&!eo(t).hr()&&t.Wr.size>0}function Ci(t){return 0===j(t).Gr.size}function Ti(t){t.Yr=void 0}function Ni(t){return Pi.apply(this,arguments)}function Pi(){return(Pi=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.Wr.forEach((function(t,n){Oi(e,t)}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Li(t,e){return ji.apply(this,arguments)}function ji(){return(ji=Object(l.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ti(e),Si(e)?(e.Jr.Kr(n),Ii(e)):e.Jr.set("Unknown");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mi(t,e,n){return Ri.apply(this,arguments)}function Ri(){return(Ri=Object(l.a)(c.a.mark((function t(e,n,r){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.Jr.set("Online"),!(n instanceof vn&&2===n.state&&n.cause)){t.next=13;break}return t.prev=1,t.next=4,function(){var t=Object(l.a)(c.a.mark((function t(e,n){var r,i,o,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.cause,i=Object(s.a)(n.targetIds),t.prev=2,i.s();case 4:if((o=i.n()).done){t.next=14;break}if(a=o.value,t.t0=e.Wr.has(a),!t.t0){t.next=12;break}return t.next=10,e.remoteSyncer.rejectListen(a,r);case 10:e.Wr.delete(a),e.Yr.removeTarget(a);case 12:t.next=4;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2),i.e(t.t1);case 19:return t.prev=19,i.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})));return function(e,n){return t.apply(this,arguments)}}()(e,n);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),S("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),t.t0),t.next=11,Ai(e,t.t0);case 11:t.next=29;break;case 13:if(n instanceof dn?e.Yr.ot(n):n instanceof gn?e.Yr.dt(n):e.Yr.ut(n),r.isEqual(K.min())){t.next=29;break}return t.prev=14,t.next=17,Fr(e.localStore);case 17:if(i=t.sent,t.t1=r.compareTo(i)>=0,!t.t1){t.next=22;break}return t.next=22,function(t,e){var n=t.Yr.gt(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Wr.get(r);i&&t.Wr.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Wr.get(e);if(n){t.Wr.set(e,n.withResumeToken(ot.EMPTY_BYTE_STRING,n.snapshotVersion)),ki(t,e);var r=new _r(n.target,e,1,n.sequenceNumber);Oi(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(e,r);case 22:t.next=29;break;case 24:return t.prev=24,t.t2=t.catch(14),S("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,Ai(e,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])})))).apply(this,arguments)}function Ai(t,e,n){return Di.apply(this,arguments)}function Di(){return(Di=Object(l.a)(c.a.mark((function t(e,n,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(vr(n)){t.next=2;break}throw n;case 2:return e.Gr.add(1),t.next=5,bi(e);case 5:e.Jr.set("Offline"),r||(r=function(){return Fr(e.localStore)}),e.asyncQueue.enqueueRetryable(Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S("RemoteStore","Retrying IndexedDB access"),t.next=3,r();case 3:return e.Gr.delete(1),t.next=6,mi(e);case 6:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Fi(t,e){return e().catch((function(n){return Ai(t,n,e)}))}function zi(t){return Bi.apply(this,arguments)}function Bi(){return(Bi=Object(l.a)(c.a.mark((function t(e){var n,r,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=j(e),r=no(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!Ui(n)){t.next=19;break}return t.prev=3,t.next=6,Ur(n.localStore,i);case 6:if(null!==(o=t.sent)){t.next=10;break}return 0===n.Qr.length&&r._r(),t.abrupt("break",19);case 10:i=o.batchId,Vi(n,o),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(3),t.next=17,Ai(n,t.t0);case 17:t.next=2;break;case 19:qi(n)&&Gi(n);case 20:case"end":return t.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function Ui(t){return Ci(t)&&t.Qr.length<10}function Vi(t,e){t.Qr.push(e);var n=no(t);n.lr()&&n.Sr&&n.Dr(e.mutations)}function qi(t){return Ci(t)&&!no(t).hr()&&t.Qr.length>0}function Gi(t){no(t).start()}function Hi(t){return Wi.apply(this,arguments)}function Wi(){return(Wi=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:no(e).kr();case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Xi(t){return Yi.apply(this,arguments)}function Yi(){return(Yi=Object(l.a)(c.a.mark((function t(e){var n,r,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=no(e),r=Object(s.a)(e.Qr);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Dr(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zi(t,e,n){return Ki.apply(this,arguments)}function Ki(){return(Ki=Object(l.a)(c.a.mark((function t(e,n,r){var i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.Qr.shift(),o=mr.from(i,n,r),t.next=3,Fi(e,(function(){return e.remoteSyncer.applySuccessfulWrite(o)}));case 3:return t.next=5,zi(e);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qi(t,e){return Ji.apply(this,arguments)}function Ji(){return(Ji=Object(l.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n&&no(e).Sr,!t.t0){t.next=4;break}return t.next=4,function(){var t=Object(l.a)(c.a.mark((function t(e,n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Ye(i=n.code)||i===M.ABORTED){t.next=7;break}return r=e.Qr.shift(),no(e).wr(),t.next=5,Fi(e,(function(){return e.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return t.next=7,zi(e);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(e,n);case 4:qi(e)&&Gi(e);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $i(t,e){return to.apply(this,arguments)}function to(){return(to=Object(l.a)(c.a.mark((function t(e,n){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=j(e),!n){t.next=7;break}return r.Gr.delete(2),t.next=5,mi(r);case 5:t.next=13;break;case 7:if(t.t0=n,t.t0){t.next=13;break}return r.Gr.add(2),t.next=12,bi(r);case 12:r.Jr.set("Unknown");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function eo(t){return t.Xr||(t.Xr=function(t,e,n){var r=j(t);return r.Fr(),new pi(e,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(t.datastore,t.asyncQueue,{Di:Ni.bind(null,t),Ni:Li.bind(null,t),Pr:Mi.bind(null,t)}),t.zr.push(function(){var e=Object(l.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}t.Xr.wr(),Si(t)?Ii(t):t.Jr.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.Xr.stop();case 6:Ti(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.Xr}function no(t){return t.Zr||(t.Zr=function(t,e,n){var r=j(t);return r.Fr(),new di(e,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(t.datastore,t.asyncQueue,{Di:Hi.bind(null,t),Ni:Qi.bind(null,t),Nr:Xi.bind(null,t),Cr:Zi.bind(null,t)}),t.zr.push(function(){var e=Object(l.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return t.Zr.wr(),e.next=4,zi(t);case 4:e.next=9;break;case 6:return e.next=8,t.Zr.stop();case 8:t.Qr.length>0&&(S("RemoteStore","Stopping write stream with ".concat(t.Qr.length," pending writes")),t.Qr=[]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),t.Zr}var ro=function(){function t(e,n,r,i,o){Object(g.a)(this,t),this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new A,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return Object(v.a)(t,[{key:"start",value:function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new R(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}},{key:"handleDelayElapsed",value:function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a}}]),t}();function io(t,e){if(C("AsyncQueue","".concat(e,": ").concat(t)),vr(t))return new R(M.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}var oo=function(){function t(e){Object(g.a)(this,t),this.comparator=e?function(t,n){return e(t,n)||gt.comparator(t.key,n.key)}:function(t,e){return gt.comparator(t.key,e.key)},this.keyedMap=on(),this.sortedSet=new Ke(this.comparator)}return Object(v.a)(t,[{key:"has",value:function(t){return null!=this.keyedMap.get(t)}},{key:"get",value:function(t){return this.keyedMap.get(t)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"add",value:function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}},{key:"delete",value:function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),ao=function(){function t(){Object(g.a)(this,t),this.eo=new Ke(gt.comparator)}return Object(v.a)(t,[{key:"track",value:function(t){var e=t.doc.key,n=this.eo.get(e);n?0!==t.type&&3===n.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==n.type?this.eo=this.eo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.eo=this.eo.remove(e):1===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):P():this.eo=this.eo.insert(e,t)}},{key:"no",value:function(){var t=[];return this.eo.inorderTraversal((function(e,n){t.push(n)})),t}}]),t}(),so=function(){function t(e,n,r,i,o,a,s,u){Object(g.a)(this,t),this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=s,this.excludesMetadataChanges=u}return Object(v.a)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ue(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,oo.emptySet(n),o,r,i,!0,!1)}}]),t}(),uo=function t(){Object(g.a)(this,t),this.so=void 0,this.listeners=[]},co=function t(){Object(g.a)(this,t),this.queries=new Cr((function(t){return ce(t)}),ue),this.onlineState="Unknown",this.io=new Set};function lo(t,e){return ho.apply(this,arguments)}function ho(){return(ho=Object(l.a)(c.a.mark((function t(e,n){var r,i,o,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=j(e),i=n.query,o=!1,(a=r.queries.get(i))||(o=!0,a=new uo),!o){t.next=13;break}return t.prev=3,t.next=6,r.onListen(i);case 6:a.so=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),s=io(t.t0,"Initialization of query '".concat(le(n.query),"' failed")),t.abrupt("return",void n.onError(s));case 13:r.queries.set(i,a),a.listeners.push(n),n.ro(r.onlineState),a.so&&n.oo(a.so)&&yo(r);case 14:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function fo(t,e){return po.apply(this,arguments)}function po(){return(po=Object(l.a)(c.a.mark((function t(e,n){var r,i,o,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=j(e),i=n.query,o=!1,(a=r.queries.get(i))&&(s=a.listeners.indexOf(n))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),!o){t.next=6;break}return t.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function go(t,e){var n,r=j(t),i=!1,o=Object(s.a)(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=a.query,c=r.queries.get(u);if(c){var l,h=Object(s.a)(c.listeners);try{for(h.s();!(l=h.n()).done;){l.value.oo(a)&&(i=!0)}}catch(f){h.e(f)}finally{h.f()}c.so=a}}}catch(f){o.e(f)}finally{o.f()}i&&yo(r)}function vo(t,e,n){var r=j(t),i=r.queries.get(e);if(i){var o,a=Object(s.a)(i.listeners);try{for(a.s();!(o=a.n()).done;){o.value.onError(n)}}catch(u){a.e(u)}finally{a.f()}}r.queries.delete(e)}function yo(t){t.io.forEach((function(t){t.next()}))}var mo=function(){function t(e,n,r){Object(g.a)(this,t),this.query=e,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return Object(v.a)(t,[{key:"oo",value:function(t){if(!this.options.includeMetadataChanges){var e,n=[],r=Object(s.a)(t.docChanges);try{for(r.s();!(e=r.n()).done;){var i=e.value;3!==i.type&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}t=new so(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.co?this.ho(t)&&(this.ao.next(t),o=!0):this.lo(t,this.onlineState)&&(this.fo(t),o=!0),this.uo=t,o}},{key:"onError",value:function(t){this.ao.error(t)}},{key:"ro",value:function(t){this.onlineState=t;var e=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}},{key:"lo",value:function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return(!this.options.wo||!n)&&(!t.docs.isEmpty()||"Offline"===e)}},{key:"ho",value:function(t){if(t.docChanges.length>0)return!0;var e=this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(t){t=so.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}]),t}();var _o=function t(e){Object(g.a)(this,t),this.key=e},bo=function t(e){Object(g.a)(this,t),this.key=e},wo=function(){function t(e,n){Object(g.a)(this,t),this.query=e,this.To=n,this.Eo=null,this.current=!1,this.Io=cn(),this.mutatedKeys=cn(),this.Ao=fe(e),this.Ro=new oo(this.Ao)}return Object(v.a)(t,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(t,e){var n=this,r=e?e.vo:new ao,i=e?e.Ro:this.Ro,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=te(this.query)&&i.size===this.query.limit?i.last():null,c=ee(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=he(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Vo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.Ao(h,u)>0||c&&n.Ao(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),te(this.query)||ee(this.query))for(;a.size>this.query.limit;){var l=te(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Ro:a,vo:r,Bn:s,mutatedKeys:o}}},{key:"Vo",value:function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}},{key:"applyChanges",value:function(t,e,n){var r=this,i=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;var o=t.vo.no();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return n(t)-n(e)}(t.type,e.type)||r.Ao(t.doc,e.doc)})),this.So(n);var a=e?this.Do():[],s=0===this.Io.size&&this.current?1:0,u=s!==this.Eo;return this.Eo=s,0!==o.length||u?{snapshot:new so(this.query,t.Ro,i,o,t.mutatedKeys,0===s,u,!1),Co:a}:{Co:a}}},{key:"ro",value:function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new ao,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}},{key:"So",value:function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.To=e.To.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.To=e.To.delete(t)})),this.current=t.current)}},{key:"Do",value:function(){var t=this;if(!this.current)return[];var e=this.Io;this.Io=cn(),this.Ro.forEach((function(e){t.No(e.key)&&(t.Io=t.Io.add(e.key))}));var n=[];return e.forEach((function(e){t.Io.has(e)||n.push(new bo(e))})),this.Io.forEach((function(t){e.has(t)||n.push(new _o(t))})),n}},{key:"ko",value:function(t){this.To=t.zn,this.Io=cn();var e=this.bo(t.documents);return this.applyChanges(e,!0)}},{key:"xo",value:function(){return so.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),t}(),xo=function t(e,n,r){Object(g.a)(this,t),this.query=e,this.targetId=n,this.view=r},Eo=function t(e){Object(g.a)(this,t),this.key=e,this.$o=!1},Oo=function(){function t(e,n,r,i,o,a){Object(g.a)(this,t),this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Fo={},this.Oo=new Cr((function(t){return ce(t)}),ue),this.Mo=new Map,this.Lo=new Set,this.Bo=new Ke(gt.comparator),this.Uo=new Map,this.qo=new Xr,this.Ko={},this.jo=new Map,this.Qo=kr.re(),this.onlineState="Unknown",this.Wo=void 0}return Object(v.a)(t,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),t}();function ko(t,e){return Io.apply(this,arguments)}function Io(){return(Io=Object(l.a)(c.a.mark((function t(e,n){var r,i,o,a,s,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=ta(e),!(a=r.Oo.get(n))){t.next=6;break}i=a.targetId,r.sharedClientState.addLocalQueryTarget(i),o=a.view.xo(),t.next=15;break;case 6:return t.next=8,Vr(r.localStore,ae(n));case 8:return s=t.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,t.next=13,So(r,n,i,"current"===u);case 13:o=t.sent,r.isPrimaryClient&&xi(r.remoteStore,s);case 15:return t.abrupt("return",o);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function So(t,e,n,r){return Co.apply(this,arguments)}function Co(){return(Co=Object(l.a)(c.a.mark((function t(e,n,r,i){var o,a,s,u,h,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.Go=function(t,n,r){return function(){var t=Object(l.a)(c.a.mark((function t(e,n,r,i){var o,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.view.bo(r),t.t0=o.Bn,!t.t0){t.next=6;break}return t.next=5,Hr(e.localStore,n.query,!1).then((function(t){var e=t.documents;return n.view.bo(e,o)}));case 5:o=t.sent;case 6:return a=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,e.isPrimaryClient,a),t.abrupt("return",(Wo(e,n.targetId,s.Co),s.snapshot));case 8:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()(e,t,n,r)},t.next=3,Hr(e.localStore,n,!0);case 3:return o=t.sent,a=new wo(n,o.zn),s=a.bo(o.documents),u=pn.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==e.onlineState),h=a.applyChanges(s,e.isPrimaryClient,u),Wo(e,r,h.Co),f=new xo(n,r,a),t.abrupt("return",(e.Oo.set(n,f),e.Mo.has(r)?e.Mo.get(r).push(n):e.Mo.set(r,[n]),h.snapshot));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function To(t,e){return No.apply(this,arguments)}function No(){return(No=Object(l.a)(c.a.mark((function t(e,n){var r,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=j(e),i=r.Oo.get(n),!((o=r.Mo.get(i.targetId)).length>1)){t.next=3;break}return t.abrupt("return",(r.Mo.set(i.targetId,o.filter((function(t){return!ue(t,n)}))),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){t.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),t.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),t.t0){t.next=9;break}return t.next=9,qr(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ei(r.remoteStore,i.targetId),Go(r,i.targetId)})).catch(Ir);case 9:t.next=14;break;case 11:return Go(r,i.targetId),t.next=14,qr(r.localStore,i.targetId,!0);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Po(t,e,n){return Lo.apply(this,arguments)}function Lo(){return(Lo=Object(l.a)(c.a.mark((function t(e,n,r){var i,o,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=ea(e),t.prev=1,t.next=4,function(t,e){var n,r=j(t),i=Z.now(),o=e.reduce((function(t,e){return t.add(e.key)}),cn());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Wn.vn(t,o).next((function(o){n=o;var a,u=[],c=Object(s.a)(e);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=Re(l,n.get(l.key));null!=h&&u.push(new ze(l.key,h,Tt(h.value.mapValue),Ne.exists(!0)))}}catch(f){c.e(f)}finally{c.f()}return r.An.addMutationBatch(t,i,u,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(i.localStore,n);case 4:return o=t.sent,i.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.Ko[t.currentUser.toKey()];r||(r=new Ke(X)),r=r.insert(e,n),t.Ko[t.currentUser.toKey()]=r}(i,o.batchId,r),t.next=9,Zo(i,o.changes);case 9:return t.next=11,zi(i.remoteStore);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),a=io(t.t0,"Failed to persist write"),r.reject(a);case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))).apply(this,arguments)}function jo(t,e){return Mo.apply(this,arguments)}function Mo(){return(Mo=Object(l.a)(c.a.mark((function t(e,n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j(e),t.prev=1,t.next=4,zr(r.localStore,n);case 4:return i=t.sent,n.targetChanges.forEach((function(t,e){var n=r.Uo.get(e);n&&(L(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?n.$o=!0:t.modifiedDocuments.size>0?L(n.$o):t.removedDocuments.size>0&&(L(n.$o),n.$o=!1))})),t.next=8,Zo(r,i,n);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,Ir(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function Ro(t,e,n){var r=j(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach((function(t,n){var r=n.view.ro(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=j(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){var i,o=Object(s.a)(n.listeners);try{for(o.s();!(i=o.n()).done;){i.value.ro(e)&&(r=!0)}}catch(a){o.e(a)}finally{o.f()}})),r&&yo(n)}(r.eventManager,e),i.length&&r.Fo.Pr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Ao(t,e,n){return Do.apply(this,arguments)}function Do(){return(Do=Object(l.a)(c.a.mark((function t(e,n,r){var i,o,a,s,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=j(e)).sharedClientState.updateQueryState(n,"rejected",r),o=i.Uo.get(n),!(a=o&&o.key)){t.next=14;break}return s=(s=new Ke(gt.comparator)).insert(a,Nt.newNoDocument(a,K.min())),u=cn().add(a),l=new fn(K.min(),new Map,new $e(X),s,u),t.next=9,jo(i,l);case 9:i.Bo=i.Bo.remove(a),i.Uo.delete(n),Yo(i),t.next=16;break;case 14:return t.next=16,qr(i.localStore,n,!1).then((function(){return Go(i,n,r)})).catch(Ir);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Fo(t,e){return zo.apply(this,arguments)}function zo(){return(zo=Object(l.a)(c.a.mark((function t(e,n){var r,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j(e),i=n.batch.batchId,t.prev=1,t.next=4,Dr(r.localStore,n);case 4:return o=t.sent,qo(r,i,null),Vo(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),t.next=10,Zo(r,o);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,Ir(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function Bo(t,e,n){return Uo.apply(this,arguments)}function Uo(){return(Uo=Object(l.a)(c.a.mark((function t(e,n,r){var i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=j(e),t.prev=1,t.next=4,function(t,e){var n=j(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.An.lookupMutationBatch(t,e).next((function(e){return L(null!==e),r=e.keys(),n.An.removeMutationBatch(t,e)})).next((function(){return n.An.performConsistencyCheck(t)})).next((function(){return n.Wn.vn(t,r)}))}))}(i.localStore,n);case 4:return o=t.sent,qo(i,n,r),Vo(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),t.next=10,Zo(i,o);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,Ir(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function Vo(t,e){(t.jo.get(e)||[]).forEach((function(t){t.resolve()})),t.jo.delete(e)}function qo(t,e,n){var r=j(t),i=r.Ko[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function Go(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);var r,i=Object(s.a)(t.Mo.get(e));try{for(i.s();!(r=i.n()).done;){var o=r.value;t.Oo.delete(o),n&&t.Fo.zo(o,n)}}catch(a){i.e(a)}finally{i.f()}t.Mo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach((function(e){t.qo.containsKey(e)||Ho(t,e)}))}function Ho(t,e){t.Lo.delete(e.path.canonicalString());var n=t.Bo.get(e);null!==n&&(Ei(t.remoteStore,n),t.Bo=t.Bo.remove(e),t.Uo.delete(n),Yo(t))}function Wo(t,e,n){var r,i=Object(s.a)(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o instanceof _o?(t.qo.addReference(o.key,e),Xo(t,o)):o instanceof bo?(S("SyncEngine","Document no longer in limbo: "+o.key),t.qo.removeReference(o.key,e),t.qo.containsKey(o.key)||Ho(t,o.key)):P()}}catch(a){i.e(a)}finally{i.f()}}function Xo(t,e){var n=e.key,r=n.path.canonicalString();t.Bo.get(n)||t.Lo.has(r)||(S("SyncEngine","New document in limbo: "+n),t.Lo.add(r),Yo(t))}function Yo(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){var e=t.Lo.values().next().value;t.Lo.delete(e);var n=new gt(et.fromString(e)),r=t.Qo.next();t.Uo.set(r,new Eo(n)),t.Bo=t.Bo.insert(n,r),xi(t.remoteStore,new _r(ae($t(n.path)),r,2,G.I))}}function Zo(t,e,n){return Ko.apply(this,arguments)}function Ko(){return(Ko=Object(l.a)(c.a.mark((function t(e,n,r){var i,o,a,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=j(e),o=[],a=[],u=[],t.t0=i.Oo.isEmpty(),t.t0){t.next=9;break}return i.Oo.forEach((function(t,e){u.push(i.Go(e,n,r).then((function(t){if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(e.targetId,t.fromCache?"not-current":"current"),o.push(t);var n=Pr.$n(e.targetId,t);a.push(n)}})))})),t.next=6,Promise.all(u);case 6:return i.Fo.Pr(o),t.next=9,function(){var t=Object(l.a)(c.a.mark((function t(e,n){var r,i,o,a,u,l,h,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j(e),t.prev=1,t.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return gr.forEach(n,(function(e){return gr.forEach(e.kn,(function(n){return r.persistence.referenceDelegate.addReference(t,e.targetId,n)})).next((function(){return gr.forEach(e.xn,(function(n){return r.persistence.referenceDelegate.removeReference(t,e.targetId,n)}))}))}))}));case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(1),vr(t.t0)){t.next=10;break}throw t.t0;case 10:S("LocalStore","Failed to update sequence numbers: "+t.t0);case 11:i=Object(s.a)(n);try{for(i.s();!(o=i.n()).done;)a=o.value,u=a.targetId,a.fromCache||(l=r.qn.get(u),h=l.snapshotVersion,f=l.withLastLimboFreeSnapshotVersion(h),r.qn=r.qn.insert(u,f))}catch(c){i.e(c)}finally{i.f()}case 13:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,n){return t.apply(this,arguments)}}()(i.localStore,a);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qo(t,e){return Jo.apply(this,arguments)}function Jo(){return(Jo=Object(l.a)(c.a.mark((function t(e,n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=j(e)).currentUser.isEqual(n)){t.next=11;break}return S("SyncEngine","User change. New user:",n.toKey()),t.next=5,Rr(r.localStore,n);case 5:return i=t.sent,r.currentUser=n,function(t,e){t.jo.forEach((function(t){t.forEach((function(t){t.reject(new R(M.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.jo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),t.next=11,Zo(r,i.Gn);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $o(t,e){var n=j(t),r=n.Uo.get(e);if(r&&r.$o)return cn().add(r.key);var i=cn(),o=n.Mo.get(e);if(!o)return i;var a,u=Object(s.a)(o);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=n.Oo.get(c);i=i.unionWith(l.view.Po)}}catch(h){u.e(h)}finally{u.f()}return i}function ta(t){var e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$o.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ao.bind(null,e),e.Fo.Pr=go.bind(null,e.eventManager),e.Fo.zo=vo.bind(null,e.eventManager),e}function ea(t){var e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fo.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bo.bind(null,e),e}var na=function(){function t(){Object(g.a)(this,t),this.synchronizeTabs=!1}return Object(v.a)(t,[{key:"initialize",value:function(){var t=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.k=li(e.databaseInfo.databaseId),this.sharedClientState=this.Jo(e),this.persistence=this.Yo(e),t.next=5,this.persistence.start();case 5:this.gcScheduler=this.Xo(e),this.localStore=this.Zo(e);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"Xo",value:function(t){return null}},{key:"Zo",value:function(t){return Mr(this.persistence,new Lr,t.initialUser,this.k)}},{key:"Yo",value:function(t){return new $r(ei.ks,this.k)}},{key:"Jo",value:function(t){return new ri}},{key:"terminate",value:function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),t.next=3,this.sharedClientState.shutdown();case 3:return t.next=5,this.persistence.shutdown();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),ra=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"initialize",value:function(){var t=Object(l.a)(c.a.mark((function t(e,n){var r=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.localStore,t.t0){t.next=12;break}return this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Ro(r.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Qo.bind(null,this.syncEngine),t.next=12,$i(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createEventManager",value:function(t){return new co}},{key:"createDatastore",value:function(t){var e,n=li(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new ui(e));return function(t,e,n,r){return new gi(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Ro(a.syncEngine,t,0)},o=oi.bt()?new oi:new ii,new yi(e,n,r,i,o)}},{key:"createSyncEngine",value:function(t,e){return function(t,e,n,r,i,o,a){var s=new Oo(t,e,n,r,i,o);return a&&(s.Wo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}},{key:"terminate",value:function(){return function(){var t=Object(l.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=j(e),S("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),t.next=5,bi(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(this.remoteStore)}}]),t}();var ia=function(){function t(e){Object(g.a)(this,t),this.observer=e,this.muted=!1}return Object(v.a)(t,[{key:"next",value:function(t){this.observer.next&&this.ea(this.observer.next,t)}},{key:"error",value:function(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)}}]),t}(),oa=function(){function t(e,n,r,i){var o=this;Object(g.a)(this,t),this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=E.UNAUTHENTICATED,this.clientId=W.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var t=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return S("FirestoreClient","Received user=",e.uid),t.next=3,o.authCredentialListener(e);case 3:o.user=e;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(){return Promise.resolve()}))}return Object(v.a)(t,[{key:"getConfiguration",value:function(){var t=Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(t){this.authCredentialListener=t}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new R(M.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new A;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Object(l.a)(c.a.mark((function n(){var r;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=t.onlineComponents,!n.t0){n.next=5;break}return n.next=5,t.onlineComponents.terminate();case 5:if(n.t1=t.offlineComponents,!n.t1){n.next=9;break}return n.next=9,t.offlineComponents.terminate();case 9:t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=io(n.t2,"Failed to shutdown persistence"),e.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),e.promise}}]),t}();function aa(t,e){return sa.apply(this,arguments)}function sa(){return(sa=Object(l.a)(c.a.mark((function t(e,n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.asyncQueue.verifyOperationInProgress(),S("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,e.getConfiguration();case 3:return r=t.sent,t.next=6,n.initialize(r);case 6:i=r.initialUser,e.setCredentialChangeListener(function(){var t=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=i.isEqual(e),t.t0){t.next=5;break}return t.next=4,Rr(n.localStore,e);case 4:i=e;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=n;case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ua(t,e){return ca.apply(this,arguments)}function ca(){return(ca=Object(l.a)(c.a.mark((function t(e,n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.asyncQueue.verifyOperationInProgress(),t.next=3,la(e);case 3:return r=t.sent,S("FirestoreClient","Initializing OnlineComponentProvider"),t.next=7,e.getConfiguration();case 7:return i=t.sent,t.next=10,n.initialize(r,i);case 10:e.setCredentialChangeListener((function(t){return function(){var t=Object(l.a)(c.a.mark((function t(e,n){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=j(e)).asyncQueue.verifyOperationInProgress(),S("RemoteStore","RemoteStore received new credentials"),i=Ci(r),r.Gr.add(3),t.next=6,bi(r);case 6:return i&&r.Jr.set("Unknown"),t.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),t.next=12,mi(r);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(n.remoteStore,t)})),e.onlineComponents=n;case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function la(t){return ha.apply(this,arguments)}function ha(){return(ha=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.offlineComponents,t.t0){t.next=5;break}return S("FirestoreClient","Using default OfflineComponentProvider"),t.next=5,aa(e,new na);case 5:return t.abrupt("return",e.offlineComponents);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function fa(t){return pa.apply(this,arguments)}function pa(){return(pa=Object(l.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.onlineComponents,t.t0){t.next=5;break}return S("FirestoreClient","Using default OnlineComponentProvider"),t.next=5,ua(e,new ra);case 5:return t.abrupt("return",e.onlineComponents);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function da(t){return fa(t).then((function(t){return t.syncEngine}))}function ga(t){return va.apply(this,arguments)}function va(){return(va=Object(l.a)(c.a.mark((function t(e){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fa(e);case 2:return n=t.sent,r=n.eventManager,t.abrupt("return",(r.onListen=ko.bind(null,n.syncEngine),r.onUnlisten=To.bind(null,n.syncEngine),r));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ya(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new A;return t.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function i(){return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(t,e,n,r,i){var o=new ia({next:function(o){e.enqueueAndForget((function(){return fo(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new R(M.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new R(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new mo($t(n.path),o,{includeMetadataChanges:!0,wo:!0});return lo(t,a)},i.next=3,ga(t);case 3:return i.t1=i.sent,i.t2=t.asyncQueue,i.t3=e,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ma(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new A;return t.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function i(){return c.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(t,e,n,r,i){var o=new ia({next:function(n){e.enqueueAndForget((function(){return fo(t,a)})),n.fromCache&&"server"===r.source?i.reject(new R(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new mo(n,o,{includeMetadataChanges:!0,wo:!0});return lo(t,a)},i.next=3,ga(t);case 3:return i.t1=i.sent,i.t2=t.asyncQueue,i.t3=e,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var _a=function t(e,n,r,i,o,a,s,u){Object(g.a)(this,t),this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=s,this.useFetchStreams=u},ba=function(){function t(e,n){Object(g.a)(this,t),this.projectId=e,this.database=n||"(default)"}return Object(v.a)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}]),t}(),wa=new Map;function xa(t,e,n){if(!n)throw new R(M.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Ea(t){if(!gt.isDocumentKey(t))throw new R(M.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function Oa(t){if(gt.isDocumentKey(t))throw new R(M.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function ka(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){return t.constructor?t.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}return"function"==typeof t?"a function":P()}function Ia(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new R(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ka(t);throw new R(M.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}return t}var Sa=function(){function t(e){var n;if(Object(g.a)(this,t),void 0===e.host){if(void 0!==e.ssl)throw new R(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new R(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new R(M.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return Object(v.a)(t,[{key:"isEqual",value:function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}]),t}(),Ca=function(){function t(e,n,r){Object(g.a)(this,t),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sa({}),this._settingsFrozen=!1,e instanceof ba?this._databaseId=e:(this._app=e,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new R(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(t.options.projectId)}(e))}return Object(v.a)(t,[{key:"app",get:function(){if(!this._app)throw new R(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(t){if(this._settingsFrozen)throw new R(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sa(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new F;switch(t.type){case"gapi":var e=t.client;return L(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new U(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new R(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(t){var e=wa.get(t);e&&(S("ComponentProvider","Removing Datastore"),wa.delete(t),e.terminate())}(this),Promise.resolve()}}]),t}();var Ta=function(){function t(e,n,r){Object(g.a)(this,t),this.converter=n,this._key=r,this.type="document",this.firestore=e}return Object(v.a)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),Na=function(){function t(e,n,r){Object(g.a)(this,t),this.converter=n,this._query=r,this.type="query",this.firestore=e}return Object(v.a)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),Pa=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i){var o;return Object(g.a)(this,n),(o=e.call(this,t,r,$t(i)))._path=i,o.type="collection",o}return Object(v.a)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ta(this.firestore,null,new gt(t))}},{key:"withConverter",value:function(t){return new n(this.firestore,t,this._path)}}]),n}(Na);function La(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=Object(b.i)(t),xa("collection","path",e),t instanceof Ca){var o=et.fromString.apply(et,[e].concat(r));return Oa(o),new Pa(t,null,o)}if(!(t instanceof Ta||t instanceof Pa))throw new R(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=t._path.child(et.fromString.apply(et,[e].concat(r)));return Oa(a),new Pa(t.firestore,null,a)}function ja(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(t=Object(b.i)(t),1===arguments.length&&(e=W.A()),xa("doc","path",e),t instanceof Ca){var o=et.fromString.apply(et,[e].concat(r));return Ea(o),new Ta(t,null,new gt(o))}if(!(t instanceof Ta||t instanceof Pa))throw new R(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=t._path.child(et.fromString.apply(et,[e].concat(r)));return Ea(a),new Ta(t.firestore,t instanceof Pa?t.converter:null,new gt(a))}var Ma=function(){function t(){var e=this;Object(g.a)(this,t),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new hi(this,"async_queue_retry"),this.Ra=function(){var t=ci();t&&S("AsyncQueue","Visibility state changed to "+t.visibilityState),e.ur.er()};var n=ci();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return Object(v.a)(t,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(t){this.enqueue(t)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(t){this.Pa(),this.ba(t)}},{key:"enterRestrictedMode",value:function(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;var e=ci();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(t){var e=this;if(this.Pa(),this.ya)return new Promise((function(){}));var n=new A;return this.ba((function(){return e.ya&&e.Ia?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(t){var e=this;this.enqueueAndForget((function(){return e.ga.push(t),e.va()}))}},{key:"va",value:function(){var t=Object(l.a)(c.a.mark((function t(){var e=this;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.ga.length){t.next=14;break}return t.prev=1,t.next=4,this.ga[0]();case 4:this.ga.shift(),this.ur.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),vr(t.t0)){t.next=12;break}throw t.t0;case 12:S("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:this.ga.length>0&&this.ur.Zi((function(){return e.va()}));case 14:case"end":return t.stop()}}),t,this,[[1,8]])})));return function(){return t.apply(this,arguments)}}()},{key:"ba",value:function(t){var e=this,n=this.ma.then((function(){return e.Ea=!0,t().catch((function(t){throw e.Ta=t,e.Ea=!1,C("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Ea=!1,t}))}));return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(t,e,n){var r=this;this.Pa(),this.Aa.indexOf(t)>-1&&(e=0);var i=ro.createAndSchedule(this,t,e,n,(function(t){return r.Va(t)}));return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&P()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var t=Object(l.a)(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.ma,t.next=3,e;case 3:if(e!==this.ma){t.next=0;break}case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"Da",value:function(t){var e,n=Object(s.a)(this.pa);try{for(n.s();!(e=n.n()).done;){if(e.value.timerId===t)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(t){var e=this;return this.Sa().then((function(){e.pa.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));var n,r=Object(s.a)(e.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==t&&i.timerId===t)break}}catch(o){r.e(o)}finally{r.f()}return e.Sa()}))}},{key:"Na",value:function(t){this.Aa.push(t)}},{key:"Va",value:function(t){var e=this.pa.indexOf(t);this.pa.splice(e,1)}}]),t}();var Ra=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i){var o;return Object(g.a)(this,n),(o=e.call(this,t,r,i)).type="firestore",o._queue=new Ma,o._persistenceKey="name"in t?t.name:"[DEFAULT]",o}return Object(v.a)(n,[{key:"_terminate",value:function(){return this._firestoreClient||Fa(this),this._firestoreClient.terminate()}}]),n}(Ca);function Aa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(y.e)();return Object(y.b)(t,"firestore").getImmediate()}function Da(t){return t._firestoreClient||Fa(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Fa(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new _a(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new oa(t._authCredentials,t._appCheckCredentials,t._queue,r)}var za=function(){function t(){Object(g.a)(this,t);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new R(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(n)}return Object(v.a)(t,[{key:"isEqual",value:function(t){return this._internalPath.isEqual(t._internalPath)}}]),t}();var Ba=function(){function t(e){Object(g.a)(this,t),this._byteString=e}return Object(v.a)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(t){return this._byteString.isEqual(t._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(ot.fromBase64String(e))}catch(e){throw new R(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}},{key:"fromUint8Array",value:function(e){return new t(ot.fromUint8Array(e))}}]),t}(),Ua=function t(e){Object(g.a)(this,t),this._methodName=e},Va=function(){function t(e,n){if(Object(g.a)(this,t),!isFinite(e)||e<-90||e>90)throw new R(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new R(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}return Object(v.a)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(t){return this._lat===t._lat&&this._long===t._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(t){return X(this._lat,t._lat)||X(this._long,t._long)}}]),t}(),qa=/^__.*__$/,Ga=function(){function t(e,n,r){Object(g.a)(this,t),this.data=e,this.fieldMask=n,this.fieldTransforms=r}return Object(v.a)(t,[{key:"toMutation",value:function(t,e){return null!==this.fieldMask?new ze(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fe(t,this.data,e,this.fieldTransforms)}}]),t}();function Ha(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}var Wa=function(){function t(e,n,r,i,o,a){Object(g.a)(this,t),this.settings=e,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ka(),this.fieldTransforms=o||[],this.fieldMask=a||[]}return Object(v.a)(t,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$a({path:n,Oa:!1});return r.Ma(t),r}},{key:"La",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(t){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(t){return rs(t,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))}},{key:"ka",value:function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ma(this.path.get(t))}},{key:"Ma",value:function(t){if(0===t.length)throw this.Ua("Document fields must not be empty");if(Ha(this.xa)&&qa.test(t))throw this.Ua('Document fields cannot begin and end with "__"')}}]),t}(),Xa=function(){function t(e,n,r){Object(g.a)(this,t),this.databaseId=e,this.ignoreUndefinedProperties=n,this.k=r||li(e)}return Object(v.a)(t,[{key:"ja",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wa({xa:t,methodName:e,Ka:n,path:rt.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),t}();function Ya(t){var e=t._freezeSettings(),n=li(t._databaseId);return new Xa(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Za(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=t.ja(o.merge||o.mergeFields?2:0,e,n,i);$a("Data must be an object, but it was:",a,r);var u,c,l=Qa(r,a);if(o.merge)u=new it(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){var h,f=[],p=Object(s.a)(o.mergeFields);try{for(p.s();!(h=p.n()).done;){var d=h.value,g=ts(e,d,n);if(!a.contains(g))throw new R(M.INVALID_ARGUMENT,"Field '".concat(g,"' is specified in your field mask but missing from your input data."));is(f,g)||f.push(g)}}catch(v){p.e(v)}finally{p.f()}u=new it(f),c=a.fieldTransforms.filter((function(t){return u.covers(t.field)}))}else u=null,c=a.fieldTransforms;return new Ga(new Ct(l),u,c)}function Ka(t,e){if(Ja(t=Object(b.i)(t)))return $a("Unsupported field value:",e,t),Qa(t,e);if(t instanceof Ua)return function(t,e){if(!Ha(e.xa))throw e.Ua("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.Ua("".concat(t._methodName,"() is not currently supported inside arrays"));var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,e){var n,r=[],i=0,o=Object(s.a)(t);try{for(o.s();!(n=o.n()).done;){var a=Ka(n.value,e.Ba(i));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}}catch(u){o.e(u)}finally{o.f()}return{arrayValue:{values:r}}}(t,e)}return function(t,e){if(null===(t=Object(b.i)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ve(e.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Z.fromDate(t);return{timestampValue:On(e.k,n)}}if(t instanceof Z){var r=new Z(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:On(e.k,r)}}if(t instanceof Va)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ba)return{bytesValue:kn(e.k,t._byteString)};if(t instanceof Ta){var i=e.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw e.Ua("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Cn(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Ua("Unsupported field value: ".concat(ka(t)))}(t,e)}function Qa(t,e){var n={};return $(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):J(t,(function(t,r){var i=Ka(r,e.Fa(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Ja(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Z||t instanceof Va||t instanceof Ba||t instanceof Ta||t instanceof Ua)}function $a(t,e,n){if(!Ja(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ka(n);throw"an object"===r?e.Ua(t+" a custom object"):e.Ua(t+" "+r)}}function ts(t,e,n){if((e=Object(b.i)(e))instanceof za)return e._internalPath;if("string"==typeof e)return ns(t,e);throw rs("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var es=new RegExp("[~\\*/\\[\\]]");function ns(t,e,n){if(e.search(es)>=0)throw rs("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return Object(r.a)(za,Object(d.a)(e.split(".")))._internalPath}catch(i){throw rs("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function rs(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function ".concat(e,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field ".concat(r)),a&&(u+=" in document ".concat(i)),u+=")"),new R(M.INVALID_ARGUMENT,s+t+u)}function is(t,e){return t.some((function(t){return t.isEqual(e)}))}var os=function(){function t(e,n,r,i,o){Object(g.a)(this,t),this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return Object(v.a)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Ta(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var t=new as(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(t){if(this._document){var e=this._document.data.field(ss("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}]),t}(),as=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){return Object(g.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"data",value:function(){return Object(i.a)(Object(o.a)(n.prototype),"data",this).call(this)}}]),n}(os);function ss(t,e){return"string"==typeof e?ns(t,e):e instanceof za?e._internalPath:e._delegate._internalPath}var us=function(){function t(e,n){Object(g.a)(this,t),this.hasPendingWrites=e,this.fromCache=n}return Object(v.a)(t,[{key:"isEqual",value:function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}]),t}(),cs=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t,r,i,o,a,s){var u;return Object(g.a)(this,n),(u=e.call(this,t,r,i,o,s))._firestore=t,u._firestoreImpl=t,u.metadata=a,u}return Object(v.a)(n,[{key:"exists",value:function(){return Object(i.a)(Object(o.a)(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var e=new ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ss("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}]),n}(os),ls=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(){return Object(g.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.a)(Object(o.a)(n.prototype),"data",this).call(this,t)}}]),n}(cs),hs=function(){function t(e,n,r,i){Object(g.a)(this,t),this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new us(i.hasPendingWrites,i.fromCache),this.query=r}return Object(v.a)(t,[{key:"docs",get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new ls(n._firestore,n._userDataWriter,r.key,r,new us(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new R(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new ls(t._firestore,t._userDataWriter,e.doc.key,e.doc,new us(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new ls(t._firestore,t._userDataWriter,e.doc.key,e.doc,new us(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:fs(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),t}();function fs(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}function ps(t){if(ee(t)&&0===t.explicitOrderBy.length)throw new R(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ds=function(){function t(){Object(g.a)(this,t)}return Object(v.a)(t,[{key:"convertValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(vt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ut(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ct(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw P()}}},{key:"convertObject",value:function(t,e){var n=this,r={};return J(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r}},{key:"convertGeoPoint",value:function(t){return new Va(ut(t.latitude),ut(t.longitude))}},{key:"convertArray",value:function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))}},{key:"convertServerTimestamp",value:function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return lt(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ht(t));default:return null}}},{key:"convertTimestamp",value:function(t){var e=st(t);return new Z(e.seconds,e.nanos)}},{key:"convertDocumentKey",value:function(t,e){var n=et.fromString(t);L(Kn(n));var r=new ba(n.get(1),n.get(3)),i=new gt(n.popFirst(5));return r.isEqual(e)||C("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),i}}]),t}();function gs(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}function vs(t){t=Ia(t,Ta);var e=Ia(t.firestore,Ra);return ya(Da(e),t._key).then((function(n){return ws(e,t,n)}))}var ys=function(t){Object(h.a)(n,t);var e=Object(f.a)(n);function n(t){var r;return Object(g.a)(this,n),(r=e.call(this)).firestore=t,r}return Object(v.a)(n,[{key:"convertBytes",value:function(t){return new Ba(t)}},{key:"convertReference",value:function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ta(this.firestore,null,e)}}]),n}(ds);function ms(t){t=Ia(t,Na);var e=Ia(t.firestore,Ra),n=Da(e),r=new ys(e);return ps(t._query),ma(n,t._query).then((function(n){return new hs(e,r,t,n)}))}function _s(t,e){var n=Ia(t.firestore,Ra),r=ja(t),i=gs(t.converter,e);return bs(n,[Za(Ya(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ne.exists(!1))]).then((function(){return r}))}function bs(t,e){return function(t,e){var n=new A;return t.asyncQueue.enqueueAndForget(Object(l.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Po,r.next=3,da(t);case 3:return r.t1=r.sent,r.t2=e,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Da(t),e)}function ws(t,e,n){var r=n.docs.get(e._key),i=new ys(t);return new cs(t,i,e._key,r,new us(n.hasPendingWrites,n.fromCache),e.converter)}!function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t){O=t}(y.a),Object(y.c)(new m.a("firestore",(function(t,n){var r=n.options,i=t.getProvider("app").getImmediate(),o=new Ra(i,new z(t.getProvider("auth-internal")),new q(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o}),"PUBLIC")),Object(y.g)(x,"3.4.0",t),Object(y.g)(x,"3.4.0","esm2017")}()}).call(this,n(70))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r=n(18);n.d(e,"a",(function(){return r.f}));Object(r.g)("firebase","9.6.0","app")},function(t,e,n){"use strict";var r=n(6),i=n(5),o=n(10),a=n(14),s=n.n(a),u=n(1),c=(n(71),n(59)),l=n(23),h=n(15),f=n(7),p=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],d=u.forwardRef((function(t,e){var n,a,c=t.bsPrefix,d=t.type,g=t.size,v=t.htmlSize,y=t.id,m=t.className,_=t.isValid,b=void 0!==_&&_,w=t.isInvalid,x=void 0!==w&&w,E=t.plaintext,O=t.readOnly,k=t.as,I=void 0===k?"input":k,S=Object(o.a)(t,p),C=Object(u.useContext)(l.a).controlId;(c=Object(h.a)(c,"form-control"),E)?n=Object(i.a)({},"".concat(c,"-plaintext"),!0):(a={},Object(i.a)(a,c,!0),Object(i.a)(a,"".concat(c,"-").concat(g),g),n=a);return Object(f.jsx)(I,Object(r.a)(Object(r.a)({},S),{},{type:d,size:v,ref:e,readOnly:O,id:y||C,className:s()(m,n,b&&"is-valid",x&&"is-invalid","color"===d&&"".concat(c,"-color"))}))}));d.displayName="FormControl",e.a=Object.assign(d,{Feedback:c.a})},function(t,e,n){"use strict";var r=n(13),i=n(6),o=n(10),a=n(14),s=n.n(a),u=n(1),c=n(15),l=n(7),h=["as","bsPrefix","className"],f=["className"],p=["xxl","xl","lg","md","sm","xs"];var d=u.forwardRef((function(t,e){var n=function(t){var e=t.as,n=t.bsPrefix,r=t.className,a=Object(o.a)(t,h);n=Object(c.a)(n,"col");var u=[],l=[];return p.forEach((function(t){var e,r,i,o=a[t];delete a[t],"object"===typeof o&&null!=o?(e=o.span,r=o.offset,i=o.order):e=o;var s="xs"!==t?"-".concat(t):"";e&&u.push(!0===e?"".concat(n).concat(s):"".concat(n).concat(s,"-").concat(e)),null!=i&&l.push("order".concat(s,"-").concat(i)),null!=r&&l.push("offset".concat(s,"-").concat(r))})),[Object(i.a)(Object(i.a)({},a),{},{className:s.a.apply(void 0,[r].concat(u,l))}),{as:e,bsPrefix:n,spans:u}]}(t),a=Object(r.a)(n,2),u=a[0],d=u.className,g=Object(o.a)(u,f),v=a[1],y=v.as,m=void 0===y?"div":y,_=v.bsPrefix,b=v.spans;return Object(l.jsx)(m,Object(i.a)(Object(i.a)({},g),{},{ref:e,className:s()(d,!b.length&&_)}))}));d.displayName="Col",e.a=d},function(t,e,n){"use strict";(function(t){var r=n(1),i="undefined"!==typeof t&&t.navigator&&"ReactNative"===t.navigator.product,o="undefined"!==typeof document;e.a=o||i?r.useLayoutEffect:r.useEffect}).call(this,n(65))},function(t,e,n){"use strict";var r=n(92).CopyToClipboard;r.CopyToClipboard=r,t.exports=r},,function(t,e,n){"use strict";var r=n(64),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,u=60112;e.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),e.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function v(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}function y(){}function m(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||d}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=v.prototype;var _=m.prototype=new y;_.constructor=m,r(_,v.prototype),_.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,n){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,r)&&!x.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:b.current}}function O(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var k=/\/+/g;function I(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function S(t,e,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=t),t=""===r?"."+I(u,0):r,Array.isArray(a)?(n="",null!=t&&(n=t.replace(k,"$&/")+"/"),S(a,e,n,"",(function(t){return t}))):null!=a&&(O(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+t)),e.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=r+I(s=t[c],c);u+=S(s,e,n,l,a)}else if("function"===typeof(l=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t)))for(t=l.call(t),c=0;!(s=t.next()).done;)u+=S(s=s.value,e,n,l=r+I(s,c++),a);else if("object"===s)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function C(t,e,n){if(null==t)return t;var r=[],i=0;return S(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function T(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var N={current:null};function P(){var t=N.current;if(null===t)throw Error(p(321));return t}var L={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:C,forEach:function(t,e,n){C(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return C(t,(function(){e++})),e},toArray:function(t){return C(t,(function(t){return t}))||[]},only:function(t){if(!O(t))throw Error(p(143));return t}},e.Component=v,e.PureComponent=m,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(p(267,t));var o=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=b.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)w.call(e,l)&&!x.hasOwnProperty(l)&&(o[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:i,type:t.type,key:a,ref:s,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=O,e.lazy=function(t){return{$$typeof:l,_payload:{_status:-1,_result:t},_init:T}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return P().useCallback(t,e)},e.useContext=function(t,e){return P().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return P().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return P().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return P().useLayoutEffect(t,e)},e.useMemo=function(t,e){return P().useMemo(t,e)},e.useReducer=function(t,e,n){return P().useReducer(t,e,n)},e.useRef=function(t){return P().useRef(t)},e.useState=function(t){return P().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var r=n(1),i=n(64),o=n(81);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,d={},g={};function v(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){y[t]=new v(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];y[e]=new v(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){y[t]=new v(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){y[t]=new v(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){y[t]=new v(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){y[t]=new v(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){y[t]=new v(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){y[t]=new v(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){y[t]=new v(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function b(t,e,n,r){var i=y.hasOwnProperty(e)?y[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!p.call(g,t)||!p.call(d,t)&&(f.test(t)?g[t]=!0:(d[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,_);y[e]=new v(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,_);y[e]=new v(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,_);y[e]=new v(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){y[t]=new v(t,1,!1,t.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){y[t]=new v(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,E=60106,O=60107,k=60108,I=60114,S=60109,C=60110,T=60112,N=60113,P=60120,L=60115,j=60116,M=60121,R=60128,A=60129,D=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;x=z("react.element"),E=z("react.portal"),O=z("react.fragment"),k=z("react.strict_mode"),I=z("react.profiler"),S=z("react.provider"),C=z("react.context"),T=z("react.forward_ref"),N=z("react.suspense"),P=z("react.suspense_list"),L=z("react.memo"),j=z("react.lazy"),M=z("react.block"),z("react.scope"),R=z("react.opaque.id"),A=z("react.debug_trace_mode"),D=z("react.offscreen"),F=z("react.legacy_hidden")}var B,U="function"===typeof Symbol&&Symbol.iterator;function V(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=U&&t[U]||t["@@iterator"])?t:null}function q(t){if(void 0===B)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);B=e&&e[1]||""}return"\n"+B+t}var G=!1;function H(t,e){if(!t||G)return"";G=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{G=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?q(t):""}function W(t){switch(t.tag){case 5:return q(t.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return t=H(t.type,!1);case 11:return t=H(t.type.render,!1);case 22:return t=H(t.type._render,!1);case 1:return t=H(t.type,!0);default:return""}}function X(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case O:return"Fragment";case E:return"Portal";case I:return"Profiler";case k:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case S:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case L:return X(t.type);case M:return X(t._render);case j:e=t._payload,t=t._init;try{return X(t(e))}catch(n){}}return null}function Y(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Z(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function K(t){t._valueTracker||(t._valueTracker=function(t){var e=Z(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Q(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Y(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Y(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,Y(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Y(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Y(n)}}function ct(t,e){var n=Y(e.value),r=Y(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function lt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?pt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var gt,vt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((gt=gt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var mt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_t=["Webkit","ms","Moz","O"];function bt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||mt.hasOwnProperty(t)&&mt[t]?(""+e).trim():e+"px"}function wt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=bt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(mt).forEach((function(t){_t.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mt[e]=mt[t]}))}));var xt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Et(t,e){if(e){if(xt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function Ot(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function kt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var It=null,St=null,Ct=null;function Tt(t){if(t=Jr(t)){if("function"!==typeof It)throw Error(a(280));var e=t.stateNode;e&&(e=ti(e),It(t.stateNode,t.type,e))}}function Nt(t){St?Ct?Ct.push(t):Ct=[t]:St=t}function Pt(){if(St){var t=St,e=Ct;if(Ct=St=null,Tt(t),e)for(t=0;t<e.length;t++)Tt(e[t])}}function Lt(t,e){return t(e)}function jt(t,e,n,r,i){return t(e,n,r,i)}function Mt(){}var Rt=Lt,At=!1,Dt=!1;function Ft(){null===St&&null===Ct||(Mt(),Pt())}function zt(t,e){var n=t.stateNode;if(null===n)return null;var r=ti(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var Bt=!1;if(h)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(oc){Bt=!1}function Vt(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var qt=!1,Gt=null,Ht=!1,Wt=null,Xt={onError:function(t){qt=!0,Gt=t}};function Yt(t,e,n,r,i,o,a,s,u){qt=!1,Gt=null,Vt.apply(Xt,arguments)}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Kt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Qt(t){if(Zt(t)!==t)throw Error(a(188))}function Jt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qt(i),t;if(o===r)return Qt(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function $t(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var te,ee,ne,re,ie=!1,oe=[],ae=null,se=null,ue=null,ce=new Map,le=new Map,he=[],fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function de(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":se=null;break;case"mouseover":case"mouseout":ue=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":le.delete(e.pointerId)}}function ge(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=pe(e,n,r,i,o),null!==e&&(null!==(e=Jr(e))&&ee(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ve(t){var e=Qr(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Kt(n)))return t.blockedOn=e,void re(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ne(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=Jr(n))&&ee(e),t.blockedOn=n,!1;e.shift()}return!0}function me(t,e,n){ye(t)&&n.delete(e)}function _e(){for(ie=!1;0<oe.length;){var t=oe[0];if(null!==t.blockedOn){null!==(t=Jr(t.blockedOn))&&te(t);break}for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&oe.shift()}null!==ae&&ye(ae)&&(ae=null),null!==se&&ye(se)&&(se=null),null!==ue&&ye(ue)&&(ue=null),ce.forEach(me),le.forEach(me)}function be(t,e){t.blockedOn===e&&(t.blockedOn=null,ie||(ie=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_e)))}function we(t){function e(e){return be(e,t)}if(0<oe.length){be(oe[0],t);for(var n=1;n<oe.length;n++){var r=oe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ae&&be(ae,t),null!==se&&be(se,t),null!==ue&&be(ue,t),ce.forEach(e),le.forEach(e),n=0;n<he.length;n++)(r=he[n]).blockedOn===t&&(r.blockedOn=null);for(;0<he.length&&null===(n=he[0]).blockedOn;)ve(n),null===n.blockedOn&&he.shift()}function xe(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ee={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionend:xe("Transition","TransitionEnd")},Oe={},ke={};function Ie(t){if(Oe[t])return Oe[t];if(!Ee[t])return t;var e,n=Ee[t];for(e in n)if(n.hasOwnProperty(e)&&e in ke)return Oe[t]=n[e];return t}h&&(ke=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);var Se=Ie("animationend"),Ce=Ie("animationiteration"),Te=Ie("animationstart"),Ne=Ie("transitionend"),Pe=new Map,Le=new Map,je=["abort","abort",Se,"animationEnd",Ce,"animationIteration",Te,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ne,"transitionEnd","waiting","waiting"];function Me(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Le.set(r,e),Pe.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Re=8;function Ae(t){if(0!==(1&t))return Re=15,1;if(0!==(2&t))return Re=14,2;if(0!==(4&t))return Re=13,4;var e=24&t;return 0!==e?(Re=12,e):0!==(32&t)?(Re=11,32):0!==(e=192&t)?(Re=10,e):0!==(256&t)?(Re=9,256):0!==(e=3584&t)?(Re=8,e):0!==(4096&t)?(Re=7,4096):0!==(e=4186112&t)?(Re=6,e):0!==(e=62914560&t)?(Re=5,e):67108864&t?(Re=4,67108864):0!==(134217728&t)?(Re=3,134217728):0!==(e=805306368&t)?(Re=2,e):0!==(1073741824&t)?(Re=1,1073741824):(Re=8,t)}function De(t,e){var n=t.pendingLanes;if(0===n)return Re=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=Re=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ae(u),i=Re):0!==(s&=o)&&(r=Ae(s),i=Re)}else 0!==(o=n&~a)?(r=Ae(o),i=Re):0!==s&&(r=Ae(s),i=Re);if(0===r)return 0;if(r=n&((0>(r=31-qe(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&a)){if(Ae(e),i<=Re)return e;Re=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-qe(e)),r|=t[n],e&=~i;return r}function Fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function ze(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Be(24&~e))?ze(10,e):t;case 10:return 0===(t=Be(192&~e))?ze(8,e):t;case 8:return 0===(t=Be(3584&~e))&&(0===(t=Be(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Be(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function Be(t){return t&-t}function Ue(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ve(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-qe(e)]=n}var qe=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(Ge(t)/He|0)|0},Ge=Math.log,He=Math.LN2;var We=o.unstable_UserBlockingPriority,Xe=o.unstable_runWithPriority,Ye=!0;function Ze(t,e,n,r){At||Mt();var i=Qe,o=At;At=!0;try{jt(i,t,e,n,r)}finally{(At=o)||Ft()}}function Ke(t,e,n,r){Xe(We,Qe.bind(null,t,e,n,r))}function Qe(t,e,n,r){var i;if(Ye)if((i=0===(4&e))&&0<oe.length&&-1<fe.indexOf(t))t=pe(null,t,e,n,r),oe.push(t);else{var o=Je(t,e,n,r);if(null===o)i&&de(t,r);else{if(i){if(-1<fe.indexOf(t))return t=pe(o,t,e,n,r),void oe.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return ae=ge(ae,t,e,n,r,i),!0;case"dragenter":return se=ge(se,t,e,n,r,i),!0;case"mouseover":return ue=ge(ue,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ce.set(o,ge(ce.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,le.set(o,ge(le.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;de(t,r)}Nr(t,e,r,null,n)}}}function Je(t,e,n,r){var i=kt(r);if(null!==(i=Qr(i))){var o=Zt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Kt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Nr(t,e,r,i,n),null}var $e=null,tn=null,en=null;function nn(){if(en)return en;var t,e,n=tn,r=n.length,i="value"in $e?$e.value:$e.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return en=i.slice(t,1<e?1-e:void 0)}function rn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function on(){return!0}function an(){return!1}function sn(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),e}var un,cn,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=sn(hn),pn=i({},hn,{view:0,detail:0}),dn=sn(pn),gn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(un=t.screenX-ln.screenX,cn=t.screenY-ln.screenY):cn=un=0,ln=t),un)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),vn=sn(gn),yn=sn(i({},gn,{dataTransfer:0})),mn=sn(i({},pn,{relatedTarget:0})),_n=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=sn(i({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),wn=sn(i({},hn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=On[t])&&!!e[t]}function In(){return kn}var Sn=sn(i({},pn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=rn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?En[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(t){return"keypress"===t.type?rn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?rn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Cn=sn(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=sn(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Nn=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=sn(i({},gn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Ln=[9,13,27,32],jn=h&&"CompositionEvent"in window,Mn=null;h&&"documentMode"in document&&(Mn=document.documentMode);var Rn=h&&"TextEvent"in window&&!Mn,An=h&&(!jn||Mn&&8<Mn&&11>=Mn),Dn=String.fromCharCode(32),Fn=!1;function zn(t,e){switch(t){case"keyup":return-1!==Ln.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Un=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Vn[t.type]:"textarea"===e}function Gn(t,e,n,r){Nt(r),0<(e=Lr(e,"onChange")).length&&(n=new fn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hn=null,Wn=null;function Xn(t){Or(t,0)}function Yn(t){if(Q($r(t)))return t}function Zn(t,e){if("change"===t)return e}var Kn=!1;if(h){var Qn;if(h){var Jn="oninput"in document;if(!Jn){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),Jn="function"===typeof $n.oninput}Qn=Jn}else Qn=!1;Kn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",er),Wn=Hn=null)}function er(t){if("value"===t.propertyName&&Yn(Wn)){var e=[];if(Gn(e,Wn,t,kt(t)),t=Xn,At)t(e);else{At=!0;try{Lt(t,e)}finally{At=!1,Ft()}}}}function nr(t,e,n){"focusin"===t?(tr(),Wn=n,(Hn=e).attachEvent("onpropertychange",er)):"focusout"===t&&tr()}function rr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Yn(Wn)}function ir(t,e){if("click"===t)return Yn(e)}function or(t,e){if("input"===t||"change"===t)return Yn(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},sr=Object.prototype.hasOwnProperty;function ur(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!sr.call(e,n[r])||!ar(t[n[r]],e[n[r]]))return!1;return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lr(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var pr=h&&"documentMode"in document&&11>=document.documentMode,dr=null,gr=null,vr=null,yr=!1;function mr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==dr||dr!==J(r)||("selectionStart"in(r=dr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Lr(gr,"onSelect")).length&&(e=new fn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=dr)))}Me("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Me("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Me(je,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),br=0;br<_r.length;br++)Le.set(_r[br],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xr=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Er(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,u,c){if(Yt.apply(this,arguments),qt){if(!qt)throw Error(a(198));var l=Gt;qt=!1,Gt=null,Ht||(Ht=!0,Wt=l)}}(r,e,void 0,t),t.currentTarget=null}function Or(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;Er(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;Er(i,s,c),o=u}}}if(Ht)throw t=Wt,Ht=!1,Wt=null,t}function kr(t,e){var n=ei(e),r=t+"__bubble";n.has(r)||(Tr(e,t,2,!1),n.add(r))}var Ir="_reactListening"+Math.random().toString(36).slice(2);function Sr(t){t[Ir]||(t[Ir]=!0,s.forEach((function(e){xr.has(e)||Cr(e,!1,t,null),Cr(e,!0,t,null)})))}function Cr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&xr.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=ei(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),Tr(o,t,i,e),a.add(s))}function Tr(t,e,n,r){var i=Le.get(e);switch(void 0===i?2:i){case 0:i=Ze;break;case 1:i=Ke;break;default:i=Qe}n=i.bind(null,e,n,t),i=void 0,!Bt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Qr(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Dt)return t(e,n);Dt=!0;try{Rt(t,e,n)}finally{Dt=!1,Ft()}}((function(){var r=o,i=kt(n),a=[];t:{var s=Pe.get(t);if(void 0!==s){var u=fn,c=t;switch(t){case"keypress":if(0===rn(n))break t;case"keydown":case"keyup":u=Sn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case Se:case Ce:case Te:u=_n;break;case Ne:u=Nn;break;case"scroll":u=dn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&e),h=!l&&"scroll"===t,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,d=r;null!==d;){var g=(p=d).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==f&&(null!=(g=zt(d,f))&&l.push(Pr(d,g,p)))),h)break;d=d.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(c=n.relatedTarget||n.fromElement)||!Qr(c)&&!c[Zr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Qr(c):null)&&(c!==(h=Zt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=vn,g="onMouseLeave",f="onMouseEnter",d="mouse","pointerout"!==t&&"pointerover"!==t||(l=Cn,g="onPointerLeave",f="onPointerEnter",d="pointer"),h=null==u?s:$r(u),p=null==c?s:$r(c),(s=new l(g,d+"leave",u,n,i)).target=h,s.relatedTarget=p,g=null,Qr(i)===r&&((l=new l(f,d+"enter",c,n,i)).target=p,l.relatedTarget=h,g=l),h=g,u&&c)t:{for(f=c,d=0,p=l=u;p;p=jr(p))d++;for(p=0,g=f;g;g=jr(g))p++;for(;0<d-p;)l=jr(l),d--;for(;0<p-d;)f=jr(f),p--;for(;d--;){if(l===f||null!==f&&l===f.alternate)break t;l=jr(l),f=jr(f)}l=null}else l=null;null!==u&&Mr(a,s,u,l,!1),null!==c&&null!==h&&Mr(a,h,c,l,!0)}if("select"===(u=(s=r?$r(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Zn;else if(qn(s))if(Kn)v=or;else{v=rr;var y=nr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(t,r))?Gn(a,v,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&it(s,"number",s.value)),y=r?$r(r):window,t){case"focusin":(qn(y)||"true"===y.contentEditable)&&(dr=y,gr=r,vr=null);break;case"focusout":vr=gr=dr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,mr(a,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":mr(a,n,i)}var m;if(jn)t:{switch(t){case"compositionstart":var _="onCompositionStart";break t;case"compositionend":_="onCompositionEnd";break t;case"compositionupdate":_="onCompositionUpdate";break t}_=void 0}else Un?zn(t,n)&&(_="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(_="onCompositionStart");_&&(An&&"ko"!==n.locale&&(Un||"onCompositionStart"!==_?"onCompositionEnd"===_&&Un&&(m=nn()):(tn="value"in($e=i)?$e.value:$e.textContent,Un=!0)),0<(y=Lr(r,_)).length&&(_=new wn(_,t,null,n,i),a.push({event:_,listeners:y}),m?_.data=m:null!==(m=Bn(n))&&(_.data=m))),(m=Rn?function(t,e){switch(t){case"compositionend":return Bn(e);case"keypress":return 32!==e.which?null:(Fn=!0,Dn);case"textInput":return(t=e.data)===Dn&&Fn?null:t;default:return null}}(t,n):function(t,e){if(Un)return"compositionend"===t||!jn&&zn(t,e)?(t=nn(),en=tn=$e=null,Un=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return An&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(r=Lr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}Or(a,e)}))}function Pr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Lr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=zt(t,n))&&r.unshift(Pr(t,o,i)),null!=(o=zt(t,e))&&r.push(Pr(t,o,i))),t=t.return}return r}function jr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Mr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=zt(n,o))&&a.unshift(Pr(n,u,s)):i||null!=(u=zt(n,o))&&a.push(Pr(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Rr(){}var Ar=null,Dr=null;function Fr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function zr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Br="function"===typeof setTimeout?setTimeout:void 0,Ur="function"===typeof clearTimeout?clearTimeout:void 0;function Vr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function qr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Gr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Hr=0;var Wr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Wr,Yr="__reactProps$"+Wr,Zr="__reactContainer$"+Wr,Kr="__reactEvents$"+Wr;function Qr(t){var e=t[Xr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[Xr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Gr(t);null!==t;){if(n=t[Xr])return n;t=Gr(t)}return e}n=(t=n).parentNode}return null}function Jr(t){return!(t=t[Xr]||t[Zr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function $r(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function ti(t){return t[Yr]||null}function ei(t){var e=t[Kr];return void 0===e&&(e=t[Kr]=new Set),e}var ni=[],ri=-1;function ii(t){return{current:t}}function oi(t){0>ri||(t.current=ni[ri],ni[ri]=null,ri--)}function ai(t,e){ri++,ni[ri]=t.current,t.current=e}var si={},ui=ii(si),ci=ii(!1),li=si;function hi(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function pi(){oi(ci),oi(ui)}function di(t,e,n){if(ui.current!==si)throw Error(a(168));ai(ui,e),ai(ci,n)}function gi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,X(e)||"Unknown",o));return i({},n,r)}function vi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,li=ui.current,ai(ui,t),ai(ci,ci.current),!0}function yi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=gi(t,e,li),r.__reactInternalMemoizedMergedChildContext=t,oi(ci),oi(ui),ai(ui,t)):oi(ci),ai(ci,n)}var mi=null,_i=null,bi=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,xi=o.unstable_cancelCallback,Ei=o.unstable_shouldYield,Oi=o.unstable_requestPaint,ki=o.unstable_now,Ii=o.unstable_getCurrentPriorityLevel,Si=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,Ti=o.unstable_NormalPriority,Ni=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Li={},ji=void 0!==Oi?Oi:function(){},Mi=null,Ri=null,Ai=!1,Di=ki(),Fi=1e4>Di?ki:function(){return ki()-Di};function zi(){switch(Ii()){case Si:return 99;case Ci:return 98;case Ti:return 97;case Ni:return 96;case Pi:return 95;default:throw Error(a(332))}}function Bi(t){switch(t){case 99:return Si;case 98:return Ci;case 97:return Ti;case 96:return Ni;case 95:return Pi;default:throw Error(a(332))}}function Ui(t,e){return t=Bi(t),bi(t,e)}function Vi(t,e,n){return t=Bi(t),wi(t,e,n)}function qi(){if(null!==Ri){var t=Ri;Ri=null,xi(t)}Gi()}function Gi(){if(!Ai&&null!==Mi){Ai=!0;var t=0;try{var e=Mi;Ui(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Mi=null}catch(n){throw null!==Mi&&(Mi=Mi.slice(t+1)),wi(Si,qi),n}finally{Ai=!1}}}var Hi=w.ReactCurrentBatchConfig;function Wi(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Xi=ii(null),Yi=null,Zi=null,Ki=null;function Qi(){Ki=Zi=Yi=null}function Ji(t){var e=Xi.current;oi(Xi),t.type._context._currentValue=e}function $i(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function to(t,e){Yi=t,Ki=Zi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(La=!0),t.firstContext=null)}function eo(t,e){if(Ki!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Ki=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Zi){if(null===Yi)throw Error(a(308));Zi=e,Yi.dependencies={lanes:0,firstContext:e,responders:null}}else Zi=Zi.next=e;return t._currentValue}var no=!1;function ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function io(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ao(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function so(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uo(t,e,n,r){var o=t.updateQueue;no=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,h=l=c=null;;){u=a.lane;var p=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var d=t,g=a;switch(u=e,p=n,g.tag){case 1:if("function"===typeof(d=g.payload)){f=d.call(p,f,u);break t}f=d;break t;case 3:d.flags=-4097&d.flags|64;case 0:if(null===(u="function"===typeof(d=g.payload)?d.call(p,f,u):d)||void 0===u)break t;f=i({},f,u);break t;case 2:no=!0}}null!==a.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(l=h=p,c=f):h=h.next=p,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=h,Ms|=s,t.lanes=s,t.memoizedState=f}}function co(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var lo=(new r.Component).refs;function ho(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var fo={isMounted:function(t){return!!(t=t._reactInternals)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ou(),i=au(t),o=oo(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ao(t,o),su(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ou(),i=au(t),o=oo(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ao(t,o),su(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ou(),r=au(t),i=oo(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),ao(t,i),su(t,r,n)}};function po(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function go(t,e,n){var r=!1,i=si,o=e.contextType;return"object"===typeof o&&null!==o?o=eo(o):(i=fi(e)?li:ui.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?hi(t,i):si),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=fo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function vo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fo.enqueueReplaceState(e,e.state,null)}function yo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=lo,ro(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=eo(o):(o=fi(e)?li:ui.current,i.context=hi(t,o)),uo(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(ho(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&fo.enqueueReplaceState(i,i.state,null),uo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var mo=Array.isArray;function _o(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===lo&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function bo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function wo(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=zu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=qu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=_o(t,e,n),r.return=t,r):((r=Bu(n.type,n.key,n.props,null,t.mode,r)).ref=_o(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Gu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Uu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=qu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(n=Bu(e.type,e.key,e.props,null,t.mode,n)).ref=_o(t,null,e),n.return=t,n;case E:return(e=Gu(e,t.mode,n)).return=t,e}if(mo(e)||V(e))return(e=Uu(e,t.mode,n,null)).return=t,e;bo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===O?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case E:return n.key===i?l(t,e,n,r):null}if(mo(n)||V(n))return null!==i?null:h(t,e,n,r,null);bo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return t=t.get(null===r.key?n:r.key)||null,r.type===O?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case E:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(mo(r)||V(r))return h(e,t=t.get(n)||null,r,i,null);bo(e,r)}return null}function g(i,a,s,u){for(var c=null,l=null,h=a,g=a=0,v=null;null!==h&&g<s.length;g++){h.index>g?(v=h,h=null):v=h.sibling;var y=p(i,h,s[g],u);if(null===y){null===h&&(h=v);break}t&&h&&null===y.alternate&&e(i,h),a=o(y,a,g),null===l?c=y:l.sibling=y,l=y,h=v}if(g===s.length)return n(i,h),c;if(null===h){for(;g<s.length;g++)null!==(h=f(i,s[g],u))&&(a=o(h,a,g),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);g<s.length;g++)null!==(v=d(h,i,g,s[g],u))&&(t&&null!==v.alternate&&h.delete(null===v.key?g:v.key),a=o(v,a,g),null===l?c=v:l.sibling=v,l=v);return t&&h.forEach((function(t){return e(i,t)})),c}function v(i,s,u,c){var l=V(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,g=s,v=s=0,y=null,m=u.next();null!==g&&!m.done;v++,m=u.next()){g.index>v?(y=g,g=null):y=g.sibling;var _=p(i,g,m.value,c);if(null===_){null===g&&(g=y);break}t&&g&&null===_.alternate&&e(i,g),s=o(_,s,v),null===h?l=_:h.sibling=_,h=_,g=y}if(m.done)return n(i,g),l;if(null===g){for(;!m.done;v++,m=u.next())null!==(m=f(i,m.value,c))&&(s=o(m,s,v),null===h?l=m:h.sibling=m,h=m);return l}for(g=r(i,g);!m.done;v++,m=u.next())null!==(m=d(g,i,v,m.value,c))&&(t&&null!==m.alternate&&g.delete(null===m.key?v:m.key),s=o(m,s,v),null===h?l=m:h.sibling=m,h=m);return t&&g.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===O&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case x:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===O){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=_o(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===O?((r=Uu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Bu(o.type,o.key,o.props,null,t.mode,u)).ref=_o(t,r,o),u.return=t,t=u)}return s(t);case E:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Gu(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=qu(o,t.mode,u)).return=t,t=r),s(t);if(mo(o))return g(t,r,o,u);if(V(o))return v(t,r,o,u);if(l&&bo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,X(t.type)||"Component"))}return n(t,r)}}var xo=wo(!0),Eo=wo(!1),Oo={},ko=ii(Oo),Io=ii(Oo),So=ii(Oo);function Co(t){if(t===Oo)throw Error(a(174));return t}function To(t,e){switch(ai(So,e),ai(Io,t),ai(ko,Oo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dt(null,"");break;default:e=dt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}oi(ko),ai(ko,e)}function No(){oi(ko),oi(Io),oi(So)}function Po(t){Co(So.current);var e=Co(ko.current),n=dt(e,t.type);e!==n&&(ai(Io,t),ai(ko,n))}function Lo(t){Io.current===t&&(oi(ko),oi(Io))}var jo=ii(0);function Mo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ro=null,Ao=null,Do=!1;function Fo(t,e){var n=Du(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function zo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Bo(t){if(Do){var e=Ao;if(e){var n=e;if(!zo(t,e)){if(!(e=qr(n.nextSibling))||!zo(t,e))return t.flags=-1025&t.flags|2,Do=!1,void(Ro=t);Fo(Ro,n)}Ro=t,Ao=qr(e.firstChild)}else t.flags=-1025&t.flags|2,Do=!1,Ro=t}}function Uo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Ro=t}function Vo(t){if(t!==Ro)return!1;if(!Do)return Uo(t),Do=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!zr(e,t.memoizedProps))for(e=Ao;e;)Fo(t,e),e=qr(e.nextSibling);if(Uo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Ao=qr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Ao=null}}else Ao=Ro?qr(t.stateNode.nextSibling):null;return!0}function qo(){Ao=Ro=null,Do=!1}var Go=[];function Ho(){for(var t=0;t<Go.length;t++)Go[t]._workInProgressVersionPrimary=null;Go.length=0}var Wo=w.ReactCurrentDispatcher,Xo=w.ReactCurrentBatchConfig,Yo=0,Zo=null,Ko=null,Qo=null,Jo=!1,$o=!1;function ta(){throw Error(a(321))}function ea(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function na(t,e,n,r,i,o){if(Yo=o,Zo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wo.current=null===t||null===t.memoizedState?Ca:Ta,t=n(r,i),$o){o=0;do{if($o=!1,!(25>o))throw Error(a(301));o+=1,Qo=Ko=null,e.updateQueue=null,Wo.current=Na,t=n(r,i)}while($o)}if(Wo.current=Sa,e=null!==Ko&&null!==Ko.next,Yo=0,Qo=Ko=Zo=null,Jo=!1,e)throw Error(a(300));return t}function ra(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Qo?Zo.memoizedState=Qo=t:Qo=Qo.next=t,Qo}function ia(){if(null===Ko){var t=Zo.alternate;t=null!==t?t.memoizedState:null}else t=Ko.next;var e=null===Qo?Zo.memoizedState:Qo.next;if(null!==e)Qo=e,Ko=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Ko=t).memoizedState,baseState:Ko.baseState,baseQueue:Ko.baseQueue,queue:Ko.queue,next:null},null===Qo?Zo.memoizedState=Qo=t:Qo=Qo.next=t}return Qo}function oa(t,e){return"function"===typeof e?e(t):e}function aa(t){var e=ia(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Ko,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Yo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,Zo.lanes|=l,Ms|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,ar(r,e.memoizedState)||(La=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function sa(t){var e=ia(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);ar(o,e.memoizedState)||(La=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ua(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(Yo&t)===t)&&(e._workInProgressVersionPrimary=r,Go.push(e))),t)return n(e._source);throw Go.push(e),Error(a(350))}function ca(t,e,n,r){var i=Is;if(null===i)throw Error(a(349));var o=e._getVersion,s=o(e._source),u=Wo.current,c=u.useState((function(){return ua(i,e,n)})),l=c[1],h=c[0];c=Qo;var f=t.memoizedState,p=f.refs,d=p.getSnapshot,g=f.source;f=f.subscribe;var v=Zo;return t.memoizedState={refs:p,source:e,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var t=o(e._source);if(!ar(s,t)){t=n(e._source),ar(h,t)||(l(t),t=au(v),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,a=t;0<a;){var u=31-qe(a),c=1<<u;r[u]|=t,a&=~c}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var r=au(v);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,r]),ar(d,n)&&ar(g,e)&&ar(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:h}).dispatch=l=Ia.bind(null,Zo,t),c.queue=t,c.baseQueue=null,h=ua(i,e,n),c.memoizedState=c.baseState=h),h}function la(t,e,n){return ca(ia(),t,e,n)}function ha(t){var e=ra();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t}).dispatch=Ia.bind(null,Zo,t),[e.memoizedState,t]}function fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Zo.updateQueue)?(e={lastEffect:null},Zo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function pa(t){return t={current:t},ra().memoizedState=t}function da(){return ia().memoizedState}function ga(t,e,n,r){var i=ra();Zo.flags|=t,i.memoizedState=fa(1|e,n,void 0,void 0===r?null:r)}function va(t,e,n,r){var i=ia();r=void 0===r?null:r;var o=void 0;if(null!==Ko){var a=Ko.memoizedState;if(o=a.destroy,null!==r&&ea(r,a.deps))return void fa(e,n,o,r)}Zo.flags|=t,i.memoizedState=fa(1|e,n,o,r)}function ya(t,e){return ga(516,4,t,e)}function ma(t,e){return va(516,4,t,e)}function _a(t,e){return va(4,2,t,e)}function ba(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function wa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,va(4,2,ba.bind(null,e,t),n)}function xa(){}function Ea(t,e){var n=ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ea(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Oa(t,e){var n=ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ea(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ka(t,e){var n=zi();Ui(98>n?98:n,(function(){t(!0)})),Ui(97<n?97:n,(function(){var n=Xo.transition;Xo.transition=1;try{t(!1),e()}finally{Xo.transition=n}}))}function Ia(t,e,n){var r=ou(),i=au(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===Zo||null!==a&&a===Zo)$o=Jo=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,ar(u,s))return}catch(c){}su(t,i,r)}}var Sa={readContext:eo,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useOpaqueIdentifier:ta,unstable_isNewReconciler:!1},Ca={readContext:eo,useCallback:function(t,e){return ra().memoizedState=[t,void 0===e?null:e],t},useContext:eo,useEffect:ya,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ga(4,2,ba.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ga(4,2,t,e)},useMemo:function(t,e){var n=ra();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ra();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ia.bind(null,Zo,t),[r.memoizedState,t]},useRef:pa,useState:ha,useDebugValue:xa,useDeferredValue:function(t){var e=ha(t),n=e[0],r=e[1];return ya((function(){var e=Xo.transition;Xo.transition=1;try{r(t)}finally{Xo.transition=e}}),[t]),n},useTransition:function(){var t=ha(!1),e=t[0];return pa(t=ka.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=ra();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},ca(r,t,e,n)},useOpaqueIdentifier:function(){if(Do){var t=!1,e=function(t){return{$$typeof:R,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Hr++).toString(36))),Error(a(355))})),n=ha(e)[1];return 0===(2&Zo.mode)&&(Zo.flags|=516,fa(5,(function(){n("r:"+(Hr++).toString(36))}),void 0,null)),e}return ha(e="r:"+(Hr++).toString(36)),e},unstable_isNewReconciler:!1},Ta={readContext:eo,useCallback:Ea,useContext:eo,useEffect:ma,useImperativeHandle:wa,useLayoutEffect:_a,useMemo:Oa,useReducer:aa,useRef:da,useState:function(){return aa(oa)},useDebugValue:xa,useDeferredValue:function(t){var e=aa(oa),n=e[0],r=e[1];return ma((function(){var e=Xo.transition;Xo.transition=1;try{r(t)}finally{Xo.transition=e}}),[t]),n},useTransition:function(){var t=aa(oa)[0];return[da().current,t]},useMutableSource:la,useOpaqueIdentifier:function(){return aa(oa)[0]},unstable_isNewReconciler:!1},Na={readContext:eo,useCallback:Ea,useContext:eo,useEffect:ma,useImperativeHandle:wa,useLayoutEffect:_a,useMemo:Oa,useReducer:sa,useRef:da,useState:function(){return sa(oa)},useDebugValue:xa,useDeferredValue:function(t){var e=sa(oa),n=e[0],r=e[1];return ma((function(){var e=Xo.transition;Xo.transition=1;try{r(t)}finally{Xo.transition=e}}),[t]),n},useTransition:function(){var t=sa(oa)[0];return[da().current,t]},useMutableSource:la,useOpaqueIdentifier:function(){return sa(oa)[0]},unstable_isNewReconciler:!1},Pa=w.ReactCurrentOwner,La=!1;function ja(t,e,n,r){e.child=null===t?Eo(e,null,n,r):xo(e,t.child,n,r)}function Ma(t,e,n,r,i){n=n.render;var o=e.ref;return to(e,i),r=na(t,e,n,r,o,i),null===t||La?(e.flags|=1,ja(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ts(t,e,i))}function Ra(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Fu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Bu(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Aa(t,e,a,r,i,o))}return a=t.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ur)(i,r)&&t.ref===e.ref)?ts(t,e,o):(e.flags|=1,(t=zu(a,r)).ref=e.ref,t.return=e,e.child=t)}function Aa(t,e,n,r,i,o){if(null!==t&&ur(t.memoizedProps,r)&&t.ref===e.ref){if(La=!1,0===(o&i))return e.lanes=t.lanes,ts(t,e,o);0!==(16384&t.flags)&&(La=!0)}return za(t,e,n,r,o)}function Da(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},gu(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},gu(e,t),null;e.memoizedState={baseLanes:0},gu(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,gu(e,r);return ja(t,e,i,n),e.child}function Fa(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function za(t,e,n,r,i){var o=fi(n)?li:ui.current;return o=hi(e,o),to(e,i),n=na(t,e,n,r,o,i),null===t||La?(e.flags|=1,ja(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ts(t,e,i))}function Ba(t,e,n,r,i){if(fi(n)){var o=!0;vi(e)}else o=!1;if(to(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),go(e,n,r),yo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=eo(c):c=hi(e,c=fi(n)?li:ui.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&vo(e,a,r,c),no=!1;var f=e.memoizedState;a.state=f,uo(e,r,a,i),u=e.memoizedState,s!==r||f!==u||ci.current||no?("function"===typeof l&&(ho(e,n,l,r),u=e.memoizedState),(s=no||po(e,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,io(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Wi(e.type,s),a.props=c,h=e.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=eo(u):u=hi(e,u=fi(n)?li:ui.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&vo(e,a,r,u),no=!1,f=e.memoizedState,a.state=f,uo(e,r,a,i);var d=e.memoizedState;s!==h||f!==d||ci.current||no?("function"===typeof p&&(ho(e,n,p,r),d=e.memoizedState),(c=no||po(e,n,c,r,f,d,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return Ua(t,e,n,r,o,i)}function Ua(t,e,n,r,i,o){Fa(t,e);var a=0!==(64&e.flags);if(!r&&!a)return i&&yi(e,n,!1),ts(t,e,o);r=e.stateNode,Pa.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=xo(e,t.child,null,o),e.child=xo(e,null,s,o)):ja(t,e,s,o),e.memoizedState=r.state,i&&yi(e,n,!0),e.child}function Va(t){var e=t.stateNode;e.pendingContext?di(0,e.pendingContext,e.pendingContext!==e.context):e.context&&di(0,e.context,!1),To(t,e.containerInfo)}var qa,Ga,Ha,Wa={dehydrated:null,retryLane:0};function Xa(t,e,n){var r,i=e.pendingProps,o=jo.current,a=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ai(jo,1&o),null===t?(void 0!==i.fallback&&Bo(e),t=i.children,o=i.fallback,a?(t=Ya(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Wa,t):"number"===typeof i.unstable_expectedLoadTime?(t=Ya(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Wa,e.lanes=33554432,t):((n=Vu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=Ka(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Wa,i):(n=Za(t,e,i.children,n),e.memoizedState=null,n))}function Ya(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Vu(e,i,0,null),n=Uu(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Za(t,e,n,r){var i=t.child;return t=i.sibling,n=zu(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Ka(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=zu(a,s),null!==t?r=zu(t,r):(r=Uu(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function Qa(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),$i(t.return,e)}function Ja(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function $a(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ja(t,e,r.children,n),0!==(2&(r=jo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Qa(t,n);else if(19===t.tag)Qa(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ai(jo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Mo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ja(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Mo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ja(e,!0,n,null,o,e.lastEffect);break;case"together":Ja(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ts(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ms|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=zu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=zu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function es(t,e){if(!Do)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ns(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fi(e.type)&&pi(),null;case 3:return No(),oi(ci),oi(ui),Ho(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Vo(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Lo(e);var o=Co(So.current);if(n=e.type,null!==t&&null!=e.stateNode)Ga(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Co(ko.current),Vo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Xr]=e,r[Yr]=s,n){case"dialog":kr("cancel",r),kr("close",r);break;case"iframe":case"object":case"embed":kr("load",r);break;case"video":case"audio":for(t=0;t<wr.length;t++)kr(wr[t],r);break;case"source":kr("error",r);break;case"img":case"image":case"link":kr("error",r),kr("load",r);break;case"details":kr("toggle",r);break;case"input":tt(r,s),kr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},kr("invalid",r);break;case"textarea":ut(r,s),kr("invalid",r)}for(var c in Et(n,s),t=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(t=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&kr("scroll",r));switch(n){case"input":K(r),rt(r,s,!0);break;case"textarea":K(r),lt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Rr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=pt(n)),t===ht?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),"select"===n&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Xr]=e,t[Yr]=r,qa(t,e),e.stateNode=t,c=Ot(n,r),n){case"dialog":kr("cancel",t),kr("close",t),o=r;break;case"iframe":case"object":case"embed":kr("load",t),o=r;break;case"video":case"audio":for(o=0;o<wr.length;o++)kr(wr[o],t);o=r;break;case"source":kr("error",t),o=r;break;case"img":case"image":case"link":kr("error",t),kr("load",t),o=r;break;case"details":kr("toggle",t),o=r;break;case"input":tt(t,r),o=$(t,r),kr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),kr("invalid",t);break;case"textarea":ut(t,r),o=st(t,r),kr("invalid",t);break;default:o=r}Et(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?wt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&vt(t,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&yt(t,h):"number"===typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&kr("scroll",t):null!=h&&b(t,s,h,c))}switch(n){case"input":K(t),rt(t,r,!1);break;case"textarea":K(t),lt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Y(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?at(t,!!r.multiple,s,!1):null!=r.defaultValue&&at(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Rr)}Fr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Ha(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Co(So.current),Co(ko.current),Vo(e)?(r=e.stateNode,n=e.memoizedProps,r[Xr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=e,e.stateNode=r)}return null;case 13:return oi(jo),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Vo(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&jo.current)?0===Ps&&(Ps=3):(0!==Ps&&3!==Ps||(Ps=4),null===Is||0===(134217727&Ms)&&0===(134217727&Rs)||hu(Is,Cs))),(r||n)&&(e.flags|=4),null);case 4:return No(),null===t&&Sr(e.stateNode.containerInfo),null;case 10:return Ji(e),null;case 17:return fi(e.type)&&pi(),null;case 19:if(oi(jo),null===(r=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(c=r.rendering))if(s)es(r,!1);else{if(0!==Ps||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Mo(t))){for(e.flags|=64,es(r,!1),null!==(s=c.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,t=c.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ai(jo,1&jo.current|2),e.child}t=t.sibling}null!==r.tail&&Fi()>zs&&(e.flags|=64,s=!0,es(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Mo(c))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),es(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Do)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Fi()-r.renderingStartTime>zs&&1073741824!==n&&(e.flags|=64,s=!0,es(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=r.last)?n.sibling=c:e.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Fi(),n.sibling=null,e=jo.current,ai(jo,s?1&e|2:1&e),n):null;case 23:case 24:return vu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function rs(t){switch(t.tag){case 1:fi(t.type)&&pi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(No(),oi(ci),oi(ui),Ho(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return Lo(t),null;case 13:return oi(jo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return oi(jo),null;case 4:return No(),null;case 10:return Ji(t),null;case 23:case 24:return vu(),null;default:return null}}function is(t,e){try{var n="",r=e;do{n+=W(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function os(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}qa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ga=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Co(ko.current);var a,s=null;switch(n){case"input":o=$(t,o),r=$(t,r),s=[];break;case"option":o=ot(t,o),r=ot(t,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=st(t,o),r=st(t,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=Rr)}for(h in Et(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&kr("scroll",t),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===R?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Ha=function(t,e,n,r){n!==r&&(e.flags|=4)};var as="function"===typeof WeakMap?WeakMap:Map;function ss(t,e,n){(n=oo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qs||(qs=!0,Gs=r),os(0,e)},n}function us(t,e,n){(n=oo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return os(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this),os(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var cs="function"===typeof WeakSet?WeakSet:Set;function ls(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){ju(t,n)}else e.current=null}function hs(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Wi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Vr(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function fs(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Nu(n,t),Tu(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Wi(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&co(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}co(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Fr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function ps(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=bt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ds(t,e){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(mi,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Nu(e,n);else{r=e;try{i()}catch(o){ju(r,o)}}n=n.next}while(n!==t)}break;case 1:if(ls(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){ju(e,o)}break;case 5:ls(e);break;case 4:ms(t,e)}}function gs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function vs(t){return 5===t.tag||3===t.tag||4===t.tag}function ys(t){t:{for(var e=t.return;null!==e;){if(vs(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||vs(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Rr));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function ms(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var s=t,u=i,c=u;;)if(ds(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break t;for(;null===c.sibling;){if(null===c.return||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ds(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function _s(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Yr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),Ot(t,i),e=Ot(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?wt(n,u):"dangerouslySetInnerHTML"===s?vt(n,u):"children"===s?yt(n,u):b(n,s,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":ct(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?at(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(n,!!r.multiple,r.defaultValue,!0):at(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Fs=Fi(),ps(e.child,!0)),void bs(e);case 19:return void bs(e);case 17:return;case 23:case 24:return void ps(e,null!==e.memoizedState)}throw Error(a(163))}function bs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new cs),e.forEach((function(e){var r=Ru.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ws(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var xs=Math.ceil,Es=w.ReactCurrentDispatcher,Os=w.ReactCurrentOwner,ks=0,Is=null,Ss=null,Cs=0,Ts=0,Ns=ii(0),Ps=0,Ls=null,js=0,Ms=0,Rs=0,As=0,Ds=null,Fs=0,zs=1/0;function Bs(){zs=Fi()+500}var Us,Vs=null,qs=!1,Gs=null,Hs=null,Ws=!1,Xs=null,Ys=90,Zs=[],Ks=[],Qs=null,Js=0,$s=null,tu=-1,eu=0,nu=0,ru=null,iu=!1;function ou(){return 0!==(48&ks)?Fi():-1!==tu?tu:tu=Fi()}function au(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===zi()?1:2;if(0===eu&&(eu=js),0!==Hi.transition){0!==nu&&(nu=null!==Ds?Ds.pendingLanes:0),t=eu;var e=4186112&~nu;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=zi(),0!==(4&ks)&&98===t?t=ze(12,eu):t=ze(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),eu),t}function su(t,e,n){if(50<Js)throw Js=0,$s=null,Error(a(185));if(null===(t=uu(t,e)))return null;Ve(t,e,n),t===Is&&(Rs|=e,4===Ps&&hu(t,Cs));var r=zi();1===e?0!==(8&ks)&&0===(48&ks)?fu(t):(cu(t,n),0===ks&&(Bs(),qi())):(0===(4&ks)||98!==r&&99!==r||(null===Qs?Qs=new Set([t]):Qs.add(t)),cu(t,n)),Ds=t}function uu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function cu(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-qe(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=e,Ae(c);var h=Re;o[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=e&&(t.expiredLanes|=c);s&=~c}if(r=De(t,t===Is?Cs:0),e=Re,0===r)null!==n&&(n!==Li&&xi(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Li&&xi(n)}15===e?(n=fu.bind(null,t),null===Mi?(Mi=[n],Ri=wi(Si,Gi)):Mi.push(n),n=Li):14===e?n=Vi(99,fu.bind(null,t)):n=Vi(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),lu.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function lu(t){if(tu=-1,nu=eu=0,0!==(48&ks))throw Error(a(327));var e=t.callbackNode;if(Cu()&&t.callbackNode!==e)return null;var n=De(t,t===Is?Cs:0);if(0===n)return null;var r=n,i=ks;ks|=16;var o=_u();for(Is===t&&Cs===r||(Bs(),yu(t,r));;)try{xu();break}catch(u){mu(t,u)}if(Qi(),Es.current=o,ks=i,null!==Ss?r=0:(Is=null,Cs=0,r=Ps),0!==(js&Rs))yu(t,0);else if(0!==r){if(2===r&&(ks|=64,t.hydrate&&(t.hydrate=!1,Vr(t.containerInfo)),0!==(n=Fe(t))&&(r=bu(t,n))),1===r)throw e=Ls,yu(t,0),hu(t,n),cu(t,Fi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:ku(t);break;case 3:if(hu(t,n),(62914560&n)===n&&10<(r=Fs+500-Fi())){if(0!==De(t,0))break;if(((i=t.suspendedLanes)&n)!==n){ou(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Br(ku.bind(null,t),r);break}ku(t);break;case 4:if(hu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-qe(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Fi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xs(n/1960))-n)){t.timeoutHandle=Br(ku.bind(null,t),n);break}ku(t);break;case 5:ku(t);break;default:throw Error(a(329))}}return cu(t,Fi()),t.callbackNode===e?lu.bind(null,t):null}function hu(t,e){for(e&=~As,e&=~Rs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qe(e),r=1<<n;t[n]=-1,e&=~r}}function fu(t){if(0!==(48&ks))throw Error(a(327));if(Cu(),t===Is&&0!==(t.expiredLanes&Cs)){var e=Cs,n=bu(t,e);0!==(js&Rs)&&(n=bu(t,e=De(t,e)))}else n=bu(t,e=De(t,0));if(0!==t.tag&&2===n&&(ks|=64,t.hydrate&&(t.hydrate=!1,Vr(t.containerInfo)),0!==(e=Fe(t))&&(n=bu(t,e))),1===n)throw n=Ls,yu(t,0),hu(t,e),cu(t,Fi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,ku(t),cu(t,Fi()),null}function pu(t,e){var n=ks;ks|=1;try{return t(e)}finally{0===(ks=n)&&(Bs(),qi())}}function du(t,e){var n=ks;ks&=-2,ks|=8;try{return t(e)}finally{0===(ks=n)&&(Bs(),qi())}}function gu(t,e){ai(Ns,Ts),Ts|=e,js|=e}function vu(){Ts=Ns.current,oi(Ns)}function yu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Ur(n)),null!==Ss)for(n=Ss.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&pi();break;case 3:No(),oi(ci),oi(ui),Ho();break;case 5:Lo(r);break;case 4:No();break;case 13:case 19:oi(jo);break;case 10:Ji(r);break;case 23:case 24:vu()}n=n.return}Is=t,Ss=zu(t.current,null),Cs=Ts=js=e,Ps=0,Ls=null,As=Rs=Ms=0}function mu(t,e){for(;;){var n=Ss;try{if(Qi(),Wo.current=Sa,Jo){for(var r=Zo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Jo=!1}if(Yo=0,Qo=Ko=Zo=null,$o=!1,Os.current=null,null===n||null===n.return){Ps=1,Ls=e,Ss=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Cs,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&jo.current),f=a;do{var p;if(p=13===f.tag){var d=f.memoizedState;if(null!==d)p=null!==d.dehydrated;else{var g=f.memoizedProps;p=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(p){var v=f.updateQueue;if(null===v){var y=new Set;y.add(c),f.updateQueue=y}else v.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=oo(-1,1);m.tag=2,ao(s,m)}s.lanes|=1;break t}u=void 0,s=e;var _=o.pingCache;if(null===_?(_=o.pingCache=new as,u=new Set,_.set(c,u)):void 0===(u=_.get(c))&&(u=new Set,_.set(c,u)),!u.has(s)){u.add(s);var b=Mu.bind(null,o,c,s);c.then(b,b)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);u=Error((X(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ps&&(Ps=2),u=is(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,e&=-e,f.lanes|=e,so(f,ss(0,o,e));break t;case 1:o=u;var w=f.type,x=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Hs||!Hs.has(x)))){f.flags|=4096,e&=-e,f.lanes|=e,so(f,us(f,o,e));break t}}f=f.return}while(null!==f)}Ou(n)}catch(E){e=E,Ss===n&&null!==n&&(Ss=n=n.return);continue}break}}function _u(){var t=Es.current;return Es.current=Sa,null===t?Sa:t}function bu(t,e){var n=ks;ks|=16;var r=_u();for(Is===t&&Cs===e||yu(t,e);;)try{wu();break}catch(i){mu(t,i)}if(Qi(),ks=n,Es.current=r,null!==Ss)throw Error(a(261));return Is=null,Cs=0,Ps}function wu(){for(;null!==Ss;)Eu(Ss)}function xu(){for(;null!==Ss&&!Ei();)Eu(Ss)}function Eu(t){var e=Us(t.alternate,t,Ts);t.memoizedProps=t.pendingProps,null===e?Ou(t):Ss=e,Os.current=null}function Ou(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=ns(n,e,Ts)))return void(Ss=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ts)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=rs(e)))return n.flags&=2047,void(Ss=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Ss=e);Ss=e=t}while(null!==e);0===Ps&&(Ps=5)}function ku(t){var e=zi();return Ui(99,Iu.bind(null,t,e)),null}function Iu(t,e){do{Cu()}while(null!==Xs);if(0!==(48&ks))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<o;){var c=31-qe(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==Qs&&0===(24&r)&&Qs.has(t)&&Qs.delete(t),t===Is&&(Ss=Is=null,Cs=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=ks,ks|=32,Os.current=null,Ar=Ye,fr(s=hr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(I){u=null;break t}var h=0,f=-1,p=-1,d=0,g=0,v=s,y=null;e:for(;;){for(var m;v!==u||0!==o&&3!==v.nodeType||(f=h+o),v!==c||0!==l&&3!==v.nodeType||(p=h+l),3===v.nodeType&&(h+=v.nodeValue.length),null!==(m=v.firstChild);)y=v,v=m;for(;;){if(v===s)break e;if(y===u&&++d===o&&(f=h),y===c&&++g===l&&(p=h),null!==(m=v.nextSibling))break;y=(v=y).parentNode}v=m}u=-1===f||-1===p?null:{start:f,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Dr={focusedElem:s,selectionRange:u},Ye=!1,ru=null,iu=!1,Vs=r;do{try{Su()}catch(I){if(null===Vs)throw Error(a(330));ju(Vs,I),Vs=Vs.nextEffect}}while(null!==Vs);ru=null,Vs=r;do{try{for(s=t;null!==Vs;){var _=Vs.flags;if(16&_&&yt(Vs.stateNode,""),128&_){var b=Vs.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&_){case 2:ys(Vs),Vs.flags&=-3;break;case 6:ys(Vs),Vs.flags&=-3,_s(Vs.alternate,Vs);break;case 1024:Vs.flags&=-1025;break;case 1028:Vs.flags&=-1025,_s(Vs.alternate,Vs);break;case 4:_s(Vs.alternate,Vs);break;case 8:ms(s,u=Vs);var x=u.alternate;gs(u),null!==x&&gs(x)}Vs=Vs.nextEffect}}catch(I){if(null===Vs)throw Error(a(330));ju(Vs,I),Vs=Vs.nextEffect}}while(null!==Vs);if(w=Dr,b=hr(),_=w.focusedElem,s=w.selectionRange,b!==_&&_&&_.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(_.ownerDocument.documentElement,_)){null!==s&&fr(_)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in _?(_.selectionStart=b,_.selectionEnd=Math.min(w,_.value.length)):(w=(b=_.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),u=_.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!w.extend&&x>s&&(u=s,s=x,x=u),u=lr(_,x),o=lr(_,s),u&&o&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((b=b.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),x>s?(w.addRange(b),w.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),w.addRange(b))))),b=[];for(w=_;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<b.length;_++)(w=b[_]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Ye=!!Ar,Dr=Ar=null,t.current=n,Vs=r;do{try{for(_=t;null!==Vs;){var E=Vs.flags;if(36&E&&fs(_,Vs.alternate,Vs),128&E){b=void 0;var O=Vs.ref;if(null!==O){var k=Vs.stateNode;switch(Vs.tag){case 5:b=k;break;default:b=k}"function"===typeof O?O(b):O.current=b}}Vs=Vs.nextEffect}}catch(I){if(null===Vs)throw Error(a(330));ju(Vs,I),Vs=Vs.nextEffect}}while(null!==Vs);Vs=null,ji(),ks=i}else t.current=n;if(Ws)Ws=!1,Xs=t,Ys=e;else for(Vs=r;null!==Vs;)e=Vs.nextEffect,Vs.nextEffect=null,8&Vs.flags&&((E=Vs).sibling=null,E.stateNode=null),Vs=e;if(0===(r=t.pendingLanes)&&(Hs=null),1===r?t===$s?Js++:(Js=0,$s=t):Js=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(mi,n,void 0,64===(64&n.current.flags))}catch(I){}if(cu(t,Fi()),qs)throw qs=!1,t=Gs,Gs=null,t;return 0!==(8&ks)||qi(),null}function Su(){for(;null!==Vs;){var t=Vs.alternate;iu||null===ru||(0!==(8&Vs.flags)?$t(Vs,ru)&&(iu=!0):13===Vs.tag&&ws(t,Vs)&&$t(Vs,ru)&&(iu=!0));var e=Vs.flags;0!==(256&e)&&hs(t,Vs),0===(512&e)||Ws||(Ws=!0,Vi(97,(function(){return Cu(),null}))),Vs=Vs.nextEffect}}function Cu(){if(90!==Ys){var t=97<Ys?97:Ys;return Ys=90,Ui(t,Pu)}return!1}function Tu(t,e){Zs.push(e,t),Ws||(Ws=!0,Vi(97,(function(){return Cu(),null})))}function Nu(t,e){Ks.push(e,t),Ws||(Ws=!0,Vi(97,(function(){return Cu(),null})))}function Pu(){if(null===Xs)return!1;var t=Xs;if(Xs=null,0!==(48&ks))throw Error(a(331));var e=ks;ks|=32;var n=Ks;Ks=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));ju(o,c)}}for(n=Zs,Zs=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));ju(o,c)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return ks=e,qi(),!0}function Lu(t,e,n){ao(t,e=ss(0,e=is(n,e),1)),e=ou(),null!==(t=uu(t,1))&&(Ve(t,1,e),cu(t,e))}function ju(t,e){if(3===t.tag)Lu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Lu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){var i=us(n,t=is(e,t),1);if(ao(n,i),i=ou(),null!==(n=uu(n,1)))Ve(n,1,i),cu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r)))try{r.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function Mu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ou(),t.pingedLanes|=t.suspendedLanes&n,Is===t&&(Cs&n)===n&&(4===Ps||3===Ps&&(62914560&Cs)===Cs&&500>Fi()-Fs?yu(t,0):As|=n),cu(t,e)}function Ru(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===zi()?1:2:(0===eu&&(eu=js),0===(e=Be(62914560&~eu))&&(e=4194304))),n=ou(),null!==(t=uu(t,e))&&(Ve(t,e,n),cu(t,n))}function Au(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(t,e,n,r){return new Au(t,e,n,r)}function Fu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function zu(t,e){var n=t.alternate;return null===n?((n=Du(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bu(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Fu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case O:return Uu(n.children,i,o,e);case A:s=8,i|=16;break;case k:s=8,i|=1;break;case I:return(t=Du(12,n,e,8|i)).elementType=I,t.type=I,t.lanes=o,t;case N:return(t=Du(13,n,e,i)).type=N,t.elementType=N,t.lanes=o,t;case P:return(t=Du(19,n,e,i)).elementType=P,t.lanes=o,t;case D:return Vu(n,i,o,e);case F:return(t=Du(24,n,e,i)).elementType=F,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case S:s=10;break t;case C:s=9;break t;case T:s=11;break t;case L:s=14;break t;case j:s=16,r=null;break t;case M:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Du(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Uu(t,e,n,r){return(t=Du(7,t,r,e)).lanes=n,t}function Vu(t,e,n,r){return(t=Du(23,t,r,e)).elementType=D,t.lanes=n,t}function qu(t,e,n){return(t=Du(6,t,null,e)).lanes=n,t}function Gu(t,e,n){return(e=Du(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ue(0),this.expirationTimes=Ue(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ue(0),this.mutableSourceEagerHydrationData=null}function Wu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Xu(t,e,n,r){var i=e.current,o=ou(),s=au(i);t:if(n){e:{if(Zt(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(fi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(fi(c)){n=gi(n,c,u);break t}}n=u}else n=si;return null===e.context?e.context=n:e.pendingContext=n,(e=oo(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),ao(i,e),su(i,s,o),s}function Yu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Zu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Ku(t,e){Zu(t,e),(t=t.alternate)&&Zu(t,e)}function Qu(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Hu(t,e,null!=n&&!0===n.hydrate),e=Du(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,ro(e),t[Zr]=n.current,Sr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function $u(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Yu(a);s.call(t)}}Xu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Qu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Yu(a);u.call(t)}}du((function(){Xu(e,a,t,i)}))}return Yu(a)}function tc(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(e))throw Error(a(200));return Wu(t,e,null,n)}Us=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||ci.current)La=!0;else{if(0===(n&r)){switch(La=!1,e.tag){case 3:Va(e),qo();break;case 5:Po(e);break;case 1:fi(e.type)&&vi(e);break;case 4:To(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;ai(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Xa(t,e,n):(ai(jo,1&jo.current),null!==(e=ts(t,e,n))?e.sibling:null);ai(jo,1&jo.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return $a(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(jo,jo.current),r)break;return null;case 23:case 24:return e.lanes=0,Da(t,e,n)}return ts(t,e,n)}La=0!==(16384&t.flags)}else La=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=hi(e,ui.current),to(e,n),i=na(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,fi(r)){var o=!0;vi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ro(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&ho(e,r,s,t),i.updater=fo,e.stateNode=i,i._reactInternals=e,yo(e,r,t,n),e=Ua(null,e,r,!0,o,n)}else e.tag=0,ja(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Fu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===T)return 11;if(t===L)return 14}return 2}(i),t=Wi(i,t),o){case 0:e=za(null,e,i,t,n);break t;case 1:e=Ba(null,e,i,t,n);break t;case 11:e=Ma(null,e,i,t,n);break t;case 14:e=Ra(null,e,i,Wi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,za(t,e,r,i=e.elementType===r?i:Wi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ba(t,e,r,i=e.elementType===r?i:Wi(r,i),n);case 3:if(Va(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,io(t,e),uo(e,r,null,n),(r=e.memoizedState.element)===i)qo(),e=ts(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(Ao=qr(e.stateNode.containerInfo.firstChild),Ro=e,o=Do=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Go.push(o);for(n=Eo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else ja(t,e,r,n),qo();e=e.child}return e;case 5:return Po(e),null===t&&Bo(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,zr(r,i)?s=null:null!==o&&zr(r,o)&&(e.flags|=16),Fa(t,e),ja(t,e,s,n),e.child;case 6:return null===t&&Bo(e),null;case 13:return Xa(t,e,n);case 4:return To(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=xo(e,null,r,n):ja(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ma(t,e,r,i=e.elementType===r?i:Wi(r,i),n);case 7:return ja(t,e,e.pendingProps,n),e.child;case 8:case 12:return ja(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ai(Xi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=ar(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!ci.current){e=ts(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=oo(-1,n&-n)).tag=2,ao(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),$i(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}ja(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,to(e,n),r=r(i=eo(i,o.unstable_observedBits)),e.flags|=1,ja(t,e,r,n),e.child;case 14:return o=Wi(i=e.type,e.pendingProps),Ra(t,e,i,o=Wi(i.type,o),r,n);case 15:return Aa(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Wi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fi(r)?(t=!0,vi(e)):t=!1,to(e,n),go(e,r,i),yo(e,r,i,n),Ua(null,e,r,!0,t,n);case 19:return $a(t,e,n);case 23:case 24:return Da(t,e,n)}throw Error(a(156,e.tag))},Qu.prototype.render=function(t){Xu(t,this._internalRoot,null,null)},Qu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Xu(null,t,null,(function(){e[Zr]=null}))},te=function(t){13===t.tag&&(su(t,4,ou()),Ku(t,4))},ee=function(t){13===t.tag&&(su(t,67108864,ou()),Ku(t,67108864))},ne=function(t){if(13===t.tag){var e=ou(),n=au(t);su(t,n,e),Ku(t,n)}},re=function(t,e){return e()},It=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ti(r);if(!i)throw Error(a(90));Q(r),nt(r,i)}}}break;case"textarea":ct(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},Lt=pu,jt=function(t,e,n,r,i){var o=ks;ks|=4;try{return Ui(98,t.bind(null,e,n,r,i))}finally{0===(ks=o)&&(Bs(),qi())}},Mt=function(){0===(49&ks)&&(function(){if(null!==Qs){var t=Qs;Qs=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,cu(t,Fi())}))}qi()}(),Cu())},Rt=function(t,e){var n=ks;ks|=2;try{return t(e)}finally{0===(ks=n)&&(Bs(),qi())}};var ec={Events:[Jr,$r,ti,Nt,Pt,Cu,{current:!1}]},nc={findFiberByHostInstance:Qr,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Jt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{mi=ic.inject(rc),_i=ic}catch(oc){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=tc,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=Jt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=ks;if(0!==(48&n))return t(e);ks|=1;try{if(t)return Ui(99,t.bind(null,e))}finally{ks=n,qi()}},e.hydrate=function(t,e,n){if(!Ju(e))throw Error(a(200));return $u(null,t,e,!0,n)},e.render=function(t,e,n){if(!Ju(e))throw Error(a(200));return $u(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(a(40));return!!t._reactRootContainer&&(du((function(){$u(null,null,t,!1,(function(){t._reactRootContainer=null,t[Zr]=null}))})),!0)},e.unstable_batchedUpdates=pu,e.unstable_createPortal=function(t,e){return tc(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ju(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return $u(t,e,n,!1,r)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(82)},function(t,e,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,h=null,f=function t(){if(null!==l)try{var n=e.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(t,0),r}};r=function(t){null!==l?setTimeout(r,0,t):(l=t,setTimeout(f,0))},i=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var g=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,_=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,x=w.port2;w.port1.onmessage=function(){if(null!==y){var t=e.unstable_now();b=t+_;try{y(!0,t)?x.postMessage(null):(v=!1,y=null)}catch(n){throw x.postMessage(null),n}}else v=!1},r=function(t){y=t,v||(v=!0,x.postMessage(null))},i=function(t,n){m=p((function(){t(e.unstable_now())}),n)},o=function(){d(m),m=-1}}function E(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<I(i,e)))break t;t[r]=e,t[n]=i,n=r}}function O(t){return void 0===(t=t[0])?null:t}function k(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>I(a,n))void 0!==u&&0>I(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>I(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function I(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var S=[],C=[],T=1,N=null,P=3,L=!1,j=!1,M=!1;function R(t){for(var e=O(C);null!==e;){if(null===e.callback)k(C);else{if(!(e.startTime<=t))break;k(C),e.sortIndex=e.expirationTime,E(S,e)}e=O(C)}}function A(t){if(M=!1,R(t),!j)if(null!==O(S))j=!0,r(D);else{var e=O(C);null!==e&&i(A,e.startTime-t)}}function D(t,n){j=!1,M&&(M=!1,o()),L=!0;var r=P;try{for(R(n),N=O(S);null!==N&&(!(N.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=N.callback;if("function"===typeof a){N.callback=null,P=N.priorityLevel;var s=a(N.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?N.callback=s:N===O(S)&&k(S),R(n)}else k(S);N=O(S)}if(null!==N)var u=!0;else{var c=O(C);null!==c&&i(A,c.startTime-n),u=!1}return u}finally{N=null,P=r,L=!1}}var F=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){j||L||(j=!0,r(D))},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return O(S)},e.unstable_next=function(t){switch(P){case 1:case 2:case 3:var e=3;break;default:e=P}var n=P;P=e;try{return t()}finally{P=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=P;P=t;try{return e()}finally{P=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:T++,callback:n,priorityLevel:t,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(t.sortIndex=a,E(C,t),null===O(S)&&t===O(C)&&(M?o():M=!0,i(A,a-s))):(t.sortIndex=u,E(S,t),j||L||(j=!0,r(D))),t},e.unstable_wrapCallback=function(t){var e=P;return function(){var n=P;P=e;try{return t.apply(this,arguments)}finally{P=n}}}},,,function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(I){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=u;var l={};function h(){}function f(){}function p(){}var d={};s(d,i,(function(){return this}));var g=Object.getPrototypeOf,v=g&&g(g(O([])));v&&v!==e&&n.call(v,i)&&(d=v);var y=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return f.prototype=p,s(y,"constructor",p),s(p,"constructor",f),f.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(_.prototype),s(_.prototype,o,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(y),s(y,a,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){},function(t,e,n){"use strict";n(64);var r=n(1),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),e.Fragment=o("react.fragment")}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(l=e.ref),e)s.call(e,r)&&!u.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:l,props:o,_owner:a.current}}e.jsx=c,e.jsxs=c},function(t,e,n){"use strict";var r=n(89);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];function r(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=null;return e.forEach((function(t){if(null==i){var e=t.apply(void 0,n);null!=e&&(i=e)}})),i}return(0,o.default)(r)};var r,i=n(91),o=(r=i)&&r.__esModule?r:{default:r};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(e,n,r,i,o,a){var s=i||"<<anonymous>>",u=a||r;if(null==n[r])return e?new Error("Required "+o+" `"+u+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),h=6;h<c;h++)l[h-6]=arguments[h];return t.apply(void 0,[n,r,s,o,u].concat(l))}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CopyToClipboard=void 0;var r=o(n(1)),i=o(n(93));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?p(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(t){function e(){var t,n;c(this,e);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return g(p(n=h(this,(t=f(e)).call.apply(t,[this].concat(a)))),"onClick",(function(t){var e=n.props,o=e.text,a=e.onCopy,s=e.children,u=e.options,c=r.default.Children.only(s),l=(0,i.default)(o,u);a&&a(o,l),c&&c.props&&"function"===typeof c.props.onClick&&c.props.onClick(t)})),n}var n,o,a;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,t),n=e,(o=[{key:"render",value:function(){var t=this.props,e=(t.text,t.onCopy,t.options,t.children),n=u(t,["text","onCopy","options","children"]),i=r.default.Children.only(e);return r.default.cloneElement(i,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(n,!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n,{onClick:this.onClick}))}}])&&l(n.prototype,o),a&&l(n,a),e}(r.default.PureComponent);e.CopyToClipboard=v,g(v,"defaultProps",{onCopy:void 0,options:void 0})},function(t,e,n){"use strict";var r=n(94),i={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var n,o,a,s,u,c,l=!1;e||(e={}),n=e.debug||!1;try{if(a=r(),s=document.createRange(),u=document.getSelection(),(c=document.createElement("span")).textContent=t,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(r){if(r.stopPropagation(),e.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=i[e.format]||i.default;window.clipboardData.setData(o,t)}else r.clipboardData.clearData(),r.clipboardData.setData(e.format,t);e.onCopy&&(r.preventDefault(),e.onCopy(r.clipboardData))})),document.body.appendChild(c),s.selectNodeContents(c),u.addRange(s),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(h){n&&console.error("unable to copy using execCommand: ",h),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),l=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),o=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,t)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(s):u.removeAllRanges()),c&&document.body.removeChild(c),a()}return l}},function(t,e){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},,,function(t,e,n){"use strict";var r=n(6),i=n(13),o=n(10),a=n(14),s=n.n(a),u=n(1),c=n(44),l=n(15),h=n(7),f=["as","bsPrefix","variant","size","active","className"],p=u.forwardRef((function(t,e){var n=t.as,a=t.bsPrefix,u=t.variant,p=t.size,d=t.active,g=t.className,v=Object(o.a)(t,f),y=Object(l.a)(a,"btn"),m=Object(c.b)(Object(r.a)({tagName:n},v)),_=Object(i.a)(m,2),b=_[0],w=_[1].tagName;return Object(h.jsx)(w,Object(r.a)(Object(r.a)(Object(r.a)({},v),b),{},{ref:e,className:s()(g,y,d&&"active",u&&"".concat(y,"-").concat(u),p&&"".concat(y,"-").concat(p),v.href&&v.disabled&&"disabled")}))}));p.displayName="Button",p.defaultProps={variant:"primary",active:!1,disabled:!1},e.a=p},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(1),u=n(15),c=n(7),l=["bsPrefix","fluid","as","className"],h=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.fluid,s=t.as,h=void 0===s?"div":s,f=t.className,p=Object(i.a)(t,l),d=Object(u.a)(n,"container"),g="string"===typeof o?"-".concat(o):"-fluid";return Object(c.jsx)(h,Object(r.a)(Object(r.a)({ref:e},p),{},{className:a()(f,o?"".concat(d).concat(g):d)}))}));h.displayName="Container",h.defaultProps={fluid:!1},e.a=h},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(10),i=n(13),o=n(32),a=n(29),s=n(1),u=n.n(s),c=["children","className","id","placeholder","style","whenCreated"];function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function h(t){var e=t.children,n=t.className,h=t.id,f=t.placeholder,p=t.style,d=t.whenCreated,g=Object(r.a)(t,c),v=Object(s.useRef)(null),y=function(t,e){var n=Object(s.useState)(null),r=Object(i.a)(n,2),o=r[0],u=r[1];return Object(s.useEffect)((function(){if(null!==t.current&&null===o){var n=new a.Map(t.current,e);null!=e.center&&null!=e.zoom?n.setView(e.center,e.zoom):null!=e.bounds&&n.fitBounds(e.bounds,e.boundsOptions),null!=e.whenReady&&n.whenReady(e.whenReady),u(n)}}),[t,o,e]),o}(v,g),m=Object(s.useRef)(!1);Object(s.useEffect)((function(){null!=y&&!1===m.current&&null!=d&&(m.current=!0,d(y))}),[y,d]);var _=Object(s.useState)({className:n,id:h,style:p}),b=Object(i.a)(_,1)[0],w=Object(s.useMemo)((function(){return y?{__version:o.a,map:y}:null}),[y]),x=w?u.a.createElement(o.b,{value:w},e):null!==f&&void 0!==f?f:null;return u.a.createElement("div",l({},b,{ref:v}),x)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(6),i=n(10),o=n(63),a=n(29),s=["position"],u=Object(o.a)((function(t,e){var n=t.position,o=Object(i.a)(t,s),u=new a.Marker(n,o);return{instance:u,context:Object(r.a)(Object(r.a)({},e),{},{overlayContainer:u})}}),(function(t,e,n){e.position!==n.position&&t.setLatLng(e.position),null!=e.icon&&e.icon!==n.icon&&t.setIcon(e.icon),null!=e.zIndexOffset&&e.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(e.zIndexOffset),null!=e.opacity&&e.opacity!==n.opacity&&t.setOpacity(e.opacity),null!=t.dragging&&e.draggable!==n.draggable&&(!0===e.draggable?t.dragging.enable():t.dragging.disable())}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(63),i=n(29),o=n(1),a=Object(r.b)((function(t,e){return{instance:new i.Popup(t,e.overlayContainer),context:e}}),(function(t,e,n,r){var i=n.onClose,a=n.onOpen,s=n.position;Object(o.useEffect)((function(){var n=t.instance;function o(t){t.popup===n&&(n.update(),r(!0),null==a||a())}function u(t){t.popup===n&&(r(!1),null==i||i())}return e.map.on({popupopen:o,popupclose:u}),null==e.overlayContainer?(null!=s&&n.setLatLng(s),n.openOn(e.map)):e.overlayContainer.bindPopup(n),function(){var t;e.map.off({popupopen:o,popupclose:u}),null==(t=e.overlayContainer)||t.unbindPopup(),e.map.removeLayer(n)}}),[t,e,r,i,a,s])}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(6),i=n(10),o=n(63),a=n(29),s=["positions"],u=Object(o.c)((function(t,e){var n=t.positions,o=Object(i.a)(t,s),u=new a.Polygon(n,o);return{instance:u,context:Object(r.a)(Object(r.a)({},e),{},{overlayContainer:u})}}),(function(t,e,n){e.positions!==n.positions&&t.setLatLngs(e.positions)}))},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(1),u=n(15),c=n(7),l=["bsPrefix","className","as"],h=["xxl","xl","lg","md","sm","xs"],f=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.as,f=void 0===s?"div":s,p=Object(i.a)(t,l),d=Object(u.a)(n,"row"),g="".concat(d,"-cols"),v=[];return h.forEach((function(t){var e,n=p[t];delete p[t],e=null!=n&&"object"===typeof n?n.cols:n;var r="xs"!==t?"-".concat(t):"";null!=e&&v.push("".concat(g).concat(r,"-").concat(e))})),Object(c.jsx)(f,Object(r.a)(Object(r.a)({ref:e},p),{},{className:a.a.apply(void 0,[o,d].concat(v))}))}));f.displayName="Row",e.a=f},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(6),i=n(10),o=n(63),a=n(29),s=["positions"],u=Object(o.c)((function(t,e){var n=t.positions,o=Object(i.a)(t,s),u=new a.Polyline(n,o);return{instance:u,context:Object(r.a)(Object(r.a)({},e),{},{overlayContainer:u})}}),(function(t,e,n){e.positions!==n.positions&&t.setLatLngs(e.positions)}))},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(1),u=n(19),c=n.n(u),l=n(15),h=n(7),f=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],p=(c.a.string,c.a.bool,c.a.bool,c.a.bool,c.a.bool,s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.fluid,u=t.rounded,c=t.roundedCircle,p=t.thumbnail,d=Object(i.a)(t,f);return n=Object(l.a)(n,"img"),Object(h.jsx)("img",Object(r.a)(Object(r.a)({ref:e},d),{},{className:a()(o,s&&"".concat(n,"-fluid"),u&&"rounded",c&&"rounded-circle",p&&"".concat(n,"-thumbnail"))}))})));p.displayName="Image",p.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1},e.a=p},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(1),u=n.n(s),c=n(35),l=n(60),h=n(20),f=n(15),p=n(7),d=["bsPrefix","className","as"],g=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.as,u=Object(i.a)(t,d);n=Object(f.a)(n,"navbar-brand");var c=s||(u.href?"a":"span");return Object(p.jsx)(c,Object(r.a)(Object(r.a)({},u),{},{ref:e,className:a()(o,n)}))}));g.displayName="NavbarBrand";var v=g,y=n(5);function m(t){return t&&t.ownerDocument||document}function _(t,e){return function(t){var e=m(t);return e&&e.defaultView||window}(t).getComputedStyle(t,e)}var b=/([A-Z])/g;var w=/^ms-/;function x(t){return function(t){return t.replace(b,"-$1").toLowerCase()}(t).replace(w,"-ms-")}var E=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var O=function(t,e){var n="",r="";if("string"===typeof e)return t.style.getPropertyValue(x(e))||_(t).getPropertyValue(x(e));Object.keys(e).forEach((function(i){var o=e[i];o||0===o?!function(t){return!(!t||!E.test(t))}(i)?n+=x(i)+": "+o+";":r+=i+"("+o+") ":t.style.removeProperty(x(i))})),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n},k=n(45),I=n(62),S=n(19),C=n.n(S),T=n(30),N=n.n(T),P=!1,L=u.a.createContext(null),j="entering",M=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i,o=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i="exited",r.appearStatus=j):i="entered":i=e.unmountOnExit||e.mountOnEnter?"unmounted":"exited",r.state={status:i},r.nextCallback=null,r}Object(I.a)(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&"unmounted"===e.status?{status:"exited"}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==j&&"entered"!==n&&(e=j):n!==j&&"entered"!==n||(e="exiting")}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=void 0!==r.appear?r.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===j?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(t){var e=this,n=this.props.enter,r=this.context?this.context.isMounting:t,i=this.props.nodeRef?[r]:[N.a.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),u=r?s.appear:s.enter;!t&&!n||P?this.safeSetState({status:"entered"},(function(){e.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:j},(function(){e.props.onEntering(o,a),e.onTransitionEnd(u,(function(){e.safeSetState({status:"entered"},(function(){e.props.onEntered(o,a)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:N.a.findDOMNode(this);e&&!P?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(r),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:"exited"},(function(){t.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){t.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:N.a.findDOMNode(this),r=null==t&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if("unmounted"===t)return null;var e=this.props,n=e.children,r=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,Object(k.a)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return u.a.createElement(L.Provider,{value:null},"function"===typeof n?n(t,r):u.a.cloneElement(u.a.Children.only(n),r))},e}(u.a.Component);function R(){}M.contextType=L,M.propTypes={},M.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:R,onEntering:R,onEntered:R,onExit:R,onExiting:R,onExited:R},M.UNMOUNTED="unmounted",M.EXITED="exited",M.ENTERING=j,M.ENTERED="entered",M.EXITING="exiting";var A=M,D=n(58),F=!1,z=!1;try{var B={get passive(){return F=!0},get once(){return z=F=!0}};D.a&&(window.addEventListener("test",B,B),window.removeEventListener("test",B,!0))}catch(Te){}var U=function(t,e,n,r){if(r&&"boolean"!==typeof r&&!z){var i=r.once,o=r.capture,a=n;!z&&i&&(a=n.__once||function t(r){this.removeEventListener(e,t,o),n.call(this,r)},n.__once=a),t.addEventListener(e,a,F?r:o)}t.addEventListener(e,n,r)};var V=function(t,e,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)};var q=function(t,e,n,r){return U(t,e,n,r),function(){V(t,e,n,r)}};function G(t,e,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}(t,"transitionend",!0)}),e+n),o=q(t,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function H(t,e,n,r){null==n&&(n=function(t){var e=O(t,"transitionDuration")||"",n=-1===e.indexOf("ms")?1e3:1;return parseFloat(e)*n}(t)||0);var i=G(t,n,r),o=q(t,"transitionend",e);return function(){i(),o()}}function W(t,e){var n=O(t,e)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function X(t,e){var n=W(t,"transitionDuration"),r=W(t,"transitionDelay"),i=H(t,(function(n){n.target===t&&(i(),e(n))}),n+r)}var Y=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return null!=t})).reduce((function(t,e){if("function"!==typeof e)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e.apply(this,r)}}),null)};function Z(t){t.offsetHeight}var K=function(t){return t&&"function"!==typeof t?function(e){t.current=e}:t};var Q=function(t,e){return Object(s.useMemo)((function(){return function(t,e){var n=K(t),r=K(e);return function(t){n&&n(t),r&&r(t)}}(t,e)}),[t,e])};var J,$=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],tt=u.a.forwardRef((function(t,e){var n=t.onEnter,o=t.onEntering,a=t.onEntered,c=t.onExit,l=t.onExiting,h=t.onExited,f=t.addEndListener,d=t.children,g=t.childRef,v=Object(i.a)(t,$),y=Object(s.useRef)(null),m=Q(y,g),_=function(t){var e;m((e=t)&&"setState"in e?N.a.findDOMNode(e):null!=e?e:null)},b=function(t){return function(e){t&&y.current&&t(y.current,e)}},w=Object(s.useCallback)(b(n),[n]),x=Object(s.useCallback)(b(o),[o]),E=Object(s.useCallback)(b(a),[a]),O=Object(s.useCallback)(b(c),[c]),k=Object(s.useCallback)(b(l),[l]),I=Object(s.useCallback)(b(h),[h]),S=Object(s.useCallback)(b(f),[f]);return Object(p.jsx)(A,Object(r.a)(Object(r.a)({ref:e},v),{},{onEnter:w,onEntered:E,onEntering:x,onExit:O,onExited:I,onExiting:k,addEndListener:S,nodeRef:y,children:"function"===typeof d?function(t,e){return d(t,Object(r.a)(Object(r.a)({},e),{},{ref:_}))}:u.a.cloneElement(d,{ref:_})}))})),et=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],nt={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function rt(t,e){var n=e["offset".concat(t[0].toUpperCase()).concat(t.slice(1))],r=nt[t];return n+parseInt(O(e,r[0]),10)+parseInt(O(e,r[1]),10)}var it=(J={},Object(y.a)(J,"exited","collapse"),Object(y.a)(J,"exiting","collapsing"),Object(y.a)(J,j,"collapsing"),Object(y.a)(J,"entered","collapse show"),J),ot={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:rt},at=u.a.forwardRef((function(t,e){var n=t.onEnter,o=t.onEntering,c=t.onEntered,l=t.onExit,h=t.onExiting,f=t.className,d=t.children,g=t.dimension,v=void 0===g?"height":g,y=t.getDimensionValue,m=void 0===y?rt:y,_=Object(i.a)(t,et),b="function"===typeof v?v():v,w=Object(s.useMemo)((function(){return Y((function(t){t.style[b]="0"}),n)}),[b,n]),x=Object(s.useMemo)((function(){return Y((function(t){var e="scroll".concat(b[0].toUpperCase()).concat(b.slice(1));t.style[b]="".concat(t[e],"px")}),o)}),[b,o]),E=Object(s.useMemo)((function(){return Y((function(t){t.style[b]=null}),c)}),[b,c]),O=Object(s.useMemo)((function(){return Y((function(t){t.style[b]="".concat(m(b,t),"px"),Z(t)}),l)}),[l,m,b]),k=Object(s.useMemo)((function(){return Y((function(t){t.style[b]=null}),h)}),[b,h]);return Object(p.jsx)(tt,Object(r.a)(Object(r.a)({ref:e,addEndListener:X},_),{},{"aria-expanded":_.role?_.in:null,onEnter:w,onEntering:x,onEntered:E,onExit:O,onExiting:k,childRef:d.ref,children:function(t,e){return u.a.cloneElement(d,Object(r.a)(Object(r.a)({},e),{},{className:a()(f,d.props.className,it[t],"width"===b&&"collapse-horizontal")}))}}))}));at.defaultProps=ot;var st=at,ut=n(28),ct=["children","bsPrefix"],lt=s.forwardRef((function(t,e){var n=t.children,o=t.bsPrefix,a=Object(i.a)(t,ct);o=Object(f.a)(o,"navbar-collapse");var u=Object(s.useContext)(ut.a);return Object(p.jsx)(st,Object(r.a)(Object(r.a)({in:!(!u||!u.expanded)},a),{},{children:Object(p.jsx)("div",{ref:e,className:o,children:n})}))}));lt.displayName="NavbarCollapse";var ht=lt;var ft=function(t){var e=Object(s.useRef)(t);return Object(s.useEffect)((function(){e.current=t}),[t]),e};function pt(t){var e=ft(t);return Object(s.useCallback)((function(){return e.current&&e.current.apply(e,arguments)}),[e])}var dt=["bsPrefix","className","children","label","as","onClick"],gt=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,u=t.children,c=t.label,l=t.as,h=void 0===l?"button":l,d=t.onClick,g=Object(i.a)(t,dt);n=Object(f.a)(n,"navbar-toggler");var v=Object(s.useContext)(ut.a)||{},y=v.onToggle,m=v.expanded,_=pt((function(t){d&&d(t),y&&y()}));return"button"===h&&(g.type="button"),Object(p.jsx)(h,Object(r.a)(Object(r.a)({},g),{},{ref:e,onClick:_,"aria-label":c,className:a()(o,n,!m&&"collapsed"),children:u||Object(p.jsx)("span",{className:"".concat(n,"-icon")})}))}));gt.displayName="NavbarToggle",gt.defaultProps={label:"Toggle navigation"};var vt=gt,yt=n(13);function mt(t){void 0===t&&(t=m());try{var e=t.activeElement;return e&&e.nodeName?e:null}catch(Te){return t.body}}function _t(t,e){return t.contains?t.contains(e):t.compareDocumentPosition?t===e||!!(16&t.compareDocumentPosition(e)):void 0}var bt=n(52);function wt(t){var e=function(t){var e=Object(s.useRef)(t);return e.current=t,e}(t);Object(s.useEffect)((function(){return function(){return e.current()}}),[])}var xt=n(53),Et=n(31),Ot=n(21),kt=n(2),It=n(4),St=n(40);var Ct=Object(St.a)("modal-open"),Tt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.handleContainerOverflow,r=void 0===n||n,i=e.isRTL,o=void 0!==i&&i;Object(kt.a)(this,t),this.handleContainerOverflow=r,this.isRTL=o,this.modals=[]}return Object(It.a)(t,[{key:"getScrollbarWidth",value:function(){return Math.abs(window.innerWidth-document.documentElement.clientWidth)}},{key:"getElement",value:function(){return document.body}},{key:"setModalAttributes",value:function(t){}},{key:"removeModalAttributes",value:function(t){}},{key:"setContainerStyle",value:function(t){var e={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();t.style=Object(y.a)({overflow:r.style.overflow},n,r.style[n]),t.scrollBarWidth&&(e[n]="".concat(parseInt(O(r,n)||"0",10)+t.scrollBarWidth,"px")),r.setAttribute(Ct,""),O(r,e)}},{key:"reset",value:function(){var t=this;Object(Ot.a)(this.modals).forEach((function(e){return t.remove(e)}))}},{key:"removeContainerStyle",value:function(t){var e=this.getElement();e.removeAttribute(Ct),Object.assign(e.style,t.style)}},{key:"add",value:function(t){var e=this.modals.indexOf(t);return-1!==e?e:(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),0!==e||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e)}},{key:"remove",value:function(t){var e=this.modals.indexOf(t);-1!==e&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}},{key:"isTopModal",value:function(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}]),t}(),Nt=function(t){var e;return"undefined"===typeof document?null:null==t?m().body:("function"===typeof t&&(t=t()),t&&"current"in t&&(t=t.current),null!=(e=t)&&e.nodeType&&t||null)};var Pt,Lt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function jt(t){var e=t||(Pt||(Pt=new Tt),Pt),n=Object(s.useRef)({dialog:null,backdrop:null});return Object.assign(n.current,{add:function(){return e.add(n.current)},remove:function(){return e.remove(n.current)},isTopModal:function(){return e.isTopModal(n.current)},setDialogRef:Object(s.useCallback)((function(t){n.current.dialog=t}),[]),setBackdropRef:Object(s.useCallback)((function(t){n.current.backdrop=t}),[])})}var Mt=Object(s.forwardRef)((function(t,e){var n=t.show,r=void 0!==n&&n,i=t.role,o=void 0===i?"dialog":i,a=t.className,u=t.style,c=t.children,l=t.backdrop,h=void 0===l||l,f=t.keyboard,d=void 0===f||f,g=t.onBackdropClick,v=t.onEscapeKeyDown,y=t.transition,m=t.backdropTransition,_=t.autoFocus,b=void 0===_||_,w=t.enforceFocus,x=void 0===w||w,E=t.restoreFocus,O=void 0===E||E,k=t.restoreFocusOptions,I=t.renderDialog,S=t.renderBackdrop,C=void 0===S?function(t){return Object(p.jsx)("div",Object.assign({},t))}:S,T=t.manager,P=t.container,L=t.onShow,j=t.onHide,M=void 0===j?function(){}:j,R=t.onExit,A=t.onExited,F=t.onExiting,z=t.onEnter,B=t.onEntering,U=t.onEntered,V=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,Lt),G=function(t,e){var n=Object(s.useState)((function(){return Nt(t)})),r=Object(yt.a)(n,2),i=r[0],o=r[1];if(!i){var a=Nt(t);a&&o(a)}return Object(s.useEffect)((function(){e&&i&&e(i)}),[e,i]),Object(s.useEffect)((function(){var e=Nt(t);e!==i&&o(e)}),[t,i]),i}(P),H=jt(T),W=Object(bt.a)(),X=Object(xt.a)(r),Y=Object(s.useState)(!r),Z=Object(yt.a)(Y,2),K=Z[0],Q=Z[1],J=Object(s.useRef)(null);Object(s.useImperativeHandle)(e,(function(){return H}),[H]),D.a&&!X&&r&&(J.current=mt()),y||r||K?r&&K&&Q(!1):Q(!0);var $=Object(Et.a)((function(){if(H.add(),ot.current=q(document,"keydown",rt),it.current=q(document,"focus",(function(){return setTimeout(et)}),!0),L&&L(),b){var t=mt(document);H.dialog&&t&&!_t(H.dialog,t)&&(J.current=t,H.dialog.focus())}})),tt=Object(Et.a)((function(){var t;(H.remove(),null==ot.current||ot.current(),null==it.current||it.current(),O)&&(null==(t=J.current)||null==t.focus||t.focus(k),J.current=null)}));Object(s.useEffect)((function(){r&&G&&$()}),[r,G,$]),Object(s.useEffect)((function(){K&&tt()}),[K,tt]),wt((function(){tt()}));var et=Object(Et.a)((function(){if(x&&W()&&H.isTopModal()){var t=mt();H.dialog&&t&&!_t(H.dialog,t)&&H.dialog.focus()}})),nt=Object(Et.a)((function(t){t.target===t.currentTarget&&(null==g||g(t),!0===h&&M())})),rt=Object(Et.a)((function(t){d&&27===t.keyCode&&H.isTopModal()&&(null==v||v(t),t.defaultPrevented||M())})),it=Object(s.useRef)(),ot=Object(s.useRef)(),at=y;if(!G||!(r||at&&!K))return null;var st=Object.assign({role:o,ref:H.setDialogRef,"aria-modal":"dialog"===o||void 0},V,{style:u,className:a,tabIndex:-1}),ut=I?I(st):Object(p.jsx)("div",Object.assign({},st,{children:s.cloneElement(c,{role:"document"})}));at&&(ut=Object(p.jsx)(at,{appear:!0,unmountOnExit:!0,in:!!r,onExit:R,onExiting:F,onExited:function(){Q(!0),null==A||A.apply(void 0,arguments)},onEnter:z,onEntering:B,onEntered:U,children:ut}));var ct=null;if(h){var lt=m;ct=C({ref:H.setBackdropRef,onClick:nt}),lt&&(ct=Object(p.jsx)(lt,{appear:!0,in:!!r,children:ct}))}return Object(p.jsx)(p.Fragment,{children:N.a.createPortal(Object(p.jsxs)(p.Fragment,{children:[ct,ut]}),G)})}));Mt.displayName="Modal";var Rt,At=Object.assign(Mt,{Manager:Tt}),Dt=["className","children","transitionClasses"],Ft=(Rt={},Object(y.a)(Rt,j,"show"),Object(y.a)(Rt,"entered","show"),Rt),zt=s.forwardRef((function(t,e){var n=t.className,o=t.children,u=t.transitionClasses,c=void 0===u?{}:u,l=Object(i.a)(t,Dt),h=Object(s.useCallback)((function(t,e){Z(t),null==l.onEnter||l.onEnter(t,e)}),[l]);return Object(p.jsx)(tt,Object(r.a)(Object(r.a)({ref:e,addEndListener:X},l),{},{onEnter:h,childRef:o.ref,children:function(t,e){return s.cloneElement(o,Object(r.a)(Object(r.a)({},e),{},{className:a()("fade",n,o.props.className,Ft[t],c[t])}))}}))}));zt.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},zt.displayName="Fade";var Bt,Ut=zt,Vt=Object(h.a)("offcanvas-body"),qt=["bsPrefix","className","children"],Gt=(Bt={},Object(y.a)(Bt,j,"show"),Object(y.a)(Bt,"entered","show"),Bt),Ht=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,u=t.children,c=Object(i.a)(t,qt);return n=Object(f.a)(n,"offcanvas"),Object(p.jsx)(tt,Object(r.a)(Object(r.a)({ref:e,addEndListener:X},c),{},{childRef:u.ref,children:function(t,e){return s.cloneElement(u,Object(r.a)(Object(r.a)({},e),{},{className:a()(o,u.props.className,(t===j||"exiting"===t)&&"".concat(n,"-toggling"),Gt[t])}))}}))}));Ht.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Ht.displayName="OffcanvasToggling";var Wt=Ht,Xt=s.createContext({onHide:function(){}}),Yt=["className","variant"],Zt={"aria-label":C.a.string,onClick:C.a.func,variant:C.a.oneOf(["white"])},Kt=s.forwardRef((function(t,e){var n=t.className,o=t.variant,s=Object(i.a)(t,Yt);return Object(p.jsx)("button",Object(r.a)({ref:e,type:"button",className:a()("btn-close",o&&"btn-close-".concat(o),n)},s))}));Kt.displayName="CloseButton",Kt.propTypes=Zt,Kt.defaultProps={"aria-label":"Close"};var Qt=Kt,Jt=["closeLabel","closeVariant","closeButton","onHide","children"],$t=s.forwardRef((function(t,e){var n=t.closeLabel,o=t.closeVariant,a=t.closeButton,u=t.onHide,c=t.children,l=Object(i.a)(t,Jt),h=Object(s.useContext)(Xt),f=pt((function(){null==h||h.onHide(),null==u||u()}));return Object(p.jsxs)("div",Object(r.a)(Object(r.a)({ref:e},l),{},{children:[c,a&&Object(p.jsx)(Qt,{"aria-label":n,variant:o,onClick:f})]}))}));$t.defaultProps={closeLabel:"Close",closeButton:!1};var te=$t,ee=["bsPrefix","className"],ne=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=Object(i.a)(t,ee);return n=Object(f.a)(n,"offcanvas-header"),Object(p.jsx)(te,Object(r.a)(Object(r.a)({ref:e},s),{},{className:a()(o,n)}))}));ne.displayName="OffcanvasHeader",ne.defaultProps={closeLabel:"Close",closeButton:!1};var re=ne,ie=n(51),oe=Object(ie.a)("h5"),ae=Object(h.a)("offcanvas-title",{Component:oe}),se=n(22),ue=n(17),ce=n(11),le=n(12);var he=n(38);function fe(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var pe,de=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ge=".sticky-top",ve=".navbar-toggler",ye=function(t){Object(ce.a)(n,t);var e=Object(le.a)(n);function n(){return Object(kt.a)(this,n),e.apply(this,arguments)}return Object(It.a)(n,[{key:"adjustAndStore",value:function(t,e,n){var r=e.style[t];e.dataset[t]=r,O(e,Object(y.a)({},t,"".concat(parseFloat(O(e,t))+n,"px")))}},{key:"restore",value:function(t,e){var n=e.dataset[t];void 0!==n&&(delete e.dataset[t],O(e,Object(y.a)({},t,n)))}},{key:"setContainerStyle",value:function(t){var e=this;Object(se.a)(Object(ue.a)(n.prototype),"setContainerStyle",this).call(this,t);var r,i,o=this.getElement();if(i="modal-open",(r=o).classList?r.classList.add(i):function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),t.scrollBarWidth){var a=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Object(he.a)(o,de).forEach((function(n){return e.adjustAndStore(a,n,t.scrollBarWidth)})),Object(he.a)(o,ge).forEach((function(n){return e.adjustAndStore(s,n,-t.scrollBarWidth)})),Object(he.a)(o,ve).forEach((function(n){return e.adjustAndStore(s,n,t.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(t){var e=this;Object(se.a)(Object(ue.a)(n.prototype),"removeContainerStyle",this).call(this,t);var r,i,o=this.getElement();i="modal-open",(r=o).classList?r.classList.remove(i):"string"===typeof r.className?r.className=fe(r.className,i):r.setAttribute("class",fe(r.className&&r.className.baseVal||"",i));var a=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Object(he.a)(o,de).forEach((function(t){return e.restore(a,t)})),Object(he.a)(o,ge).forEach((function(t){return e.restore(s,t)})),Object(he.a)(o,ve).forEach((function(t){return e.restore(s,t)}))}}]),n}(Tt);var me=ye,_e=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function be(t){return Object(p.jsx)(Wt,Object(r.a)({},t))}function we(t){return Object(p.jsx)(Ut,Object(r.a)({},t))}var xe=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,u=t.children,c=t["aria-labelledby"],l=t.placement,h=t.show,d=t.backdrop,g=t.keyboard,v=t.scroll,y=t.onEscapeKeyDown,m=t.onShow,_=t.onHide,b=t.container,w=t.autoFocus,x=t.enforceFocus,E=t.restoreFocus,O=t.restoreFocusOptions,k=t.onEntered,I=t.onExit,S=t.onExiting,C=t.onEnter,T=t.onEntering,N=t.onExited,P=t.backdropClassName,L=t.manager,j=Object(i.a)(t,_e),M=Object(s.useRef)();n=Object(f.a)(n,"offcanvas");var R=(Object(s.useContext)(ut.a)||{}).onToggle,A=pt((function(){null==R||R(),null==_||_()})),D=Object(s.useMemo)((function(){return{onHide:A}}),[A]);var F=Object(s.useCallback)((function(t){return Object(p.jsx)("div",Object(r.a)(Object(r.a)({},t),{},{className:a()("".concat(n,"-backdrop"),P)}))}),[P,n]);return Object(p.jsx)(Xt.Provider,{value:D,children:Object(p.jsx)(At,{show:h,ref:e,backdrop:d,container:b,keyboard:g,autoFocus:w,enforceFocus:x&&!v,restoreFocus:E,restoreFocusOptions:O,onEscapeKeyDown:y,onShow:m,onHide:A,onEnter:function(t){t&&(t.style.visibility="visible");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];null==C||C.apply(void 0,[t].concat(n))},onEntering:T,onEntered:k,onExit:I,onExiting:S,onExited:function(t){t&&(t.style.visibility="");for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];null==N||N.apply(void 0,n)},manager:function(){return L||(v?(M.current||(M.current=new me({handleContainerOverflow:!1})),M.current):(pe||(pe=new ye(t)),pe));var t}(),transition:be,backdropTransition:we,renderBackdrop:F,renderDialog:function(t){return Object(p.jsx)("div",Object(r.a)(Object(r.a)(Object(r.a)({role:"dialog"},t),j),{},{className:a()(o,n,"".concat(n,"-").concat(l)),"aria-labelledby":c,children:u}))}})})}));xe.displayName="Offcanvas",xe.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var Ee=Object.assign(xe,{Body:Vt,Header:re,Title:ae}),Oe=s.forwardRef((function(t,e){var n=Object(s.useContext)(ut.a);return Object(p.jsx)(Ee,Object(r.a)({ref:e,show:!(null==n||!n.expanded)},t))}));Oe.displayName="NavbarOffcanvas";var ke=Oe,Ie=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],Se=Object(h.a)("navbar-text",{Component:"span"}),Ce=s.forwardRef((function(t,e){var n=Object(l.a)(t,{expanded:"onToggle"}),o=n.bsPrefix,u=n.expand,h=n.variant,d=n.bg,g=n.fixed,v=n.sticky,y=n.className,m=n.as,_=void 0===m?"nav":m,b=n.expanded,w=n.onToggle,x=n.onSelect,E=n.collapseOnSelect,O=Object(i.a)(n,Ie),k=Object(f.a)(o,"navbar"),I=Object(s.useCallback)((function(){null==x||x.apply(void 0,arguments),E&&b&&(null==w||w(!1))}),[x,E,b,w]);void 0===O.role&&"nav"!==_&&(O.role="navigation");var S="".concat(k,"-expand");"string"===typeof u&&(S="".concat(S,"-").concat(u));var C=Object(s.useMemo)((function(){return{onToggle:function(){return null==w?void 0:w(!b)},bsPrefix:k,expanded:!!b}}),[k,b,w]);return Object(p.jsx)(ut.a.Provider,{value:C,children:Object(p.jsx)(c.a.Provider,{value:I,children:Object(p.jsx)(_,Object(r.a)(Object(r.a)({ref:e},O),{},{className:a()(y,k,u&&S,h&&"".concat(k,"-").concat(h),d&&"bg-".concat(d),v&&"sticky-".concat(v),g&&"fixed-".concat(g))}))})})}));Ce.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},Ce.displayName="Navbar";e.a=Object.assign(Ce,{Brand:v,Collapse:ht,Offcanvas:ke,Text:Se,Toggle:vt})},function(t,e,n){"use strict";var r=n(5),i=n(6),o=n(10),a=n(14),s=n.n(a),u=(n(90),n(1)),c=n(60),l=n(38);var h=function(t){return t&&"function"!==typeof t?function(e){t.current=e}:t};var f=function(t,e){return Object(u.useMemo)((function(){return function(t,e){var n=h(t),r=h(e);return function(t){n&&n(t),r&&r(t)}}(t,e)}),[t,e])},p=u.createContext(null);p.displayName="NavContext";var d=p,g=n(35),v=u.createContext(null),y=n(40),m=n(13),_=n(31),b=n(44),w=n(7),x=["as","active","eventKey"];function E(t){var e=t.key,n=t.onClick,r=t.active,i=t.id,o=t.role,a=t.disabled,s=Object(u.useContext)(g.a),c=Object(u.useContext)(d),l=r,h={role:o};if(c){o||"tablist"!==c.role||(h.role="tab");var f=c.getControllerId(null!=e?e:null),p=c.getControlledId(null!=e?e:null);h[Object(y.a)("event-key")]=e,h.id=f||i,h["aria-controls"]=p,l=null==r&&null!=e?c.activeKey===e:r}return"tab"===h.role&&(a&&(h.tabIndex=-1,h["aria-disabled"]=!0),l?h["aria-selected"]=l:h.tabIndex=-1),h.onClick=Object(_.a)((function(t){a||(null==n||n(t),null!=e&&s&&!t.isPropagationStopped()&&s(e,t))})),[h,{isActive:l}]}var O=u.forwardRef((function(t,e){var n=t.as,r=void 0===n?b.a:n,i=t.active,o=t.eventKey,a=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,x),s=E(Object.assign({key:Object(g.b)(o,a.href),active:i},a)),u=Object(m.a)(s,2),c=u[0],l=u[1];return c[Object(y.a)("active")]=l.isActive,Object(w.jsx)(r,Object.assign({},a,c,{ref:e}))}));O.displayName="NavItem";var k=O,I=["as","onSelect","activeKey","role","onKeyDown"];var S=function(){},C=Object(y.a)("event-key"),T=u.forwardRef((function(t,e){var n,r,i=t.as,o=void 0===i?"div":i,a=t.onSelect,s=t.activeKey,c=t.role,h=t.onKeyDown,p=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,I),m=Object(u.useReducer)((function(t){return!t}),!1)[1],_=Object(u.useRef)(!1),b=Object(u.useContext)(g.a),x=Object(u.useContext)(v);x&&(c=c||"tablist",s=x.activeKey,n=x.getControlledId,r=x.getControllerId);var E=Object(u.useRef)(null),O=function(t){var e=E.current;if(!e)return null;var n=Object(l.a)(e,"[".concat(C,"]:not([aria-disabled=true])")),r=e.querySelector("[aria-selected=true]");if(!r)return null;var i=n.indexOf(r);if(-1===i)return null;var o=i+t;return o>=n.length&&(o=0),o<0&&(o=n.length-1),n[o]},k=function(t,e){null!=t&&(null==a||a(t,e),null==b||b(t,e))};Object(u.useEffect)((function(){if(E.current&&_.current){var t=E.current.querySelector("[".concat(C,"][aria-selected=true]"));null==t||t.focus()}_.current=!1}));var T=f(e,E);return Object(w.jsx)(g.a.Provider,{value:k,children:Object(w.jsx)(d.Provider,{value:{role:c,activeKey:Object(g.b)(s),getControlledId:n||S,getControllerId:r||S},children:Object(w.jsx)(o,Object.assign({},p,{onKeyDown:function(t){if(null==h||h(t),x){var e;switch(t.key){case"ArrowLeft":case"ArrowUp":e=O(-1);break;case"ArrowRight":case"ArrowDown":e=O(1);break;default:return}e&&(t.preventDefault(),k(e.dataset[Object(y.b)("EventKey")]||null,t),_.current=!0,m())}},ref:T,role:c}))})})}));T.displayName="Nav";var N=Object.assign(T,{Item:k}),P=n(15),L=n(28),j=n(57),M=n(20),R=Object(M.a)("nav-item");n(37);n(52),n(53);n(76),new WeakMap;var A=["onKeyDown"];var D=u.forwardRef((function(t,e){var n,r=t.onKeyDown,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,A),o=Object(b.b)(Object.assign({tagName:"a"},i)),a=Object(m.a)(o,1)[0],s=Object(_.a)((function(t){a.onKeyDown(t),null==r||r(t)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?Object(w.jsx)("a",Object.assign({ref:e},i,{onKeyDown:r})):Object(w.jsx)("a",Object.assign({ref:e},i,a,{onKeyDown:s}))}));D.displayName="Anchor";var F=D,z=["bsPrefix","className","as","active","eventKey"],B=u.forwardRef((function(t,e){var n=t.bsPrefix,r=t.className,a=t.as,u=void 0===a?F:a,c=t.active,l=t.eventKey,h=Object(o.a)(t,z);n=Object(P.a)(n,"nav-link");var f=E(Object(i.a)({key:Object(g.b)(l,h.href),active:c},h)),p=Object(m.a)(f,2),d=p[0],v=p[1];return Object(w.jsx)(u,Object(i.a)(Object(i.a)(Object(i.a)({},h),d),{},{ref:e,className:s()(r,n,h.disabled&&"disabled",v.isActive&&"active")}))}));B.displayName="NavLink",B.defaultProps={disabled:!1};var U=B,V=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],q=u.forwardRef((function(t,e){var n,a,l,h=Object(c.a)(t,{activeKey:"onSelect"}),f=h.as,p=void 0===f?"div":f,d=h.bsPrefix,g=h.variant,v=h.fill,y=h.justify,m=h.navbar,_=h.navbarScroll,b=h.className,x=h.activeKey,E=Object(o.a)(h,V),O=Object(P.a)(d,"nav"),k=!1,I=Object(u.useContext)(L.a),S=Object(u.useContext)(j.a);return I?(a=I.bsPrefix,k=null==m||m):S&&(l=S.cardHeaderBsPrefix),Object(w.jsx)(N,Object(i.a)({as:p,ref:e,activeKey:x,className:s()(b,(n={},Object(r.a)(n,O,!k),Object(r.a)(n,"".concat(a,"-nav"),k),Object(r.a)(n,"".concat(a,"-nav-scroll"),k&&_),Object(r.a)(n,"".concat(l,"-").concat(g),!!l),Object(r.a)(n,"".concat(O,"-").concat(g),!!g),Object(r.a)(n,"".concat(O,"-fill"),v),Object(r.a)(n,"".concat(O,"-justified"),y),n))},E))}));q.displayName="Nav",q.defaultProps={justify:!1,fill:!1};e.a=Object.assign(q,{Item:R,Link:U})},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(19),u=n.n(s),c=n(1),l=n(59),h=n(47),f=n(23),p=n(15),d=n(7),g=["bsPrefix","className","htmlFor"],v=c.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.htmlFor,u=Object(i.a)(t,g),l=Object(c.useContext)(f.a).controlId;return n=Object(p.a)(n,"form-check-label"),Object(d.jsx)("label",Object(r.a)(Object(r.a)({},u),{},{ref:e,htmlFor:s||l,className:a()(o,n)}))}));v.displayName="FormCheckLabel";var y=v;var m=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],_=c.forwardRef((function(t,e){var n=t.id,o=t.bsPrefix,s=t.bsSwitchPrefix,u=t.inline,g=void 0!==u&&u,v=t.disabled,_=void 0!==v&&v,b=t.isValid,w=void 0!==b&&b,x=t.isInvalid,E=void 0!==x&&x,O=t.feedbackTooltip,k=void 0!==O&&O,I=t.feedback,S=t.feedbackType,C=t.className,T=t.style,N=t.title,P=void 0===N?"":N,L=t.type,j=void 0===L?"checkbox":L,M=t.label,R=t.children,A=t.as,D=void 0===A?"input":A,F=Object(i.a)(t,m);o=Object(p.a)(o,"form-check"),s=Object(p.a)(s,"form-switch");var z=Object(c.useContext)(f.a).controlId,B=Object(c.useMemo)((function(){return{controlId:n||z}}),[z,n]),U=!R&&null!=M&&!1!==M||function(t,e){return c.Children.toArray(t).some((function(t){return c.isValidElement(t)&&t.type===e}))}(R,y),V=Object(d.jsx)(h.a,Object(r.a)(Object(r.a)({},F),{},{type:"switch"===j?"checkbox":j,ref:e,isValid:w,isInvalid:E,disabled:_,as:D}));return Object(d.jsx)(f.a.Provider,{value:B,children:Object(d.jsx)("div",{style:T,className:a()(C,U&&o,g&&"".concat(o,"-inline"),"switch"===j&&s),children:R||Object(d.jsxs)(d.Fragment,{children:[V,U&&Object(d.jsx)(y,{title:P,children:M}),I&&Object(d.jsx)(l.a,{type:S,tooltip:k,children:I})]})})})}));_.displayName="FormCheck";var b=Object.assign(_,{Input:h.a,Label:y}),w=n(74),x=n(20),E=Object(x.a)("form-floating"),O=["controlId","as"],k=c.forwardRef((function(t,e){var n=t.controlId,o=t.as,a=void 0===o?"div":o,s=Object(i.a)(t,O),u=Object(c.useMemo)((function(){return{controlId:n}}),[n]);return Object(d.jsx)(f.a.Provider,{value:u,children:Object(d.jsx)(a,Object(r.a)(Object(r.a)({},s),{},{ref:e}))})}));k.displayName="FormGroup";var I=k,S=(n(71),n(75)),C=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],T=c.forwardRef((function(t,e){var n=t.as,o=void 0===n?"label":n,s=t.bsPrefix,u=t.column,l=t.visuallyHidden,h=t.className,g=t.htmlFor,v=Object(i.a)(t,C),y=Object(c.useContext)(f.a).controlId;s=Object(p.a)(s,"form-label");var m="col-form-label";"string"===typeof u&&(m="".concat(m," ").concat(m,"-").concat(u));var _=a()(h,s,l&&"visually-hidden",u&&m);return g=g||y,u?Object(d.jsx)(S.a,Object(r.a)({ref:e,as:"label",className:_,htmlFor:g},v)):Object(d.jsx)(o,Object(r.a)({ref:e,className:_,htmlFor:g},v))}));T.displayName="FormLabel",T.defaultProps={column:!1,visuallyHidden:!1};var N=T,P=["bsPrefix","className","id"],L=c.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.id,u=Object(i.a)(t,P),l=Object(c.useContext)(f.a).controlId;return n=Object(p.a)(n,"form-range"),Object(d.jsx)("input",Object(r.a)(Object(r.a)({},u),{},{type:"range",ref:e,className:a()(o,n),id:s||l}))}));L.displayName="FormRange";var j=L,M=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],R=c.forwardRef((function(t,e){var n=t.bsPrefix,o=t.size,s=t.htmlSize,u=t.className,l=t.isValid,h=void 0!==l&&l,g=t.isInvalid,v=void 0!==g&&g,y=t.id,m=Object(i.a)(t,M),_=Object(c.useContext)(f.a).controlId;return n=Object(p.a)(n,"form-select"),Object(d.jsx)("select",Object(r.a)(Object(r.a)({},m),{},{size:s,ref:e,className:a()(u,n,o&&"".concat(n,"-").concat(o),h&&"is-valid",v&&"is-invalid"),id:y||_}))}));R.displayName="FormSelect";var A=R,D=["bsPrefix","className","as","muted"],F=c.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.as,u=void 0===s?"small":s,c=t.muted,l=Object(i.a)(t,D);return n=Object(p.a)(n,"form-text"),Object(d.jsx)(u,Object(r.a)(Object(r.a)({},l),{},{ref:e,className:a()(o,n,c&&"text-muted")}))}));F.displayName="FormText";var z=F,B=c.forwardRef((function(t,e){return Object(d.jsx)(b,Object(r.a)(Object(r.a)({},t),{},{ref:e,type:"switch"}))}));B.displayName="Switch";var U=Object.assign(B,{Input:b.Input,Label:b.Label}),V=["bsPrefix","className","children","controlId","label"],q=c.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.children,u=t.controlId,c=t.label,l=Object(i.a)(t,V);return n=Object(p.a)(n,"form-floating"),Object(d.jsxs)(I,Object(r.a)(Object(r.a)({ref:e,className:a()(o,n),controlId:u},l),{},{children:[s,Object(d.jsx)("label",{htmlFor:u,children:c})]}))}));q.displayName="FloatingLabel";var G=q,H=["className","validated","as"],W={_ref:u.a.any,validated:u.a.bool,as:u.a.elementType},X=c.forwardRef((function(t,e){var n=t.className,o=t.validated,s=t.as,u=void 0===s?"form":s,c=Object(i.a)(t,H);return Object(d.jsx)(u,Object(r.a)(Object(r.a)({},c),{},{ref:e,className:a()(n,o&&"was-validated")}))}));X.displayName="Form",X.propTypes=W;e.a=Object.assign(X,{Group:I,Control:w.a,Floating:E,Check:b,Switch:U,Label:N,Text:z,Range:j,Select:A,FloatingLabel:G})},function(t,e,n){"use strict";var r=n(6),i=n(10),o=n(14),a=n.n(o),s=n(1),u=n(15),c=n(20),l=n(51),h=n(7),f=["bsPrefix","className","variant","as"],p=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.variant,c=t.as,l=void 0===c?"img":c,p=Object(i.a)(t,f),d=Object(u.a)(n,"card-img");return Object(h.jsx)(l,Object(r.a)({ref:e,className:a()(s?"".concat(d,"-").concat(s):d,o)},p))}));p.displayName="CardImg";var d=p,g=n(57),v=["bsPrefix","className","as"],y=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,c=t.as,l=void 0===c?"div":c,f=Object(i.a)(t,v),p=Object(u.a)(n,"card-header"),d=Object(s.useMemo)((function(){return{cardHeaderBsPrefix:p}}),[p]);return Object(h.jsx)(g.a.Provider,{value:d,children:Object(h.jsx)(l,Object(r.a)(Object(r.a)({ref:e},f),{},{className:a()(o,p)}))})}));y.displayName="CardHeader";var m=y,_=["bsPrefix","className","bg","text","border","body","children","as"],b=Object(l.a)("h5"),w=Object(l.a)("h6"),x=Object(c.a)("card-body"),E=Object(c.a)("card-title",{Component:b}),O=Object(c.a)("card-subtitle",{Component:w}),k=Object(c.a)("card-link",{Component:"a"}),I=Object(c.a)("card-text",{Component:"p"}),S=Object(c.a)("card-footer"),C=Object(c.a)("card-img-overlay"),T=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.className,s=t.bg,c=t.text,l=t.border,f=t.body,p=t.children,d=t.as,g=void 0===d?"div":d,v=Object(i.a)(t,_),y=Object(u.a)(n,"card");return Object(h.jsx)(g,Object(r.a)(Object(r.a)({ref:e},v),{},{className:a()(o,y,s&&"bg-".concat(s),c&&"text-".concat(c),l&&"border-".concat(l)),children:f?Object(h.jsx)(x,{children:p}):p}))}));T.displayName="Card",T.defaultProps={body:!1};e.a=Object.assign(T,{Img:d,Title:E,Subtitle:O,Body:x,Link:k,Text:I,Header:m,Footer:S,ImgOverlay:C})},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(10),i=n(63),o=n(46);var a=n(29),s=["url"],u=Object(i.d)((function(t,e){var n=t.url,i=Object(r.a)(t,s);return{instance:new a.TileLayer(n,Object(o.a)(i,e)),context:e}}),(function(t,e,n){var r=e.opacity,i=e.zIndex;null!=r&&r!==n.opacity&&t.setOpacity(r),null!=i&&i!==n.zIndex&&t.setZIndex(i)}))},function(t,e,n){"use strict";var r=n(21),i=n(6),o=n(10),a=n(14),s=n.n(a),u=n(1),c=n(15),l=n(13);n(19);var h=["xxl","xl","lg","md","sm","xs"];function f(t){var e=[];return Object.entries(t).forEach((function(t){var n=Object(l.a)(t,2),r=n[0],i=n[1];null!=i&&("object"===typeof i?h.forEach((function(t){var n=i[t];if(null!=n){var o="xs"!==t?"-".concat(t):"";e.push("".concat(r).concat(o,"-").concat(n))}})):e.push("".concat(r,"-").concat(i)))})),e}var p=n(7),d=["as","bsPrefix","className","direction","gap"],g=u.forwardRef((function(t,e){var n=t.as,a=void 0===n?"div":n,u=t.bsPrefix,l=t.className,h=t.direction,g=t.gap,v=Object(o.a)(t,d);return u=Object(c.a)(u,"horizontal"===h?"hstack":"vstack"),Object(p.jsx)(a,Object(i.a)(Object(i.a)({},v),{},{ref:e,className:s.a.apply(void 0,[l,u].concat(Object(r.a)(f({gap:g}))))}))}));g.displayName="Stack";e.a=g},function(t,e,n){"use strict";var r=n(10),i=n(6),o=n(14),a=n.n(o),s=n(1),u=n(20),c=n(15),l=n(47),h=s.createContext(null);h.displayName="InputGroupContext";var f=h,p=n(7),d=["bsPrefix","size","hasValidation","className","as"],g=Object(u.a)("input-group-text",{Component:"span"}),v=s.forwardRef((function(t,e){var n=t.bsPrefix,o=t.size,u=t.hasValidation,l=t.className,h=t.as,g=void 0===h?"div":h,v=Object(r.a)(t,d);n=Object(c.a)(n,"input-group");var y=Object(s.useMemo)((function(){return{}}),[]);return Object(p.jsx)(f.Provider,{value:y,children:Object(p.jsx)(g,Object(i.a)(Object(i.a)({ref:e},v),{},{className:a()(l,n,o&&"".concat(n,"-").concat(o),u&&"has-validation")}))})}));v.displayName="InputGroup";e.a=Object.assign(v,{Text:g,Radio:function(t){return Object(p.jsx)(g,{children:Object(p.jsx)(l.a,Object(i.a)({type:"radio"},t))})},Checkbox:function(t){return Object(p.jsx)(g,{children:Object(p.jsx)(l.a,Object(i.a)({type:"checkbox"},t))})}})}]]);
//# sourceMappingURL=2.feaec089.chunk.js.map